(window.webpackJsonp=window.webpackJsonp||[]).push([[117],{812:function(t,e,a){"use strict";a.r(e);var s=a(2),n=Object(s.a)({},(function(){var t=this,e=t._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h2",{attrs:{id:"reflect"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#reflect"}},[t._v("🌙")]),t._v(" "),e("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Reflect",target:"_blank",rel:"noopener noreferrer"}},[t._v("Reflect"),e("OutboundLink")],1)]),t._v(" "),e("ul",[e("li",[t._v("ES6引入的内置对象、不是函数，无法"),e("code",[t._v("new")]),t._v("，提供反射方法（这些方法之前分散在Object或Function上）")]),t._v(" "),e("li",[t._v("和 "),e("code",[t._v("Proxy")]),t._v("一样，"),e("code",[t._v("Reflect")]),t._v("也可以拦截"),e("code",[t._v("Object")]),t._v("原生的操作，"),e("code",[t._v("Reflect")]),t._v("方法与"),e("code",[t._v("Proxy")]),t._v("方法一一对应")])]),t._v(" "),e("h3",{attrs:{id:"reflect-api"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#reflect-api"}},[t._v("🌙")]),t._v(" Reflect Api")]),t._v(" "),e("ul",[e("li",[e("code",[t._v("Reflect.get(target, propertyKey[, receiver])")]),t._v(" 获取属性,类似于 "),e("code",[t._v("target[name]")])]),t._v(" "),e("li",[e("code",[t._v("Reflect.set(target, propertyKey, value[, receiver])")]),t._v(" 设置属性, 类似于 "),e("code",[t._v("target[name] = value")]),t._v("。返回一个"),e("code",[t._v("Boolean")]),t._v("，如果设置成功，返回"),e("code",[t._v("true")])]),t._v(" "),e("li",[e("code",[t._v("Reflect.has(target, propertyKey)")]),t._v(" 判断属性是否存在， 类似于 "),e("code",[t._v("in")]),t._v("操作符。返回一个"),e("code",[t._v("Boolean")]),t._v("，如果存在返回"),e("code",[t._v("true")])]),t._v(" "),e("li",[e("code",[t._v("Reflect.deleteProperty(target, propertyKey)")]),t._v(" 删除属性，类似于 "),e("code",[t._v("delete target[name]")]),t._v("。 返回一个"),e("code",[t._v("Boolean")]),t._v("，如果删除成功，返回"),e("code",[t._v("true")])]),t._v(" "),e("li",[e("code",[t._v("Reflect.defineProperty(target, propertyKey, attributes)")]),t._v(" 定义属性，类似于 "),e("code",[t._v("Object.defineProperty")]),t._v("。 返回一个"),e("code",[t._v("Boolean")]),t._v("，如果定义成功，返回"),e("code",[t._v("true")])]),t._v(" "),e("li",[e("code",[t._v("Reflect.getOwnPropertyDescriptor(target, propertyKey)")]),t._v(" 获取属性描述符， 类似于 "),e("code",[t._v("Object.getOwnPropertyDescriptor")]),t._v("。返回一个属性描述符对象，如果属性不存在，返回"),e("code",[t._v("undefined")])]),t._v(" "),e("li",[e("code",[t._v("Reflect.getPrototypeOf(target)")]),t._v(" 获取原型， 类似于 "),e("code",[t._v("Object.getPrototypeOf")]),t._v("。返回一个对象，如果对象没有原型，返回"),e("code",[t._v("null")])]),t._v(" "),e("li",[e("code",[t._v("Reflect.setPrototypeOf(target, prototype)")]),t._v(" 设置原型， 类似于 "),e("code",[t._v("Object.setPrototypeOf")]),t._v("。返回一个"),e("code",[t._v("Boolean")]),t._v("，如果设置成功，返回"),e("code",[t._v("true")])]),t._v(" "),e("li",[e("code",[t._v("Reflect.apply(target, thisArgument, argumentsList)")]),t._v(" 调用函数，类似于 "),e("code",[t._v("Function.prototype.apply")]),t._v("。返回一个函数执行结果")]),t._v(" "),e("li",[e("code",[t._v("Reflect.construct(target, argumentsList[, newTarget])")]),t._v(" 构造函数，类似于 "),e("code",[t._v("new target(...argumentsList)")]),t._v("。返回一个对象")]),t._v(" "),e("li",[e("code",[t._v("Reflect.ownKeys(target)")]),t._v(" 获取对象所有键， 类似于 "),e("code",[t._v("Object.getOwnPropertyNames")]),t._v("。返回一个数组，包含对象所有键")]),t._v(" "),e("li",[e("code",[t._v("Reflect.isExtensible(target)")]),t._v(" 判断对象是否可扩展， 类似于 "),e("code",[t._v("Object.isExtensible")]),t._v("。返回一个"),e("code",[t._v("Boolean")]),t._v("，如果对象可扩展，返回"),e("code",[t._v("true")])]),t._v(" "),e("li",[e("code",[t._v("Reflect.preventExtensions(target)")]),t._v(" 阻止对象扩展， 类似于 "),e("code",[t._v("Object.preventExtensions")]),t._v("。返回一个"),e("code",[t._v("Boolean")]),t._v("，如果对象可扩展，返回"),e("code",[t._v("true")])])]),t._v(" "),e("h2",{attrs:{id:"reflect-metadata"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#reflect-metadata"}},[t._v("🌙")]),t._v(" "),e("a",{attrs:{href:"https://rbuckton.github.io/reflect-metadata/",target:"_blank",rel:"noopener noreferrer"}},[t._v("reflect-metadata"),e("OutboundLink")],1)]),t._v(" "),e("p",[e("code",[t._v("reflect-metadata")]),t._v("是用于TS和ECMA的元数据反射库，通过提供对元数据定义和检查的支持，简化了装饰器的使用，可以在类、属性、方法上进行元数据操作。")]),t._v(" "),e("p",[t._v("安装：")]),t._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("pnpm")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" reflect-metadata\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br")])]),e("p",[t._v("它提供了一些装饰器，用于在运行时对类、属性、方法进行元数据操作，如：")]),t._v(" "),e("ul",[e("li",[e("code",[t._v("Reflect.metadata(metadataKey: any, metadataValue: any): {(target: Function): void;(target: Object, propertyKey: string | symbol): void;}")]),t._v("：用于设置元数据信息，参数为键值对，键为元数据名称，值为元数据值")]),t._v(" "),e("li",[e("code",[t._v("Reflect.defineMetadata(metadataKey: any, metadataValue: any, target: Object, propertyKey?: string | symbol): void")]),t._v("：用于定义元数据信息，参数为键值对，键为元数据名称，值为元数据值")]),t._v(" "),e("li",[e("code",[t._v("Reflect.getMetadata(metadataKey: any, target: Object): any")]),t._v("：用于获取元数据信息，参数为元数据名称和目标对象（类、属性、方法等）")]),t._v(" "),e("li",[e("code",[t._v("Reflect.getOwnMetadata(metadataKey: any, target: Object): any")]),t._v("：用于获取目标对象的元数据信息，参数为元数据名称和目标对象（类、属性、方法等）")]),t._v(" "),e("li",[e("code",[t._v("Reflect.getMetadataKeys(target: Object, propertyKey?: string | symbol): any[]")]),t._v("：用于获取目标对象的元数据键，参数为目标对象（类、属性、方法等）")]),t._v(" "),e("li",[e("code",[t._v("Reflect.hasMetadata(metadataKey: any, target: Object, propertyKey?: string | symbol): boolean")]),t._v("：用于判断目标对象是否具有指定元数据键，参数为目标对象（类、属性、方法等）和元数据键")]),t._v(" "),e("li",[e("code",[t._v("Reflect.hasOwnMetadata(metadataKey: any, target: Object, propertyKey?: string | symbol): boolean")]),t._v("：用于判断目标对象是否具有指定元数据键，参数为目标对象（类、属性、方法等）和元数据键")]),t._v(" "),e("li",[e("code",[t._v("Reflect.deleteMetadata(metadataKey: any, target: Object, propertyKey?: string | symbol): boolean")]),t._v("：用于删除目标对象的元数据键，参数为目标对象（类、属性、方法等）和元数据键")])]),t._v(" "),e("div",{staticClass:"language-ts line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-ts"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"reflect-metadata"')]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MyClass")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token decorator"}},[e("span",{pre:!0,attrs:{class:"token at operator"}},[t._v("@")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("Reflect")])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("metadata")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"private"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("readonly")]),t._v(" myProperty"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("constructor")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("myProperty"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("myProperty "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" myProperty\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),e("span",{pre:!0,attrs:{class:"token decorator"}},[e("span",{pre:!0,attrs:{class:"token at operator"}},[t._v("@")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("Reflect")])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("metadata")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"customKey"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'customValue'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("myMethod")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("myProperty"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" myClass "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MyClass")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Hello World"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nmyClass"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("myMethod")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Reflect"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("getMetadata")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"customKey"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" myClass"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"myMethod"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 输出：customValue")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Reflect"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("getMetadata")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"private"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" myClass"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"myProperty"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 输出：true")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Reflect"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("ownKeys")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("myClass"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 输出：[ 'myProperty' ]")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Reflect"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("getMetadataKeys")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("myClass"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 输出：[]")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br"),e("span",{staticClass:"line-number"},[t._v("9")]),e("br"),e("span",{staticClass:"line-number"},[t._v("10")]),e("br"),e("span",{staticClass:"line-number"},[t._v("11")]),e("br"),e("span",{staticClass:"line-number"},[t._v("12")]),e("br"),e("span",{staticClass:"line-number"},[t._v("13")]),e("br"),e("span",{staticClass:"line-number"},[t._v("14")]),e("br"),e("span",{staticClass:"line-number"},[t._v("15")]),e("br"),e("span",{staticClass:"line-number"},[t._v("16")]),e("br"),e("span",{staticClass:"line-number"},[t._v("17")]),e("br"),e("span",{staticClass:"line-number"},[t._v("18")]),e("br"),e("span",{staticClass:"line-number"},[t._v("19")]),e("br"),e("span",{staticClass:"line-number"},[t._v("20")]),e("br"),e("span",{staticClass:"line-number"},[t._v("21")]),e("br"),e("span",{staticClass:"line-number"},[t._v("22")]),e("br")])])])}),[],!1,null,null,null);e.default=n.exports}}]);