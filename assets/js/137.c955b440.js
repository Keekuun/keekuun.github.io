(window.webpackJsonp=window.webpackJsonp||[]).push([[137],{837:function(t,n,e){"use strict";e.r(n);var s=e(2),r=Object(s.a)({},(function(){var t=this,n=t._self._c;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h1",{attrs:{id:"nodejsä¹‹netæ¨¡å—å­¦ä¹ ç¬”è®°"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#nodejsä¹‹netæ¨¡å—å­¦ä¹ ç¬”è®°"}},[t._v("ğŸŒ™")]),t._v(" NodeJSä¹‹netæ¨¡å—å­¦ä¹ ç¬”è®°")]),t._v(" "),n("h2",{attrs:{id:"_1-net-ç½‘ç»œ-æ¨¡å—ç®€ä»‹"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-net-ç½‘ç»œ-æ¨¡å—ç®€ä»‹"}},[t._v("ğŸŒ™")]),t._v(" 1.netï¼ˆç½‘ç»œï¼‰æ¨¡å—ç®€ä»‹")]),t._v(" "),n("p",[n("code",[t._v("net")]),t._v(" æ¨¡å—ç”¨äºåˆ›å»ºåŸºäºæµï¼ˆstream-basedï¼‰çš„ TCP æˆ– "),n("a",{attrs:{href:"http://nodejs.cn/s/rAdYjf",target:"_blank",rel:"noopener noreferrer"}},[t._v("IPC"),n("OutboundLink")],1),t._v(" çš„æœåŠ¡å™¨ï¼ˆ"),n("a",{attrs:{href:"http://nodejs.cn/s/e8cikS",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("net.createServer()")]),n("OutboundLink")],1),t._v("ï¼‰ä¸å®¢æˆ·ç«¯ï¼ˆ"),n("a",{attrs:{href:"http://nodejs.cn/s/RTNxdX",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("net.createConnection()")]),n("OutboundLink")],1),t._v("ï¼‰ã€‚")]),t._v(" "),n("p",[t._v("ä½¿ç”¨æ–¹æ³•å¦‚ä¸‹:")]),t._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" net "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'net'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br")])]),n("h2",{attrs:{id:"_2-net-server-ç±»"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-net-server-ç±»"}},[t._v("ğŸŒ™")]),t._v(" 2.net.Server ç±»")]),t._v(" "),n("ul",[n("li",[t._v("ç»§æ‰¿è‡ª: "),n("a",{attrs:{href:"http://nodejs.cn/s/pGAddE",target:"_blank",rel:"noopener noreferrer"}},[t._v("EventEmitter"),n("OutboundLink")],1)])]),t._v(" "),n("p",[t._v("æ­¤ç±»ç”¨äºåˆ›å»º TCP æˆ– "),n("a",{attrs:{href:"http://nodejs.cn/s/rAdYjf",target:"_blank",rel:"noopener noreferrer"}},[t._v("IPC"),n("OutboundLink")],1),t._v(" æœåŠ¡å™¨ã€‚")]),t._v(" "),n("h3",{attrs:{id:"_2-1-new-net-server-options-connectionlistener-æ„é€ å‡½æ•°"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-new-net-server-options-connectionlistener-æ„é€ å‡½æ•°"}},[t._v("ğŸŒ™")]),t._v(" 2.1 "),n("code",[t._v("new net.Server([options][, connectionListener])")]),t._v("æ„é€ å‡½æ•°")]),t._v(" "),n("ul",[n("li",[n("code",[t._v("options")]),t._v(" "),n("a",{attrs:{href:"http://nodejs.cn/s/jzn6Ao",target:"_blank",rel:"noopener noreferrer"}},[t._v("Object"),n("OutboundLink")],1),t._v(" å‚è§ "),n("a",{attrs:{href:"http://nodejs.cn/s/e8cikS",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("net.createServer([options\\][, connectionListener])")]),n("OutboundLink")],1),t._v("ã€‚")]),t._v(" "),n("li",[n("code",[t._v("connectionListener")]),t._v(" "),n("a",{attrs:{href:"http://nodejs.cn/s/ceTQa6",target:"_blank",rel:"noopener noreferrer"}},[t._v("function"),n("OutboundLink")],1),t._v(" è‡ªåŠ¨è®¾ç½®ä¸º "),n("a",{attrs:{href:"http://nodejs.cn/s/4qU2j9",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("'connection'")]),n("OutboundLink")],1),t._v(" äº‹ä»¶çš„ç›‘å¬å™¨ã€‚")]),t._v(" "),n("li",[t._v("è¿”å›: "),n("a",{attrs:{href:"http://nodejs.cn/s/gBYjux",target:"_blank",rel:"noopener noreferrer"}},[t._v("net.Server"),n("OutboundLink")],1)])]),t._v(" "),n("p",[n("code",[t._v("net.Server")]),t._v(" æ˜¯ä¸€ä¸ª "),n("a",{attrs:{href:"http://nodejs.cn/s/pGAddE",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("EventEmitter")]),n("OutboundLink")],1),t._v("ï¼Œå®ç°äº†ä»¥ä¸‹äº‹ä»¶:")]),t._v(" "),n("table",[n("thead",[n("tr",[n("th",[t._v("äº‹ä»¶åç§°")]),t._v(" "),n("th",[t._v("è¯´æ˜")])])]),t._v(" "),n("tbody",[n("tr",[n("td",[n("code",[t._v("close")])]),t._v(" "),n("td",[t._v("å½“ server å…³é—­çš„æ—¶å€™è§¦å‘ã€‚ å¦‚æœæœ‰è¿æ¥å­˜åœ¨ï¼Œç›´åˆ°æ‰€æœ‰çš„è¿æ¥ç»“æŸæ‰ä¼šè§¦å‘è¿™ä¸ªäº‹ä»¶ã€‚")])]),t._v(" "),n("tr",[n("td",[n("code",[t._v("connection")])]),t._v(" "),n("td",[t._v("å½“ä¸€ä¸ªæ–°çš„è¿æ¥å»ºç«‹çš„æ—¶å€™è§¦å‘ã€‚ "),n("code",[t._v("socket")]),t._v(" æ˜¯ä¸€ä¸ª "),n("code",[t._v("net.Socket")]),t._v(" å®ä¾‹ã€‚")])]),t._v(" "),n("tr",[n("td",[n("code",[t._v("error")])]),t._v(" "),n("td",[t._v("å½“é”™è¯¯å‡ºç°çš„æ—¶å€™è§¦å‘ã€‚ ä¸åŒäº "),n("a",{attrs:{href:"http://nodejs.cn/s/wsJ1o1",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("net.Socket")]),n("OutboundLink")],1),t._v("ï¼Œ"),n("a",{attrs:{href:"http://nodejs.cn/s/3c6jjk",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("'close'")]),n("OutboundLink")],1),t._v(" äº‹ä»¶ä¸ä¼šåœ¨è¿™ä¸ªäº‹ä»¶è§¦å‘åç»§ç»­è§¦å‘ï¼Œé™¤é "),n("a",{attrs:{href:"http://nodejs.cn/s/zZ874N",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("server.close()")]),n("OutboundLink")],1),t._v(" æ˜¯æ‰‹åŠ¨è°ƒç”¨ã€‚ å‚è§ "),n("a",{attrs:{href:"http://nodejs.cn/s/xGksiu",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("server.listen()")]),n("OutboundLink")],1),t._v(" ä¸­çš„ä¾‹å­ã€‚")])]),t._v(" "),n("tr",[n("td",[n("code",[t._v("listening")])]),t._v(" "),n("td",[t._v("å½“è°ƒç”¨ "),n("a",{attrs:{href:"http://nodejs.cn/s/xGksiu",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("server.listen()")]),n("OutboundLink")],1),t._v(" ç»‘å®šæœåŠ¡å™¨ä¹‹åè§¦å‘ã€‚")])])])]),t._v(" "),n("h3",{attrs:{id:"_2-2-server-listen"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-server-listen"}},[t._v("ğŸŒ™")]),t._v(" 2.2 "),n("code",[t._v("server.listen()")])]),t._v(" "),n("p",[t._v("å¯åŠ¨ä¸€ä¸ªæœåŠ¡å™¨æ¥ç›‘å¬è¿æ¥ã€‚ "),n("code",[t._v("net.Server")]),t._v(" å¯ä»¥æ˜¯ TCP æˆ– "),n("a",{attrs:{href:"http://nodejs.cn/s/rAdYjf",target:"_blank",rel:"noopener noreferrer"}},[t._v("IPC"),n("OutboundLink")],1),t._v(" æœåŠ¡å™¨ï¼Œå…·ä½“å–å†³äºå®ƒç›‘å¬çš„å†…å®¹ã€‚")]),t._v(" "),n("p",[t._v("å¯èƒ½çš„å‚æ•°ï¼š")]),t._v(" "),n("ul",[n("li",[n("code",[t._v("server.listen(handle[, backlog][, callback])")]),t._v(" "),n("ul",[n("li",[n("code",[t._v("handle")]),t._v(" "),n("a",{attrs:{href:"http://nodejs.cn/s/jzn6Ao",target:"_blank",rel:"noopener noreferrer"}},[t._v("object"),n("OutboundLink")],1)]),t._v(" "),n("li",[n("code",[t._v("backlog")]),t._v(" "),n("a",{attrs:{href:"http://nodejs.cn/s/SXbo1v",target:"_blank",rel:"noopener noreferrer"}},[t._v("number"),n("OutboundLink")],1),t._v(" "),n("a",{attrs:{href:"http://nodejs.cn/s/xGksiu",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("server.listen()")]),n("OutboundLink")],1),t._v(" å‡½æ•°çš„é€šç”¨å‚æ•°ã€‚")]),t._v(" "),n("li",[n("code",[t._v("callback")]),t._v(" "),n("a",{attrs:{href:"http://nodejs.cn/s/ceTQa6",target:"_blank",rel:"noopener noreferrer"}},[t._v("funtion"),n("OutboundLink")],1)]),t._v(" "),n("li",[t._v("è¿”å›: "),n("a",{attrs:{href:"http://nodejs.cn/s/gBYjux",target:"_blank",rel:"noopener noreferrer"}},[t._v("net.server"),n("OutboundLink")],1)])])]),t._v(" "),n("li",[n("code",[t._v("server.listen(options[, callback])")]),t._v("optionå‚æ•°ï¼š\n"),n("ul",[n("li",[n("code",[t._v("port")]),t._v(" "),n("a",{attrs:{href:"http://nodejs.cn/s/SXbo1v",target:"_blank",rel:"noopener noreferrer"}},[t._v("number"),n("OutboundLink")],1)]),t._v(" "),n("li",[n("code",[t._v("host")]),t._v(" "),n("a",{attrs:{href:"http://nodejs.cn/s/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[t._v("host"),n("OutboundLink")],1)]),t._v(" "),n("li",[n("code",[t._v("path")]),t._v(" "),n("a",{attrs:{href:"http://nodejs.cn/s/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[t._v("string"),n("OutboundLink")],1),t._v(" å¦‚æœæŒ‡å®šäº† "),n("code",[t._v("port")]),t._v(" å‚æ•°åˆ™ä¼šè¢«å¿½ç•¥ã€‚æŸ¥çœ‹"),n("a",{attrs:{href:"http://nodejs.cn/s/tNVQV4",target:"_blank",rel:"noopener noreferrer"}},[t._v("è¯†åˆ« IPC è¿æ¥çš„è·¯å¾„ã€‚"),n("OutboundLink")],1),t._v("ã€‚")]),t._v(" "),n("li",[n("code",[t._v("backlog")]),t._v(" "),n("a",{attrs:{href:"http://nodejs.cn/s/SXbo1v",target:"_blank",rel:"noopener noreferrer"}},[t._v("number"),n("OutboundLink")],1),t._v(" "),n("a",{attrs:{href:"http://nodejs.cn/s/xGksiu",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("server.listen()")]),n("OutboundLink")],1),t._v(" å‡½æ•°çš„é€šç”¨å‚æ•°ã€‚")]),t._v(" "),n("li",[n("code",[t._v("exclusive")]),t._v(" "),n("a",{attrs:{href:"http://nodejs.cn/s/jFbvuT",target:"_blank",rel:"noopener noreferrer"}},[t._v("boolean"),n("OutboundLink")],1),t._v(" "),n("strong",[t._v("é»˜è®¤å€¼:")]),t._v(" "),n("code",[t._v("false")]),t._v("ã€‚")]),t._v(" "),n("li",[n("code",[t._v("readableAll")]),t._v(" "),n("a",{attrs:{href:"http://nodejs.cn/s/jFbvuT",target:"_blank",rel:"noopener noreferrer"}},[t._v("boolean"),n("OutboundLink")],1),t._v(" å¯¹äº IPC æœåŠ¡å™¨ï¼Œä½¿ç®¡é“å¯¹æ‰€æœ‰ç”¨æˆ·éƒ½å¯è¯»ã€‚"),n("strong",[t._v("é»˜è®¤å€¼:")]),t._v(" "),n("code",[t._v("false")]),t._v("ã€‚")]),t._v(" "),n("li",[n("code",[t._v("writableAll")]),t._v(" "),n("a",{attrs:{href:"http://nodejs.cn/s/jFbvuT",target:"_blank",rel:"noopener noreferrer"}},[t._v("boolean"),n("OutboundLink")],1),t._v(" å¯¹äº IPC æœåŠ¡å™¨ï¼Œä½¿ç®¡é“å¯¹æ‰€æœ‰ç”¨æˆ·éƒ½å¯å†™ã€‚"),n("strong",[t._v("é»˜è®¤å€¼:")]),t._v(" "),n("code",[t._v("false")]),t._v("ã€‚")]),t._v(" "),n("li",[n("code",[t._v("ipv6Only")]),t._v(" "),n("a",{attrs:{href:"http://nodejs.cn/s/jFbvuT",target:"_blank",rel:"noopener noreferrer"}},[t._v("boolean"),n("OutboundLink")],1),t._v(" å¯¹äº TCP æœåŠ¡å™¨ï¼Œå°† "),n("code",[t._v("ipv6Only")]),t._v(" è®¾ç½®ä¸º "),n("code",[t._v("true")]),t._v(" å°†ä¼šç¦ç”¨åŒæ ˆæ”¯æŒï¼Œå³ç»‘å®šåˆ°ä¸»æœº "),n("code",[t._v("::")]),t._v(" ä¸ä¼šä½¿ "),n("code",[t._v("0.0.0.0")]),t._v(" ç»‘å®šã€‚"),n("strong",[t._v("é»˜è®¤å€¼:")]),t._v(" "),n("code",[t._v("false")]),t._v("ã€‚")])])]),t._v(" "),n("li",[n("code",[t._v("server.listen(path[, backlog][, callback])")]),t._v("ç”¨äº "),n("a",{attrs:{href:"http://nodejs.cn/s/rAdYjf",target:"_blank",rel:"noopener noreferrer"}},[t._v("IPC"),n("OutboundLink")],1),t._v(" æœåŠ¡å™¨ã€‚\n"),n("ul",[n("li",[n("code",[t._v("path")]),t._v(" "),n("a",{attrs:{href:"http://nodejs.cn/s/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[t._v("string"),n("OutboundLink")],1),t._v(" å¦‚æœæŒ‡å®šäº† "),n("code",[t._v("port")]),t._v(" å‚æ•°åˆ™ä¼šè¢«å¿½ç•¥ã€‚æŸ¥çœ‹"),n("a",{attrs:{href:"http://nodejs.cn/s/tNVQV4",target:"_blank",rel:"noopener noreferrer"}},[t._v("è¯†åˆ« IPC è¿æ¥çš„è·¯å¾„ã€‚"),n("OutboundLink")],1),t._v("ã€‚")]),t._v(" "),n("li",[n("code",[t._v("backlog")]),t._v(" "),n("a",{attrs:{href:"http://nodejs.cn/s/SXbo1v",target:"_blank",rel:"noopener noreferrer"}},[t._v("number"),n("OutboundLink")],1),t._v(" "),n("a",{attrs:{href:"http://nodejs.cn/s/xGksiu",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("server.listen()")]),n("OutboundLink")],1),t._v(" å‡½æ•°çš„é€šç”¨å‚æ•°ã€‚")])])]),t._v(" "),n("li",[n("code",[t._v("server.listen([port[,host[,backlog]]][,callback])")]),t._v(" ç”¨äº TCP æœåŠ¡å™¨ã€‚æœ€å¸¸ç”¨\n"),n("ul",[n("li",[n("code",[t._v("port")]),t._v(" "),n("a",{attrs:{href:"http://nodejs.cn/s/SXbo1v",target:"_blank",rel:"noopener noreferrer"}},[t._v("number"),n("OutboundLink")],1)]),t._v(" "),n("li",[n("code",[t._v("host")]),t._v(" "),n("a",{attrs:{href:"http://nodejs.cn/s/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[t._v("host"),n("OutboundLink")],1)]),t._v(" "),n("li",[n("code",[t._v("backlog")]),t._v(" "),n("a",{attrs:{href:"http://nodejs.cn/s/SXbo1v",target:"_blank",rel:"noopener noreferrer"}},[t._v("number"),n("OutboundLink")],1),t._v(" "),n("a",{attrs:{href:"http://nodejs.cn/s/xGksiu",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("server.listen()")]),n("OutboundLink")],1),t._v(" å‡½æ•°çš„é€šç”¨å‚æ•°ã€‚")])])])]),t._v(" "),n("p",[t._v("è¿™ä¸ªå‡½æ•°æ˜¯å¼‚æ­¥çš„ã€‚å½“æœåŠ¡å™¨å¼€å§‹ç›‘å¬æ—¶ï¼Œä¼šè§¦å‘ "),n("a",{attrs:{href:"http://nodejs.cn/s/gimdsR",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("'listening'")]),n("OutboundLink")],1),t._v(" äº‹ä»¶ã€‚ æœ€åä¸€ä¸ªå‚æ•° "),n("code",[t._v("callback")]),t._v(" å°†è¢«æ·»åŠ ä¸º "),n("a",{attrs:{href:"http://nodejs.cn/s/gimdsR",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("'listening'")]),n("OutboundLink")],1),t._v(" äº‹ä»¶çš„ç›‘å¬å™¨ã€‚")]),t._v(" "),n("p",[t._v("æ‰€æœ‰çš„ "),n("code",[t._v("listen()")]),t._v(" æ–¹æ³•éƒ½å¯ä»¥ä½¿ç”¨ä¸€ä¸ª "),n("code",[t._v("backlog")]),t._v(" å‚æ•°æ¥æŒ‡å®šå¾…è¿æ¥é˜Ÿåˆ—çš„æœ€å¤§é•¿åº¦ã€‚ æ­¤å‚æ•°çš„é»˜è®¤å€¼æ˜¯ 511 (ä¸æ˜¯512ï¼‰ã€‚")]),t._v(" "),n("p",[t._v("æ‰€æœ‰çš„ "),n("a",{attrs:{href:"http://nodejs.cn/s/wsJ1o1",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("net.Socket")]),n("OutboundLink")],1),t._v(" éƒ½è¢«è®¾ç½®ä¸º "),n("code",[t._v("SO_REUSEADDR")]),t._v(" (è¯¦è§ "),n("a",{attrs:{href:"http://nodejs.cn/s/6qFPUH",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("socket(7)")]),n("OutboundLink")],1),t._v(")ã€‚")]),t._v(" "),n("p",[t._v("å½“ä¸”ä»…å½“ä¸Šæ¬¡è°ƒç”¨ "),n("code",[t._v("server.listen()")]),t._v(" å‘ç”Ÿé”™è¯¯æˆ–å·²ç»è°ƒç”¨ "),n("code",[t._v("server.close()")]),t._v(" æ—¶ï¼Œæ‰èƒ½å†æ¬¡è°ƒç”¨ "),n("code",[t._v("server.listen()")]),t._v(" æ–¹æ³•ã€‚å¦åˆ™å°†æŠ›å‡º "),n("code",[t._v("ERR_SERVER_ALREADY_LISTEN")]),t._v(" é”™è¯¯ã€‚")]),t._v(" "),n("p",[t._v("ç›‘å¬æ—¶æœ€å¸¸è§çš„é”™è¯¯ä¹‹ä¸€æ˜¯ "),n("code",[t._v("EADDRINUSE")]),t._v("ã€‚ è¿™æ˜¯å› ä¸ºå¦ä¸€ä¸ªæœåŠ¡å™¨å·²æ­£åœ¨ç›‘å¬è¯·æ±‚çš„ "),n("code",[t._v("port")]),t._v("/"),n("code",[t._v("path")]),t._v("/"),n("code",[t._v("handle")]),t._v("ã€‚ å¤„ç†æ­¤é—®é¢˜çš„ä¸€ç§æ–¹æ³•æ˜¯åœ¨ä¸€æ®µæ—¶é—´åé‡è¯•ï¼š")]),t._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v("server"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'error'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("e")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("e"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("code "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'EADDRINUSE'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'åœ°å€æ­£è¢«ä½¿ç”¨ï¼Œé‡è¯•ä¸­...'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      server"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("close")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      server"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("listen")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("PORT")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("HOST")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br")])]),n("h3",{attrs:{id:"_2-3-server-address"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-server-address"}},[t._v("ğŸŒ™")]),t._v(" 2.3 "),n("code",[t._v("server.address()")])]),t._v(" "),n("ul",[n("li",[t._v("è¿”å›: "),n("a",{attrs:{href:"http://nodejs.cn/s/jzn6Ao",target:"_blank",rel:"noopener noreferrer"}},[t._v("object"),n("OutboundLink")],1),t._v(" | "),n("a",{attrs:{href:"http://nodejs.cn/s/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[t._v("string"),n("OutboundLink")],1),t._v(" | "),n("a",{attrs:{href:"http://nodejs.cn/s/334hvC",target:"_blank",rel:"noopener noreferrer"}},[t._v("null"),n("OutboundLink")],1)])]),t._v(" "),n("p",[t._v("å¦‚æœåœ¨ IP socket ä¸Šç›‘å¬ï¼Œåˆ™è¿”å›æ“ä½œç³»ç»ŸæŠ¥å‘Šçš„ç»‘å®šçš„ "),n("code",[t._v("address")]),t._v("ã€åœ°å€ "),n("code",[t._v("family")]),t._v(" åç§°ã€ä»¥åŠæœåŠ¡å™¨ "),n("code",[t._v("port")]),t._v("ï¼ˆç”¨äºæŸ¥æ‰¾åœ¨è·å–æ“ä½œç³»ç»Ÿåˆ†é…çš„åœ°å€æ—¶åˆ†é…çš„ç«¯å£ï¼‰ï¼š"),n("code",[t._v("{ port: 12346, family: 'IPv4', address: '127.0.0.1' }")]),t._v("ã€‚")]),t._v(" "),n("p",[t._v("å¯¹äºåœ¨ç®¡é“æˆ– Unix åŸŸå¥—æ¥å­—ä¸Šç›‘å¬çš„ serverï¼Œè¯¥åç§°å°†è¿”å›ä¸ºå­—ç¬¦ä¸²ã€‚")]),t._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" server "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" net"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("createServer")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("socket")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  socket"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("end")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'å†è§\\n'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'error'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("err")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å¤„ç†é”™è¯¯")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throw")]),t._v(" err"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è·å–ä»»æ„æœªä½¿ç”¨çš„ç«¯å£ã€‚")]),t._v("\nserver"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("listen")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'æ‰“å¼€æœåŠ¡å™¨'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" server"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("address")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br")])]),n("p",[t._v("åœ¨ "),n("code",[t._v("'listening'")]),t._v(" äº‹ä»¶è¢«è§¦å‘ä¹‹å‰ã€æˆ–åœ¨è°ƒç”¨ "),n("code",[t._v("server.close()")]),t._v(" ä¹‹åï¼Œ "),n("code",[t._v("server.address()")]),t._v(" è¿”å› "),n("code",[t._v("null")]),t._v("ã€‚")]),t._v(" "),n("h3",{attrs:{id:"_2-4-server-close-callback"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-4-server-close-callback"}},[t._v("ğŸŒ™")]),t._v(" 2.4 "),n("code",[t._v("server.close([callback])")])]),t._v(" "),n("ul",[n("li",[n("code",[t._v("callback")]),t._v(" "),n("a",{attrs:{href:"http://nodejs.cn/s/ceTQa6",target:"_blank",rel:"noopener noreferrer"}},[t._v("function"),n("OutboundLink")],1),t._v(" å½“ server è¢«å…³é—­æ—¶è°ƒç”¨ã€‚")]),t._v(" "),n("li",[t._v("è¿”å›: "),n("a",{attrs:{href:"http://nodejs.cn/s/gBYjux",target:"_blank",rel:"noopener noreferrer"}},[t._v("net.Server"),n("OutboundLink")],1)])]),t._v(" "),n("p",[t._v("é˜»æ­¢ server æ¥å—æ–°çš„è¿æ¥å¹¶ä¿æŒç°æœ‰çš„è¿æ¥ã€‚ è¯¥å‡½æ•°æ˜¯å¼‚æ­¥çš„ï¼Œserver å°†åœ¨æ‰€æœ‰è¿æ¥ç»“æŸåå…³é—­å¹¶è§¦å‘ "),n("a",{attrs:{href:"http://nodejs.cn/s/3c6jjk",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("'close'")]),n("OutboundLink")],1),t._v(" äº‹ä»¶ã€‚ å¯é€‰çš„ "),n("code",[t._v("callback")]),t._v(" å°†åœ¨ "),n("code",[t._v("'close'")]),t._v(" äº‹ä»¶å‘ç”Ÿæ—¶è¢«è°ƒç”¨ã€‚ ä¸ "),n("code",[t._v("'close'")]),t._v(" äº‹ä»¶ä¸åŒçš„æ˜¯ï¼Œå¦‚æœ server åœ¨å…³é—­æ—¶æœªæ‰“å¼€ï¼Œå›è°ƒå‡½æ•°è¢«è°ƒç”¨æ—¶ä¼šä¼ å…¥ä¸€ä¸ª "),n("code",[t._v("Error")]),t._v(" å¯¹è±¡ä½œä¸ºå”¯ä¸€å‚æ•°ã€‚")]),t._v(" "),n("h2",{attrs:{id:"_3-net-socket-ç±»"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-net-socket-ç±»"}},[t._v("ğŸŒ™")]),t._v(" 3.net.Socket ç±»")]),t._v(" "),n("ul",[n("li",[t._v("ç»§æ‰¿è‡ª: "),n("a",{attrs:{href:"http://nodejs.cn/s/2iRabr",target:"_blank",rel:"noopener noreferrer"}},[t._v("stream.Duplex"),n("OutboundLink")],1)])]),t._v(" "),n("p",[t._v("æ­¤ç±»æ˜¯ TCP å¥—æ¥å­—æˆ–æµå¼ "),n("a",{attrs:{href:"http://nodejs.cn/s/rAdYjf",target:"_blank",rel:"noopener noreferrer"}},[t._v("IPC"),n("OutboundLink")],1),t._v(" ç«¯ç‚¹çš„æŠ½è±¡ï¼ˆåœ¨ Windows ä¸Šä½¿ç”¨å‘½åç®¡é“ï¼Œå¦åˆ™ä½¿ç”¨ Unix åŸŸå¥—æ¥å­—ï¼‰ã€‚ å®ƒä¹Ÿæ˜¯ä¸€ä¸ª "),n("a",{attrs:{href:"http://nodejs.cn/s/pGAddE",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("EventEmitter")]),n("OutboundLink")],1),t._v("ã€‚")]),t._v(" "),n("p",[n("code",[t._v("net.Socket")]),t._v(" å¯ä»¥ç”±ç”¨æˆ·åˆ›å»ºå¹¶ä¸”ç›´æ¥åœ°ä¸æœåŠ¡å™¨è¿›è¡Œäº¤äº’ã€‚ ä¾‹å¦‚ï¼Œå®ƒç”± "),n("a",{attrs:{href:"http://nodejs.cn/s/RTNxdX",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("net.createConnection()")]),n("OutboundLink")],1),t._v(" è¿”å›ï¼Œå› æ­¤ç”¨æˆ·å¯ä»¥ä½¿ç”¨å®ƒä¸æœåŠ¡å™¨è¿›è¡Œé€šä¿¡ã€‚")]),t._v(" "),n("p",[t._v("å®ƒä¹Ÿå¯ä»¥ç”± Node.js åˆ›å»ºï¼Œå¹¶åœ¨æ”¶åˆ°è¿æ¥æ—¶ä¼ ç»™ç”¨æˆ·ã€‚ ä¾‹å¦‚ï¼Œå°†å®ƒä¼ ç»™ "),n("a",{attrs:{href:"http://nodejs.cn/s/gBYjux",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("net.Server")]),n("OutboundLink")],1),t._v(" ä¸Šè§¦å‘çš„ "),n("a",{attrs:{href:"http://nodejs.cn/s/4qU2j9",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("'connection'")]),n("OutboundLink")],1),t._v(" äº‹ä»¶çš„ç›‘å¬å™¨ï¼Œå› æ­¤ç”¨æˆ·å¯ä»¥ä½¿ç”¨å®ƒä¸å®¢æˆ·ç«¯è¿›è¡Œäº¤äº’ã€‚")]),t._v(" "),n("h3",{attrs:{id:"_3-1-new-net-socket-options-æ„é€ å‡½æ•°"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-new-net-socket-options-æ„é€ å‡½æ•°"}},[t._v("ğŸŒ™")]),t._v(" 3.1 "),n("code",[t._v("new net.Socket([options])")]),t._v("æ„é€ å‡½æ•°")]),t._v(" "),n("ul",[n("li",[n("code",[t._v("options")]),t._v(" "),n("a",{attrs:{href:"http://nodejs.cn/s/jzn6Ao",target:"_blank",rel:"noopener noreferrer"}},[t._v("object"),n("OutboundLink")],1),t._v(" å¯ç”¨é€‰é¡¹æœ‰\n"),n("ul",[n("li",[n("code",[t._v("fd")]),t._v(" "),n("a",{attrs:{href:"http://nodejs.cn/s/SXbo1v",target:"_blank",rel:"noopener noreferrer"}},[t._v("number"),n("OutboundLink")],1),t._v(" å¦‚æœæŒ‡å®šäº†è¯¥å‚æ•°ï¼Œåˆ™ä½¿ç”¨ä¸€ä¸ªç»™å®šçš„æ–‡ä»¶æè¿°ç¬¦åŒ…è£…ä¸€ä¸ªå·²å­˜åœ¨çš„ socketï¼Œå¦åˆ™å°†åˆ›å»ºä¸€ä¸ªæ–°çš„ socketã€‚")]),t._v(" "),n("li",[n("code",[t._v("allowHalfOpen")]),t._v(" "),n("a",{attrs:{href:"http://nodejs.cn/s/jFbvuT",target:"_blank",rel:"noopener noreferrer"}},[t._v("boolean"),n("OutboundLink")],1),t._v(" æŒ‡ç¤ºæ˜¯å¦å…è®¸åŠæ‰“å¼€çš„ TCP è¿æ¥ã€‚è¯¦æƒ…æŸ¥çœ‹ "),n("a",{attrs:{href:"http://nodejs.cn/s/e8cikS",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("net.createServer()")]),n("OutboundLink")],1),t._v(" å’Œ "),n("a",{attrs:{href:"http://nodejs.cn/s/Hxzmh3",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("'end'")]),n("OutboundLink")],1),t._v(" äº‹ä»¶ã€‚"),n("strong",[t._v("é»˜è®¤å€¼:")]),t._v(" "),n("code",[t._v("false")]),t._v("ã€‚")]),t._v(" "),n("li",[n("code",[t._v("readable")]),t._v(" "),n("a",{attrs:{href:"http://nodejs.cn/s/jFbvuT",target:"_blank",rel:"noopener noreferrer"}},[t._v("boolean"),n("OutboundLink")],1),t._v(" å½“ä¼ é€’äº† "),n("code",[t._v("fd")]),t._v(" æ—¶å…è®¸è¯»å– socketï¼Œå¦åˆ™å¿½ç•¥ã€‚"),n("strong",[t._v("é»˜è®¤å€¼:")]),t._v(" "),n("code",[t._v("false")]),t._v("ã€‚")]),t._v(" "),n("li",[n("code",[t._v("writable")]),t._v(" "),n("a",{attrs:{href:"http://nodejs.cn/s/jFbvuT",target:"_blank",rel:"noopener noreferrer"}},[t._v("boolean"),n("OutboundLink")],1),t._v(" å½“ä¼ é€’äº† "),n("code",[t._v("fd")]),t._v(" æ—¶å…è®¸å†™å…¥ socketï¼Œå¦åˆ™å¿½ç•¥ã€‚"),n("strong",[t._v("é»˜è®¤å€¼:")]),t._v(" "),n("code",[t._v("false")]),t._v("ã€‚")])])]),t._v(" "),n("li",[t._v("è¿”å›: "),n("a",{attrs:{href:"http://nodejs.cn/s/wsJ1o1",target:"_blank",rel:"noopener noreferrer"}},[t._v("net.Socket"),n("OutboundLink")],1)])]),t._v(" "),n("p",[t._v("åˆ›å»ºä¸€ä¸ª socket å¯¹è±¡ã€‚ æ–°åˆ›å»ºçš„ socket å¯ä»¥æ˜¯ TCP socket ä¹Ÿå¯ä»¥æ˜¯ "),n("a",{attrs:{href:"http://nodejs.cn/s/rAdYjf",target:"_blank",rel:"noopener noreferrer"}},[t._v("IPC"),n("OutboundLink")],1),t._v(" ç«¯ç‚¹æµï¼Œå–å†³äºå®ƒè¿æ¥ "),n("a",{attrs:{href:"http://nodejs.cn/s/fGCDDg",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("connect()")]),n("OutboundLink")],1),t._v(" åˆ°ä»€ä¹ˆã€‚")]),t._v(" "),n("h3",{attrs:{id:"_3-2-socketäº‹ä»¶"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-socketäº‹ä»¶"}},[t._v("ğŸŒ™")]),t._v(" 3.2 socketäº‹ä»¶")]),t._v(" "),n("table",[n("thead",[n("tr",[n("th",[t._v("äº‹ä»¶åç§°")]),t._v(" "),n("th",[t._v("æè¿°")])])]),t._v(" "),n("tbody",[n("tr",[n("td",[n("code",[t._v("close")])]),t._v(" "),n("td",[t._v("ä¸€æ—¦ socket å®Œå…¨å…³é—­å°±å‘å‡ºè¯¥äº‹ä»¶ã€‚å‚æ•° "),n("code",[t._v("had_error")]),t._v(" æ˜¯ boolean ç±»å‹ï¼Œè¡¨æ˜ socket è¢«å…³é—­æ˜¯å¦å–å†³äºä¼ è¾“é”™è¯¯ã€‚")])]),t._v(" "),n("tr",[n("td",[n("code",[t._v("connect")])]),t._v(" "),n("td",[t._v("å½“ä¸€ä¸ª socket è¿æ¥æˆåŠŸå»ºç«‹çš„æ—¶å€™è§¦å‘è¯¥äº‹ä»¶ã€‚ æŸ¥çœ‹ "),n("a",{attrs:{href:"http://nodejs.cn/s/RTNxdX",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("net.createConnection()")]),n("OutboundLink")],1),t._v("ã€‚")])]),t._v(" "),n("tr",[n("td",[n("code",[t._v("data")])]),t._v(" "),n("td",[t._v("å½“æ¥æ”¶åˆ°æ•°æ®çš„æ—¶è§¦å‘è¯¥äº‹ä»¶ã€‚"),n("code",[t._v("data")]),t._v(" å‚æ•°æ˜¯ä¸€ä¸ª "),n("code",[t._v("Buffer")]),t._v(" æˆ– "),n("code",[t._v("String")]),t._v("ã€‚æ•°æ®ç¼–ç ç”± "),n("a",{attrs:{href:"http://nodejs.cn/s/2Vxp3Q",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("socket.setEncoding()")]),n("OutboundLink")],1),t._v(" è®¾ç½®ã€‚")])]),t._v(" "),n("tr",[n("td",[n("code",[t._v("drain")])]),t._v(" "),n("td",[t._v("å½“å†™å…¥ç¼“å†²åŒºå˜ä¸ºç©ºæ—¶è§¦å‘ã€‚å¯ä»¥ç”¨æ¥åšä¸Šä¼ èŠ‚æµã€‚ä¹Ÿå¯ä»¥æŸ¥çœ‹ï¼š"),n("code",[t._v("socket.write()")]),t._v(" çš„è¿”å›å€¼ã€‚")])]),t._v(" "),n("tr",[n("td",[n("code",[t._v("end")])]),t._v(" "),n("td",[t._v("å½“ socket çš„å¦ä¸€ç«¯å‘é€ä¸€ä¸ª FIN åŒ…çš„æ—¶å€™è§¦å‘ï¼Œä»è€Œç»“æŸ socket çš„å¯è¯»ç«¯ã€‚")])]),t._v(" "),n("tr",[n("td",[n("code",[t._v("error")])]),t._v(" "),n("td",[t._v("å½“é”™è¯¯å‘ç”Ÿæ—¶è§¦å‘ã€‚"),n("code",[t._v("'close'")]),t._v(" äº‹ä»¶ä¹Ÿä¼šç´§æ¥ç€è¯¥äº‹ä»¶è¢«è§¦å‘ã€‚")])]),t._v(" "),n("tr",[n("td",[n("code",[t._v("lookup")])]),t._v(" "),n("td",[t._v("åœ¨æ‰¾åˆ°ä¸»æœºä¹‹ååˆ›å»ºè¿æ¥ä¹‹å‰è§¦å‘ã€‚")])]),t._v(" "),n("tr",[n("td",[n("code",[t._v("timeout")])]),t._v(" "),n("td",[t._v("å½“ socket è¶…æ—¶çš„æ—¶å€™è§¦å‘ã€‚è¯¥äº‹ä»¶åªæ˜¯ç”¨æ¥é€šçŸ¥ socket å·²ç»é—²ç½®ã€‚ç”¨æˆ·å¿…é¡»æ‰‹åŠ¨å…³é—­ã€‚ä¹Ÿå¯ä»¥æŸ¥çœ‹ï¼š"),n("a",{attrs:{href:"http://nodejs.cn/s/XC4Yyj",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("socket.setTimeout()")]),n("OutboundLink")],1),t._v("ã€‚")])]),t._v(" "),n("tr",[n("td",[n("code",[t._v("ready")])]),t._v(" "),n("td",[n("code",[t._v("socket")]),t._v("å‡†å¤‡å¥½ä½¿ç”¨æ—¶è§¦å‘ï¼Œ"),n("code",[t._v("'connect'")]),t._v(" åç«‹å³è§¦å‘ã€‚")])])])]),t._v(" "),n("h3",{attrs:{id:"_3-3-socket-address"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-socket-address"}},[t._v("ğŸŒ™")]),t._v(" 3.3 "),n("code",[t._v("socket.address()")])]),t._v(" "),n("ul",[n("li",[t._v("è¿”å›: "),n("a",{attrs:{href:"http://nodejs.cn/s/jzn6Ao",target:"_blank",rel:"noopener noreferrer"}},[t._v("object"),n("OutboundLink")],1)])]),t._v(" "),n("p",[t._v("è¿”å›æ“ä½œç³»ç»ŸæŠ¥å‘Šçš„ socket çš„ "),n("code",[t._v("address")]),t._v("ã€åœ°å€çš„ "),n("code",[t._v("family")]),t._v(" åç§°ã€ä»¥åŠ "),n("code",[t._v("port")]),t._v("ï¼š "),n("code",[t._v("{ port: 12346, family: 'IPv4', address: '127.0.0.1' }")]),t._v("ã€‚")]),t._v(" "),n("h3",{attrs:{id:"_3-4-socket-connect"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-4-socket-connect"}},[t._v("ğŸŒ™")]),t._v(" 3.4 "),n("code",[t._v("socket.connect()")])]),t._v(" "),n("p",[t._v("åœ¨ç»™å®šçš„"),n("code",[t._v("socket")]),t._v("ä¸Šå¯åŠ¨ä¸€ä¸ªè¿æ¥ã€‚")]),t._v(" "),n("ul",[n("li",[n("p",[n("code",[t._v("socket.connect(options[, connectListener])")])]),t._v(" "),n("p",[t._v("â€‹\tå¯¹äº TCP è¿æ¥ï¼Œå¯ç”¨çš„ "),n("code",[t._v("options")]),t._v(" æœ‰ï¼š")]),t._v(" "),n("ul",[n("li",[n("code",[t._v("port")]),t._v(" "),n("a",{attrs:{href:"http://nodejs.cn/s/SXbo1v",target:"_blank",rel:"noopener noreferrer"}},[t._v("number"),n("OutboundLink")],1),t._v(" å¿…é¡»ã€‚"),n("code",[t._v("socket")]),t._v("è¦è¿æ¥çš„ç«¯å£ã€‚")]),t._v(" "),n("li",[n("code",[t._v("host")]),t._v(" "),n("a",{attrs:{href:"http://nodejs.cn/s/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[t._v("string"),n("OutboundLink")],1),t._v(" "),n("code",[t._v("socket")]),t._v("è¦è¿æ¥çš„ä¸»æœºã€‚"),n("strong",[t._v("é»˜è®¤å€¼:")]),t._v(" "),n("code",[t._v("'localhost'")]),t._v("ã€‚")]),t._v(" "),n("li",[n("code",[t._v("localAddress")]),t._v(" "),n("a",{attrs:{href:"http://nodejs.cn/s/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[t._v("string"),n("OutboundLink")],1),t._v(" "),n("code",[t._v("socket")]),t._v("è¦è¿æ¥çš„æœ¬åœ°åœ°å€ã€‚")]),t._v(" "),n("li",[n("code",[t._v("localPort")]),t._v(" "),n("a",{attrs:{href:"http://nodejs.cn/s/SXbo1v",target:"_blank",rel:"noopener noreferrer"}},[t._v("number"),n("OutboundLink")],1),t._v(" "),n("code",[t._v("socket")]),t._v("è¦è¿æ¥çš„æœ¬åœ°ç«¯å£ã€‚")]),t._v(" "),n("li",[n("code",[t._v("family")]),t._v(" "),n("a",{attrs:{href:"http://nodejs.cn/s/SXbo1v",target:"_blank",rel:"noopener noreferrer"}},[t._v("number"),n("OutboundLink")],1),t._v(" IP æ ˆçš„ç‰ˆæœ¬ã€‚å¿…é¡»ä¸º "),n("code",[t._v("4")]),t._v("ã€ "),n("code",[t._v("6")]),t._v(" æˆ– "),n("code",[t._v("0")]),t._v("ã€‚"),n("code",[t._v("0")]),t._v(" å€¼è¡¨ç¤ºå…è®¸ IPv4 å’Œ IPv6 åœ°å€ã€‚"),n("strong",[t._v("é»˜è®¤å€¼:")]),t._v(" "),n("code",[t._v("0")]),t._v("ã€‚")]),t._v(" "),n("li",[n("code",[t._v("hints")]),t._v(" "),n("a",{attrs:{href:"http://nodejs.cn/s/SXbo1v",target:"_blank",rel:"noopener noreferrer"}},[t._v("number"),n("OutboundLink")],1),t._v(" å¯é€‰çš„ "),n("a",{attrs:{href:"http://nodejs.cn/s/WpjMXq",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("dns.lookup()")]),t._v(" æç¤º"),n("OutboundLink")],1),t._v("ã€‚")]),t._v(" "),n("li",[n("code",[t._v("lookup")]),t._v(" "),n("a",{attrs:{href:"http://nodejs.cn/s/ceTQa6",target:"_blank",rel:"noopener noreferrer"}},[t._v("function"),n("OutboundLink")],1),t._v(" è‡ªå®šä¹‰çš„æŸ¥æ‰¾å‡½æ•°ã€‚"),n("strong",[t._v("é»˜è®¤å€¼:")]),t._v(" "),n("a",{attrs:{href:"http://nodejs.cn/s/LJLsTL",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("dns.lookup()")]),n("OutboundLink")],1),t._v("ã€‚")])])]),t._v(" "),n("li",[n("p",[n("code",[t._v("socket.connect(path[, connectListener])")]),t._v(" ç”¨äº "),n("a",{attrs:{href:"http://nodejs.cn/s/rAdYjf",target:"_blank",rel:"noopener noreferrer"}},[t._v("IPC"),n("OutboundLink")],1),t._v(" è¿æ¥ã€‚")])]),t._v(" "),n("li",[n("p",[n("code",[t._v("socket.connect(port[, host\\][, connectListener])")]),t._v(" ç”¨äº TCP è¿æ¥ã€‚")])]),t._v(" "),n("li",[n("p",[t._v("è¿”å›: "),n("a",{attrs:{href:"http://nodejs.cn/s/wsJ1o1",target:"_blank",rel:"noopener noreferrer"}},[t._v("net.Socket"),n("OutboundLink")],1),t._v(" socket è‡ªèº«ã€‚")])])]),t._v(" "),n("p",[t._v("è¯¥æ–¹æ³•æ˜¯å¼‚æ­¥çš„ã€‚å½“è¿æ¥å»ºç«‹äº†çš„æ—¶å€™ï¼Œ"),n("a",{attrs:{href:"http://nodejs.cn/s/BwGGNR",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("'connect'")]),n("OutboundLink")],1),t._v(" äº‹ä»¶å°†ä¼šè¢«è§¦å‘ã€‚å¦‚æœè¿æ¥è¿‡ç¨‹ä¸­æœ‰é—®é¢˜ï¼Œ"),n("a",{attrs:{href:"http://nodejs.cn/s/v5sbt8",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("'error'")]),n("OutboundLink")],1),t._v(" äº‹ä»¶å°†ä¼šä»£æ›¿ "),n("a",{attrs:{href:"http://nodejs.cn/s/BwGGNR",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("'connect'")]),n("OutboundLink")],1),t._v(" äº‹ä»¶è¢«è§¦å‘ï¼Œå¹¶å°†é”™è¯¯ä¿¡æ¯ä¼ é€’ç»™ "),n("a",{attrs:{href:"http://nodejs.cn/s/v5sbt8",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("'error'")]),n("OutboundLink")],1),t._v(" ç›‘å¬å™¨ã€‚ æœ€åä¸€ä¸ªå‚æ•° "),n("code",[t._v("connectListener")]),t._v("ï¼Œå¦‚æœæŒ‡å®šäº†ï¼Œå°†ä¼šè¢«æ·»åŠ ä¸º "),n("a",{attrs:{href:"http://nodejs.cn/s/BwGGNR",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("'connect'")]),n("OutboundLink")],1),t._v(" äº‹ä»¶çš„ç›‘å¬å™¨ã€‚")]),t._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" net "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'net'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nnet"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("connect")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("port")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("80")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("onread")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä¸ºå¥—æ¥å­—çš„æ¯æ¬¡è¯»å–å¤ç”¨ 4KiB çš„ Bufferã€‚")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("buffer")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Buffer"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("alloc")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1024")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("callback")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("nread"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" buf")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ”¶åˆ°çš„æ•°æ®åœ¨ `buf` ä¸­å¯ç”¨ï¼Œä» 0 åˆ° 'nread`ã€‚")]),t._v("\n      console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("buf"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'utf8'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" nread"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br")])]),n("h3",{attrs:{id:"_3-5socket-destroy-error"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-5socket-destroy-error"}},[t._v("ğŸŒ™")]),t._v(" 3.5"),n("code",[t._v("socket.destroy([error])")])]),t._v(" "),n("ul",[n("li",[n("code",[t._v("error")]),t._v(" "),n("a",{attrs:{href:"http://nodejs.cn/s/jzn6Ao",target:"_blank",rel:"noopener noreferrer"}},[t._v("Object"),n("OutboundLink")],1)]),t._v(" "),n("li",[t._v("è¿”å›: "),n("a",{attrs:{href:"http://nodejs.cn/s/wsJ1o1",target:"_blank",rel:"noopener noreferrer"}},[t._v("net.Socket"),n("OutboundLink")],1)])]),t._v(" "),n("p",[t._v("ç¡®ä¿åœ¨æ­¤ socket ä¸Šä¸å†æœ‰ I/O æ´»åŠ¨ã€‚ é”€æ¯æµå¹¶å…³é—­è¿æ¥ã€‚æœ‰å…³æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œå‚è§ "),n("a",{attrs:{href:"http://nodejs.cn/s/tLkQ7J",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("writable.destroy()")]),n("OutboundLink")],1),t._v("ã€‚")]),t._v(" "),n("h3",{attrs:{id:"_3-6-socket-end-data-encoding-callback"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-6-socket-end-data-encoding-callback"}},[t._v("ğŸŒ™")]),t._v(" 3.6  "),n("code",[t._v("socket.end([data[, encoding]][, callback])")])]),t._v(" "),n("ul",[n("li",[n("code",[t._v("data")]),t._v(" "),n("a",{attrs:{href:"http://nodejs.cn/s/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[t._v("string"),n("OutboundLink")],1),t._v(" | "),n("a",{attrs:{href:"http://nodejs.cn/s/6x1hD3",target:"_blank",rel:"noopener noreferrer"}},[t._v("Buffer"),n("OutboundLink")],1),t._v(" | "),n("a",{attrs:{href:"http://nodejs.cn/s/ZbDkpm",target:"_blank",rel:"noopener noreferrer"}},[t._v("Unit8Array"),n("OutboundLink")],1)]),t._v(" "),n("li",[n("code",[t._v("encoding")]),t._v(" "),n("a",{attrs:{href:"http://nodejs.cn/s/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[t._v("string"),n("OutboundLink")],1),t._v(" ä»…å½“ "),n("code",[t._v("data")]),t._v(" æ˜¯å­—ç¬¦ä¸²æ—¶æœ‰æ•ˆã€‚"),n("strong",[t._v("é»˜è®¤å€¼:")]),t._v(" "),n("code",[t._v("'utf8'")]),t._v("ã€‚")]),t._v(" "),n("li",[n("code",[t._v("callback")]),t._v(" "),n("a",{attrs:{href:"http://nodejs.cn/s/ceTQa6",target:"_blank",rel:"noopener noreferrer"}},[t._v("function"),n("OutboundLink")],1),t._v(" å½“ socket å®Œæˆæ—¶çš„å›è°ƒå‡½æ•°ã€‚")]),t._v(" "),n("li",[t._v("è¿”å›: "),n("a",{attrs:{href:"http://nodejs.cn/s/wsJ1o1",target:"_blank",rel:"noopener noreferrer"}},[t._v("net.Socket"),n("OutboundLink")],1),t._v(" socket æœ¬èº«ã€‚")])]),t._v(" "),n("p",[t._v("åŠå…³é—­ socketã€‚ ä¾‹å¦‚å‘é€ä¸€ä¸ª FIN åŒ…ã€‚ æœåŠ¡ç«¯ä»å¯ä»¥å‘é€æ•°æ®ã€‚")]),t._v(" "),n("p",[t._v("å¦‚æœæŒ‡å®šäº† "),n("code",[t._v("data")]),t._v("ï¼Œåˆ™ç›¸å½“äºè°ƒç”¨ "),n("code",[t._v("socket.write(data, encoding)")]),t._v(" ä¹‹åå†è°ƒç”¨ "),n("a",{attrs:{href:"http://nodejs.cn/s/RyEJPD",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("socket.end()")]),n("OutboundLink")],1),t._v("ã€‚æœ‰å…³æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œå‚è§ "),n("a",{attrs:{href:"http://nodejs.cn/s/nvArK4",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("writable.end()")]),n("OutboundLink")],1),t._v("ã€‚")]),t._v(" "),n("h3",{attrs:{id:"_3-7-socket-setkeepalive-enable-initialdelay"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-7-socket-setkeepalive-enable-initialdelay"}},[t._v("ğŸŒ™")]),t._v(" 3.7 "),n("code",[t._v("socket.setKeepAlive([enable][, initialDelay])")])]),t._v(" "),n("ul",[n("li",[n("code",[t._v("enable")]),t._v(" "),n("a",{attrs:{href:"http://nodejs.cn/s/jFbvuT",target:"_blank",rel:"noopener noreferrer"}},[t._v("boolean"),n("OutboundLink")],1),t._v(" "),n("strong",[t._v("é»˜è®¤å€¼:")]),t._v(" "),n("code",[t._v("false")]),t._v("ã€‚")]),t._v(" "),n("li",[n("code",[t._v("initialDelay")]),t._v(" "),n("a",{attrs:{href:"http://nodejs.cn/s/SXbo1v",target:"_blank",rel:"noopener noreferrer"}},[t._v("number"),n("OutboundLink")],1),t._v(" "),n("strong",[t._v("é»˜è®¤å€¼:")]),t._v(" "),n("code",[t._v("0")]),t._v("ã€‚")]),t._v(" "),n("li",[t._v("è¿”å›: "),n("a",{attrs:{href:"http://nodejs.cn/s/wsJ1o1",target:"_blank",rel:"noopener noreferrer"}},[t._v("net.Socket"),n("OutboundLink")],1),t._v(" Socket æœ¬èº«ã€‚")])]),t._v(" "),n("p",[t._v("å¯ç”¨/ç¦ç”¨é•¿è¿æ¥åŠŸèƒ½ï¼Œ å¹¶ä¸”åœ¨ç¬¬ä¸€ä¸ªé•¿è¿æ¥æ¢é’ˆè¢«å‘é€åˆ°ä¸€ä¸ªç©ºé—²çš„ socket ä¹‹å‰å¯é€‰åˆ™é…ç½®åˆå§‹å»¶è¿Ÿã€‚")]),t._v(" "),n("p",[n("code",[t._v("initialDelay")]),t._v("ï¼ˆæ¯«ç§’ï¼‰ç”¨æ¥è®¾ç½®æ¥æ”¶åˆ°æœ€åä¸€ä¸ªæ•°æ®åŒ…å’Œå‘é€ç¬¬ä¸€ä¸ªé•¿è¿æ¥æ¢é’ˆä¹‹é—´çš„å»¶è¿Ÿã€‚å°† "),n("code",[t._v("initialDelay")]),t._v(" è®¾ç½®ä¸º "),n("code",[t._v("0")]),t._v("ï¼Œåˆ™ä¼šä¿æŒé»˜è®¤å€¼ï¼ˆæˆ–ä¹‹å‰è®¾ç½®çš„å€¼ï¼‰ä¸å˜ã€‚")]),t._v(" "),n("h3",{attrs:{id:"_3-8-socket-write-data-encoding-callback"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-8-socket-write-data-encoding-callback"}},[t._v("ğŸŒ™")]),t._v(" 3.8 "),n("code",[t._v("socket.write(data[, encoding][, callback])")])]),t._v(" "),n("ul",[n("li",[n("code",[t._v("data")]),t._v(" "),n("a",{attrs:{href:"http://nodejs.cn/s/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[t._v("string"),n("OutboundLink")],1),t._v(" | "),n("a",{attrs:{href:"http://nodejs.cn/s/6x1hD3",target:"_blank",rel:"noopener noreferrer"}},[t._v("Buffer"),n("OutboundLink")],1),t._v(" | "),n("a",{attrs:{href:"http://nodejs.cn/s/ZbDkpm",target:"_blank",rel:"noopener noreferrer"}},[t._v("Unit8Array"),n("OutboundLink")],1)]),t._v(" "),n("li",[n("code",[t._v("encoding")]),t._v(" "),n("a",{attrs:{href:"http://nodejs.cn/s/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[t._v("string"),n("OutboundLink")],1),t._v(" ä»…å½“ "),n("code",[t._v("data")]),t._v(" æ˜¯å­—ç¬¦ä¸²æ—¶æœ‰æ•ˆã€‚"),n("strong",[t._v("é»˜è®¤å€¼:")]),t._v(" "),n("code",[t._v("'utf8'")]),t._v("ã€‚")]),t._v(" "),n("li",[n("code",[t._v("callback")]),t._v(" "),n("a",{attrs:{href:"http://nodejs.cn/s/ceTQa6",target:"_blank",rel:"noopener noreferrer"}},[t._v("function"),n("OutboundLink")],1),t._v(" å½“ socket å®Œæˆæ—¶çš„å›è°ƒå‡½æ•°ã€‚")]),t._v(" "),n("li",[t._v("è¿”å›: "),n("a",{attrs:{href:"http://nodejs.cn/s/jFbvuT",target:"_blank",rel:"noopener noreferrer"}},[t._v("boolean"),n("OutboundLink")],1)])]),t._v(" "),n("p",[t._v("åœ¨ socket ä¸Šå‘é€æ•°æ®ã€‚ç¬¬äºŒä¸ªå‚æ•°åˆ¶å®šäº†å­—ç¬¦ä¸²çš„ç¼–ç ã€‚ é»˜è®¤æ˜¯ UTF8 ç¼–ç ã€‚")]),t._v(" "),n("p",[t._v("å¦‚æœå…¨éƒ¨æ•°æ®éƒ½æˆåŠŸåˆ·æ–°åˆ°å†…æ ¸çš„ç¼“å†²åˆ™è¿”å› "),n("code",[t._v("true")]),t._v("ã€‚å¦‚æœå…¨éƒ¨æˆ–éƒ¨åˆ†æ•°æ®åœ¨ç”¨æˆ·å†…ä¸­æ’é˜Ÿï¼Œåˆ™è¿”å› "),n("code",[t._v("false")]),t._v("ã€‚å½“ç¼“å†²å†æ¬¡ç©ºé—²çš„æ—¶å€™å°†è§¦å‘ "),n("a",{attrs:{href:"http://nodejs.cn/s/GyDS4X",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("'drain'")]),n("OutboundLink")],1),t._v(" äº‹ä»¶ã€‚")]),t._v(" "),n("p",[t._v("å½“æ•°æ®æœ€ç»ˆéƒ½è¢«å†™å‡ºä¹‹åï¼Œå¯é€‰çš„ "),n("code",[t._v("callback")]),t._v(" å‚æ•°å°†ä¼šè¢«æ‰§è¡Œï¼ˆå¯èƒ½ä¸ä¼šç«‹å³æ‰§è¡Œï¼‰ã€‚è¯¦è§ "),n("code",[t._v("Writable")]),t._v(" æµçš„ "),n("a",{attrs:{href:"http://nodejs.cn/s/doppiK",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("write()")]),n("OutboundLink")],1),t._v(" æ–¹æ³•ã€‚")]),t._v(" "),n("h2",{attrs:{id:"_4-netå…¶ä»–æ–¹æ³•"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-netå…¶ä»–æ–¹æ³•"}},[t._v("ğŸŒ™")]),t._v(" 4.netå…¶ä»–æ–¹æ³•")]),t._v(" "),n("h3",{attrs:{id:"_4-1-net-connect-å’Œnet-createconnection"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-net-connect-å’Œnet-createconnection"}},[t._v("ğŸŒ™")]),t._v(" 4.1 "),n("code",[t._v("net.connect()")]),t._v("å’Œ"),n("code",[t._v("net.createConnection()")])]),t._v(" "),n("p",[n("code",[t._v("net.connect()")]),t._v("æ˜¯"),n("code",[t._v("net.createConnection()")]),t._v("çš„åˆ«åã€‚")]),t._v(" "),n("p",[t._v("ä¸€ä¸ªç”¨äºåˆ›å»º "),n("a",{attrs:{href:"http://nodejs.cn/s/wsJ1o1",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("net.Socket")]),n("OutboundLink")],1),t._v(" çš„å·¥å‚å‡½æ•°ï¼Œç«‹å³ä½¿ç”¨ "),n("a",{attrs:{href:"http://nodejs.cn/s/fGCDDg",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("socket.connect()")]),n("OutboundLink")],1),t._v(" åˆå§‹åŒ–é“¾æ¥ï¼Œç„¶åè¿”å›å¯åŠ¨è¿æ¥çš„ "),n("code",[t._v("net.Socket")]),t._v("ã€‚")]),t._v(" "),n("p",[t._v("å½“è¿æ¥å»ºç«‹ä¹‹åï¼Œåœ¨è¿”å›çš„ socket ä¸Šå°†è§¦å‘ä¸€ä¸ª "),n("a",{attrs:{href:"http://nodejs.cn/s/BwGGNR",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("'connect'")]),n("OutboundLink")],1),t._v(" äº‹ä»¶ã€‚è‹¥åˆ¶å®šäº†æœ€åä¸€ä¸ªå‚æ•° "),n("code",[t._v("connectListener")]),t._v("ï¼Œåˆ™å®ƒå°†ä¼šè¢«æ·»åŠ åˆ° "),n("a",{attrs:{href:"http://nodejs.cn/s/BwGGNR",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("'connect'")]),n("OutboundLink")],1),t._v(" äº‹ä»¶ä½œä¸ºä¸€ä¸ªç›‘å¬å™¨ã€‚")]),t._v(" "),n("p",[t._v("å¯èƒ½çš„å‚æ•°ï¼š")]),t._v(" "),n("ul",[n("li",[n("code",[t._v("net.connect(options[, connectListener])")])]),t._v(" "),n("li",[n("code",[t._v("net.connect(path[, connectListener\\])")]),t._v("ç”¨äº "),n("a",{attrs:{href:"http://nodejs.cn/s/rAdYjf",target:"_blank",rel:"noopener noreferrer"}},[t._v("IPC"),n("OutboundLink")],1),t._v(" è¿æ¥")]),t._v(" "),n("li",[n("code",[t._v("net.connect(port[, host\\][, connectListener])")]),t._v(" ç”¨äº TCP è¿æ¥ã€‚")])]),t._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" net "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'net'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" client "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" net"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("createConnection")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("port")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("8124")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 'connect' ç›‘å¬å™¨")]),t._v("\n  console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'å·²è¿æ¥åˆ°æœåŠ¡å™¨'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  client"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("write")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ä½ å¥½ä¸–ç•Œ!\\r\\n'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nclient"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'data'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("data")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  client"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("end")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nclient"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'end'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'å·²ä»æœåŠ¡å™¨æ–­å¼€'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br")])]),n("p",[t._v("å¦‚æœè¦è¿æ¥åˆ° "),n("code",[t._v("/tmp/echo.sock")]),t._v("ï¼š")]),t._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" client "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" net"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("createConnection")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("path")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/tmp/echo.sock'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br")])]),n("h3",{attrs:{id:"_4-1-net-isip-input"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-net-isip-input"}},[t._v("ğŸŒ™")]),t._v(" 4.1 "),n("code",[t._v("net.isIP(input)")])]),t._v(" "),n("ul",[n("li",[n("code",[t._v("input")]),t._v(" "),n("a",{attrs:{href:"http://nodejs.cn/s/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[t._v("string"),n("OutboundLink")],1)]),t._v(" "),n("li",[t._v("è¿”å›: "),n("a",{attrs:{href:"http://nodejs.cn/s/SXbo1v",target:"_blank",rel:"noopener noreferrer"}},[t._v("integer"),n("OutboundLink")],1)])]),t._v(" "),n("p",[t._v("æµ‹è¯•è¾“å…¥æ˜¯å¦æ˜¯ IP åœ°å€ã€‚æ— æ•ˆçš„å­—ç¬¦ä¸²åˆ™è¿”å› "),n("code",[t._v("0")]),t._v("ï¼ŒIPv4 åœ°å€åˆ™è¿”å› "),n("code",[t._v("4")]),t._v("ï¼ŒIPv6 çš„åœ°å€åˆ™è¿”å› "),n("code",[t._v("6")]),t._v("ã€‚")]),t._v(" "),n("h3",{attrs:{id:"_4-2-net-isipv4-input"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-net-isipv4-input"}},[t._v("ğŸŒ™")]),t._v(" 4.2 "),n("code",[t._v("net.isIPv4(input)")])]),t._v(" "),n("ul",[n("li",[n("code",[t._v("input")]),t._v(" "),n("a",{attrs:{href:"http://nodejs.cn/s/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[t._v("string"),n("OutboundLink")],1)]),t._v(" "),n("li",[t._v("è¿”å›: "),n("a",{attrs:{href:"http://nodejs.cn/s/jFbvuT",target:"_blank",rel:"noopener noreferrer"}},[t._v("boolean"),n("OutboundLink")],1)])]),t._v(" "),n("p",[t._v("å¦‚æœè¾“å…¥æ˜¯ IPv4 åœ°å€åˆ™è¿”å› "),n("code",[t._v("true")]),t._v("ï¼Œå¦åˆ™è¿”å› "),n("code",[t._v("false")]),t._v("ã€‚")]),t._v(" "),n("h3",{attrs:{id:"_4-2-net-isipv6-input"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-net-isipv6-input"}},[t._v("ğŸŒ™")]),t._v(" 4.2 "),n("code",[t._v("net.isIPv6(input)")])]),t._v(" "),n("ul",[n("li",[n("code",[t._v("input")]),t._v(" "),n("a",{attrs:{href:"http://nodejs.cn/s/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[t._v("string"),n("OutboundLink")],1)]),t._v(" "),n("li",[t._v("è¿”å›: "),n("a",{attrs:{href:"http://nodejs.cn/s/jFbvuT",target:"_blank",rel:"noopener noreferrer"}},[t._v("boolean"),n("OutboundLink")],1)])]),t._v(" "),n("p",[t._v("å¦‚æœè¾“å…¥æ˜¯ IPv6 åœ°å€åˆ™è¿”å› "),n("code",[t._v("true")]),t._v("ï¼Œå¦åˆ™è¿”å› "),n("code",[t._v("false")]),t._v("ã€‚")]),t._v(" "),n("h2",{attrs:{id:"_5-åº”ç”¨-ç«¯å£å ç”¨æ£€æµ‹"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_5-åº”ç”¨-ç«¯å£å ç”¨æ£€æµ‹"}},[t._v("ğŸŒ™")]),t._v(" 5.åº”ç”¨ï¼šç«¯å£å ç”¨æ£€æµ‹")]),t._v(" "),n("p",[t._v("åœ¨ Node.js ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ net æ¨¡å—æ¥æ£€æµ‹ç«¯å£æ˜¯å¦è¢«å ç”¨ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼š")]),t._v(" "),n("div",{staticClass:"language-ts line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-ts"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" createServer "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'node:net'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ£€æŸ¥ç«¯å£æ˜¯å¦å¯ç”¨")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("isPortAvailable")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("port"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("number")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Promise")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("boolean")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Promise")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("resolve"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" server "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("createServer")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    server"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("once")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'error'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      server"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("close")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    server"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("once")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'listening'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      server"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("close")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    server"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("listen")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("port"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è·å–å¯ç”¨ç«¯å£")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getAvailablePort")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("startPort"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("number")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Promise")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("number")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" port "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" startPort"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("while")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("isPortAvailable")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("port"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    port"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" port"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä½¿ç”¨")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" startPort "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" process"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("env"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("PORT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("parseInt")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("process"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("env"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("PORT")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("3000")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br"),n("span",{staticClass:"line-number"},[t._v("17")]),n("br"),n("span",{staticClass:"line-number"},[t._v("18")]),n("br"),n("span",{staticClass:"line-number"},[t._v("19")]),n("br"),n("span",{staticClass:"line-number"},[t._v("20")]),n("br"),n("span",{staticClass:"line-number"},[t._v("21")]),n("br"),n("span",{staticClass:"line-number"},[t._v("22")]),n("br"),n("span",{staticClass:"line-number"},[t._v("23")]),n("br"),n("span",{staticClass:"line-number"},[t._v("24")]),n("br"),n("span",{staticClass:"line-number"},[t._v("25")]),n("br"),n("span",{staticClass:"line-number"},[t._v("26")]),n("br"),n("span",{staticClass:"line-number"},[t._v("27")]),n("br"),n("span",{staticClass:"line-number"},[t._v("28")]),n("br"),n("span",{staticClass:"line-number"},[t._v("29")]),n("br")])]),n("p",[t._v("æµè¡Œçš„ npm åŒ… "),n("a",{attrs:{href:"https://github.com/node-modules/detect-port/blob/master/src/detect-port.ts",target:"_blank",rel:"noopener noreferrer"}},[t._v("detect-port"),n("OutboundLink")],1),t._v(", ä¹Ÿæ˜¯é€šè¿‡ net æ¨¡å—å®ç°çš„ã€‚")])])}),[],!1,null,null,null);n.default=r.exports}}]);