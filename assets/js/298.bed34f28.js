(window.webpackJsonp=window.webpackJsonp||[]).push([[298],{1019:function(e,_,v){"use strict";v.r(_);var o=v(2),a=Object(o.a)({},(function(){var e=this,_=e._self._c;return _("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[_("h1",{attrs:{id:"image-ç»„ä»¶ä¸æ§åˆ¶å™¨å·¥ä½œåŸç†"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#image-ç»„ä»¶ä¸æ§åˆ¶å™¨å·¥ä½œåŸç†"}},[e._v("ğŸŒ™")]),e._v(" Image ç»„ä»¶ä¸æ§åˆ¶å™¨å·¥ä½œåŸç†")]),e._v(" "),_("p",[e._v("æœ¬æ–‡æ±‡æ€» "),_("code",[e._v("Image")]),e._v(" å¯¹è±¡æ ‡ç­¾ä¸å…¶æ§åˆ¶å™¨ï¼ˆ"),_("code",[e._v("RectangleLabels")]),e._v("ã€"),_("code",[e._v("PolygonLabels")]),e._v(" ç­‰ï¼‰åœ¨ Label Studio å‰ç«¯ä¸­çš„å®ç°æ–¹å¼ï¼Œå¹¶æä¾›æ‰©å±•æ–°å¢æ§åˆ¶å™¨çš„æ“ä½œæŒ‡å—ã€‚")]),e._v(" "),_("h2",{attrs:{id:"_1-image-ç»„ä»¶å®šä½"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_1-image-ç»„ä»¶å®šä½"}},[e._v("ğŸŒ™")]),e._v(" 1. Image ç»„ä»¶å®šä½")]),e._v(" "),_("ul",[_("li",[_("strong",[e._v("æ¨¡å‹ç»„åˆ")]),e._v("ï¼š"),_("code",[e._v("ImageModel")]),e._v(" å®šä¹‰äº "),_("code",[e._v("web/libs/editor/src/tags/object/Image/Image.js")]),e._v("ï¼Œç”± "),_("code",[e._v("TagAttrs")]),e._v("ã€"),_("code",[e._v("ObjectBase")]),e._v("ã€"),_("code",[e._v("MultiItemObjectBase")]),e._v("ï¼ˆå¤šå›¾æ¨¡å¼ï¼‰ã€"),_("code",[e._v("AnnotationMixin")]),e._v("ã€"),_("code",[e._v("IsReadyWithDepsMixin")]),e._v("ã€"),_("code",[e._v("ImageEntityMixin")]),e._v("ã€æ ¸å¿ƒ "),_("code",[e._v("Model")]),e._v(" ä»¥åŠåæ ‡æ¢ç®— mixin ç»„åˆè€Œæˆã€‚å®ƒè´Ÿè´£ï¼š\n"),_("ul",[_("li",[e._v("è§£æ XML ä¸­çš„ "),_("code",[e._v("value")]),e._v(" / "),_("code",[e._v("valueList")]),e._v("ï¼Œé€šè¿‡ "),_("code",[e._v("parseValue()")]),e._v(" ä¸ä»»åŠ¡æ•°æ®ç»‘å®šã€‚")]),e._v(" "),_("li",[e._v("ç»´æŠ¤ "),_("code",[e._v("regions")]),e._v(" æ•°ç»„ï¼ˆè”åˆ "),_("code",[e._v("RectRegionModel")]),e._v("ã€"),_("code",[e._v("PolygonRegionModel")]),e._v("ã€"),_("code",[e._v("BrushRegionModel")]),e._v(" ç­‰ï¼‰ï¼Œå¹¶å’Œ "),_("code",[e._v("annotation.regionStore")]),e._v(" åŒæ­¥ã€‚")]),e._v(" "),_("li",[e._v("ç®¡ç†ç¼©æ”¾ã€æ—‹è½¬ã€äº®åº¦/å¯¹æ¯”åº¦ã€ç½‘æ ¼ã€åå­—å‡†çº¿ç­‰æ˜¾ç¤ºçŠ¶æ€ã€‚")]),e._v(" "),_("li",[e._v("é€šè¿‡ "),_("code",[e._v("ImageEntityMixin")]),e._v(" ç®¡ç†å¤šå¼ å›¾ç‰‡çš„ä¸‹è½½ã€é¢„åŠ è½½ã€è‡ªç„¶å°ºå¯¸ã€ç¼©æ”¾å› å­ç­‰ã€‚")])])]),e._v(" "),_("li",[_("strong",[e._v("è§†å›¾ç»‘å®š")]),e._v("ï¼š"),_("code",[e._v("HtxImage")]),e._v(" ä»…æ³¨å…¥ "),_("code",[e._v("store")]),e._v(" å¹¶æ¸²æŸ“ "),_("code",[e._v("ImageView")]),e._v("ï¼ˆ"),_("code",[e._v("web/libs/editor/src/components/ImageView/Image.jsx")]),e._v("ï¼‰ï¼Œè¯¥è§†å›¾åœ¨ "),_("code",[e._v("onLoad")]),e._v(" æ—¶å›è°ƒ "),_("code",[e._v("updateImageSize")]),e._v("ï¼Œå¹¶æ ¹æ® "),_("code",[e._v("imageTransform")]),e._v(" åº”ç”¨ç¼©æ”¾/æ—‹è½¬ CSSã€‚")])]),e._v(" "),_("h2",{attrs:{id:"_2-æ¸²æŸ“ä¸æ•°æ®æµ"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_2-æ¸²æŸ“ä¸æ•°æ®æµ"}},[e._v("ğŸŒ™")]),e._v(" 2. æ¸²æŸ“ä¸æ•°æ®æµ")]),e._v(" "),_("ol",[_("li",[e._v("XML é…ç½®è§£æåï¼Œ"),_("code",[e._v("Image")]),e._v(" æ ‡ç­¾ä¼šåœ¨ "),_("code",[e._v("Registry")]),e._v(" ä¸­è¢«æ˜ å°„åˆ° "),_("code",[e._v("ImageModel")]),e._v("ï¼Œåˆ›å»º MST å®ä¾‹æ—¶ä¼šåˆå§‹åŒ– "),_("code",[e._v("imageEntities")]),e._v(" å¹¶æ ¹æ® "),_("code",[e._v("valueList")]),e._v(" æ”¯æŒå¤šé¡µå›¾ç‰‡ã€‚")]),e._v(" "),_("li",[_("code",[e._v("afterAttach()")]),e._v(" ä¼šæ ¹æ®å±æ€§ï¼ˆå¦‚ "),_("code",[e._v("zoomControl")]),e._v(", "),_("code",[e._v("rotateControl")]),e._v("ï¼‰å°† Move/Zoom/Brightness/Contrast/Rotate ç­‰å†…ç½®å·¥å…·æ³¨å†Œåˆ° "),_("code",[e._v("ToolsManager")]),e._v("ï¼Œå¹¶åˆ›å»ºå›¾åƒå®ä½“åˆ—è¡¨ã€‚")]),e._v(" "),_("li",[_("code",[e._v("ImageView")]),e._v(" æ¸²æŸ“è¿‡ç¨‹ä¸­æ ¹æ®å®ä½“ä¸‹è½½çŠ¶æ€æ˜¾ç¤ºè¿›åº¦æˆ–é”™è¯¯ï¼Œé€šè¿‡ "),_("code",[e._v("ImageRenderer")]),e._v(" å¤„ç†è·¨åŸŸä¸ç¼©æ”¾æ ·å¼ï¼›æ‰€æœ‰äº¤äº’äº‹ä»¶æœ€ç»ˆå›æµè‡³ "),_("code",[e._v("ImageModel.event()")]),e._v("ï¼Œç”±å·¥å…·ç®¡ç†å™¨æ´¾å‘ç»™å½“å‰é€‰ä¸­çš„å·¥å…·ã€‚")])]),e._v(" "),_("h2",{attrs:{id:"_3-æ§åˆ¶å™¨ä¸å·¥å…·é“¾"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_3-æ§åˆ¶å™¨ä¸å·¥å…·é“¾"}},[e._v("ğŸŒ™")]),e._v(" 3. æ§åˆ¶å™¨ä¸å·¥å…·é“¾")]),e._v(" "),_("ul",[_("li",[_("strong",[e._v("æ§åˆ¶å™¨æ˜ å°„")]),e._v("ï¼š"),_("code",[e._v("ImageModel.states()")]),e._v(" ä¼šä» "),_("code",[e._v("annotation.toNames")]),e._v(" é‡Œæ£€ç´¢æ‰€æœ‰ "),_("code",[e._v("toName=image")]),e._v(" çš„æ§åˆ¶æ ‡ç­¾ï¼Œå¹¶åœ¨ "),_("code",[e._v("activeStates()")]),e._v(" ä¸­ç­›é€‰å½“å‰é€‰ä¸­çš„ "),_("code",[e._v("labels")]),e._v(" æ§ä»¶ã€‚"),_("code",[e._v("controlButton()")]),e._v("/"),_("code",[e._v("controlButtonType")]),e._v(" ç”¨äºç¡®å®šå·¥å…·æ ä¸Šåº”å±•ç¤ºçš„æ§åˆ¶å™¨å›¾æ ‡ã€‚")]),e._v(" "),_("li",[_("strong",[e._v("ToolManager ç®¡ç†")]),e._v("ï¼š\n"),_("ul",[_("li",[e._v("å¯¹è±¡ä¾§ï¼š"),_("code",[e._v("ImageModel.afterAttach()")]),e._v(" æ ¹æ®é…ç½®å°†é€šç”¨å·¥å…·æ³¨å†Œåˆ° "),_("code",[e._v("ToolsManager")]),e._v("ï¼Œ"),_("code",[e._v("getToolsManager()")]),e._v(" åœ¨å…¶ä»–åŠ¨ä½œä¸­å¤ç”¨åŒä¸€å®ä¾‹ã€‚")]),e._v(" "),_("li",[e._v("æ§åˆ¶å™¨ä¾§ï¼šå¦‚ "),_("code",[e._v("RectangleLabels")]),e._v("ï¼Œå…¶æ¨¡å‹ç”± "),_("code",[e._v("ControlBase")]),e._v(" + "),_("code",[e._v("LabelsModel")]),e._v(" + "),_("code",[e._v("RectangleModel")]),e._v(" ç­‰ç»„åˆï¼Œå¹¶åŒ…å« "),_("code",[e._v("toolNames")]),e._v(" åˆ—è¡¨ã€‚"),_("code",[e._v("ToolManagerMixin")]),e._v(" ä¼šåœ¨ "),_("code",[e._v("afterAttach()")]),e._v(" ä¸­æŠŠæ§åˆ¶å™¨å£°æ˜çš„å·¥å…·ï¼ˆ"),_("code",[e._v("Rect")]),e._v("ã€"),_("code",[e._v("Brush")]),e._v(" ç­‰ï¼‰å®ä¾‹æ³¨å†Œåˆ°ä¸ "),_("code",[e._v("Image")]),e._v(" å…±ç”¨çš„ "),_("code",[e._v("ToolsManager")]),e._v("ã€‚")])])]),e._v(" "),_("li",[_("strong",[e._v("å—æ§å¯¹è±¡é™åˆ¶")]),e._v("ï¼šæ§åˆ¶å™¨é€šè¿‡ "),_("code",[e._v('Types.unionTag(["Image"])')]),e._v(" å£°æ˜ä»…èƒ½ç»‘å®š "),_("code",[e._v("Image")]),e._v(" å¯¹è±¡ï¼Œç¡®ä¿ "),_("code",[e._v("toName")]),e._v(" æ£€æŸ¥åœ¨æ¨¡å‹å±‚æ‰§è¡Œã€‚")])]),e._v(" "),_("h2",{attrs:{id:"_4-åŒºåŸŸæ¨¡å‹ä¸ç»“æœåºåˆ—åŒ–"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_4-åŒºåŸŸæ¨¡å‹ä¸ç»“æœåºåˆ—åŒ–"}},[e._v("ğŸŒ™")]),e._v(" 4. åŒºåŸŸæ¨¡å‹ä¸ç»“æœåºåˆ—åŒ–")]),e._v(" "),_("ul",[_("li",[_("code",[e._v("ImageModel.createDrawingRegion()")]),e._v(" åœ¨å¼€å§‹ç»˜åˆ¶æ—¶ä¸´æ—¶ç”ŸæˆåŒºåŸŸè‰ç¨¿ï¼Œ"),_("code",[e._v("addShape()")]),e._v(" åˆ™åœ¨æäº¤åæŠŠ "),_("code",[e._v("region")]),e._v(" æ¨å…¥ "),_("code",[e._v("regions")]),e._v(" å¹¶ä¸ "),_("code",[e._v("annotation")]),e._v(" å¯¹é½ã€‚")]),e._v(" "),_("li",[_("code",[e._v("createSerializedResult()")]),e._v(" ä¼šè¯»å–å½“å‰å›¾ç‰‡çš„åŸå§‹å°ºå¯¸ã€æ—‹è½¬ã€"),_("code",[e._v("item_index")]),e._v(" ç­‰ä¿¡æ¯å†™å…¥ç»“æœï¼ŒæœªåŠ è½½å®Œæˆæ—¶åˆ™é™çº§åˆ° "),_("code",[e._v("_rawResult")]),e._v("ï¼Œä¿è¯å¤šå›¾åœºæ™¯ä¸‹ä¸€è‡´æ€§ã€‚")]),e._v(" "),_("li",[e._v("æ‰€æœ‰ç¼©æ”¾ä¸åæ ‡æ¢ç®—é€šè¿‡ "),_("code",[e._v("CoordsCalculations")]),e._v("ï¼ˆæˆ– "),_("code",[e._v("AbsoluteCoordsCalculations")]),e._v("ï¼‰å°è£…ï¼Œ"),_("code",[e._v("canvasToInternalX/Y")]),e._v(" è´Ÿè´£åœ¨ä¸åŒå·¥å…·ä¹‹é—´ç»Ÿä¸€åæ ‡ç³»ï¼Œå®ç°åƒç´ å¸é™„ ("),_("code",[e._v("snapPointToPixel")]),e._v(") ä¸è§†å£å˜æ¢ã€‚")])]),e._v(" "),_("h2",{attrs:{id:"_5-æ–°å¢-image-æ§åˆ¶å™¨æŒ‡å—"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_5-æ–°å¢-image-æ§åˆ¶å™¨æŒ‡å—"}},[e._v("ğŸŒ™")]),e._v(" 5. æ–°å¢ Image æ§åˆ¶å™¨æŒ‡å—")]),e._v(" "),_("blockquote",[_("p",[e._v("ç›®æ ‡ï¼šè®©è‡ªå®šä¹‰æ§åˆ¶å™¨èƒ½å¤Ÿé’ˆå¯¹ "),_("code",[e._v("Image")]),e._v(" ç”Ÿæˆæ–°çš„åŒºåŸŸç±»å‹æˆ–äº¤äº’å·¥å…·ã€‚")])]),e._v(" "),_("ol",[_("li",[_("strong",[e._v("å®šä¹‰æ§åˆ¶å™¨ Model")]),e._v(" "),_("ul",[_("li",[e._v("åœ¨ "),_("code",[e._v("web/libs/editor/src/tags/control/")]),e._v(" ä¸‹åˆ›å»ºæ–°æ–‡ä»¶ï¼ˆä¾‹å¦‚ "),_("code",[e._v("MyShapeLabels.jsx")]),e._v("ï¼‰ï¼Œä½¿ç”¨ "),_("code",[e._v("ControlBase")]),e._v("ã€"),_("code",[e._v("AnnotationMixin")]),e._v("ã€"),_("code",[e._v("LabelMixin")]),e._v(" ç­‰ç»„åˆå‡º MST æ¨¡å‹ã€‚")]),e._v(" "),_("li",[e._v("é€šè¿‡ "),_("code",[e._v('Types.unionTag(["Image"])')]),e._v("ï¼ˆæˆ–æ›´ç»†ç²’åº¦çš„å—æ§å¯¹è±¡åˆ—è¡¨ï¼‰é™åˆ¶ "),_("code",[e._v("toName")]),e._v("ã€‚")]),e._v(" "),_("li",[e._v("è‹¥éœ€è¦å·¥å…·æ å…¥å£ï¼Œè®¾ç½® "),_("code",[e._v('toolNames = ["MyShapeTool"]')]),e._v(" å¹¶ç¡®ä¿åœ¨ "),_("code",[e._v("web/libs/editor/src/tools")]),e._v(" ä¸‹å®ç°å¯¹åº”å·¥å…·ç±»ã€‚")])])]),e._v(" "),_("li",[_("strong",[e._v("å‡†å¤‡åŒºåŸŸæ¨¡å‹")]),e._v(" "),_("ul",[_("li",[e._v("è‹¥æ–°æ§åˆ¶å™¨é‡ç”¨ç°æœ‰åŒºåŸŸï¼ˆå¦‚ "),_("code",[e._v("RectRegionModel")]),e._v("ï¼‰ï¼Œç›´æ¥åœ¨æ§åˆ¶å™¨æ¨¡å‹ä¸­ composeã€‚")]),e._v(" "),_("li",[e._v("å¦‚æœéœ€è¦å…¨æ–°åŒºåŸŸï¼ˆä¾‹å¦‚ "),_("code",[e._v("StarRegionModel")]),e._v("ï¼‰ï¼Œéœ€åœ¨ "),_("code",[e._v("web/libs/editor/src/regions/")]),e._v(" ä¸‹å®ç°è¯¥æ¨¡å‹ï¼Œå¹¶æŠŠå®ƒåŠ å…¥ "),_("code",[e._v("ImageModel.regions")]),e._v(" çš„ "),_("code",[e._v("types.union(...)")]),e._v(" ä¸­ï¼Œå¦åˆ™ç»“æœæ ‘ä¸ä¼šæ¥å—è¯¥åŒºåŸŸã€‚")])])]),e._v(" "),_("li",[_("strong",[e._v("æ³¨å†Œå·¥å…·ä¸è§†å›¾")]),e._v(" "),_("ul",[_("li",[e._v("åœ¨æ§åˆ¶å™¨æ–‡ä»¶ä¸­è°ƒç”¨ "),_("code",[e._v('Registry.addTag("myshapelabels", MyShapeLabelsModel, HtxMyShapeLabels)')]),e._v("ã€‚")]),e._v(" "),_("li",[e._v("è§†å›¾å±‚å¯å¤ç”¨ "),_("code",[e._v("HtxLabels")]),e._v(" æˆ–è‡ªå®šä¹‰ React ç»„ä»¶ï¼Œç¡®ä¿ä½¿ç”¨ "),_("code",[e._v("observer")]),e._v(" åŒ…è£¹å¹¶é€šè¿‡ "),_("code",[e._v("item")]),e._v(" prop è·å– MST å®ä¾‹ã€‚")])])]),e._v(" "),_("li",[_("strong",[e._v("å¤„ç†ç»˜åˆ¶/åºåˆ—åŒ–")]),e._v(" "),_("ul",[_("li",[e._v("å·¥å…·å±‚è°ƒç”¨ "),_("code",[e._v("control.createResult()")]),e._v(" æ—¶ä¼šè½åˆ° "),_("code",[e._v("ImageModel.createDrawingRegion()")]),e._v("ï¼Œå› æ­¤æ–°åŒºåŸŸéœ€è¦å®ç° "),_("code",[e._v("updateImageSize")]),e._v("ã€"),_("code",[e._v("serialize()")]),e._v(" ç­‰æ–¹æ³•ä»¥å…¼å®¹ç¼©æ”¾ä¸ç»“æœå¯¼å‡ºã€‚")]),e._v(" "),_("li",[e._v("å¦‚æœæ§åˆ¶å™¨éœ€è¦ç‰¹å®šçš„å¸é™„ç­–ç•¥ï¼Œå¯åœ¨ "),_("code",[e._v("Tool")]),e._v(" å†…è°ƒç”¨ "),_("code",[e._v("control.getSnappedPoint()")]),e._v(" å¹¶è®¾ç½® "),_("code",[e._v("snapMode")]),e._v("ã€‚")])])]),e._v(" "),_("li",[_("strong",[e._v("æ›´æ–°é…ç½®ä¸æµ‹è¯•")]),e._v(" "),_("ul",[_("li",[e._v("åœ¨ XML é…ç½®ä¸­æ·»åŠ  "),_("code",[e._v('<MyShapeLabels name="labels" toName="image">...</MyShapeLabels>')]),e._v(" å¹¶å…³è” "),_("code",[e._v('<Image name="image" .../>')]),e._v("ã€‚")]),e._v(" "),_("li",[e._v("è¿è¡Œ "),_("code",[e._v("cd web && yarn lsf:serve")]),e._v(" éªŒè¯äº¤äº’ï¼›å¦‚æ¶‰åŠå¤šå›¾/åˆ†è¾¨ç‡ç¼©æ”¾ï¼Œéœ€æ£€æŸ¥ "),_("code",[e._v("createSerializedResult()")]),e._v(" è¾“å‡ºã€‚")])])])]),e._v(" "),_("h2",{attrs:{id:"_6-è°ƒè¯•ä¸æ’éšœå»ºè®®"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_6-è°ƒè¯•ä¸æ’éšœå»ºè®®"}},[e._v("ğŸŒ™")]),e._v(" 6. è°ƒè¯•ä¸æ’éšœå»ºè®®")]),e._v(" "),_("ul",[_("li",[e._v("ä½¿ç”¨ "),_("code",[e._v("annotation.history")]),e._v(" å¿«ç…§å®šä½ç¼©æ”¾ååŒºåŸŸé”™ä½çš„é—®é¢˜ï¼›"),_("code",[e._v("ImageModel._updateRegionsSizes()")]),e._v(" ä¼šåœ¨ç¼©æ”¾æˆ–å®¹å™¨å°ºå¯¸å˜åŒ–æ—¶æ‰¹é‡æ›´æ–°åŒºåŸŸåæ ‡ï¼Œå¿…è¦æ—¶åœ¨è¯¥å‡½æ•°å†…æ·»åŠ æ—¥å¿—ã€‚")]),e._v(" "),_("li",[e._v("å¼€å¯ "),_("code",[e._v("FF_DEV_3793")]),e._v(" æ—¶ï¼Œæ³¨æ„åæ ‡ç³»åˆ‡æ¢ä¸ºç»å¯¹åƒç´ ï¼Œå·¥å…·éœ€è¯»å– "),_("code",[e._v("zoomedPixelSize")]),e._v(" ä»¥é¿å…ç‚¹å‡»æ¼‚ç§»ã€‚")]),e._v(" "),_("li",[e._v("åˆ©ç”¨ "),_("code",[e._v("ImageModel.suggestions")]),e._v(" / "),_("code",[e._v("supportSuggestions")]),e._v(" å¯ä»¥åœ¨æ§åˆ¶å™¨ä¸­å®ç°æ¨¡å‹é¢„æ ‡æ³¨çš„è‡ªå®šä¹‰å‘ˆç°ï¼Œè°ƒè¯•æ—¶å¯é€šè¿‡æµè§ˆå™¨æ§åˆ¶å°æŸ¥çœ‹ "),_("code",[e._v("annotation.regionStore.suggestions")]),e._v("ã€‚")])]),e._v(" "),_("p",[e._v("é€šè¿‡ä»¥ä¸Šç»“æ„åŒ–ä¿¡æ¯ï¼Œå¯ä»¥å¿«é€Ÿå®šä½ Image ç»„ä»¶ä¸æ§åˆ¶å™¨ä¹‹é—´çš„åä½œå…³ç³»ï¼Œå¹¶åœ¨ä¿è¯ç°æœ‰å·¥å…·é“¾ä¸€è‡´æ€§çš„å‰æä¸‹æ‰©å±•æ–°çš„å›¾åƒæ ‡æ³¨èƒ½åŠ›ã€‚")])])}),[],!1,null,null,null);_.default=a.exports}}]);