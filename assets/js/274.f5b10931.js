(window.webpackJsonp=window.webpackJsonp||[]).push([[274],{988:function(t,s,a){"use strict";a.r(s);var n=a(2),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"next-js-ç¼“å­˜ä¸é‡æ–°éªŒè¯æœºåˆ¶è¯¦è§£"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#next-js-ç¼“å­˜ä¸é‡æ–°éªŒè¯æœºåˆ¶è¯¦è§£"}},[t._v("ğŸŒ™")]),t._v(" Next.js ç¼“å­˜ä¸é‡æ–°éªŒè¯æœºåˆ¶è¯¦è§£")]),t._v(" "),s("h3",{attrs:{id:"ä¸€ã€next-js-ç¼“å­˜æœºåˆ¶è¯¦è§£"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ä¸€ã€next-js-ç¼“å­˜æœºåˆ¶è¯¦è§£"}},[t._v("ğŸŒ™")]),t._v(" ä¸€ã€Next.js ç¼“å­˜æœºåˆ¶è¯¦è§£")]),t._v(" "),s("p",[t._v("Next.js çš„ç¼“å­˜æ˜¯ä¸€ä¸ªç²¾å¯†çš„å¤šå±‚ç³»ç»Ÿï¼Œå®ƒååŒå·¥ä½œï¼Œä»¥åœ¨æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯ä¹‹é—´æä¾›æè‡´çš„é€Ÿåº¦å’Œçµæ´»æ€§ã€‚")]),t._v(" "),s("h4",{attrs:{id:"ç¬¬ä¸€å±‚-è¯·æ±‚è®°å¿†åŒ–-request-memoization-å¨å¸ˆçš„çŸ­æœŸè®°å¿†"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ç¬¬ä¸€å±‚-è¯·æ±‚è®°å¿†åŒ–-request-memoization-å¨å¸ˆçš„çŸ­æœŸè®°å¿†"}},[t._v("ğŸŒ™")]),t._v(" "),s("strong",[t._v("ç¬¬ä¸€å±‚ï¼šè¯·æ±‚è®°å¿†åŒ– (Request Memoization) - å¨å¸ˆçš„çŸ­æœŸè®°å¿†")])]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("å®ƒæ˜¯ä»€ä¹ˆï¼Ÿ")]),t._v(" åœ¨"),s("strong",[t._v("å•æ¬¡æœåŠ¡ç«¯æ¸²æŸ“")]),t._v("è¿‡ç¨‹ä¸­ï¼Œå¯¹ "),s("code",[t._v("fetch")]),t._v(" è¯·æ±‚çš„è‡ªåŠ¨å»é‡ã€‚")]),t._v(" "),s("li",[s("strong",[t._v("å®ƒåœ¨å“ªé‡Œï¼Ÿ")]),t._v(" æœåŠ¡å™¨å†…å­˜ä¸­ï¼Œä»…åœ¨å•æ¬¡è¯·æ±‚-å“åº”å‘¨æœŸå†…æœ‰æ•ˆã€‚")]),t._v(" "),s("li",[s("strong",[t._v("åº•å±‚åŸç†ï¼š")]),t._v(" Next.js è‡ªåŠ¨ä½¿ç”¨ React çš„ "),s("code",[t._v("cache")]),t._v(" å‡½æ•°åŒ…è£¹äº†åŸç”Ÿçš„ "),s("code",[t._v("fetch")]),t._v(" APIã€‚å½“ä¸€ä¸ªè¢« "),s("code",[t._v("cache")]),t._v(" åŒ…è£¹çš„å‡½æ•°é¦–æ¬¡æ‰§è¡Œæ—¶ï¼ŒReact ä¼šç”¨å‡½æ•°å‚æ•°ä½œä¸ºé”®ï¼ˆKeyï¼‰ï¼Œç”¨è¿”å›å€¼ä½œä¸ºå€¼ï¼ˆValueï¼‰ï¼Œå­˜å…¥ä¸€ä¸ªä¸´æ—¶çš„ Map ä¸­ã€‚åœ¨åŒä¸€æ¬¡æ¸²æŸ“æ ‘ä¸­ï¼Œåç»­ä½¿ç”¨ç›¸åŒå‚æ•°çš„è°ƒç”¨ä¼šç›´æ¥å‘½ä¸­è¿™ä¸ª Mapï¼Œä»è€Œé¿å…äº†é‡å¤æ‰§è¡Œå‡½æ•°ä½“ï¼ˆå³é‡å¤çš„ç½‘ç»œè¯·æ±‚ï¼‰ã€‚è¿™æ˜¯ä¸€ç§å…¸å‹çš„**è®°å¿†åŒ–ï¼ˆMemoizationï¼‰**æ¨¡å¼ã€‚")]),t._v(" "),s("li",[s("strong",[t._v("å¦‚ä½•æ§åˆ¶ï¼š")]),t._v(" å¯¹äº "),s("code",[t._v("fetch")]),t._v(" æ˜¯å…¨è‡ªåŠ¨çš„ã€‚å¦‚æœä½ æœ‰ä¸ä½¿ç”¨ "),s("code",[t._v("fetch")]),t._v(" çš„è‡ªå®šä¹‰æ•°æ®è·å–å‡½æ•°ï¼ˆä¾‹å¦‚ç›´æ¥è°ƒç”¨æ•°æ®åº“å®¢æˆ·ç«¯ï¼‰ï¼Œä½ åº”è¯¥æ‰‹åŠ¨ç”¨ "),s("code",[t._v("import { cache } from 'react'")]),t._v(" åŒ…è£¹å®ƒï¼Œä»¥è·å¾—åŒæ ·çš„å¥½å¤„ã€‚")])]),t._v(" "),s("h4",{attrs:{id:"ç¬¬äºŒå±‚-æ•°æ®ç¼“å­˜-data-cache-å¤‡å¥½çš„é£Ÿæå†·åº“"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ç¬¬äºŒå±‚-æ•°æ®ç¼“å­˜-data-cache-å¤‡å¥½çš„é£Ÿæå†·åº“"}},[t._v("ğŸŒ™")]),t._v(" "),s("strong",[t._v("ç¬¬äºŒå±‚ï¼šæ•°æ®ç¼“å­˜ (Data Cache) - å¤‡å¥½çš„é£Ÿæå†·åº“")])]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("å®ƒæ˜¯ä»€ä¹ˆï¼Ÿ")]),t._v(" ä¸€ä¸ª"),s("strong",[t._v("æŒä¹…åŒ–")]),t._v("åœ¨æœåŠ¡å™¨ç«¯çš„æ•°æ®ç¼“å­˜ï¼Œç”¨äºå­˜å‚¨ "),s("code",[t._v("fetch")]),t._v(" è¯·æ±‚çš„ç»“æœã€‚è¿™æ˜¯å®ç° SSGï¼ˆé™æ€ç«™ç‚¹ç”Ÿæˆï¼‰å’Œ ISRï¼ˆå¢é‡é™æ€å†ç”Ÿï¼‰çš„åŸºçŸ³ã€‚")]),t._v(" "),s("li",[s("strong",[t._v("å®ƒåœ¨å“ªé‡Œï¼Ÿ")]),t._v(" é»˜è®¤åœ¨ Next.js æœåŠ¡å™¨çš„"),s("strong",[t._v("æ–‡ä»¶ç³»ç»Ÿ")]),t._v("ä¸­ï¼ˆ"),s("code",[t._v(".next/cache/fetch-cache")]),t._v("ï¼‰ã€‚åœ¨ Vercel ç­‰å¹³å°ä¸Šï¼Œå®ƒä¼šè¢«å­˜å‚¨åœ¨åˆ†å¸ƒå¼çš„è¾¹ç¼˜ç¼“å­˜ç½‘ç»œä¸­ï¼Œå®ç°å…¨çƒåŠ é€Ÿã€‚")]),t._v(" "),s("li",[s("strong",[t._v("åº•å±‚åŸç†ï¼š")]),t._v(" Next.js å¯¹ "),s("code",[t._v("fetch")]),t._v(" API è¿›è¡Œäº†æ‰©å±•ã€‚å½“ä½ åœ¨æœåŠ¡å™¨ç»„ä»¶ä¸­è°ƒç”¨ "),s("code",[t._v("fetch")]),t._v(" æ—¶ï¼š\n"),s("ol",[s("li",[s("strong",[t._v("ç”Ÿæˆç¼“å­˜é”®ï¼š")]),t._v(" Next.js ä¼šæ ¹æ®è¯·æ±‚çš„ URLã€æ–¹æ³•ï¼ˆGETï¼‰ã€Headers å’Œ Body ç”Ÿæˆä¸€ä¸ªå”¯ä¸€çš„å“ˆå¸Œé”®ã€‚")]),t._v(" "),s("li",[s("strong",[t._v("æŸ¥æ‰¾ç¼“å­˜ï¼š")]),t._v(" å®ƒä¼šæ‹¿ç€è¿™ä¸ªé”®å»æ–‡ä»¶ç³»ç»Ÿï¼ˆæˆ–è¾¹ç¼˜ç¼“å­˜ï¼‰ä¸­æŸ¥æ‰¾å¯¹åº”çš„ç¼“å­˜æ¡ç›®ã€‚")]),t._v(" "),s("li",[s("strong",[t._v("å¤„ç†ç¼“å­˜ï¼š")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("å‘½ä¸­ (Cache HIT):")]),t._v(" å¦‚æœæ‰¾åˆ°ç¼“å­˜ä¸”æœªè¿‡æœŸï¼ˆæ ¹æ® "),s("code",[t._v("revalidate")]),t._v(" æ—¶é—´åˆ¤æ–­ï¼‰ï¼Œåˆ™ç›´æ¥è¿”å›ç¼“å­˜æ•°æ®ï¼Œ"),s("strong",[t._v("å®Œå…¨è·³è¿‡ç½‘ç»œè¯·æ±‚")]),t._v("ã€‚")]),t._v(" "),s("li",[s("strong",[t._v("è¿‡æ—¶ (Cache STALE):")]),t._v(" å¦‚æœæ‰¾åˆ°ç¼“å­˜ä½†å·²è¿‡æœŸï¼ŒNext.js ä¼š"),s("strong",[t._v("ç«‹å³è¿”å›æ—§çš„ï¼ˆstaleï¼‰æ•°æ®")]),t._v("ç»™ç”¨æˆ·ï¼Œä¿è¯å¿«é€Ÿå“åº”ï¼ŒåŒæ—¶åœ¨"),s("strong",[t._v("åå°è§¦å‘ä¸€æ¬¡æ–°çš„ç½‘ç»œè¯·æ±‚")]),t._v("ä»¥æ›´æ–°ç¼“å­˜ã€‚è¿™è¢«ç§°ä¸º "),s("code",[t._v("stale-while-revalidate")]),t._v(" ç­–ç•¥ã€‚")]),t._v(" "),s("li",[s("strong",[t._v("æœªå‘½ä¸­ (Cache MISS):")]),t._v(" å¦‚æœæœªæ‰¾åˆ°ç¼“å­˜ï¼Œåˆ™å‘èµ·ç½‘ç»œè¯·æ±‚ï¼Œè·å–æ•°æ®åï¼Œå°†ç»“æœå†™å…¥ç¼“å­˜ï¼Œå†è¿”å›ç»™ç”¨æˆ·ã€‚")])])])])]),t._v(" "),s("li",[s("strong",[t._v("å¦‚ä½•æ§åˆ¶ï¼š")]),t._v(" é€šè¿‡ "),s("code",[t._v("fetch")]),t._v(" çš„ "),s("code",[t._v("next")]),t._v(" é€‰é¡¹ï¼š\n"),s("ul",[s("li",[s("code",[t._v("{ next: { revalidate: number } }")]),t._v(": è®¾ç½®ä»¥ç§’ä¸ºå•ä½çš„ç¼“å­˜æœ‰æ•ˆæœŸã€‚")]),t._v(" "),s("li",[s("code",[t._v("{ next: { tags: string[] } }")]),t._v(": ä¸ºç¼“å­˜æ‰“ä¸Šæ ‡ç­¾ï¼Œç”¨äºæŒ‰éœ€å¤±æ•ˆã€‚")]),t._v(" "),s("li",[s("code",[t._v("{ cache: 'no-store' }")]),t._v(": å®Œå…¨ç¦ç”¨æ­¤å±‚ç¼“å­˜ï¼Œå¼ºåˆ¶åŠ¨æ€è·å–ã€‚")]),t._v(" "),s("li",[s("code",[t._v("{ cache: 'force-cache' }")]),t._v(": é»˜è®¤è¡Œä¸ºï¼Œå¼ºåˆ¶ä½¿ç”¨ç¼“å­˜ã€‚")])])])]),t._v(" "),s("h4",{attrs:{id:"ç¬¬ä¸‰å±‚-å…¨è·¯ç”±ç¼“å­˜-full-route-cache-å³å–-å‡ºé¤å°"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ç¬¬ä¸‰å±‚-å…¨è·¯ç”±ç¼“å­˜-full-route-cache-å³å–-å‡ºé¤å°"}},[t._v("ğŸŒ™")]),t._v(" "),s("strong",[t._v("ç¬¬ä¸‰å±‚ï¼šå…¨è·¯ç”±ç¼“å­˜ (Full Route Cache) - â€œå³å–â€å‡ºé¤å°")])]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("å®ƒæ˜¯ä»€ä¹ˆï¼Ÿ")]),t._v(" ç¼“å­˜ä¸€ä¸ªè·¯ç”±å®Œæ•´æ¸²æŸ“åçš„"),s("strong",[t._v("æœ€ç»ˆäº§ç‰©")]),t._v("ï¼ŒåŒ…æ‹¬é™æ€çš„ HTML å’ŒåŠ¨æ€éƒ¨åˆ†çš„ RSC Payloadã€‚")]),t._v(" "),s("li",[s("strong",[t._v("å®ƒåœ¨å“ªé‡Œï¼Ÿ")]),t._v(" åœ¨æœåŠ¡å™¨æˆ– CDN è¾¹ç¼˜èŠ‚ç‚¹ä¸Šã€‚")]),t._v(" "),s("li",[s("strong",[t._v("åº•å±‚åŸç†ï¼š")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("é™æ€è·¯ç”±ï¼š")]),t._v(" å¦‚æœä¸€ä¸ªè·¯ç”±åŠå…¶æ‰€æœ‰å­ç»„ä»¶çš„æ•°æ®è·å–éƒ½"),s("strong",[t._v("å¯ä»¥è¢«ç¼“å­˜")]),t._v("ï¼ˆå³æ²¡æœ‰ä½¿ç”¨ "),s("code",[t._v("no-store")]),t._v(" æˆ–åŠ¨æ€å‡½æ•°å¦‚ "),s("code",[t._v("cookies()")]),t._v("ï¼‰ï¼ŒNext.js å°±è®¤ä¸ºè¯¥è·¯ç”±æ˜¯"),s("strong",[t._v("é™æ€çš„")]),t._v("ã€‚")]),t._v(" "),s("li",[s("strong",[t._v("æ„å»ºæ—¶ ("),s("code",[t._v("next build")]),t._v(")ï¼š")]),t._v(" Next.js ä¼šé¢„æ¸²æŸ“æ‰€æœ‰é™æ€è·¯ç”±ï¼Œå°†ç”Ÿæˆçš„ HTML å’Œ RSC Payload ä½œä¸ºé™æ€æ–‡ä»¶å­˜å…¥ç¼“å­˜ã€‚")]),t._v(" "),s("li",[s("strong",[t._v("è¯·æ±‚æ—¶ï¼š")]),t._v(" å¯¹é™æ€è·¯ç”±çš„è¯·æ±‚å¯ä»¥ç›´æ¥ç”± CDN æˆ–æœåŠ¡å™¨æä¾›è¿™äº›æ–‡ä»¶ï¼Œæ— éœ€æ‰§è¡Œä»»ä½• React æ¸²æŸ“é€»è¾‘ï¼Œé€Ÿåº¦æå¿«ã€‚")]),t._v(" "),s("li",[s("strong",[t._v("å¤±æ•ˆæœºåˆ¶ï¼š")]),t._v(" è¿™ä¸€å±‚çš„ç¼“å­˜æ˜¯"),s("strong",[t._v("è¢«åŠ¨å¤±æ•ˆ")]),t._v("çš„ã€‚å½“å®ƒæ‰€ä¾èµ–çš„**æ•°æ®ç¼“å­˜ï¼ˆç¬¬äºŒå±‚ï¼‰**å› ä¸ºæ—¶é—´åˆ°æœŸæˆ–æŒ‰éœ€ "),s("code",[t._v("revalidate")]),t._v(" è€Œå¤±æ•ˆæ—¶ï¼Œå…¨è·¯ç”±ç¼“å­˜ä¼šè¢«æ ‡è®°ä¸ºâ€œè„â€ã€‚åœ¨ä¸‹ä¸€ä¸ªè¯·æ±‚åˆ°è¾¾æ—¶ï¼ŒNext.js ä¼šé‡æ–°æ¸²æŸ“è¯¥é¡µé¢ï¼Œå¹¶å°†æ–°çš„äº§ç‰©æ›´æ–°åˆ°ç¼“å­˜ä¸­ã€‚ä½ ä¹Ÿå¯ä»¥é€šè¿‡ "),s("code",[t._v("revalidatePath")]),t._v(" ç›´æ¥ã€ä¸»åŠ¨åœ°è®©å®ƒå¤±æ•ˆã€‚")])])]),t._v(" "),s("li",[s("strong",[t._v("å¦‚ä½•æ§åˆ¶ï¼š")]),t._v(" é—´æ¥é€šè¿‡æ•°æ®ç¼“å­˜ç­–ç•¥æ§åˆ¶ï¼Œæˆ–é€šè¿‡ "),s("code",[t._v("revalidatePath('/path-to-revalidate')")]),t._v(" ä¸»åŠ¨æ§åˆ¶ã€‚")])]),t._v(" "),s("h4",{attrs:{id:"ç¬¬å››å±‚-è·¯ç”±ç¼“å­˜-router-cache-æœåŠ¡å‘˜çš„æ‰˜ç›˜"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ç¬¬å››å±‚-è·¯ç”±ç¼“å­˜-router-cache-æœåŠ¡å‘˜çš„æ‰˜ç›˜"}},[t._v("ğŸŒ™")]),t._v(" "),s("strong",[t._v("ç¬¬å››å±‚ï¼šè·¯ç”±ç¼“å­˜ (Router Cache) - æœåŠ¡å‘˜çš„æ‰˜ç›˜")])]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("å®ƒæ˜¯ä»€ä¹ˆï¼Ÿ")]),t._v(" ä¸€ä¸ª"),s("strong",[t._v("å®¢æˆ·ç«¯")]),t._v("çš„ã€å­˜åœ¨äº"),s("strong",[t._v("æµè§ˆå™¨å†…å­˜ä¸­")]),t._v("çš„ç¼“å­˜ã€‚å®ƒå­˜å‚¨äº†ç”¨æˆ·å·²è®¿é—®è¿‡çš„è·¯ç”±çš„ RSC Payloadã€‚")]),t._v(" "),s("li",[s("strong",[t._v("å®ƒåœ¨å“ªé‡Œï¼Ÿ")]),t._v(" ç”¨æˆ·æµè§ˆå™¨çš„å†…å­˜ä¸­ï¼Œåˆ·æ–°é¡µé¢å³æ¶ˆå¤±ã€‚")]),t._v(" "),s("li",[s("strong",[t._v("åº•å±‚åŸç†ï¼š")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("RSC Payloadï¼š")]),t._v(" è¿™æ˜¯ App Router çš„æ ¸å¿ƒã€‚æœåŠ¡å™¨ç»„ä»¶åœ¨æœåŠ¡å™¨ä¸Šæ¸²æŸ“åï¼Œä¸ä¼šç”Ÿæˆ HTML å­—ç¬¦ä¸²ï¼Œè€Œæ˜¯ç”Ÿæˆä¸€ç§ç´§å‡‘çš„ã€æè¿° UI ç»“æ„å’Œå†…å®¹çš„è™šæ‹Ÿ DOM æ ¼å¼ï¼ˆRSC Payloadï¼‰ã€‚")]),t._v(" "),s("li",[s("strong",[t._v("å¯¼èˆªï¼š")]),t._v(" å½“ä½ ä½¿ç”¨ "),s("code",[t._v("<Link>")]),t._v(" ç»„ä»¶å¯¼èˆªæ—¶ï¼ŒNext.js å®¢æˆ·ç«¯è·¯ç”±ä¼šï¼š\n"),s("ol",[s("li",[s("strong",[t._v("é¢„å– (Prefetch)ï¼š")]),t._v(" é»˜è®¤æƒ…å†µä¸‹ï¼Œå½“ "),s("code",[t._v("<Link>")]),t._v(" è¿›å…¥è§†å£ï¼Œå®¢æˆ·ç«¯ä¼š"),s("strong",[t._v("é¢„å…ˆè·å–")]),t._v("ç›®æ ‡è·¯ç”±çš„ RSC Payload å¹¶å­˜å…¥è·¯ç”±ç¼“å­˜ã€‚")]),t._v(" "),s("li",[s("strong",[t._v("ç‚¹å‡»å¯¼èˆªï¼š")]),t._v(" ç‚¹å‡»æ—¶ï¼Œå¦‚æœç¼“å­˜ä¸­å·²æœ‰ Payloadï¼ŒReact ä¼šç›´æ¥ç”¨å®ƒåœ¨å®¢æˆ·ç«¯æ¸²æŸ“å‡ºæ–°é¡µé¢çš„ UIï¼Œ"),s("strong",[t._v("æ— éœ€æ•´é¡µåˆ·æ–°")]),t._v("ï¼Œå®ç°äº†æå¿«çš„â€œåº”ç”¨å†…â€å¯¼èˆªä½“éªŒã€‚")]),t._v(" "),s("li",[s("strong",[t._v("çŠ¶æ€ä¿æŒï¼š")]),t._v(" ç”±äºåªæ˜¯éƒ¨åˆ†æ›´æ–°ï¼Œå…±äº«çš„ "),s("code",[t._v("layout.js")]),t._v(" ç»„ä»¶åŠå…¶ "),s("code",[t._v("useState")]),t._v(" çŠ¶æ€ä¼šè¢«ä¿ç•™ï¼Œä¸ä¼šé‡ç½®ã€‚")])])])])]),t._v(" "),s("li",[s("strong",[t._v("å¦‚ä½•æ§åˆ¶ï¼š")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("router.refresh()")]),t._v(": è¿™æ˜¯ä¸»è¦çš„æ§åˆ¶æ‰‹æ®µã€‚å®ƒä¼šæ¸…ç©º"),s("strong",[t._v("å½“å‰è·¯ç”±")]),t._v("çš„è·¯ç”±ç¼“å­˜ï¼Œå¹¶å‘æœåŠ¡å™¨è¯·æ±‚æœ€æ–°çš„ RSC Payloadï¼Œç”¨äºåœ¨ä¸ä¸¢å¤±å…±äº«å¸ƒå±€çŠ¶æ€çš„æƒ…å†µä¸‹æ›´æ–°é¡µé¢å†…å®¹ã€‚")]),t._v(" "),s("li",[s("strong",[t._v("ç¼“å­˜å¯¿å‘½ï¼š")]),t._v(" ç¼“å­˜æœ‰è‡ªåŠ¨çš„æœ‰æ•ˆæœŸï¼ˆåŠ¨æ€é¡µé¢30ç§’ï¼Œé™æ€é¡µé¢5åˆ†é’Ÿï¼‰ï¼Œä»¥ç¡®ä¿ç”¨æˆ·æœ€ç»ˆèƒ½çœ‹åˆ°æ›´æ–°ã€‚")])])])]),t._v(" "),s("hr"),t._v(" "),s("h3",{attrs:{id:"äºŒã€æœ€ä½³å®è·µ-best-practices"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#äºŒã€æœ€ä½³å®è·µ-best-practices"}},[t._v("ğŸŒ™")]),t._v(" äºŒã€æœ€ä½³å®è·µ (Best Practices)")]),t._v(" "),s("p",[t._v("æ ¹æ®ä½ çš„åº”ç”¨åœºæ™¯ï¼Œé€‰æ‹©åˆé€‚çš„ç¼“å­˜ç­–ç•¥ç»„åˆæ˜¯å…³é”®ã€‚")]),t._v(" "),s("h4",{attrs:{id:"_1-ä¼˜å…ˆé™æ€åŒ–-æœ€å¤§åŒ–æ€§èƒ½"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-ä¼˜å…ˆé™æ€åŒ–-æœ€å¤§åŒ–æ€§èƒ½"}},[t._v("ğŸŒ™")]),t._v(" 1. "),s("strong",[t._v("ä¼˜å…ˆé™æ€åŒ–ï¼šæœ€å¤§åŒ–æ€§èƒ½")])]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("åœºæ™¯ï¼š")]),t._v(" åšå®¢ã€æ–‡æ¡£ã€è¥é”€ç½‘ç«™ã€å…¬å¸å®˜ç½‘ç­‰å†…å®¹ä¸é¢‘ç¹å˜æ›´çš„é¡µé¢ã€‚")]),t._v(" "),s("li",[s("strong",[t._v("å®è·µï¼š")]),t._v(" "),s("ul",[s("li",[t._v("åœ¨è·å–æ•°æ®æ—¶ï¼Œ"),s("strong",[t._v("ä¸è¦")]),t._v("æ·»åŠ ä»»ä½• "),s("code",[t._v("revalidate")]),t._v(" æˆ– "),s("code",[t._v("cache")]),t._v(" é€‰é¡¹ï¼Œè®© "),s("code",[t._v("fetch")]),t._v(" ä½¿ç”¨é»˜è®¤çš„æ°¸ä¹…ç¼“å­˜ç­–ç•¥ã€‚")]),t._v(" "),s("li",[s("code",[t._v("next build")]),t._v(" ä¼šå°†è¿™äº›é¡µé¢å®Œå…¨é™æ€åŒ–ï¼Œéƒ¨ç½²åç”± CDN å…¨çƒåˆ†å‘ï¼Œæä¾›æœ€ä½³çš„åŠ è½½æ€§èƒ½ï¼ˆTTFB æä½ï¼‰ã€‚")]),t._v(" "),s("li",[t._v("å½“å†…å®¹æ›´æ–°æ—¶ï¼ˆä¾‹å¦‚ï¼Œé€šè¿‡ CMSï¼‰ï¼Œä½¿ç”¨"),s("strong",[t._v("æŒ‰éœ€é‡æ–°éªŒè¯ (On-Demand Revalidation)")]),t._v("ã€‚")])])])]),t._v(" "),s("h4",{attrs:{id:"_2-æŒ‰éœ€é‡æ–°éªŒè¯-å†…å®¹é©±åŠ¨å‹åº”ç”¨çš„é¦–é€‰"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-æŒ‰éœ€é‡æ–°éªŒè¯-å†…å®¹é©±åŠ¨å‹åº”ç”¨çš„é¦–é€‰"}},[t._v("ğŸŒ™")]),t._v(" 2. "),s("strong",[t._v("æŒ‰éœ€é‡æ–°éªŒè¯ï¼šå†…å®¹é©±åŠ¨å‹åº”ç”¨çš„é¦–é€‰")])]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("åœºæ™¯ï¼š")]),t._v(" æ–°é—»ç½‘ç«™ã€ç”µå•†å•†å“åˆ—è¡¨ã€å†…å®¹ç®¡ç†ç³»ç»Ÿï¼ˆCMSï¼‰é©±åŠ¨çš„é¡µé¢ã€‚")]),t._v(" "),s("li",[s("strong",[t._v("å®è·µï¼š")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("ä¸ºæ•°æ®æ‰“æ ‡ç­¾ (Tagging):")]),t._v(" åœ¨ "),s("code",[t._v("fetch")]),t._v(" æ—¶ï¼Œæ ¹æ®æ•°æ®ç±»å‹æ‰“ä¸Šç²¾ç»†çš„æ ‡ç­¾ã€‚"),s("div",{staticClass:"language-javascript line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è·å–æ‰€æœ‰æ–‡ç« åˆ—è¡¨")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("fetch")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'.../posts'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("next")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("tags")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'posts'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è·å–å•ç¯‡æ–‡ç« ")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("fetch")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v(".../posts/")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("id"),s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("next")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("tags")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'posts'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("post:")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("id"),s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br")])])]),t._v(" "),s("li",[s("strong",[t._v("è®¾ç½® Webhook:")]),t._v(" åœ¨ä½ çš„ CMS æˆ–åå°ç³»ç»Ÿä¸­ï¼Œå½“å†…å®¹å‘ç”Ÿå˜åŒ–æ—¶ï¼Œè°ƒç”¨ä¸€ä¸ªå®‰å…¨çš„ API è·¯ç”±ã€‚")]),t._v(" "),s("li",[s("strong",[t._v("åœ¨ API è·¯ç”±ä¸­è§¦å‘å¤±æ•ˆ:")]),s("div",{staticClass:"language-javascript line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// app/api/revalidate/route.js")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" revalidateTag "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'next/cache'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("POST")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("request")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" secret"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" tag "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" request"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("json")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("secret "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!==")]),t._v(" process"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("env"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("REVALIDATION_TOKEN")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" Response"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("json")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("message")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Invalid token'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("status")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("401")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("tag"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" Response"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("json")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("message")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Tag is required'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("status")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("400")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("revalidateTag")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("tag"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// e.g., 'posts' æˆ– 'post:123'")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" Response"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("json")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("revalidated")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("now")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Date"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("now")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br")])])]),t._v(" "),s("li",[s("strong",[t._v("ä¼˜åŠ¿ï¼š")]),t._v(" å®ç°äº†å†…å®¹çš„å³æ—¶æ›´æ–°ï¼ŒåŒæ—¶åœ¨ç»å¤§å¤šæ•°æ—¶é—´é‡Œäº«å—é™æ€ç¼“å­˜å¸¦æ¥çš„æ€§èƒ½ä¼˜åŠ¿ã€‚")])])])]),t._v(" "),s("h4",{attrs:{id:"_3-å¢é‡é™æ€å†ç”Ÿ-isr-å¹³è¡¡æ—¶æ•ˆä¸æ€§èƒ½"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-å¢é‡é™æ€å†ç”Ÿ-isr-å¹³è¡¡æ—¶æ•ˆä¸æ€§èƒ½"}},[t._v("ğŸŒ™")]),t._v(" 3. "),s("strong",[t._v("å¢é‡é™æ€å†ç”Ÿ (ISR)ï¼šå¹³è¡¡æ—¶æ•ˆä¸æ€§èƒ½")])]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("åœºæ™¯ï¼š")]),t._v(" ç¤¾äº¤åª’ä½“ Feedã€çƒ­é—¨æ¦œå•ã€è‚¡ç¥¨ä¿¡æ¯ç­‰éœ€è¦å®šæœŸåˆ·æ–°ä½†åˆèƒ½å®¹å¿çŸ­æš‚å»¶è¿Ÿçš„é¡µé¢ã€‚")]),t._v(" "),s("li",[s("strong",[t._v("å®è·µï¼š")]),t._v(" "),s("ul",[s("li",[t._v("ä½¿ç”¨åŸºäºæ—¶é—´çš„é‡æ–°éªŒè¯ã€‚"),s("div",{staticClass:"language-javascript line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ¯åˆ†é’Ÿæ›´æ–°ä¸€æ¬¡æ’è¡Œæ¦œ")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("fetch")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'.../leaderboard'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("next")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("revalidate")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("60")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br")])])]),t._v(" "),s("li",[s("strong",[t._v("ä¼˜åŠ¿ï¼š")]),t._v(" è‡ªåŠ¨ä¿æŒå†…å®¹æ–°é²œï¼Œæ— éœ€æ‰‹åŠ¨å¹²é¢„ï¼ŒåŒæ—¶æœ‰æ•ˆå‡å°‘äº†å¯¹æ•°æ®æºçš„è¯·æ±‚å‹åŠ›ã€‚")])])])]),t._v(" "),s("h4",{attrs:{id:"_4-ç­–ç•¥æ€§åœ°é€‰æ‹©åŠ¨æ€æ¸²æŸ“"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-ç­–ç•¥æ€§åœ°é€‰æ‹©åŠ¨æ€æ¸²æŸ“"}},[t._v("ğŸŒ™")]),t._v(" 4. "),s("strong",[t._v("ç­–ç•¥æ€§åœ°é€‰æ‹©åŠ¨æ€æ¸²æŸ“")])]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("åœºæ™¯ï¼š")]),t._v(" ç”¨æˆ·ä»ªè¡¨ç›˜ã€è´­ç‰©è½¦ã€åŸºäº Cookie æˆ–åœ°ç†ä½ç½®çš„ä¸ªæ€§åŒ–å†…å®¹ã€‚")]),t._v(" "),s("li",[s("strong",[t._v("å®è·µï¼š")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("å¯¹äºæ•´ä¸ªé¡µé¢ï¼š")]),t._v(" å¦‚æœæ•´ä¸ªé¡µé¢éƒ½å¿…é¡»æ˜¯åŠ¨æ€çš„ï¼Œå¯ä»¥åœ¨é¡µé¢æ–‡ä»¶é¡¶éƒ¨å¯¼å‡º "),s("code",[t._v("export const dynamic = 'force-dynamic';")]),t._v("ã€‚è¿™ç­‰åŒäºå°†é¡µé¢å†…æ‰€æœ‰ "),s("code",[t._v("fetch")]),t._v(" éƒ½è®¾ç½®ä¸º "),s("code",[t._v("cache: 'no-store'")]),t._v("ã€‚")]),t._v(" "),s("li",[s("strong",[t._v("å¯¹äºéƒ¨åˆ†ç»„ä»¶ï¼š")]),t._v(" è¿™æ˜¯ App Router çš„å¼ºå¤§ä¹‹å¤„ã€‚ä½ å¯ä»¥è®©ä¸€ä¸ªé¡µé¢ä¸»ä½“æ˜¯é™æ€ç¼“å­˜çš„ï¼Œä½†å…¶ä¸­ä¸€å°éƒ¨åˆ†ç»„ä»¶ï¼ˆå¦‚æ˜¾ç¤ºç”¨æˆ·åçš„ "),s("code",[t._v("Header")]),t._v("ï¼‰æ˜¯åŠ¨æ€çš„ã€‚åªéœ€åœ¨è¯¥ç»„ä»¶çš„æ•°æ®è·å–ä¸­ä½¿ç”¨ "),s("code",[t._v("cache: 'no-store'")]),t._v(" æˆ–åŠ¨æ€å‡½æ•° "),s("code",[t._v("cookies()")]),t._v("ã€"),s("code",[t._v("headers()")]),t._v("ï¼ŒNext.js ä¼šåœ¨è¯·æ±‚æ—¶åŠ¨æ€æ¸²æŸ“è¿™éƒ¨åˆ†ï¼Œç„¶åå°†å…¶ä½™é™æ€éƒ¨åˆ†ç»„åˆèµ·æ¥ã€‚")]),t._v(" "),s("li",[s("strong",[t._v("Server Actions:")]),t._v(" å¯¹äºè¡¨å•æäº¤ç­‰å†™æ“ä½œï¼Œä½¿ç”¨ Server Actionsã€‚æˆåŠŸåï¼Œè°ƒç”¨ "),s("code",[t._v("revalidateTag")]),t._v(" æˆ– "),s("code",[t._v("revalidatePath")]),t._v(" æ¥æ›´æ–°å—å½±å“çš„ç¼“å­˜ï¼Œå®ç°æ•°æ®çš„é—­ç¯ã€‚")])])])]),t._v(" "),s("h4",{attrs:{id:"_5-ç†è§£å®¢æˆ·ç«¯ç¼“å­˜çš„äº¤äº’"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-ç†è§£å®¢æˆ·ç«¯ç¼“å­˜çš„äº¤äº’"}},[t._v("ğŸŒ™")]),t._v(" 5. "),s("strong",[t._v("ç†è§£å®¢æˆ·ç«¯ç¼“å­˜çš„äº¤äº’")])]),t._v(" "),s("ul",[s("li",[s("strong",[s("code",[t._v("router.push('/path')")]),t._v(" vs "),s("code",[t._v("router.refresh()")])]),t._v(" "),s("ul",[s("li",[t._v("ä½¿ç”¨ "),s("code",[t._v("<Link>")]),t._v(" æˆ– "),s("code",[t._v("router.push()")]),t._v(" è¿›è¡Œå¯¼èˆªæ—¶ï¼Œä¼˜å…ˆä½¿ç”¨"),s("strong",[t._v("è·¯ç”±ç¼“å­˜ï¼ˆç¬¬å››å±‚ï¼‰")]),t._v("ï¼Œæ—¨åœ¨å¿«é€Ÿåˆ‡æ¢è§†å›¾ã€‚")]),t._v(" "),s("li",[t._v("å½“éœ€è¦"),s("strong",[t._v("åœ¨å½“å‰é¡µé¢")]),t._v("é‡æ–°è·å–æœåŠ¡å™¨æ•°æ®æ—¶ï¼ˆä¾‹å¦‚ï¼Œæäº¤è¯„è®ºååˆ·æ–°è¯„è®ºåˆ—è¡¨ï¼‰ï¼Œä½¿ç”¨ "),s("code",[t._v("router.refresh()")]),t._v("ã€‚å®ƒä¼šç»•è¿‡è·¯ç”±ç¼“å­˜ï¼Œå‘æœåŠ¡å™¨è¯·æ±‚æ–°æ•°æ®ï¼Œå¹¶å¹³æ»‘æ›´æ–° UIã€‚")])])])]),t._v(" "),s("h3",{attrs:{id:"æ€»ç»“"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#æ€»ç»“"}},[t._v("ğŸŒ™")]),t._v(" æ€»ç»“")]),t._v(" "),s("p",[t._v("æŒæ¡ Next.js ç¼“å­˜çš„å…³é”®åœ¨äºç†è§£å…¶åˆ†å±‚æ¨¡å‹ï¼Œå¹¶æ ¹æ®ä½ çš„ä¸šåŠ¡éœ€æ±‚åšå‡ºæ˜æ™ºçš„é€‰æ‹©ï¼š")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("é»˜è®¤é™æ€ï¼ŒæŒ‰éœ€æ›´æ–°")]),t._v(" æ˜¯æœ€é«˜æ€§èƒ½çš„é»„é‡‘æ³•åˆ™ã€‚")]),t._v(" "),s("li",[t._v("ä½¿ç”¨ "),s("strong",[t._v("Tags")]),t._v(" å’Œ "),s("strong",[s("code",[t._v("revalidateTag")])]),t._v(" æ¥æ„å»ºäº‹ä»¶é©±åŠ¨çš„ã€å³æ—¶æ›´æ–°çš„ç³»ç»Ÿã€‚")]),t._v(" "),s("li",[t._v("ä½¿ç”¨ "),s("strong",[s("code",[t._v("revalidate: seconds")])]),t._v(" æ¥å®ç°è‡ªåŠ¨ã€å®šæœŸçš„å†…å®¹åˆ·æ–°ã€‚")]),t._v(" "),s("li",[t._v("ä»…åœ¨ç»å¯¹å¿…è¦æ—¶æ‰é€‰æ‹© "),s("strong",[s("code",[t._v("cache: 'no-store'")])]),t._v(" æˆ– "),s("code",[t._v("force-dynamic")]),t._v("ã€‚")]),t._v(" "),s("li",[t._v("å–„ç”¨ "),s("strong",[s("code",[t._v("router.refresh()")])]),t._v(" æ¥åœ¨å®¢æˆ·ç«¯è§¦å‘æœåŠ¡ç«¯æ•°æ®çš„åˆ·æ–°ã€‚")])]),t._v(" "),s("p",[t._v("é€šè¿‡è¿™å¥—ç»„åˆæ‹³ï¼Œå¯ä»¥ä¸ºç”¨æˆ·æä¾›é—ªç”µèˆ¬çš„åŠ è½½é€Ÿåº¦å’Œæ— ç¼çš„å¯¼èˆªä½“éªŒï¼ŒåŒæ—¶ä¿æŒåå°æ•°æ®çš„çµæ´»æ€§å’Œå®æ—¶æ€§ã€‚")])])}),[],!1,null,null,null);s.default=e.exports}}]);