(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{614:function(s,t,a){s.exports=a.p+"assets/img/image-20221227085420030.0723d683.png"},615:function(s,t,a){s.exports=a.p+"assets/img/image-20221227090056000.e99cc756.png"},616:function(s,t,a){s.exports=a.p+"assets/img/components-of-kubernetes.51120ad2.svg"},617:function(s,t,a){s.exports=a.p+"assets/img/spaces_k8s_architecture.9279a37a.png"},618:function(s,t,a){s.exports=a.p+"assets/img/image-20221010211512078-5407715.3c9a1dd7.png"},619:function(s,t,a){s.exports=a.p+"assets/img/image-20221227143250604.520c28a8.png"},620:function(s,t,a){s.exports=a.p+"assets/img/image-20230307134050380.27889bfb.png"},621:function(s,t,a){s.exports=a.p+"assets/img/image-20230307132243053.f41757e0.png"},622:function(s,t,a){s.exports=a.p+"assets/img/image-20230422104305506.f1bda256.png"},879:function(s,t,a){"use strict";a.r(t);var n=a(2),e=Object(n.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"kubernetes"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#kubernetes"}},[s._v("ğŸŒ™")]),s._v(" Kubernetes")]),s._v(" "),t("p",[s._v("å®˜ç½‘: https://kubernetes.io/zh-cn/")]),s._v(" "),t("h2",{attrs:{id:"ç¬¬ä¸€ç« -åˆè¯†-kubernetes"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ç¬¬ä¸€ç« -åˆè¯†-kubernetes"}},[s._v("ğŸŒ™")]),s._v(" ç¬¬ä¸€ç«  åˆè¯† Kubernetes")]),s._v(" "),t("ul",[t("li",[s._v("Kubernetes ç®€ä»‹")]),s._v(" "),t("li",[s._v("ä¸ºä»€ä¹ˆéœ€è¦ Kubernetes")]),s._v(" "),t("li",[s._v("Kubernetes èƒ½åšä»€ä¹ˆ")]),s._v(" "),t("li",[s._v("Kubernetes ä¸æ˜¯ä»€ä¹ˆ?")])]),s._v(" "),t("h3",{attrs:{id:"_1-ç®€ä»‹"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-ç®€ä»‹"}},[s._v("ğŸŒ™")]),s._v(" 1 ç®€ä»‹")]),s._v(" "),t("blockquote",[t("p",[s._v("æ‘˜å–å®˜ç½‘: https://kubernetes.io/zh-cn/docs/concepts/overview/")])]),s._v(" "),t("p",[t("strong",[s._v("Kubernetes")]),s._v(" è¿™ä¸ªåå­—æºäºå¸Œè…Šè¯­ï¼Œæ„ä¸º"),t("code",[s._v("èˆµæ‰‹")]),s._v("æˆ–"),t("code",[s._v("é£è¡Œå‘˜")]),s._v("ã€‚k8s è¿™ä¸ªç¼©å†™æ˜¯å› ä¸º k å’Œ s ä¹‹é—´æœ‰å…«ä¸ªå­—ç¬¦çš„å…³ç³»ã€‚ Google åœ¨ 2014 å¹´å¼€æºäº† Kubernetes é¡¹ç›®ã€‚ Kubernetes å»ºç«‹åœ¨ "),t("a",{attrs:{href:"https://research.google/pubs/pub43438",target:"_blank",rel:"noopener noreferrer"}},[s._v("Google å¤§è§„æ¨¡è¿è¡Œç”Ÿäº§å·¥ä½œè´Ÿè½½åå‡ å¹´ç»éªŒ"),t("OutboundLink")],1),s._v("çš„åŸºç¡€ä¸Šï¼Œ ç»“åˆäº†ç¤¾åŒºä¸­æœ€ä¼˜ç§€çš„æƒ³æ³•å’Œå®è·µã€‚")]),s._v(" "),t("p",[t("img",{attrs:{src:a(614),alt:"image-20221227085420030"}})]),s._v(" "),t("p",[s._v("Kubernetes æ˜¯ä¸€ä¸ªå¯ç§»æ¤ã€å¯æ‰©å±•çš„å¼€æºå¹³å°ï¼Œç”¨äº"),t("code",[s._v("ç®¡ç†å®¹å™¨åŒ–çš„å·¥ä½œè´Ÿè½½å’ŒæœåŠ¡ï¼Œå¯ä¿ƒè¿›å£°æ˜å¼é…ç½®å’Œè‡ªåŠ¨åŒ–")]),s._v("ã€‚ Kubernetes æ‹¥æœ‰ä¸€ä¸ªåºå¤§ä¸”å¿«é€Ÿå¢é•¿çš„ç”Ÿæ€ï¼Œå…¶æœåŠ¡ã€æ”¯æŒå’Œå·¥å…·çš„ä½¿ç”¨èŒƒå›´ç›¸å½“å¹¿æ³›ã€‚")]),s._v(" "),t("p",[s._v("ä» 2014 å¹´ç¬¬ä¸€ä¸ªç‰ˆæœ¬å‘å¸ƒä»¥æ¥ï¼ŒKuberetes è¿…é€Ÿè·å¾—å¼€æºç¤¾åŒºçš„è¿½æ§ï¼ŒåŒ…æ‹¬ Red Hatã€VMware åœ¨å†…çš„å¾ˆå¤šæœ‰å½±å“åŠ›çš„å…¬å¸åŠ å…¥åˆ°å¼€å‘å’Œæ¨å¹¿çš„é˜µè¥ã€‚ç›®å‰ Kubernetes å·²ç»æˆä¸ºå‘å±•æœ€å¿«ã€å¸‚åœºå æœ‰ç‡æœ€é«˜çš„å®¹å™¨ç¼–æ’å¼•æ”€äº§å“ã€‚")]),s._v(" "),t("h3",{attrs:{id:"_2-ä¸ºä»€ä¹ˆéœ€è¦-k8s"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-ä¸ºä»€ä¹ˆéœ€è¦-k8s"}},[s._v("ğŸŒ™")]),s._v(" 2 ä¸ºä»€ä¹ˆéœ€è¦ k8s")]),s._v(" "),t("blockquote",[t("p",[s._v("æ‘˜å–å®˜ç½‘: https://kubernetes.io/zh-cn/docs/concepts/overview/")])]),s._v(" "),t("p",[t("img",{attrs:{src:a(615),alt:"image-20221227090056000"}})]),s._v(" "),t("p",[t("strong",[s._v("ä¼ ç»Ÿéƒ¨ç½²æ—¶ä»£ï¼š")])]),s._v(" "),t("p",[s._v("æ—©æœŸï¼Œå„ä¸ªç»„ç»‡æ˜¯åœ¨ç‰©ç†æœåŠ¡å™¨ä¸Šè¿è¡Œåº”ç”¨ç¨‹åºã€‚"),t("code",[s._v("ç”±äºæ— æ³•é™åˆ¶åœ¨ç‰©ç†æœåŠ¡å™¨ä¸­è¿è¡Œçš„åº”ç”¨ç¨‹åºèµ„æºä½¿ç”¨ï¼Œå› æ­¤ä¼šå¯¼è‡´èµ„æºåˆ†é…é—®é¢˜")]),s._v("ã€‚ ä¾‹å¦‚ï¼Œå¦‚æœåœ¨åŒä¸€å°ç‰©ç†æœåŠ¡å™¨ä¸Šè¿è¡Œå¤šä¸ªåº”ç”¨ç¨‹åºï¼Œ åˆ™å¯èƒ½ä¼šå‡ºç°ä¸€ä¸ªåº”ç”¨ç¨‹åºå ç”¨å¤§éƒ¨åˆ†èµ„æºçš„æƒ…å†µï¼Œè€Œå¯¼è‡´å…¶ä»–åº”ç”¨ç¨‹åºçš„æ€§èƒ½ä¸‹é™ã€‚ "),t("code",[s._v("ä¸€ç§è§£å†³æ–¹æ¡ˆæ˜¯å°†æ¯ä¸ªåº”ç”¨ç¨‹åºéƒ½è¿è¡Œåœ¨ä¸åŒçš„ç‰©ç†æœåŠ¡å™¨ä¸Šï¼Œ ä½†æ˜¯å½“æŸä¸ªåº”ç”¨ç¨‹å¼èµ„æºåˆ©ç”¨ç‡ä¸é«˜æ—¶ï¼Œå‰©ä½™èµ„æºæ— æ³•è¢«åˆ†é…ç»™å…¶ä»–åº”ç”¨ç¨‹å¼ï¼Œ è€Œä¸”ç»´æŠ¤è®¸å¤šç‰©ç†æœåŠ¡å™¨çš„æˆæœ¬å¾ˆé«˜")]),s._v("ã€‚")]),s._v(" "),t("p",[t("strong",[s._v("è™šæ‹ŸåŒ–éƒ¨ç½²æ—¶ä»£ï¼š")])]),s._v(" "),t("p",[s._v("å› æ­¤ï¼Œè™šæ‹ŸåŒ–æŠ€æœ¯è¢«å¼•å…¥äº†ã€‚è™šæ‹ŸåŒ–æŠ€æœ¯å…è®¸ä½ åœ¨å•ä¸ªç‰©ç†æœåŠ¡å™¨çš„ CPU ä¸Šè¿è¡Œå¤šå°è™šæ‹Ÿæœºï¼ˆVMï¼‰ã€‚ "),t("code",[s._v("è™šæ‹ŸåŒ–èƒ½ä½¿åº”ç”¨ç¨‹åºåœ¨ä¸åŒ VM ä¹‹é—´è¢«å½¼æ­¤éš”ç¦»ï¼Œä¸”èƒ½æä¾›ä¸€å®šç¨‹åº¦çš„å®‰å…¨æ€§ï¼Œ å› ä¸ºä¸€ä¸ªåº”ç”¨ç¨‹åºçš„ä¿¡æ¯ä¸èƒ½è¢«å¦ä¸€åº”ç”¨ç¨‹åºéšæ„è®¿é—®")]),s._v("ã€‚")]),s._v(" "),t("p",[s._v("è™šæ‹ŸåŒ–æŠ€æœ¯èƒ½å¤Ÿæ›´å¥½åœ°åˆ©ç”¨ç‰©ç†æœåŠ¡å™¨çš„èµ„æºï¼Œå¹¶ä¸”å› ä¸ºå¯è½»æ¾åœ°æ·»åŠ æˆ–æ›´æ–°åº”ç”¨ç¨‹åºï¼Œ è€Œå› æ­¤å¯ä»¥å…·æœ‰æ›´é«˜çš„å¯æ‰©ç¼©æ€§ï¼Œä»¥åŠé™ä½ç¡¬ä»¶æˆæœ¬ç­‰ç­‰çš„å¥½å¤„ã€‚ é€šè¿‡è™šæ‹ŸåŒ–ï¼Œä½ å¯ä»¥å°†ä¸€ç»„ç‰©ç†èµ„æºå‘ˆç°ä¸ºå¯ä¸¢å¼ƒçš„è™šæ‹Ÿæœºé›†ç¾¤ã€‚")]),s._v(" "),t("p",[t("code",[s._v("æ¯ä¸ª VM æ˜¯ä¸€å°å®Œæ•´çš„è®¡ç®—æœºï¼Œåœ¨è™šæ‹ŸåŒ–ç¡¬ä»¶ä¹‹ä¸Šè¿è¡Œæ‰€æœ‰ç»„ä»¶ï¼ŒåŒ…æ‹¬å…¶è‡ªå·±çš„æ“ä½œç³»ç»Ÿ")]),s._v("ã€‚")]),s._v(" "),t("p",[t("strong",[s._v("å®¹å™¨éƒ¨ç½²æ—¶ä»£ï¼š")])]),s._v(" "),t("p",[s._v("å®¹å™¨ç±»ä¼¼äº VMï¼Œä½†æ˜¯æ›´å®½æ¾çš„éš”ç¦»ç‰¹æ€§ï¼Œä½¿å®¹å™¨ä¹‹é—´å¯ä»¥å…±äº«æ“ä½œç³»ç»Ÿï¼ˆOSï¼‰ã€‚ å› æ­¤ï¼Œå®¹å™¨æ¯”èµ· VM è¢«è®¤ä¸ºæ˜¯æ›´è½»é‡çº§çš„ã€‚ä¸”ä¸ VM ç±»ä¼¼ï¼Œæ¯ä¸ªå®¹å™¨éƒ½å…·æœ‰è‡ªå·±çš„æ–‡ä»¶ç³»ç»Ÿã€CPUã€å†…å­˜ã€è¿›ç¨‹ç©ºé—´ç­‰ã€‚ ç”±äºå®ƒä»¬ä¸åŸºç¡€æ¶æ„åˆ†ç¦»ï¼Œå› æ­¤å¯ä»¥è·¨äº‘å’Œ OS å‘è¡Œç‰ˆæœ¬è¿›è¡Œç§»æ¤ã€‚"),t("code",[s._v("å®¹å™¨çš„å‡ºç°è§£å†³äº†åº”ç”¨å’ŒåŸºç¡€ç¯å¢ƒå¼‚æ„çš„é—®é¢˜ï¼Œè®©åº”ç”¨å¯ä»¥åšåˆ°ä¸€æ¬¡æ„å»ºï¼Œå¤šæ¬¡éƒ¨ç½²")]),s._v("ã€‚ä¸å¯å¦è®¤å®¹å™¨æ˜¯æ‰“åŒ…å’Œè¿è¡Œåº”ç”¨ç¨‹åºçš„å¥½æ–¹å¼ï¼Œå› æ­¤å®¹å™¨æ–¹å¼éƒ¨ç½²å˜å¾—æµè¡Œèµ·æ¥ã€‚ä½†éšç€å®¹å™¨éƒ¨ç½²æµè¡Œï¼Œä»…ä»…æ˜¯åŸºäºå®¹å™¨çš„éƒ¨ç½²ä»æœ‰ä¸€äº›é—®é¢˜æ²¡æœ‰è§£å†³:")]),s._v(" "),t("ul",[t("li",[s._v("ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œ ä½ éœ€è¦ç®¡ç†è¿è¡Œç€åº”ç”¨ç¨‹åºçš„å®¹å™¨ï¼Œå¹¶ç¡®ä¿æœåŠ¡ä¸ä¼šä¸‹çº¿ã€‚ ä¾‹å¦‚ï¼Œå¦‚æœä¸€ä¸ªå®¹å™¨å‘ç”Ÿæ•…éšœï¼Œåˆ™ä½ éœ€è¦å¯åŠ¨å¦ä¸€ä¸ªå®¹å™¨ã€‚")]),s._v(" "),t("li",[s._v("é«˜å¹¶å‘æ—¶ï¼Œä½ éœ€è¦å¯åŠ¨å¤šä¸ªåº”ç”¨ç¨‹åºå®¹å™¨ä¸ºç³»ç»Ÿæé«˜é«˜å¯ç”¨ï¼Œå¹¶ä¿è¯å¤šä¸ªå®¹å™¨èƒ½è´Ÿè½½å‡è¡¡ã€‚")]),s._v(" "),t("li",[s._v("åœ¨ç»´æŠ¤ã€å‡çº§ç‰ˆæœ¬æ—¶ï¼Œä½ éœ€è¦å°†è¿è¡Œåº”ç”¨ç¨‹åºå®¹å™¨ä»æ–°éƒ¨ç½²ï¼Œéƒ¨ç½²æ—¶å¿…é¡»å¯¹ä¹‹å‰åº”ç”¨å®¹å™¨å¤‡ä»½ï¼Œä¸€æ—¦å‡ºç°é”™è¯¯ï¼Œéœ€è¦æ‰‹åŠ¨å¯åŠ¨ä¹‹å‰å®¹å™¨ä¿è¯ç³»ç»Ÿè¿è¡Œã€‚")])]),s._v(" "),t("p",[t("code",[s._v("å¦‚æœä»¥ä¸Šè¡Œä¸ºäº¤ç”±ç»™ç³»ç»Ÿå¤„ç†ï¼Œæ˜¯ä¸æ˜¯ä¼šæ›´å®¹æ˜“ä¸€äº›ï¼Ÿé‚£ä¹ˆè°èƒ½åšåˆ°è¿™äº›?")])]),s._v(" "),t("h3",{attrs:{id:"_3-k8s-èƒ½åšä»€ä¹ˆ"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-k8s-èƒ½åšä»€ä¹ˆ"}},[s._v("ğŸŒ™")]),s._v(" 3 k8s èƒ½åšä»€ä¹ˆ?")]),s._v(" "),t("blockquote",[t("p",[s._v("æ‘˜å–å®˜ç½‘: https://kubernetes.io/zh-cn/docs/concepts/overview/")])]),s._v(" "),t("p",[s._v("è¿™å°±æ˜¯ Kubernetes è¦æ¥åšçš„äº‹æƒ…ï¼ "),t("code",[s._v("Kubernetes ä¸ºä½ æä¾›äº†ä¸€ä¸ªå¯å¼¹æ€§è¿è¡Œåˆ†å¸ƒå¼ç³»ç»Ÿçš„æ¡†æ¶")]),s._v("ã€‚ Kubernetes ä¼šæ»¡è¶³ä½ çš„æ‰©å±•è¦æ±‚ã€æ•…éšœè½¬ç§»ä½ çš„åº”ç”¨ã€æä¾›éƒ¨ç½²æ¨¡å¼ç­‰ã€‚Kubernetes ä¸ºä½ æä¾›ï¼š")]),s._v(" "),t("ul",[t("li",[t("p",[t("strong",[s._v("æœåŠ¡å‘ç°å’Œè´Ÿè½½å‡è¡¡")])]),s._v(" "),t("p",[s._v("Kubernetes å¯ä»¥ä½¿ç”¨ DNS åç§°æˆ–è‡ªå·±çš„ IP åœ°å€æ¥æš´éœ²å®¹å™¨ã€‚ å¦‚æœè¿›å…¥å®¹å™¨çš„æµé‡å¾ˆå¤§ï¼Œ Kubernetes å¯ä»¥è´Ÿè½½å‡è¡¡å¹¶åˆ†é…ç½‘ç»œæµé‡ï¼Œä»è€Œä½¿éƒ¨ç½²ç¨³å®šã€‚")])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("å­˜å‚¨ç¼–æ’")])]),s._v(" "),t("p",[s._v("Kubernetes å…è®¸ä½ è‡ªåŠ¨æŒ‚è½½ä½ é€‰æ‹©çš„å­˜å‚¨ç³»ç»Ÿï¼Œä¾‹å¦‚æœ¬åœ°å­˜å‚¨ã€å…¬å…±äº‘æä¾›å•†ç­‰ã€‚")])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("è‡ªåŠ¨éƒ¨ç½²å’Œå›æ»š")])]),s._v(" "),t("p",[s._v("ä½ å¯ä»¥ä½¿ç”¨ Kubernetes æè¿°å·²éƒ¨ç½²å®¹å™¨çš„æ‰€éœ€çŠ¶æ€ï¼Œ å®ƒå¯ä»¥ä»¥å—æ§çš„é€Ÿç‡å°†å®é™…çŠ¶æ€æ›´æ”¹ä¸ºæœŸæœ›çŠ¶æ€ã€‚ ä¾‹å¦‚ï¼Œä½ å¯ä»¥è‡ªåŠ¨åŒ– Kubernetes æ¥ä¸ºä½ çš„éƒ¨ç½²åˆ›å»ºæ–°å®¹å™¨ï¼Œ åˆ é™¤ç°æœ‰å®¹å™¨å¹¶å°†å®ƒä»¬çš„æ‰€æœ‰èµ„æºç”¨äºæ–°å®¹å™¨ã€‚")])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("è‡ªåŠ¨å®Œæˆè£…ç®±è®¡ç®—/è‡ªåŠ¨èµ„æºè°ƒåº¦")])]),s._v(" "),t("p",[s._v("ä½ ä¸º Kubernetes æä¾›è®¸å¤šèŠ‚ç‚¹ç»„æˆçš„é›†ç¾¤ï¼Œåœ¨è¿™ä¸ªé›†ç¾¤ä¸Šè¿è¡Œå®¹å™¨åŒ–çš„ä»»åŠ¡ã€‚ ä½ å‘Šè¯‰ Kubernetes æ¯ä¸ªå®¹å™¨éœ€è¦å¤šå°‘ CPU å’Œå†…å­˜ (RAM)ã€‚ Kubernetes å¯ä»¥å°†è¿™äº›å®¹å™¨æŒ‰å®é™…æƒ…å†µè°ƒåº¦åˆ°ä½ çš„èŠ‚ç‚¹ä¸Šï¼Œä»¥æœ€ä½³æ–¹å¼åˆ©ç”¨ä½ çš„èµ„æºã€‚")])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("è‡ªæˆ‘ä¿®å¤/è‡ªæ„ˆèƒ½åŠ›")])]),s._v(" "),t("p",[s._v("Kubernetes å°†é‡æ–°å¯åŠ¨å¤±è´¥çš„å®¹å™¨ã€æ›¿æ¢å®¹å™¨ã€æ€æ­»ä¸å“åº”ç”¨æˆ·å®šä¹‰çš„è¿è¡ŒçŠ¶å†µæ£€æŸ¥çš„å®¹å™¨ï¼Œ å¹¶ä¸”åœ¨å‡†å¤‡å¥½æœåŠ¡ä¹‹å‰ä¸å°†å…¶é€šå‘Šç»™å®¢æˆ·ç«¯ã€‚")])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("å¯†é’¥ä¸é…ç½®ç®¡ç†")])]),s._v(" "),t("p",[s._v("Kubernetes å…è®¸ä½ å­˜å‚¨å’Œç®¡ç†æ•æ„Ÿä¿¡æ¯ï¼Œä¾‹å¦‚å¯†ç ã€OAuth ä»¤ç‰Œå’Œ ssh å¯†é’¥ã€‚ ä½ å¯ä»¥åœ¨ä¸é‡å»ºå®¹å™¨é•œåƒçš„æƒ…å†µä¸‹éƒ¨ç½²å’Œæ›´æ–°å¯†é’¥å’Œåº”ç”¨ç¨‹åºé…ç½®ï¼Œä¹Ÿæ— éœ€åœ¨å †æ ˆé…ç½®ä¸­æš´éœ²å¯†é’¥ã€‚")])])]),s._v(" "),t("h3",{attrs:{id:"_4-k8s-ä¸æ˜¯ä»€ä¹ˆ"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-k8s-ä¸æ˜¯ä»€ä¹ˆ"}},[s._v("ğŸŒ™")]),s._v(" 4 k8s ä¸æ˜¯ä»€ä¹ˆ?")]),s._v(" "),t("p",[t("code",[s._v("Kubernetes ä¸æ˜¯ä¼ ç»Ÿçš„ã€åŒ…ç½—ä¸‡è±¡çš„ PaaSï¼ˆå¹³å°å³æœåŠ¡ï¼‰ç³»ç»Ÿ")]),s._v("ã€‚ ç”±äº Kubernetes æ˜¯åœ¨å®¹å™¨çº§åˆ«è¿è¡Œï¼Œè€Œéåœ¨ç¡¬ä»¶çº§åˆ«ï¼Œå®ƒæä¾›äº† PaaS äº§å“å…±æœ‰çš„ä¸€äº›æ™®éé€‚ç”¨çš„åŠŸèƒ½ï¼Œ ä¾‹å¦‚éƒ¨ç½²ã€æ‰©å±•ã€è´Ÿè½½å‡è¡¡ï¼Œå…è®¸ç”¨æˆ·é›†æˆä»–ä»¬çš„æ—¥å¿—è®°å½•ã€ç›‘æ§å’Œè­¦æŠ¥æ–¹æ¡ˆã€‚ ä½†æ˜¯ï¼Œ"),t("code",[s._v("Kubernetes ä¸æ˜¯å•ä½“å¼ï¼ˆmonolithicï¼‰ç³»ç»Ÿ")]),s._v("ï¼Œé‚£äº›é»˜è®¤è§£å†³æ–¹æ¡ˆéƒ½æ˜¯å¯é€‰ã€å¯æ’æ‹”çš„ã€‚ Kubernetes ä¸ºæ„å»ºå¼€å‘äººå‘˜å¹³å°æä¾›äº†åŸºç¡€ï¼Œä½†æ˜¯åœ¨é‡è¦çš„åœ°æ–¹ä¿ç•™äº†ç”¨æˆ·é€‰æ‹©æƒï¼Œèƒ½æœ‰æ›´é«˜çš„çµæ´»æ€§ã€‚")]),s._v(" "),t("p",[s._v("Kubernetesï¼š")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("ä¸é™åˆ¶æ”¯æŒçš„åº”ç”¨ç¨‹åºç±»å‹ã€‚ Kubernetes æ—¨åœ¨æ”¯æŒæå…¶å¤šç§å¤šæ ·çš„å·¥ä½œè´Ÿè½½ï¼ŒåŒ…æ‹¬æ— çŠ¶æ€ã€æœ‰çŠ¶æ€å’Œæ•°æ®å¤„ç†å·¥ä½œè´Ÿè½½ã€‚ å¦‚æœåº”ç”¨ç¨‹åºå¯ä»¥åœ¨å®¹å™¨ä¸­è¿è¡Œï¼Œé‚£ä¹ˆå®ƒåº”è¯¥å¯ä»¥åœ¨ Kubernetes ä¸Šå¾ˆå¥½åœ°è¿è¡Œã€‚")])]),s._v(" "),t("li",[t("p",[s._v("ä¸éƒ¨ç½²æºä»£ç ï¼Œä¹Ÿä¸æ„å»ºä½ çš„åº”ç”¨ç¨‹åºã€‚ æŒç»­é›†æˆï¼ˆCIï¼‰ã€äº¤ä»˜å’Œéƒ¨ç½²ï¼ˆCI/CDï¼‰å·¥ä½œæµå–å†³äºç»„ç»‡çš„æ–‡åŒ–å’Œåå¥½ä»¥åŠæŠ€æœ¯è¦æ±‚ã€‚")])]),s._v(" "),t("li",[t("p",[s._v("ä¸æä¾›åº”ç”¨ç¨‹åºçº§åˆ«çš„æœåŠ¡ä½œä¸ºå†…ç½®æœåŠ¡ï¼Œä¾‹å¦‚ä¸­é—´ä»¶ï¼ˆä¾‹å¦‚æ¶ˆæ¯ä¸­é—´ä»¶ï¼‰ã€ æ•°æ®å¤„ç†æ¡†æ¶ï¼ˆä¾‹å¦‚ Sparkï¼‰ã€æ•°æ®åº“ï¼ˆä¾‹å¦‚ MySQLï¼‰ã€ç¼“å­˜ã€é›†ç¾¤å­˜å‚¨ç³»ç»Ÿ ï¼ˆä¾‹å¦‚ Cephï¼‰ã€‚è¿™æ ·çš„ç»„ä»¶å¯ä»¥åœ¨ Kubernetes ä¸Šè¿è¡Œï¼Œå¹¶ä¸”/æˆ–è€…å¯ä»¥ç”±è¿è¡Œåœ¨ Kubernetes ä¸Šçš„åº”ç”¨ç¨‹åºé€šè¿‡å¯ç§»æ¤æœºåˆ¶ï¼ˆä¾‹å¦‚"),t("a",{attrs:{href:"https://openservicebrokerapi.org/",target:"_blank",rel:"noopener noreferrer"}},[s._v("å¼€æ”¾æœåŠ¡ä»£ç†"),t("OutboundLink")],1),s._v("ï¼‰æ¥è®¿é—®ã€‚")])]),s._v(" "),t("li",[t("p",[s._v("ä¸æ˜¯æ—¥å¿—è®°å½•ã€ç›‘è§†æˆ–è­¦æŠ¥çš„è§£å†³æ–¹æ¡ˆã€‚ å®ƒé›†æˆäº†ä¸€äº›åŠŸèƒ½ä½œä¸ºæ¦‚å¿µè¯æ˜ï¼Œå¹¶æä¾›äº†æ”¶é›†å’Œå¯¼å‡ºæŒ‡æ ‡çš„æœºåˆ¶ã€‚")])]),s._v(" "),t("li",[t("p",[s._v("ä¸æä¾›ä¹Ÿä¸è¦æ±‚é…ç½®ç”¨çš„è¯­è¨€ã€ç³»ç»Ÿï¼ˆä¾‹å¦‚ jsonnetï¼‰ï¼Œå®ƒæä¾›äº†å£°æ˜æ€§ APIï¼Œ è¯¥å£°æ˜æ€§ API å¯ä»¥ç”±ä»»æ„å½¢å¼çš„å£°æ˜æ€§è§„èŒƒæ‰€æ„æˆã€‚")])]),s._v(" "),t("li",[t("p",[s._v("ä¸æä¾›ä¹Ÿä¸é‡‡ç”¨ä»»ä½•å…¨é¢çš„æœºå™¨é…ç½®ã€ç»´æŠ¤ã€ç®¡ç†æˆ–è‡ªæˆ‘ä¿®å¤ç³»ç»Ÿã€‚")])]),s._v(" "),t("li",[t("p",[s._v("æ­¤å¤–ï¼ŒKubernetes ä¸ä»…ä»…æ˜¯ä¸€ä¸ªç¼–æ’ç³»ç»Ÿï¼Œå®é™…ä¸Šå®ƒæ¶ˆé™¤äº†ç¼–æ’çš„éœ€è¦ã€‚ ç¼–æ’çš„æŠ€æœ¯å®šä¹‰æ˜¯æ‰§è¡Œå·²å®šä¹‰çš„å·¥ä½œæµç¨‹ï¼šé¦–å…ˆæ‰§è¡Œ Aï¼Œç„¶åæ‰§è¡Œ Bï¼Œå†æ‰§è¡Œ Cã€‚ è€Œ Kubernetes åŒ…å«äº†ä¸€ç»„ç‹¬ç«‹å¯ç»„åˆçš„æ§åˆ¶è¿‡ç¨‹ï¼Œå¯ä»¥è¿ç»­åœ°å°†å½“å‰çŠ¶æ€é©±åŠ¨åˆ°æ‰€æä¾›çš„é¢„æœŸçŠ¶æ€ã€‚ ä½ ä¸éœ€è¦åœ¨ä¹å¦‚ä½•ä» A ç§»åŠ¨åˆ° Cï¼Œä¹Ÿä¸éœ€è¦é›†ä¸­æ§åˆ¶ï¼Œè¿™ä½¿å¾—ç³»ç»Ÿæ›´æ˜“äºä½¿ç”¨ä¸”åŠŸèƒ½æ›´å¼ºå¤§ã€ ç³»ç»Ÿæ›´å¥å£®ï¼Œæ›´ä¸ºå¼¹æ€§å’Œå¯æ‰©å±•ã€‚")])])]),s._v(" "),t("hr"),s._v(" "),t("h2",{attrs:{id:"ç¬¬äºŒç« -ç»„ä»¶-æ¶æ„"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ç¬¬äºŒç« -ç»„ä»¶-æ¶æ„"}},[s._v("ğŸŒ™")]),s._v(" ç¬¬äºŒç«  ç»„ä»¶&æ¶æ„")]),s._v(" "),t("ul",[t("li",[s._v("é›†ç¾¤ç»„ä»¶")]),s._v(" "),t("li",[s._v("æ ¸å¿ƒæ¦‚å¿µ")]),s._v(" "),t("li",[s._v("é›†ç¾¤å®‰è£…")])]),s._v(" "),t("h3",{attrs:{id:"_1-é›†ç¾¤ç»„ä»¶"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-é›†ç¾¤ç»„ä»¶"}},[s._v("ğŸŒ™")]),s._v(" 1 é›†ç¾¤ç»„ä»¶")]),s._v(" "),t("ul",[t("li",[s._v("é›†ç¾¤ cluster : å°†åŒä¸€ä¸ªè½¯ä»¶æœåŠ¡å¤šä¸ªèŠ‚ç‚¹ç»„ç»‡åˆ°ä¸€èµ·å…±åŒä¸ºç³»ç»Ÿæä¾›æœåŠ¡è¿‡ç¨‹ç§°ä¹‹ä¸ºè¯¥è½¯ä»¶çš„é›†ç¾¤ã€‚redis é›†ç¾¤ã€esé›†ç¾¤ã€mongo ç­‰ã€‚")]),s._v(" "),t("li",[s._v("k8s é›†ç¾¤: å¤šä¸ªèŠ‚ç‚¹: 3 ä¸ªèŠ‚ç‚¹  è§’è‰²:  1.master èŠ‚ç‚¹/control plane æ§åˆ¶èŠ‚ç‚¹   2. work node: å·¥ä½œèŠ‚ç‚¹(pod å®¹å™¨:åº”ç”¨ç¨‹åºå®¹å™¨)")])]),s._v(" "),t("p",[s._v("å½“éƒ¨ç½²å®Œ Kubernetesï¼Œä¾¿æ‹¥æœ‰äº†ä¸€ä¸ªå®Œæ•´çš„é›†ç¾¤ã€‚ä¸€ç»„å·¥ä½œæœºå™¨ï¼Œç§°ä¸ºèŠ‚ç‚¹ï¼Œ ä¼šè¿è¡Œå®¹å™¨åŒ–åº”ç”¨ç¨‹åºã€‚"),t("code",[s._v("æ¯ä¸ªé›†ç¾¤è‡³å°‘æœ‰ä¸€ä¸ªå·¥ä½œèŠ‚ç‚¹")]),s._v("ã€‚å·¥ä½œèŠ‚ç‚¹ä¼š"),t("code",[s._v("æ‰˜ç®¡ Pod")]),s._v("ï¼Œè€Œ Pod å°±æ˜¯ä½œä¸ºåº”ç”¨è´Ÿè½½çš„ç»„ä»¶ã€‚ "),t("code",[s._v("æ§åˆ¶å¹³é¢ç®¡ç†é›†ç¾¤ä¸­çš„å·¥ä½œèŠ‚ç‚¹å’Œ Pod")]),s._v("ã€‚")]),s._v(" "),t("p",[t("img",{attrs:{src:a(616),alt:"Kubernetes çš„ç»„ä»¶"}})]),s._v(" "),t("h4",{attrs:{id:"_1-1-æ§åˆ¶å¹³é¢ç»„ä»¶-control-plane-components"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-æ§åˆ¶å¹³é¢ç»„ä»¶-control-plane-components"}},[s._v("ğŸŒ™")]),s._v(" 1.1 æ§åˆ¶å¹³é¢ç»„ä»¶ï¼ˆControl Plane Componentsï¼‰")]),s._v(" "),t("p",[s._v("æ§åˆ¶å¹³é¢ç»„ä»¶ä¼šä¸ºé›†ç¾¤åšå‡ºå…¨å±€å†³ç­–ï¼Œæ¯”å¦‚"),t("code",[s._v("èµ„æºçš„è°ƒåº¦ã€‚ ä»¥åŠæ£€æµ‹å’Œå“åº”é›†ç¾¤äº‹ä»¶ï¼Œä¾‹å¦‚å½“ä¸æ»¡è¶³éƒ¨ç½²çš„ replicas å­—æ®µæ—¶ï¼Œ è¦å¯åŠ¨æ–°çš„ pod")]),s._v("ï¼‰ã€‚")]),s._v(" "),t("blockquote",[t("p",[s._v("æ§åˆ¶å¹³é¢ç»„ä»¶å¯ä»¥åœ¨é›†ç¾¤ä¸­çš„ä»»ä½•èŠ‚ç‚¹ä¸Šè¿è¡Œã€‚ ç„¶è€Œï¼Œä¸ºäº†ç®€å•èµ·è§ï¼Œè®¾ç½®è„šæœ¬é€šå¸¸ä¼šåœ¨åŒä¸€ä¸ªè®¡ç®—æœºä¸Šå¯åŠ¨æ‰€æœ‰æ§åˆ¶å¹³é¢ç»„ä»¶ï¼Œ å¹¶ä¸”ä¸ä¼šåœ¨æ­¤è®¡ç®—æœºä¸Šè¿è¡Œç”¨æˆ·å®¹å™¨ã€‚")])]),s._v(" "),t("ul",[t("li",[t("p",[t("strong",[s._v("kube-apiserver")])]),s._v(" "),t("p",[s._v("API serveræ˜¯ Kubernetes æ§åˆ¶å¹³é¢çš„ç»„ä»¶ï¼Œ "),t("code",[s._v("è¯¥ç»„ä»¶è´Ÿè´£å…¬å¼€äº† Kubernetes APIï¼Œè´Ÿè´£å¤„ç†æ¥å—è¯·æ±‚çš„å·¥ä½œ")]),s._v("ã€‚ API server æ˜¯ Kubernetes æ§åˆ¶å¹³é¢çš„å‰ç«¯ã€‚Kubernetes API æœåŠ¡å™¨çš„ä¸»è¦å®ç°æ˜¯ kube-apiserverã€‚ "),t("code",[s._v("kube-apiserver")]),s._v(" è®¾è®¡ä¸Šè€ƒè™‘äº†æ°´å¹³æ‰©ç¼©ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒå¯é€šè¿‡éƒ¨ç½²å¤šä¸ªå®ä¾‹æ¥è¿›è¡Œæ‰©ç¼©ã€‚ ä½ å¯ä»¥è¿è¡Œ "),t("code",[s._v("kube-apiserver")]),s._v(" çš„å¤šä¸ªå®ä¾‹ï¼Œå¹¶åœ¨è¿™äº›å®ä¾‹ä¹‹é—´å¹³è¡¡æµé‡ã€‚")])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("etcd")])]),s._v(" "),t("p",[t("code",[s._v("ä¸€è‡´ä¸”é«˜åº¦å¯ç”¨çš„é”®å€¼å­˜å‚¨ï¼Œç”¨ä½œ Kubernetes çš„æ‰€æœ‰é›†ç¾¤æ•°æ®çš„åå°æ•°æ®åº“")]),s._v("ã€‚")])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("kube-scheduler")])]),s._v(" "),t("p",[t("code",[s._v("kube-scheduler")]),s._v(" æ˜¯æ§åˆ¶å¹³é¢çš„ç»„ä»¶ï¼Œ è´Ÿè´£ç›‘è§†æ–°åˆ›å»ºçš„ã€æœªæŒ‡å®šè¿è¡ŒèŠ‚ç‚¹ node çš„ Podsï¼Œ å¹¶é€‰æ‹©èŠ‚ç‚¹æ¥è®© Pod åœ¨ä¸Šé¢è¿è¡Œã€‚è°ƒåº¦å†³ç­–è€ƒè™‘çš„å› ç´ åŒ…æ‹¬å•ä¸ª Pod åŠ Pods é›†åˆçš„èµ„æºéœ€æ±‚ã€è½¯ç¡¬ä»¶åŠç­–ç•¥çº¦æŸã€ äº²å’Œæ€§åŠåäº²å’Œæ€§è§„èŒƒã€æ•°æ®ä½ç½®ã€å·¥ä½œè´Ÿè½½é—´çš„å¹²æ‰°åŠæœ€åæ—¶é™ã€‚")])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("kube-controller-manager")])]),s._v(" "),t("p",[s._v("kube-controller-manager æ˜¯æ§åˆ¶å¹³é¢çš„ç»„ä»¶ï¼Œ è´Ÿè´£è¿è¡Œæ§åˆ¶å™¨è¿›ç¨‹ã€‚ä»é€»è¾‘ä¸Šè®²ï¼Œ æ¯ä¸ªæ§åˆ¶å™¨éƒ½æ˜¯ä¸€ä¸ªå•ç‹¬çš„è¿›ç¨‹ï¼Œ ä½†æ˜¯ä¸ºäº†é™ä½å¤æ‚æ€§ï¼Œå®ƒä»¬éƒ½è¢«ç¼–è¯‘åˆ°åŒä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ï¼Œå¹¶åœ¨åŒä¸€ä¸ªè¿›ç¨‹ä¸­è¿è¡Œã€‚")]),s._v(" "),t("p",[s._v("è¿™äº›æ§åˆ¶å™¨åŒ…æ‹¬ï¼š")]),s._v(" "),t("ul",[t("li",[s._v("èŠ‚ç‚¹æ§åˆ¶å™¨ï¼ˆNode Controllerï¼‰ï¼šè´Ÿè´£åœ¨èŠ‚ç‚¹å‡ºç°æ•…éšœæ—¶è¿›è¡Œé€šçŸ¥å’Œå“åº”")]),s._v(" "),t("li",[s._v("ä»»åŠ¡æ§åˆ¶å™¨ï¼ˆJob Controllerï¼‰ï¼šç›‘æµ‹ä»£è¡¨ä¸€æ¬¡æ€§ä»»åŠ¡çš„ Job å¯¹è±¡ï¼Œç„¶ååˆ›å»º Pods æ¥è¿è¡Œè¿™äº›ä»»åŠ¡ç›´è‡³å®Œæˆ")]),s._v(" "),t("li",[s._v("ç«¯ç‚¹åˆ†ç‰‡æ§åˆ¶å™¨ï¼ˆEndpointSlice controllerï¼‰ï¼šå¡«å……ç«¯ç‚¹åˆ†ç‰‡ï¼ˆEndpointSliceï¼‰å¯¹è±¡ï¼ˆä»¥æä¾› Service å’Œ Pod ä¹‹é—´çš„é“¾æ¥ï¼‰ã€‚")]),s._v(" "),t("li",[s._v("æœåŠ¡è´¦å·æ§åˆ¶å™¨ï¼ˆServiceAccount controllerï¼‰ï¼šä¸ºæ–°çš„å‘½åç©ºé—´åˆ›å»ºé»˜è®¤çš„æœåŠ¡è´¦å·ï¼ˆServiceAccountï¼‰ã€‚")])])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("cloud-controller-manager")]),s._v(" (optional å¯é€‰)")]),s._v(" "),t("p",[s._v("ä¸€ä¸ª Kubernetes æ§åˆ¶å¹³é¢ç»„ä»¶ï¼Œ åµŒå…¥äº†ç‰¹å®šäºäº‘å¹³å°çš„æ§åˆ¶é€»è¾‘ã€‚ äº‘æ§åˆ¶å™¨ç®¡ç†å™¨ï¼ˆCloud Controller Managerï¼‰å…è®¸ä½ å°†ä½ çš„é›†ç¾¤è¿æ¥åˆ°äº‘æä¾›å•†çš„ API ä¹‹ä¸Šï¼Œ å¹¶å°†ä¸è¯¥äº‘å¹³å°äº¤äº’çš„ç»„ä»¶åŒä¸ä½ çš„é›†ç¾¤äº¤äº’çš„ç»„ä»¶åˆ†ç¦»å¼€æ¥ã€‚"),t("code",[s._v("cloud-controller-manager")]),s._v(" ä»…è¿è¡Œç‰¹å®šäºäº‘å¹³å°çš„æ§åˆ¶å™¨ã€‚ å› æ­¤å¦‚æœä½ åœ¨è‡ªå·±çš„ç¯å¢ƒä¸­è¿è¡Œ Kubernetesï¼Œæˆ–è€…åœ¨æœ¬åœ°è®¡ç®—æœºä¸­è¿è¡Œå­¦ä¹ ç¯å¢ƒï¼Œ æ‰€éƒ¨ç½²çš„é›†ç¾¤ä¸éœ€è¦æœ‰äº‘æ§åˆ¶å™¨ç®¡ç†å™¨ã€‚ä¸ "),t("code",[s._v("kube-controller-manager")]),s._v(" ç±»ä¼¼ï¼Œ"),t("code",[s._v("cloud-controller-manager")]),s._v(" å°†è‹¥å¹²é€»è¾‘ä¸Šç‹¬ç«‹çš„æ§åˆ¶å›è·¯ç»„åˆåˆ°åŒä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ä¸­ï¼Œ ä¾›ä½ ä»¥åŒä¸€è¿›ç¨‹çš„æ–¹å¼è¿è¡Œã€‚ ä½ å¯ä»¥å¯¹å…¶æ‰§è¡Œæ°´å¹³æ‰©å®¹ï¼ˆè¿è¡Œä¸æ­¢ä¸€ä¸ªå‰¯æœ¬ï¼‰ä»¥æå‡æ€§èƒ½æˆ–è€…å¢å¼ºå®¹é”™èƒ½åŠ›ã€‚")]),s._v(" "),t("p",[s._v("ä¸‹é¢çš„æ§åˆ¶å™¨éƒ½åŒ…å«å¯¹äº‘å¹³å°é©±åŠ¨çš„ä¾èµ–ï¼š")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("èŠ‚ç‚¹æ§åˆ¶å™¨ï¼ˆNode Controllerï¼‰ï¼šç”¨äºåœ¨èŠ‚ç‚¹ç»ˆæ­¢å“åº”åæ£€æŸ¥äº‘æä¾›å•†ä»¥ç¡®å®šèŠ‚ç‚¹æ˜¯å¦å·²è¢«åˆ é™¤")])]),s._v(" "),t("li",[t("p",[s._v("è·¯ç”±æ§åˆ¶å™¨ï¼ˆRoute Controllerï¼‰ï¼šç”¨äºåœ¨åº•å±‚äº‘åŸºç¡€æ¶æ„ä¸­è®¾ç½®è·¯ç”±")])]),s._v(" "),t("li",[t("p",[s._v("æœåŠ¡æ§åˆ¶å™¨ï¼ˆService Controllerï¼‰ï¼šç”¨äºåˆ›å»ºã€æ›´æ–°å’Œåˆ é™¤äº‘æä¾›å•†è´Ÿè½½å‡è¡¡å™¨")])])])])]),s._v(" "),t("h4",{attrs:{id:"_1-2-node-ç»„ä»¶"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-node-ç»„ä»¶"}},[s._v("ğŸŒ™")]),s._v(" 1.2 Node ç»„ä»¶")]),s._v(" "),t("blockquote",[t("p",[s._v("èŠ‚ç‚¹ç»„ä»¶ä¼šåœ¨æ¯ä¸ªèŠ‚ç‚¹ä¸Šè¿è¡Œï¼Œè´Ÿè´£ç»´æŠ¤è¿è¡Œçš„ Pod å¹¶æä¾› Kubernetes è¿è¡Œç¯å¢ƒã€‚")])]),s._v(" "),t("ul",[t("li",[t("p",[t("strong",[s._v("kubelet")])]),s._v(" "),t("p",[s._v("kubelet ä¼šåœ¨é›†ç¾¤ä¸­æ¯ä¸ªèŠ‚ç‚¹ï¼ˆnodeï¼‰ä¸Šè¿è¡Œã€‚ å®ƒä¿è¯å®¹å™¨ï¼ˆcontainersï¼‰éƒ½è¿è¡Œåœ¨ Pods ä¸­ã€‚")]),s._v(" "),t("p",[s._v("kubelet æ¥æ”¶ä¸€ç»„é€šè¿‡å„ç±»æœºåˆ¶æä¾›ç»™å®ƒçš„ PodSpecsï¼Œ ç¡®ä¿è¿™äº› PodSpecs ä¸­æè¿°çš„å®¹å™¨å¤„äºè¿è¡ŒçŠ¶æ€ä¸”å¥åº·ã€‚ kubelet ä¸ä¼šç®¡ç†ä¸æ˜¯ç”± Kubernetes åˆ›å»ºçš„å®¹å™¨ã€‚")])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("kube-proxy")])]),s._v(" "),t("p",[s._v("kube-proxyæ˜¯é›†ç¾¤ä¸­æ¯ä¸ªèŠ‚ç‚¹ï¼ˆnodeï¼‰ä¸Šæ‰€è¿è¡Œçš„ç½‘ç»œä»£ç†ï¼Œ å®ç° Kubernetes æœåŠ¡ï¼ˆServiceï¼‰æ¦‚å¿µçš„ä¸€éƒ¨åˆ†ã€‚")]),s._v(" "),t("p",[s._v("kube-proxy ç»´æŠ¤èŠ‚ç‚¹ä¸Šçš„ä¸€äº›ç½‘ç»œè§„åˆ™ï¼Œ è¿™äº›ç½‘ç»œè§„åˆ™ä¼šå…è®¸ä»é›†ç¾¤å†…éƒ¨æˆ–å¤–éƒ¨çš„ç½‘ç»œä¼šè¯ä¸ Pod è¿›è¡Œç½‘ç»œé€šä¿¡ã€‚")]),s._v(" "),t("p",[s._v("å¦‚æœæ“ä½œç³»ç»Ÿæä¾›äº†å¯ç”¨çš„æ•°æ®åŒ…è¿‡æ»¤å±‚ï¼Œåˆ™ kube-proxy ä¼šé€šè¿‡å®ƒæ¥å®ç°ç½‘ç»œè§„åˆ™ã€‚ å¦åˆ™ï¼Œkube-proxy ä»…åšæµé‡è½¬å‘ã€‚")])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("å®¹å™¨è¿è¡Œæ—¶ï¼ˆContainer Runtimeï¼‰")])]),s._v(" "),t("p",[s._v("å®¹å™¨è¿è¡Œç¯å¢ƒæ˜¯è´Ÿè´£è¿è¡Œå®¹å™¨çš„è½¯ä»¶ã€‚")]),s._v(" "),t("p",[s._v("Kubernetes æ”¯æŒè®¸å¤šå®¹å™¨è¿è¡Œç¯å¢ƒï¼Œä¾‹å¦‚ containerdã€ CRI-0ã€Docker ä»¥åŠ Kubernetes CRI çš„å…¶ä»–ä»»ä½•å®ç°ã€‚")])])]),s._v(" "),t("h4",{attrs:{id:"_1-3-æ’ä»¶-addons"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-æ’ä»¶-addons"}},[s._v("ğŸŒ™")]),s._v(" 1.3 æ’ä»¶ (Addons)")]),s._v(" "),t("ul",[t("li",[t("p",[t("strong",[s._v("DNS")])]),s._v(" "),t("p",[s._v("å°½ç®¡å…¶ä»–æ’ä»¶éƒ½å¹¶éä¸¥æ ¼æ„ä¹‰ä¸Šçš„å¿…éœ€ç»„ä»¶ï¼Œä½†å‡ ä¹æ‰€æœ‰ Kubernetes é›†ç¾¤éƒ½åº”è¯¥æœ‰é›†ç¾¤ DNSå› ä¸ºå¾ˆå¤šç¤ºä¾‹éƒ½éœ€è¦ DNS æœåŠ¡ã€‚")])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("Web ç•Œé¢ï¼ˆä»ªè¡¨ç›˜ï¼‰")])]),s._v(" "),t("p",[s._v("Dashboard æ˜¯ Kubernetes é›†ç¾¤çš„é€šç”¨çš„ã€åŸºäº Web çš„ç”¨æˆ·ç•Œé¢ã€‚ å®ƒä½¿ç”¨æˆ·å¯ä»¥ç®¡ç†é›†ç¾¤ä¸­è¿è¡Œçš„åº”ç”¨ç¨‹åºä»¥åŠé›†ç¾¤æœ¬èº«ï¼Œ å¹¶è¿›è¡Œæ•…éšœæ’é™¤ã€‚")])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("å®¹å™¨èµ„æºç›‘æ§")])]),s._v(" "),t("p",[s._v("å®¹å™¨èµ„æºç›‘æ§å°†å…³äºå®¹å™¨çš„ä¸€äº›å¸¸è§çš„æ—¶é—´åºåˆ—åº¦é‡å€¼ä¿å­˜åˆ°ä¸€ä¸ªé›†ä¸­çš„æ•°æ®åº“ä¸­ï¼Œ å¹¶æä¾›æµè§ˆè¿™äº›æ•°æ®çš„ç•Œé¢ã€‚")])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("é›†ç¾¤å±‚é¢æ—¥å¿—")])]),s._v(" "),t("p",[s._v("é›†ç¾¤å±‚é¢æ—¥å¿—æœºåˆ¶è´Ÿè´£å°†å®¹å™¨çš„æ—¥å¿—æ•°æ®ä¿å­˜åˆ°ä¸€ä¸ªé›†ä¸­çš„æ—¥å¿—å­˜å‚¨ä¸­ï¼Œ è¿™ç§é›†ä¸­æ—¥å¿—å­˜å‚¨æä¾›æœç´¢å’Œæµè§ˆæ¥å£ã€‚")])])]),s._v(" "),t("h3",{attrs:{id:"_2-é›†ç¾¤æ¶æ„è¯¦ç»†"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-é›†ç¾¤æ¶æ„è¯¦ç»†"}},[s._v("ğŸŒ™")]),s._v(" 2 é›†ç¾¤æ¶æ„è¯¦ç»†")]),s._v(" "),t("p",[t("img",{attrs:{src:a(617),alt:"img"}})]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("æ€»ç»“")]),s._v(" "),t("ul",[t("li",[s._v("Kubernetes é›†ç¾¤ç”±å¤šä¸ªèŠ‚ç‚¹ç»„æˆï¼ŒèŠ‚ç‚¹åˆ†ä¸ºä¸¤ç±»ï¼šä¸€ç±»æ˜¯å±äºç®¡ç†å¹³é¢çš„ä¸»èŠ‚ç‚¹/æ§åˆ¶èŠ‚ç‚¹ï¼ˆMaster Nodeï¼‰ï¼›ä¸€ç±»æ˜¯å±äºè¿è¡Œå¹³é¢çš„å·¥ä½œèŠ‚ç‚¹ï¼ˆWorker Nodeï¼‰ã€‚æ˜¾ç„¶ï¼Œå¤æ‚çš„å·¥ä½œè‚¯å®šéƒ½äº¤ç»™æ§åˆ¶èŠ‚ç‚¹å»åšäº†ï¼Œå·¥ä½œèŠ‚ç‚¹è´Ÿè´£æä¾›ç¨³å®šçš„æ“ä½œæ¥å£å’Œèƒ½åŠ›æŠ½è±¡å³å¯ã€‚")])])])]),s._v(" "),t("h3",{attrs:{id:"_3-é›†ç¾¤æ­å»º-é‡ç‚¹"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-é›†ç¾¤æ­å»º-é‡ç‚¹"}},[s._v("ğŸŒ™")]),s._v(" 3 é›†ç¾¤æ­å»º[é‡ç‚¹]")]),s._v(" "),t("ul",[t("li",[t("p",[t("strong",[s._v("minikube")]),s._v("\nåªæ˜¯ä¸€ä¸ª K8S é›†ç¾¤æ¨¡æ‹Ÿå™¨ï¼Œåªæœ‰ä¸€ä¸ªèŠ‚ç‚¹çš„é›†ç¾¤ï¼Œåªä¸ºæµ‹è¯•ç”¨ï¼Œmaster å’Œ worker éƒ½åœ¨ä¸€èµ·ã€‚")])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("è£¸æœºå®‰è£…")]),s._v("\nè‡³å°‘éœ€è¦ä¸¤å°æœºå™¨ï¼ˆä¸»èŠ‚ç‚¹ã€å·¥ä½œèŠ‚ç‚¹ä¸ªä¸€å°ï¼‰ï¼Œéœ€è¦è‡ªå·±å®‰è£… Kubernetes ç»„ä»¶ï¼Œé…ç½®ä¼šç¨å¾®éº»çƒ¦ç‚¹ã€‚\nç¼ºç‚¹ï¼šé…ç½®éº»çƒ¦ï¼Œç¼ºå°‘ç”Ÿæ€æ”¯æŒï¼Œä¾‹å¦‚è´Ÿè½½å‡è¡¡å™¨ã€äº‘å­˜å‚¨ã€‚")])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("ç›´æ¥ç”¨äº‘å¹³å° Kubernetes")]),s._v("\nå¯è§†åŒ–æ­å»ºï¼Œåªéœ€ç®€å•å‡ æ­¥å°±å¯ä»¥åˆ›å»ºå¥½ä¸€ä¸ªé›†ç¾¤ã€‚\nä¼˜ç‚¹ï¼šå®‰è£…ç®€å•ï¼Œç”Ÿæ€é½å…¨ï¼Œè´Ÿè½½å‡è¡¡å™¨ã€å­˜å‚¨ç­‰éƒ½ç»™ä½ é…å¥—å¥½ï¼Œç®€å•æ“ä½œå°±æå®š")])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("k3s")])]),s._v(" "),t("p",[s._v("å®‰è£…ç®€å•ï¼Œè„šæœ¬è‡ªåŠ¨å®Œæˆã€‚")]),s._v(" "),t("p",[s._v("ä¼˜ç‚¹ï¼šè½»é‡çº§ï¼Œé…ç½®è¦æ±‚ä½ï¼Œå®‰è£…ç®€å•ï¼Œç”Ÿæ€é½å…¨ã€‚")])])]),s._v(" "),t("h4",{attrs:{id:"_3-1-minikube"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-minikube"}},[s._v("ğŸŒ™")]),s._v(" 3.1 minikube")]),s._v(" "),t("p",[t("img",{attrs:{src:a(618),alt:"image-20221010211512078"}})]),s._v(" "),t("h4",{attrs:{id:"_3-2-è£¸æœºå®‰è£…"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-è£¸æœºå®‰è£…"}},[s._v("ğŸŒ™")]),s._v(" 3.2 è£¸æœºå®‰è£…")]),s._v(" "),t("h5",{attrs:{id:"_0-ç¯å¢ƒå‡†å¤‡"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_0-ç¯å¢ƒå‡†å¤‡"}},[s._v("ğŸŒ™")]),s._v(" 0 ç¯å¢ƒå‡†å¤‡")]),s._v(" "),t("ul",[t("li",[s._v("èŠ‚ç‚¹æ•°é‡: 3 å°è™šæ‹Ÿæœº centos7")]),s._v(" "),t("li",[s._v("ç¡¬ä»¶é…ç½®: 2Gæˆ–æ›´å¤šçš„RAMï¼Œ2ä¸ªCPUæˆ–æ›´å¤šçš„CPUï¼Œç¡¬ç›˜è‡³å°‘30G ä»¥ä¸Š")]),s._v(" "),t("li",[s._v("ç½‘ç»œè¦æ±‚: å¤šä¸ªèŠ‚ç‚¹ä¹‹é—´ç½‘ç»œäº’é€šï¼Œæ¯ä¸ªèŠ‚ç‚¹èƒ½è®¿é—®å¤–ç½‘")])]),s._v(" "),t("h5",{attrs:{id:"_1-é›†ç¾¤è§„åˆ’"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-é›†ç¾¤è§„åˆ’"}},[s._v("ğŸŒ™")]),s._v(" 1 é›†ç¾¤è§„åˆ’")]),s._v(" "),t("ul",[t("li",[s._v("k8s-node1ï¼š10.15.0.5")]),s._v(" "),t("li",[s._v("k8s-node2ï¼š10.15.0.6")]),s._v(" "),t("li",[s._v("k8s-node3ï¼š10.15.0.7")])]),s._v(" "),t("h5",{attrs:{id:"_2-è®¾ç½®ä¸»æœºå"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-è®¾ç½®ä¸»æœºå"}},[s._v("ğŸŒ™")]),s._v(" 2 è®¾ç½®ä¸»æœºå")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ hostnamectl set-hostname k8s-node1  \n$ hostnamectl set-hostname k8s-node2\n$ hostnamectl set-hostname k8s-node3\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("h5",{attrs:{id:"_3-åŒæ­¥-hosts-æ–‡ä»¶"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-åŒæ­¥-hosts-æ–‡ä»¶"}},[s._v("ğŸŒ™")]),s._v(" 3 åŒæ­¥ hosts æ–‡ä»¶")]),s._v(" "),t("blockquote",[t("p",[s._v("å¦‚æœ DNS ä¸æ”¯æŒä¸»æœºåç§°è§£æï¼Œè¿˜éœ€è¦åœ¨æ¯å°æœºå™¨çš„ "),t("code",[s._v("/etc/hosts")]),s._v(" æ–‡ä»¶ä¸­æ·»åŠ ä¸»æœºåå’Œ IP çš„å¯¹åº”å…³ç³»ï¼š")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" /etc/hosts "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("EOF\n10.15.0.5 k8s-node1\n10.15.0.6 k8s-node2\n10.15.0.7 k8s-node3\nEOF")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("h5",{attrs:{id:"_4-å…³é—­é˜²ç«å¢™"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-å…³é—­é˜²ç«å¢™"}},[s._v("ğŸŒ™")]),s._v(" 4 å…³é—­é˜²ç«å¢™")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ systemctl stop firewalld "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" systemctl disable firewalld\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h5",{attrs:{id:"_5-å…³é—­-selinux"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-å…³é—­-selinux"}},[s._v("ğŸŒ™")]),s._v(" 5 å…³é—­ SELINUX")]),s._v(" "),t("blockquote",[t("p",[s._v("æ³¨æ„: ARM æ¶æ„è¯·å‹¿æ‰§è¡Œ,æ‰§è¡Œä¼šå‡ºç° ip æ— æ³•è·å–é—®é¢˜!")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ setenforce "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-i")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'s/SELINUX=enforcing/SELINUX=disabled/g'")]),s._v(" /etc/selinux/config\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h5",{attrs:{id:"_6-å…³é—­-swap-åˆ†åŒº"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-å…³é—­-swap-åˆ†åŒº"}},[s._v("ğŸŒ™")]),s._v(" 6 å…³é—­ swap åˆ†åŒº")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ swapoff "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-a")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-ri")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'s/.*swap.*/#&/'")]),s._v(" /etc/fstab\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h5",{attrs:{id:"_7-åŒæ­¥æ—¶é—´"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_7-åŒæ­¥æ—¶é—´"}},[s._v("ğŸŒ™")]),s._v(" 7 åŒæ­¥æ—¶é—´")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ yum "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" ntpdate "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-y")]),s._v("\n$ ntpdate time.windows.com\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h5",{attrs:{id:"_8-å®‰è£…-containerd"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_8-å®‰è£…-containerd"}},[s._v("ğŸŒ™")]),s._v(" 8 å®‰è£… containerd")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# å®‰è£… yum-config-manager ç›¸å…³ä¾èµ–")]),s._v("\n$ yum "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-y")]),s._v(" yum-utils device-mapper-persistent-data lvm2\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# æ·»åŠ  containerd yum æº")]),s._v("\n$ yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# å®‰è£… containerd")]),s._v("\n$ yum "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-y")]),s._v(" containerd.io cri-tools  \n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# é…ç½® containerd")]),s._v("\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("  /etc/containerd/config.toml "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('EOF\ndisabled_plugins = ["restart"]\n[plugins.linux]\nshim_debug = true\n[plugins.cri.registry.mirrors."docker.io"]\nendpoint = ["https://frz7i079.mirror.aliyuncs.com"]\n[plugins.cri]\nsandbox_image = "registry.aliyuncs.com/google_containers/pause:3.2"\nEOF')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# å¯åŠ¨ containerd æœåŠ¡ å¹¶ å¼€æœºé…ç½®è‡ªå¯åŠ¨")]),s._v("\n$ systemctl "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("enable")]),s._v(" containerd "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" systemctl start containerd "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" systemctl status containerd \n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# é…ç½® containerd é…ç½®")]),s._v("\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" /etc/modules-load.d/containerd.conf "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("EOF\noverlay\nbr_netfilter\nEOF")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# é…ç½® k8s ç½‘ç»œé…ç½®")]),s._v("\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" /etc/sysctl.d/k8s.conf "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("EOF\nnet.bridge.bridge-nf-call-ip6tables = 1\nnet.bridge.bridge-nf-call-iptables = 1\nnet.ipv4.ip_forward = 1\nEOF")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# åŠ è½½ overlay br_netfilter æ¨¡å—")]),s._v("\n$ modprobe overlay\n$ modprobe br_netfilter\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# æŸ¥çœ‹å½“å‰é…ç½®æ˜¯å¦ç”Ÿæ•ˆ")]),s._v("\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sysctl")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" /etc/sysctl.d/k8s.conf\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br")])]),t("h5",{attrs:{id:"_9-æ·»åŠ æº"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_9-æ·»åŠ æº"}},[s._v("ğŸŒ™")]),s._v(" 9 æ·»åŠ æº")]),s._v(" "),t("ul",[t("li",[s._v("æŸ¥çœ‹æº")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ yum repolist\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[s._v("æ·»åŠ æº x86")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("EOF"),t("span",{pre:!0,attrs:{class:"token bash punctuation"}},[s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" kubernetes.repo")]),s._v("\n[kubernetes]\nname=Kubernetes\nbaseurl=https://mirrors.aliyun.com/kubernetes/yum/repos/kubernetes-el7-x86_64\nenabled=1\ngpgcheck=0\nrepo_gpgcheck=0\ngpgkey=https://mirrors.aliyun.com/kubernetes/yum/doc/yum-key.gpg https://mirrors.aliyun.com/kubernetes/yum/doc/rpm-package-key.gpg\nEOF")]),s._v("\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mv")]),s._v(" kubernetes.repo /etc/yum.repos.d/\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br")])]),t("ul",[t("li",[s._v("æ·»åŠ æº ARM")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("EOF"),t("span",{pre:!0,attrs:{class:"token bash punctuation"}},[s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" kubernetes.repo ")]),s._v("\n[kubernetes]\nname=Kubernetes\nbaseurl=https://mirrors.aliyun.com/kubernetes/yum/repos/kubernetes-el7-aarch64\nenabled=1\ngpgcheck=0\nrepo_gpgcheck=0\ngpgkey=https://mirrors.aliyun.com/kubernetes/yum/doc/yum-key.gpg https://mirrors.aliyun.com/kubernetes/yum/doc/rpm-package-key.gpg\nEOF")]),s._v("\n\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mv")]),s._v(" kubernetes.repo /etc/yum.repos.d/\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br")])]),t("h5",{attrs:{id:"_11-å®‰è£…-k8s"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_11-å®‰è£…-k8s"}},[s._v("ğŸŒ™")]),s._v(" 11 å®‰è£… k8s")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# å®‰è£…æœ€æ–°ç‰ˆæœ¬")]),s._v("\n$ yum "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-y")]),s._v(" kubelet kubeadm kubectl\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# æŒ‡å®šç‰ˆæœ¬å®‰è£…")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# yum install -y kubelet-1.26.0 kubectl-1.26.0 kubeadm-1.26.0")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# å¯åŠ¨ kubelet")]),s._v("\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("enable")]),s._v(" kubelet "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl start kubelet "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl status kubelet\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("h5",{attrs:{id:"_12-åˆå§‹åŒ–é›†ç¾¤"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_12-åˆå§‹åŒ–é›†ç¾¤"}},[s._v("ğŸŒ™")]),s._v(" 12 åˆå§‹åŒ–é›†ç¾¤")]),s._v(" "),t("ul",[t("li",[t("strong",[t("code",[s._v("æ³¨æ„: åˆå§‹åŒ– k8s é›†ç¾¤ä»…ä»…éœ€è¦å†åœ¨ master èŠ‚ç‚¹è¿›è¡Œé›†ç¾¤åˆå§‹åŒ–!")])])])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ kubeadm init "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n--apiserver-advertise-address"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.15")]),s._v(".0.5 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n--pod-network-cidr"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.244")]),s._v(".0.0/16 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n--image-repository registry.aliyuncs.com/google_containers "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n--cri-socket"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("unix:///var/run/containerd/containerd.sock\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# æ·»åŠ æ–°èŠ‚ç‚¹")]),s._v("\n$ kubeadm token create --print-join-command "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--ttl")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n$ kubeadm "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("join")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.15")]),s._v(".0.21:6443 "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--token")]),s._v(" xjm7ts.gu3ojvta6se26q8i --discovery-token-ca-cert-hash sha256:14c8ac5c04ff9dda389e7c6c505728ac1293c6aed5978c3ea9c6953d4a79ed34 \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br")])]),t("h5",{attrs:{id:"_13-é…ç½®é›†ç¾¤ç½‘ç»œ"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_13-é…ç½®é›†ç¾¤ç½‘ç»œ"}},[s._v("ğŸŒ™")]),s._v(" 13 é…ç½®é›†ç¾¤ç½‘ç»œ")]),s._v(" "),t("blockquote",[t("p",[s._v("åˆ›å»ºé…ç½®: kube-flannel.yml ,æ‰§è¡Œ kubectl apply -f kube-flannel.yml")])]),s._v(" "),t("ul",[t("li",[t("code",[s._v("æ³¨æ„: åªåœ¨ä¸»èŠ‚ç‚¹æ‰§è¡Œå³å¯!")])])]),s._v(" "),t("div",{staticClass:"language-yml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("---")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kind")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Namespace\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiVersion")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" v1\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("metadata")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" kube"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("flannel\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("labels")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("pod-security.kubernetes.io/enforce")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" privileged\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("---")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kind")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" ClusterRole\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiVersion")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" rbac.authorization.k8s.io/v1\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("metadata")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" flannel\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("rules")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiGroups")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("resources")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" pods\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("verbs")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" get\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiGroups")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("resources")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" nodes\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("verbs")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" get\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" list\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" watch\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiGroups")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("resources")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" nodes/status\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("verbs")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" patch\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("---")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kind")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" ClusterRoleBinding\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiVersion")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" rbac.authorization.k8s.io/v1\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("metadata")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" flannel\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("roleRef")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiGroup")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" rbac.authorization.k8s.io\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kind")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" ClusterRole\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" flannel\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("subjects")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kind")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" ServiceAccount\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" flannel\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("namespace")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" kube"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("flannel\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("---")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiVersion")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" v1\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kind")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" ServiceAccount\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("metadata")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" flannel\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("namespace")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" kube"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("flannel\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("---")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kind")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" ConfigMap\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiVersion")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" v1\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("metadata")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" kube"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("flannel"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("cfg\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("namespace")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" kube"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("flannel\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("labels")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("tier")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" node\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("app")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" flannel\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("data")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("cni-conf.json")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("|")]),t("span",{pre:!0,attrs:{class:"token scalar string"}},[s._v('\n    {\n      "name": "cbr0",\n      "cniVersion": "0.3.1",\n      "plugins": [\n        {\n          "type": "flannel",\n          "delegate": {\n            "hairpinMode": true,\n            "isDefaultGateway": true\n          }\n        },\n        {\n          "type": "portmap",\n          "capabilities": {\n            "portMappings": true\n          }\n        }\n      ]\n    }')]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("net-conf.json")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("|")]),t("span",{pre:!0,attrs:{class:"token scalar string"}},[s._v('\n    {\n      "Network": "10.244.0.0/16",\n      "Backend": {\n        "Type": "vxlan"\n      }\n    }')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("---")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiVersion")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" apps/v1\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kind")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" DaemonSet\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("metadata")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" kube"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("flannel"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("ds\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("namespace")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" kube"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("flannel\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("labels")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("tier")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" node\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("app")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" flannel\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("spec")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("selector")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("matchLabels")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("app")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" flannel\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("template")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("metadata")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("labels")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("tier")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" node\n        "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("app")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" flannel\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("spec")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("affinity")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("nodeAffinity")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("requiredDuringSchedulingIgnoredDuringExecution")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("nodeSelectorTerms")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("matchExpressions")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n              "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("key")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" kubernetes.io/os\n                "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("operator")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" In\n                "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("values")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" linux\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("hostNetwork")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean important"}},[s._v("true")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("priorityClassName")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" system"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("node"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("critical\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("tolerations")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("operator")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Exists\n        "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("effect")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" NoSchedule\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("serviceAccountName")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" flannel\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("initContainers")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" install"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("cni"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("plugin\n       "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#image: flannelcni/flannel-cni-plugin:v1.1.0 for ppc64le and mips64le (dockerhub limitations may apply)")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("image")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" docker.io/rancher/mirrored"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("flannelcni"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("flannel"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("cni"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("plugin"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("v1.1.0\n        "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("command")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" cp\n        "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("args")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("f\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" /flannel\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" /opt/cni/bin/flannel\n        "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("volumeMounts")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" cni"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("plugin\n          "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("mountPath")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" /opt/cni/bin\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" install"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("cni\n       "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#image: flannelcni/flannel:v0.20.2 for ppc64le and mips64le (dockerhub limitations may apply)")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("image")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" docker.io/rancher/mirrored"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("flannelcni"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("flannel"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("v0.20.2\n        "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("command")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" cp\n        "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("args")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("f\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" /etc/kube"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("flannel/cni"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("conf.json\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" /etc/cni/net.d/10"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("flannel.conflist\n        "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("volumeMounts")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" cni\n          "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("mountPath")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" /etc/cni/net.d\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" flannel"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("cfg\n          "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("mountPath")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" /etc/kube"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("flannel/\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("containers")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" kube"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("flannel\n       "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#image: flannelcni/flannel:v0.20.2 for ppc64le and mips64le (dockerhub limitations may apply)")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("image")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" docker.io/rancher/mirrored"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("flannelcni"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("flannel"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("v0.20.2\n        "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("command")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" /opt/bin/flanneld\n        "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("args")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("ip"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("masq\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("kube"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("subnet"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("mgr\n        "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("resources")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("requests")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("cpu")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"100m"')]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("memory")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"50Mi"')]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("limits")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("cpu")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"100m"')]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("memory")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"50Mi"')]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("securityContext")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("privileged")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean important"}},[s._v("false")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("capabilities")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("add")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"NET_ADMIN"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"NET_RAW"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("env")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" POD_NAME\n          "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("valueFrom")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("fieldRef")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n              "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("fieldPath")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" metadata.name\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" POD_NAMESPACE\n          "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("valueFrom")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("fieldRef")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n              "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("fieldPath")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" metadata.namespace\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" EVENT_QUEUE_DEPTH\n          "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("value")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"5000"')]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("volumeMounts")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" run\n          "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("mountPath")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" /run/flannel\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" flannel"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("cfg\n          "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("mountPath")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" /etc/kube"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("flannel/\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" xtables"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("lock\n          "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("mountPath")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" /run/xtables.lock\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("volumes")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" run\n        "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("hostPath")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("path")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" /run/flannel\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" cni"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("plugin\n        "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("hostPath")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("path")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" /opt/cni/bin\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" cni\n        "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("hostPath")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("path")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" /etc/cni/net.d\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" flannel"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("cfg\n        "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("configMap")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" kube"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("flannel"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("cfg\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" xtables"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("lock\n        "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("hostPath")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("path")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" /run/xtables.lock\n          "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("type")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" FileOrCreate\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br"),t("span",{staticClass:"line-number"},[s._v("41")]),t("br"),t("span",{staticClass:"line-number"},[s._v("42")]),t("br"),t("span",{staticClass:"line-number"},[s._v("43")]),t("br"),t("span",{staticClass:"line-number"},[s._v("44")]),t("br"),t("span",{staticClass:"line-number"},[s._v("45")]),t("br"),t("span",{staticClass:"line-number"},[s._v("46")]),t("br"),t("span",{staticClass:"line-number"},[s._v("47")]),t("br"),t("span",{staticClass:"line-number"},[s._v("48")]),t("br"),t("span",{staticClass:"line-number"},[s._v("49")]),t("br"),t("span",{staticClass:"line-number"},[s._v("50")]),t("br"),t("span",{staticClass:"line-number"},[s._v("51")]),t("br"),t("span",{staticClass:"line-number"},[s._v("52")]),t("br"),t("span",{staticClass:"line-number"},[s._v("53")]),t("br"),t("span",{staticClass:"line-number"},[s._v("54")]),t("br"),t("span",{staticClass:"line-number"},[s._v("55")]),t("br"),t("span",{staticClass:"line-number"},[s._v("56")]),t("br"),t("span",{staticClass:"line-number"},[s._v("57")]),t("br"),t("span",{staticClass:"line-number"},[s._v("58")]),t("br"),t("span",{staticClass:"line-number"},[s._v("59")]),t("br"),t("span",{staticClass:"line-number"},[s._v("60")]),t("br"),t("span",{staticClass:"line-number"},[s._v("61")]),t("br"),t("span",{staticClass:"line-number"},[s._v("62")]),t("br"),t("span",{staticClass:"line-number"},[s._v("63")]),t("br"),t("span",{staticClass:"line-number"},[s._v("64")]),t("br"),t("span",{staticClass:"line-number"},[s._v("65")]),t("br"),t("span",{staticClass:"line-number"},[s._v("66")]),t("br"),t("span",{staticClass:"line-number"},[s._v("67")]),t("br"),t("span",{staticClass:"line-number"},[s._v("68")]),t("br"),t("span",{staticClass:"line-number"},[s._v("69")]),t("br"),t("span",{staticClass:"line-number"},[s._v("70")]),t("br"),t("span",{staticClass:"line-number"},[s._v("71")]),t("br"),t("span",{staticClass:"line-number"},[s._v("72")]),t("br"),t("span",{staticClass:"line-number"},[s._v("73")]),t("br"),t("span",{staticClass:"line-number"},[s._v("74")]),t("br"),t("span",{staticClass:"line-number"},[s._v("75")]),t("br"),t("span",{staticClass:"line-number"},[s._v("76")]),t("br"),t("span",{staticClass:"line-number"},[s._v("77")]),t("br"),t("span",{staticClass:"line-number"},[s._v("78")]),t("br"),t("span",{staticClass:"line-number"},[s._v("79")]),t("br"),t("span",{staticClass:"line-number"},[s._v("80")]),t("br"),t("span",{staticClass:"line-number"},[s._v("81")]),t("br"),t("span",{staticClass:"line-number"},[s._v("82")]),t("br"),t("span",{staticClass:"line-number"},[s._v("83")]),t("br"),t("span",{staticClass:"line-number"},[s._v("84")]),t("br"),t("span",{staticClass:"line-number"},[s._v("85")]),t("br"),t("span",{staticClass:"line-number"},[s._v("86")]),t("br"),t("span",{staticClass:"line-number"},[s._v("87")]),t("br"),t("span",{staticClass:"line-number"},[s._v("88")]),t("br"),t("span",{staticClass:"line-number"},[s._v("89")]),t("br"),t("span",{staticClass:"line-number"},[s._v("90")]),t("br"),t("span",{staticClass:"line-number"},[s._v("91")]),t("br"),t("span",{staticClass:"line-number"},[s._v("92")]),t("br"),t("span",{staticClass:"line-number"},[s._v("93")]),t("br"),t("span",{staticClass:"line-number"},[s._v("94")]),t("br"),t("span",{staticClass:"line-number"},[s._v("95")]),t("br"),t("span",{staticClass:"line-number"},[s._v("96")]),t("br"),t("span",{staticClass:"line-number"},[s._v("97")]),t("br"),t("span",{staticClass:"line-number"},[s._v("98")]),t("br"),t("span",{staticClass:"line-number"},[s._v("99")]),t("br"),t("span",{staticClass:"line-number"},[s._v("100")]),t("br"),t("span",{staticClass:"line-number"},[s._v("101")]),t("br"),t("span",{staticClass:"line-number"},[s._v("102")]),t("br"),t("span",{staticClass:"line-number"},[s._v("103")]),t("br"),t("span",{staticClass:"line-number"},[s._v("104")]),t("br"),t("span",{staticClass:"line-number"},[s._v("105")]),t("br"),t("span",{staticClass:"line-number"},[s._v("106")]),t("br"),t("span",{staticClass:"line-number"},[s._v("107")]),t("br"),t("span",{staticClass:"line-number"},[s._v("108")]),t("br"),t("span",{staticClass:"line-number"},[s._v("109")]),t("br"),t("span",{staticClass:"line-number"},[s._v("110")]),t("br"),t("span",{staticClass:"line-number"},[s._v("111")]),t("br"),t("span",{staticClass:"line-number"},[s._v("112")]),t("br"),t("span",{staticClass:"line-number"},[s._v("113")]),t("br"),t("span",{staticClass:"line-number"},[s._v("114")]),t("br"),t("span",{staticClass:"line-number"},[s._v("115")]),t("br"),t("span",{staticClass:"line-number"},[s._v("116")]),t("br"),t("span",{staticClass:"line-number"},[s._v("117")]),t("br"),t("span",{staticClass:"line-number"},[s._v("118")]),t("br"),t("span",{staticClass:"line-number"},[s._v("119")]),t("br"),t("span",{staticClass:"line-number"},[s._v("120")]),t("br"),t("span",{staticClass:"line-number"},[s._v("121")]),t("br"),t("span",{staticClass:"line-number"},[s._v("122")]),t("br"),t("span",{staticClass:"line-number"},[s._v("123")]),t("br"),t("span",{staticClass:"line-number"},[s._v("124")]),t("br"),t("span",{staticClass:"line-number"},[s._v("125")]),t("br"),t("span",{staticClass:"line-number"},[s._v("126")]),t("br"),t("span",{staticClass:"line-number"},[s._v("127")]),t("br"),t("span",{staticClass:"line-number"},[s._v("128")]),t("br"),t("span",{staticClass:"line-number"},[s._v("129")]),t("br"),t("span",{staticClass:"line-number"},[s._v("130")]),t("br"),t("span",{staticClass:"line-number"},[s._v("131")]),t("br"),t("span",{staticClass:"line-number"},[s._v("132")]),t("br"),t("span",{staticClass:"line-number"},[s._v("133")]),t("br"),t("span",{staticClass:"line-number"},[s._v("134")]),t("br"),t("span",{staticClass:"line-number"},[s._v("135")]),t("br"),t("span",{staticClass:"line-number"},[s._v("136")]),t("br"),t("span",{staticClass:"line-number"},[s._v("137")]),t("br"),t("span",{staticClass:"line-number"},[s._v("138")]),t("br"),t("span",{staticClass:"line-number"},[s._v("139")]),t("br"),t("span",{staticClass:"line-number"},[s._v("140")]),t("br"),t("span",{staticClass:"line-number"},[s._v("141")]),t("br"),t("span",{staticClass:"line-number"},[s._v("142")]),t("br"),t("span",{staticClass:"line-number"},[s._v("143")]),t("br"),t("span",{staticClass:"line-number"},[s._v("144")]),t("br"),t("span",{staticClass:"line-number"},[s._v("145")]),t("br"),t("span",{staticClass:"line-number"},[s._v("146")]),t("br"),t("span",{staticClass:"line-number"},[s._v("147")]),t("br"),t("span",{staticClass:"line-number"},[s._v("148")]),t("br"),t("span",{staticClass:"line-number"},[s._v("149")]),t("br"),t("span",{staticClass:"line-number"},[s._v("150")]),t("br"),t("span",{staticClass:"line-number"},[s._v("151")]),t("br"),t("span",{staticClass:"line-number"},[s._v("152")]),t("br"),t("span",{staticClass:"line-number"},[s._v("153")]),t("br"),t("span",{staticClass:"line-number"},[s._v("154")]),t("br"),t("span",{staticClass:"line-number"},[s._v("155")]),t("br"),t("span",{staticClass:"line-number"},[s._v("156")]),t("br"),t("span",{staticClass:"line-number"},[s._v("157")]),t("br"),t("span",{staticClass:"line-number"},[s._v("158")]),t("br"),t("span",{staticClass:"line-number"},[s._v("159")]),t("br"),t("span",{staticClass:"line-number"},[s._v("160")]),t("br"),t("span",{staticClass:"line-number"},[s._v("161")]),t("br"),t("span",{staticClass:"line-number"},[s._v("162")]),t("br"),t("span",{staticClass:"line-number"},[s._v("163")]),t("br"),t("span",{staticClass:"line-number"},[s._v("164")]),t("br"),t("span",{staticClass:"line-number"},[s._v("165")]),t("br"),t("span",{staticClass:"line-number"},[s._v("166")]),t("br"),t("span",{staticClass:"line-number"},[s._v("167")]),t("br"),t("span",{staticClass:"line-number"},[s._v("168")]),t("br"),t("span",{staticClass:"line-number"},[s._v("169")]),t("br"),t("span",{staticClass:"line-number"},[s._v("170")]),t("br"),t("span",{staticClass:"line-number"},[s._v("171")]),t("br"),t("span",{staticClass:"line-number"},[s._v("172")]),t("br"),t("span",{staticClass:"line-number"},[s._v("173")]),t("br"),t("span",{staticClass:"line-number"},[s._v("174")]),t("br"),t("span",{staticClass:"line-number"},[s._v("175")]),t("br"),t("span",{staticClass:"line-number"},[s._v("176")]),t("br"),t("span",{staticClass:"line-number"},[s._v("177")]),t("br"),t("span",{staticClass:"line-number"},[s._v("178")]),t("br"),t("span",{staticClass:"line-number"},[s._v("179")]),t("br"),t("span",{staticClass:"line-number"},[s._v("180")]),t("br"),t("span",{staticClass:"line-number"},[s._v("181")]),t("br"),t("span",{staticClass:"line-number"},[s._v("182")]),t("br"),t("span",{staticClass:"line-number"},[s._v("183")]),t("br"),t("span",{staticClass:"line-number"},[s._v("184")]),t("br"),t("span",{staticClass:"line-number"},[s._v("185")]),t("br"),t("span",{staticClass:"line-number"},[s._v("186")]),t("br"),t("span",{staticClass:"line-number"},[s._v("187")]),t("br"),t("span",{staticClass:"line-number"},[s._v("188")]),t("br"),t("span",{staticClass:"line-number"},[s._v("189")]),t("br"),t("span",{staticClass:"line-number"},[s._v("190")]),t("br"),t("span",{staticClass:"line-number"},[s._v("191")]),t("br"),t("span",{staticClass:"line-number"},[s._v("192")]),t("br"),t("span",{staticClass:"line-number"},[s._v("193")]),t("br"),t("span",{staticClass:"line-number"},[s._v("194")]),t("br"),t("span",{staticClass:"line-number"},[s._v("195")]),t("br"),t("span",{staticClass:"line-number"},[s._v("196")]),t("br"),t("span",{staticClass:"line-number"},[s._v("197")]),t("br"),t("span",{staticClass:"line-number"},[s._v("198")]),t("br"),t("span",{staticClass:"line-number"},[s._v("199")]),t("br"),t("span",{staticClass:"line-number"},[s._v("200")]),t("br"),t("span",{staticClass:"line-number"},[s._v("201")]),t("br"),t("span",{staticClass:"line-number"},[s._v("202")]),t("br"),t("span",{staticClass:"line-number"},[s._v("203")]),t("br"),t("span",{staticClass:"line-number"},[s._v("204")]),t("br"),t("span",{staticClass:"line-number"},[s._v("205")]),t("br")])]),t("h5",{attrs:{id:"_14-æŸ¥çœ‹é›†ç¾¤çŠ¶æ€"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_14-æŸ¥çœ‹é›†ç¾¤çŠ¶æ€"}},[s._v("ğŸŒ™")]),s._v(" 14 æŸ¥çœ‹é›†ç¾¤çŠ¶æ€")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# æŸ¥çœ‹é›†ç¾¤èŠ‚ç‚¹çŠ¶æ€ å…¨éƒ¨ä¸º Ready ä»£è¡¨é›†ç¾¤æ­å»ºæˆåŠŸ")]),s._v("\n$ kubectl get nodes\nNAME        STATUS   ROLES           AGE   VERSION\nk8s-node1   Ready    control-plane   21h   v1.26.0\nk8s-node2   Ready    "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("          21h   v1.26.0\nk8s-node3   Ready    "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("          21h   v1.26.0\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# æŸ¥çœ‹é›†ç¾¤ç³»ç»Ÿ pod è¿è¡Œæƒ…å†µ,ä¸‹é¢æ‰€æœ‰ pod çŠ¶æ€ä¸º Running ä»£è¡¨é›†ç¾¤å¯ç”¨")]),s._v("\n$ kubectl get pod "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-A")]),s._v("\nNAMESPACE      NAME                                READY   STATUS    RESTARTS   AGE\ndefault        nginx                               "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          21h\nkube-flannel   kube-flannel-ds-gtq49               "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          21h\nkube-flannel   kube-flannel-ds-qpdl6               "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          21h\nkube-flannel   kube-flannel-ds-ttxjb               "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          21h\nkube-system    coredns-5bbd96d687-p7q2x            "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          21h\nkube-system    coredns-5bbd96d687-rzcnz            "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          21h\nkube-system    etcd-k8s-node1                      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          21h\nkube-system    kube-apiserver-k8s-node1            "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          21h\nkube-system    kube-controller-manager-k8s-node1   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          21h\nkube-system    kube-proxy-mtsbp                    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          21h\nkube-system    kube-proxy-v2jfs                    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          21h\nkube-system    kube-proxy-x6vhn                    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          21h\nkube-system    kube-scheduler-k8s-node1            "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          21h\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br")])]),t("hr"),s._v(" "),t("h2",{attrs:{id:"ç¬¬ä¸‰ç« -pod-container"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ç¬¬ä¸‰ç« -pod-container"}},[s._v("ğŸŒ™")]),s._v(" ç¬¬ä¸‰ç«  Pod & Container")]),s._v(" "),t("ul",[t("li",[s._v("ä»€ä¹ˆæ˜¯ Pod")]),s._v(" "),t("li",[s._v("Pod åŸºæœ¬æ“ä½œ")]),s._v(" "),t("li",[s._v("Pod çš„ Labels")]),s._v(" "),t("li",[s._v("Pod çš„ ç”Ÿå‘½å‘¨æœŸ")]),s._v(" "),t("li",[s._v("Container ç‰¹æ€§")]),s._v(" "),t("li",[s._v("Pod çš„èµ„æºé™åˆ¶")]),s._v(" "),t("li",[s._v("Pod ä¸­ Init å®¹å™¨")]),s._v(" "),t("li",[s._v("èŠ‚ç‚¹äº²å’Œæ€§åˆ†é… Pod")])]),s._v(" "),t("h3",{attrs:{id:"_1-ä»€ä¹ˆæ˜¯-pod"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-ä»€ä¹ˆæ˜¯-pod"}},[s._v("ğŸŒ™")]),s._v(" 1 ä»€ä¹ˆæ˜¯ Pod")]),s._v(" "),t("blockquote",[t("p",[s._v("æ‘˜å–å®˜ç½‘: https://kubernetes.io/zh-cn/docs/concepts/workloads/pods/#working-with-pods")])]),s._v(" "),t("h4",{attrs:{id:"_1-1-ç®€ä»‹"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-ç®€ä»‹"}},[s._v("ğŸŒ™")]),s._v(" 1.1 "),t("strong",[s._v("ç®€ä»‹")])]),s._v(" "),t("p",[s._v("Pod æ˜¯å¯ä»¥åœ¨ Kubernetes ä¸­"),t("strong",[s._v("åˆ›å»ºå’Œç®¡ç†çš„ã€æœ€å°çš„å¯éƒ¨ç½²çš„è®¡ç®—å•å…ƒ")]),s._v("ã€‚"),t("strong",[s._v("Pod")]),s._v("ï¼ˆå°±åƒåœ¨é²¸é±¼èšæˆ–è€…è±Œè±†èšä¸­ï¼‰"),t("strong",[s._v("æ˜¯ä¸€ç»„ï¼ˆä¸€ä¸ªæˆ–å¤šä¸ªï¼‰å®¹å™¨")]),s._v("ï¼› è¿™äº›å®¹å™¨å…±äº«å­˜å‚¨ã€ç½‘ç»œã€ä»¥åŠæ€æ ·è¿è¡Œè¿™äº›å®¹å™¨çš„å£°æ˜ã€‚ Pod ä¸­çš„"),t("strong",[s._v("å†…å®¹æ€»æ˜¯å¹¶ç½®ï¼ˆcolocatedï¼‰çš„å¹¶ä¸”ä¸€åŒè°ƒåº¦ï¼Œåœ¨å…±äº«çš„ä¸Šä¸‹æ–‡ä¸­è¿è¡Œ")]),s._v("ã€‚ç®€è¨€ä¹‹å¦‚æœç”¨ Docker çš„æœ¯è¯­æ¥æè¿°ï¼Œ"),t("strong",[s._v("Pod ç±»ä¼¼äºå…±äº«åå­—ç©ºé—´å¹¶å…±äº«æ–‡ä»¶ç³»ç»Ÿå·çš„ä¸€ç»„å®¹å™¨ã€‚")])]),s._v(" "),t("p",[t("code",[s._v("å®šä¹‰: Pod å°±æ˜¯ç”¨æ¥ç®¡ç†ä¸€ç»„(ä¸€ä¸ª|å¤šä¸ª)å®¹å™¨çš„é›†åˆ ç‰¹ç‚¹: å…±äº«ç½‘ç»œ å…±äº«å­˜å‚¨ å…±äº«ä¸Šä¸‹æ–‡ç¯å¢ƒ")])]),s._v(" "),t("h4",{attrs:{id:"_1-2-pod-æ€æ ·ç®¡ç†å¤šä¸ªå®¹å™¨"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-pod-æ€æ ·ç®¡ç†å¤šä¸ªå®¹å™¨"}},[s._v("ğŸŒ™")]),s._v(" 1.2 Pod æ€æ ·ç®¡ç†å¤šä¸ªå®¹å™¨?")]),s._v(" "),t("p",[s._v('Pod ä¸­çš„å®¹å™¨è¢«è‡ªåŠ¨å®‰æ’åˆ°é›†ç¾¤ä¸­çš„åŒä¸€ç‰©ç†æœºæˆ–è™šæ‹Ÿæœºä¸Šï¼Œå¹¶å¯ä»¥ä¸€èµ·è¿›è¡Œè°ƒåº¦ã€‚ å®¹å™¨ä¹‹é—´å¯ä»¥å…±äº«èµ„æºå’Œä¾èµ–ã€å½¼æ­¤é€šä¿¡ã€åè°ƒä½•æ—¶ä»¥åŠä½•ç§æ–¹å¼ç»ˆæ­¢è‡ªèº«ã€‚ä¾‹å¦‚ï¼Œä½ å¯èƒ½æœ‰ä¸€ä¸ªå®¹å™¨ï¼Œä¸ºå…±äº«å·ä¸­çš„æ–‡ä»¶æä¾› Web æœåŠ¡å™¨æ”¯æŒï¼Œä»¥åŠä¸€ä¸ªå•ç‹¬çš„ "è¾¹è½¦ (sidercar)" å®¹å™¨è´Ÿè´£ä»è¿œç«¯æ›´æ–°è¿™äº›æ–‡ä»¶ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š')]),s._v(" "),t("p",[t("img",{attrs:{src:a(619),alt:"image-20221227143250604"}})]),s._v(" "),t("h4",{attrs:{id:"_1-3-å¦‚ä½•ä½¿ç”¨-pod"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-å¦‚ä½•ä½¿ç”¨-pod"}},[s._v("ğŸŒ™")]),s._v(" 1.3 å¦‚ä½•ä½¿ç”¨ Pod?")]),s._v(" "),t("p",[s._v("é€šå¸¸ä½ ä¸éœ€è¦ç›´æ¥åˆ›å»º Podï¼Œç”šè‡³å•å®ä¾‹ Podã€‚ ç›¸åï¼Œä½ ä¼šä½¿ç”¨è¯¸å¦‚ Deployment æˆ– Job è¿™ç±»å·¥ä½œè´Ÿè½½èµ„æºæ¥åˆ›å»º Podã€‚ å¦‚æœ Pod éœ€è¦è·Ÿè¸ªçŠ¶æ€ï¼Œå¯ä»¥è€ƒè™‘ StatefulSet èµ„æºã€‚")]),s._v(" "),t("p",[s._v("Kubernetes é›†ç¾¤ä¸­çš„ Pod ä¸»è¦æœ‰ä¸¤ç§ç”¨æ³•ï¼š")]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("è¿è¡Œå•ä¸ªå®¹å™¨çš„ Pod")]),s._v('ã€‚"æ¯ä¸ª Pod ä¸€ä¸ªå®¹å™¨" æ¨¡å‹æ˜¯æœ€å¸¸è§çš„ Kubernetes ç”¨ä¾‹ï¼› åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¯ä»¥å°† Pod çœ‹ä½œå•ä¸ªå®¹å™¨çš„åŒ…è£…å™¨ï¼Œå¹¶ä¸” Kubernetes ç›´æ¥ç®¡ç† Podï¼Œè€Œä¸æ˜¯å®¹å™¨ã€‚')]),s._v(" "),t("li",[t("strong",[s._v("è¿è¡Œå¤šä¸ªååŒå·¥ä½œçš„å®¹å™¨ çš„ Pod")]),s._v("ã€‚ Pod å¯èƒ½å°è£…ç”±å¤šä¸ªç´§å¯†è€¦åˆä¸”éœ€è¦å…±äº«èµ„æºçš„å…±å¤„å®¹å™¨ç»„æˆçš„åº”ç”¨ç¨‹åºã€‚ è¿™äº›ä½äºåŒä¸€ä½ç½®çš„å®¹å™¨å¯èƒ½å½¢æˆå•ä¸ªå†…èšçš„æœåŠ¡å•å…ƒ â€”â€” ä¸€ä¸ªå®¹å™¨å°†æ–‡ä»¶ä»å…±äº«å·æä¾›ç»™å…¬ä¼—ï¼Œ è€Œå¦ä¸€ä¸ªå•ç‹¬çš„ â€œè¾¹è½¦â€ï¼ˆsidecarï¼‰å®¹å™¨åˆ™åˆ·æ–°æˆ–æ›´æ–°è¿™äº›æ–‡ä»¶ã€‚ Pod å°†è¿™äº›å®¹å™¨å’Œå­˜å‚¨èµ„æºæ‰“åŒ…ä¸ºä¸€ä¸ªå¯ç®¡ç†çš„å®ä½“ã€‚")])]),s._v(" "),t("p",[s._v("**è¯´æ˜: **")]),s._v(" "),t("ul",[t("li",[s._v("å°†å¤šä¸ªå¹¶ç½®ã€åŒç®¡çš„å®¹å™¨ç»„ç»‡åˆ°ä¸€ä¸ª Pod ä¸­æ˜¯ä¸€ç§ç›¸å¯¹é«˜çº§çš„ä½¿ç”¨åœºæ™¯ã€‚ åªæœ‰åœ¨ä¸€äº›åœºæ™¯ä¸­ï¼Œå®¹å™¨ä¹‹é—´ç´§å¯†å…³è”æ—¶ä½ æ‰åº”è¯¥ä½¿ç”¨è¿™ç§æ¨¡å¼ã€‚")]),s._v(" "),t("li",[s._v("æ¯ä¸ª Pod éƒ½æ—¨åœ¨è¿è¡Œç»™å®šåº”ç”¨ç¨‹åºçš„å•ä¸ªå®ä¾‹ã€‚å¦‚æœå¸Œæœ›æ¨ªå‘æ‰©å±•åº”ç”¨ç¨‹åº ï¼ˆä¾‹å¦‚ï¼Œè¿è¡Œå¤šä¸ªå®ä¾‹ä»¥æä¾›æ›´å¤šçš„èµ„æºï¼‰ï¼Œåˆ™åº”è¯¥ä½¿ç”¨å¤šä¸ª Podï¼Œæ¯ä¸ªå®ä¾‹ä½¿ç”¨ä¸€ä¸ª Podã€‚ åœ¨ Kubernetes ä¸­ï¼Œè¿™é€šå¸¸è¢«ç§°ä¸º"),t("strong",[s._v("å‰¯æœ¬ï¼ˆReplicationï¼‰")]),s._v("ã€‚ é€šå¸¸ä½¿ç”¨ä¸€ç§å·¥ä½œè´Ÿè½½èµ„æºåŠå…¶æ§åˆ¶å™¨æ¥åˆ›å»ºå’Œç®¡ç†ä¸€ç»„ Pod å‰¯æœ¬ã€‚")])]),s._v(" "),t("h3",{attrs:{id:"_2-pod-åŸºæœ¬æ“ä½œ"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-pod-åŸºæœ¬æ“ä½œ"}},[s._v("ğŸŒ™")]),s._v(" 2 Pod åŸºæœ¬æ“ä½œ")]),s._v(" "),t("h4",{attrs:{id:"_2-1-æŸ¥çœ‹-pod"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-æŸ¥çœ‹-pod"}},[s._v("ğŸŒ™")]),s._v(" 2.1 æŸ¥çœ‹ pod")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# æŸ¥çœ‹é»˜è®¤å‘½åç©ºé—´çš„ pod")]),s._v("\n$ kubectl get pods"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("pod"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("po\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# æŸ¥çœ‹æ‰€æœ‰å‘½åç©ºé—´çš„ pod")]),s._v("\n$ kubectl get pods"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("pod "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-A")]),s._v("\n$ kubectl get pods"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("pod"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("po "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-n")]),s._v(" å‘½åç©ºé—´åç§°\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# æŸ¥çœ‹é»˜è®¤å‘½åç©ºé—´ä¸‹ pod çš„è¯¦ç»†ä¿¡æ¯")]),s._v("\n$ kubectl get pods "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-o")]),s._v(" wide \n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# æŸ¥çœ‹æ‰€æœ‰å‘½åç©ºé—´ä¸‹ pod çš„è¯¦ç»†ä¿¡æ¯")]),s._v("\n$ kubectl get pods "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-o")]),s._v(" wide "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-A")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# å®æ—¶ç›‘æ§ pod çš„çŠ¶æ€")]),s._v("\n$ kubectl get pod "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-w")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br")])]),t("h4",{attrs:{id:"_2-2-åˆ›å»º-pod"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-åˆ›å»º-pod"}},[s._v("ğŸŒ™")]),s._v(" 2.2 åˆ›å»º pod")]),s._v(" "),t("p",[s._v("pod      :  kubectl run nginx(podåç§°) --image=nginx:1.19")]),s._v(" "),t("p",[s._v("container:  docker run --name nginx nginx:1.19")]),s._v(" "),t("blockquote",[t("p",[s._v("å®˜ç½‘å‚è€ƒåœ°å€: https://kubernetes.io/zh-cn/docs/reference/kubernetes-api/workload-resources/pod-v1/")])]),s._v(" "),t("div",{staticClass:"language-yml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# nginx-pod.yml")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiVersion")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" v1\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kind")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Pod\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("metadata")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nginx\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("spec")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("containers")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nginx\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("image")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nginx"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.19")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("ports")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    \t\t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("containerPort")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br")])]),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ä½¿ç”¨ kubectl apply/create -f åˆ›å»º pod")]),s._v("\n$ kubectl create "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-f")]),s._v(" nginx-pod.yml\n$ kubectl apply "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-f")]),s._v(" nginx-pod.yml\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("blockquote",[t("p",[t("code",[s._v("æ³¨æ„: create ä»…ä»…æ˜¯ä¸å­˜åœ¨æ—¶åˆ›å»º,å¦‚æœå·²ç»å­˜åœ¨åˆ™æŠ¥é”™ï¼apply ä¸å­˜åœ¨åˆ›å»ºï¼Œå­˜åœ¨æ›´æ–°é…ç½®ã€‚æ¨èä½¿ç”¨ applyï¼")])])]),s._v(" "),t("h4",{attrs:{id:"_2-3-åˆ é™¤-pod"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-åˆ é™¤-pod"}},[s._v("ğŸŒ™")]),s._v(" 2.3 åˆ é™¤ pod")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ kubectl delete pod  podåç§°\n$ kubectl delete "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-f")]),s._v(" pod.yml\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h4",{attrs:{id:"_2-4-è¿›å…¥-pod-ä¸­å®¹å™¨"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-4-è¿›å…¥-pod-ä¸­å®¹å™¨"}},[s._v("ğŸŒ™")]),s._v(" 2.4 è¿›å…¥ pod ä¸­å®¹å™¨")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# æ³¨æ„: è¿™ç§æ–¹å¼è¿›å…¥å®¹å™¨é»˜è®¤åªä¼šè¿›å…¥ pod ä¸­ç¬¬ä¸€ä¸ªå®¹å™¨")]),s._v("\n$ kubectl "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exec")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-it")]),s._v(" nginx"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("podåç§°"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" --"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("å›ºå®šå†™æ­»"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" bash"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("æ‰§è¡Œå‘½ä»¤"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# æ³¨æ„: è¿›å…¥æŒ‡å®š pod ä¸­æŒ‡å®šå®¹å™¨")]),s._v("\n$ kubectl "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exec")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-it")]),s._v(" podåç§° "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-c")]),s._v(" å®¹å™¨åç§° --"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("å›ºå®šå†™æ­»"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" bash"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("æ‰§è¡Œå‘½ä»¤"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("h4",{attrs:{id:"_2-5-æŸ¥çœ‹-pod-æ—¥å¿—"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-5-æŸ¥çœ‹-pod-æ—¥å¿—"}},[s._v("ğŸŒ™")]),s._v(" 2.5 æŸ¥çœ‹ pod æ—¥å¿—")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# æ³¨æ„: æŸ¥çœ‹ pod ä¸­ç¬¬ä¸€ä¸ªå®¹å™¨æ—¥å¿—")]),s._v("\n$ kubectl logs -f"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("å¯é€‰,å®æ—¶"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" nginx"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("pod åç§°"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# æ³¨æ„: æŸ¥çœ‹ pod ä¸­æŒ‡å®šå®¹å™¨çš„æ—¥å¿—")]),s._v("\n$ kubect logs "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-f")]),s._v(" podåç§° "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-c")]),s._v(" å®¹å™¨åç§°\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("h4",{attrs:{id:"_2-6-æŸ¥çœ‹-pod-æè¿°ä¿¡æ¯"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-6-æŸ¥çœ‹-pod-æè¿°ä¿¡æ¯"}},[s._v("ğŸŒ™")]),s._v(" 2.6 æŸ¥çœ‹ pod æè¿°ä¿¡æ¯")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ kubectl describe pod nginx"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("podåç§°"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"_3-pod-è¿è¡Œå¤šä¸ªå®¹å™¨"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-pod-è¿è¡Œå¤šä¸ªå®¹å™¨"}},[s._v("ğŸŒ™")]),s._v(" 3 Pod è¿è¡Œå¤šä¸ªå®¹å™¨")]),s._v(" "),t("h4",{attrs:{id:"_3-1-åˆ›å»º-pod"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-åˆ›å»º-pod"}},[s._v("ğŸŒ™")]),s._v(" 3.1 åˆ›å»º pod")]),s._v(" "),t("div",{staticClass:"language-yml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# myapp-pod.yml")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiVersion")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" v1\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kind")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Pod\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("metadata")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" myapp\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("spec")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("containers")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nginx\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("image")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nginx"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.19")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("ports")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    \t\t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("containerPort")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("imagePullPolicy")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" IfNotPresent\n\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" redis\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("image")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" redis"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("5.0.10\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("ports")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    \t\t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("containerPort")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("imagePullPolicy")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" IfNotPresent\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br")])]),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ kubectl apply "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-f")]),s._v(" myapp-pod.yml\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h4",{attrs:{id:"_3-2-æŸ¥çœ‹æŒ‡å®šå®¹å™¨æ—¥å¿—"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-æŸ¥çœ‹æŒ‡å®šå®¹å™¨æ—¥å¿—"}},[s._v("ğŸŒ™")]),s._v(" 3.2 æŸ¥çœ‹æŒ‡å®šå®¹å™¨æ—¥å¿—")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# æŸ¥çœ‹æ—¥å¿— (é»˜è®¤åªæŸ¥çœ‹ç¬¬ä¸€ä¸ªå®¹å™¨æ—¥å¿—ï¼Œè¿™é‡Œæ˜¯å±•ç¤º nginx æ—¥å¿—)")]),s._v("\n$ kubectl logs "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-f")]),s._v(" myapp\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# æŸ¥çœ‹ pod ä¸­æŒ‡å®šå®¹å™¨çš„æ—¥å¿—")]),s._v("\n$ kubectl logs "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-f")]),s._v(" myapp "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-c")]),s._v(" nginx"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("å®¹å™¨åç§°"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n$ kubectl logs "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-f")]),s._v(" myapp "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-c")]),s._v(" redis"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("å®¹å™¨åç§°"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("h4",{attrs:{id:"_3-3-è¿›å…¥å®¹å™¨"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-è¿›å…¥å®¹å™¨"}},[s._v("ğŸŒ™")]),s._v(" 3.3 è¿›å…¥å®¹å™¨")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# è¿›å…¥ pod çš„å®¹å™¨ (é»˜è®¤è¿›å…¥ç¬¬ä¸€ä¸ªå®¹å™¨å†…éƒ¨ï¼Œè¿™é‡Œä¼šè¿›å…¥ nginx å®¹å™¨å†…éƒ¨)")]),s._v("\n$ kubectl "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exec")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-it")]),s._v(" myapp -- "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sh")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# è¿›å…¥ pod ä¸­æŒ‡å®šå®¹å™¨å†…éƒ¨")]),s._v("\n$ kubectl "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exec")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-it")]),s._v(" myapp "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-c")]),s._v(" nginx -- "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sh")]),s._v("\n$ kubectl "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exec")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-it")]),s._v(" myapp "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-c")]),s._v(" redis -- "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sh")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("h3",{attrs:{id:"_4-pod-çš„-labels-æ ‡ç­¾"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-pod-çš„-labels-æ ‡ç­¾"}},[s._v("ğŸŒ™")]),s._v(" 4 Pod çš„ Labels(æ ‡ç­¾)")]),s._v(" "),t("p",[t("code",[s._v("æ ‡ç­¾ï¼ˆLabelsï¼‰")]),s._v(" æ˜¯é™„åŠ åˆ° Kubernetes å¯¹è±¡ï¼ˆæ¯”å¦‚ Podï¼‰ä¸Šçš„é”®å€¼å¯¹ã€‚ æ ‡ç­¾æ—¨åœ¨ç”¨äºæŒ‡å®šå¯¹ç”¨æˆ·æœ‰æ„ä¹‰ä¸”ç›¸å…³çš„å¯¹è±¡çš„æ ‡è¯†å±æ€§ã€‚æ ‡ç­¾å¯ä»¥åœ¨åˆ›å»ºæ—¶é™„åŠ åˆ°å¯¹è±¡ï¼Œéšåå¯ä»¥éšæ—¶æ·»åŠ å’Œä¿®æ”¹ã€‚æ¯ä¸ªå¯¹è±¡éƒ½å¯ä»¥å®šä¹‰ä¸€ç»„é”®(key)/å€¼(value)æ ‡ç­¾ï¼Œä½†æ˜¯æ¯ä¸ªé”®(key)å¯¹äºç»™å®šå¯¹è±¡å¿…é¡»æ˜¯å”¯ä¸€çš„ã€‚")]),s._v(" "),t("p",[s._v("æ ‡ç­¾ä½œç”¨: å°±æ˜¯ç”¨æ¥ç»™ k8s ä¸­å¯¹è±¡èµ·åˆ«å, æœ‰äº†åˆ«åå¯ä»¥è¿‡æ»¤å’Œç­›é€‰")]),s._v(" "),t("h4",{attrs:{id:"_4-1-è¯­æ³•"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-è¯­æ³•"}},[s._v("ğŸŒ™")]),s._v(" 4.1 è¯­æ³•")]),s._v(" "),t("p",[t("code",[s._v("æ ‡ç­¾ç”±é”®å€¼å¯¹ç»„æˆ")]),s._v("ï¼Œå…¶æœ‰æ•ˆæ ‡ç­¾å€¼ï¼š")]),s._v(" "),t("ul",[t("li",[s._v("å¿…é¡»ä¸º 63 ä¸ªå­—ç¬¦æˆ–æ›´å°‘ï¼ˆå¯ä»¥ä¸ºç©ºï¼‰")]),s._v(" "),t("li",[s._v("é™¤éæ ‡ç­¾å€¼ä¸ºç©ºï¼Œå¿…é¡»ä»¥å­—æ¯æ•°å­—å­—ç¬¦ï¼ˆ"),t("code",[s._v("[a-z0-9A-Z]")]),s._v("ï¼‰å¼€å¤´å’Œç»“å°¾")]),s._v(" "),t("li",[s._v("åŒ…å«ç ´æŠ˜å·ï¼ˆ"),t("code",[s._v("-")]),s._v("ï¼‰ã€ä¸‹åˆ’çº¿ï¼ˆ"),t("code",[s._v("_")]),s._v("ï¼‰ã€ç‚¹ï¼ˆ"),t("code",[s._v(".")]),s._v("ï¼‰å’Œå­—æ¯æˆ–æ•°å­—")])]),s._v(" "),t("h4",{attrs:{id:"_4-2-ç¤ºä¾‹"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-ç¤ºä¾‹"}},[s._v("ğŸŒ™")]),s._v(" 4.2 ç¤ºä¾‹")]),s._v(" "),t("div",{staticClass:"language-yml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiVersion")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" v1\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kind")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Pod\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("metadata")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" myapp\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("labels")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" myapp "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#åˆ›å»ºæ—¶æ·»åŠ ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("spec")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("containers")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nginx\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("image")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nginx"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.21")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("imagePullPolicy")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" IfNotPresent\n\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" redis\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("image")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" redis"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("5.0.10\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("imagePullPolicy")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" IfNotPresent\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("restartPolicy")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Always\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br")])]),t("h4",{attrs:{id:"_4-3-æ ‡ç­¾åŸºæœ¬æ“ä½œ"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-3-æ ‡ç­¾åŸºæœ¬æ“ä½œ"}},[s._v("ğŸŒ™")]),s._v(" 4.3 æ ‡ç­¾åŸºæœ¬æ“ä½œ")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# æŸ¥çœ‹æ ‡ç­¾")]),s._v("\n$ kubectl get pods --show-labels\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl label pod podåç§° æ ‡ç­¾é”®å€¼å¯¹")]),s._v("\n$ kubectl label pod myapp "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("env")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("prod\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# è¦†ç›–æ ‡ç­¾ --overwrite")]),s._v("\n$ kubectl label "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--overwrite")]),s._v(" pod myapp "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("env")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("test\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# åˆ é™¤æ ‡ç­¾ -å·ä»£è¡¨åˆ é™¤æ ‡ç­¾")]),s._v("\n$ kubectl label pod myapp env-\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# æ ¹æ®æ ‡ç­¾ç­›é€‰ env=test/env  > = < ")]),s._v("\n$ kubectl get po "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-l")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("env")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("test\n$ kubectl get po "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-l")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("env")]),s._v("\n$ kubectl get po "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-l")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'!env'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ä¸åŒ…å«çš„ pod")]),s._v("\n$ kubectl get po "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-l")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'env in (test,prod)'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#é€‰æ‹©å«æœ‰æŒ‡å®šå€¼çš„ pod")]),s._v("\n$ kubectl get po "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-l")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'env notin (test,prod)'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#é€‰æ‹©å«æœ‰æŒ‡å®šå€¼çš„ pod")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br")])]),t("h3",{attrs:{id:"_5-pod-çš„ç”Ÿå‘½å‘¨æœŸ"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-pod-çš„ç”Ÿå‘½å‘¨æœŸ"}},[s._v("ğŸŒ™")]),s._v(" 5 Pod çš„ç”Ÿå‘½å‘¨æœŸ")]),s._v(" "),t("blockquote",[t("p",[s._v("æ‘˜è‡ªå®˜ç½‘: https://kubernetes.io/zh-cn/docs/concepts/workloads/pods/pod-lifecycle/")])]),s._v(" "),t("p",[s._v("Pod éµå¾ªé¢„å®šä¹‰çš„ç”Ÿå‘½å‘¨æœŸï¼Œèµ·å§‹äº "),t("code",[s._v("Pending")]),s._v(" é˜¶æ®µï¼Œ å¦‚æœè‡³å°‘å…¶ä¸­æœ‰ä¸€ä¸ªä¸»è¦å®¹å™¨æ­£å¸¸å¯åŠ¨ï¼Œåˆ™è¿›å…¥ "),t("code",[s._v("Running")]),s._v("ï¼Œä¹‹åå–å†³äº Pod ä¸­æ˜¯å¦æœ‰å®¹å™¨ä»¥å¤±è´¥çŠ¶æ€ç»“æŸè€Œè¿›å…¥ "),t("code",[s._v("Succeeded")]),s._v(" æˆ–è€… "),t("code",[s._v("Failed")]),s._v(" é˜¶æ®µã€‚ä¸æ­¤åŒæ—¶Pod åœ¨å…¶ç”Ÿå‘½å‘¨æœŸä¸­åªä¼šè¢«è°ƒåº¦ä¸€æ¬¡ã€‚ ä¸€æ—¦ Pod è¢«è°ƒåº¦ï¼ˆåˆ†æ´¾ï¼‰åˆ°æŸä¸ªèŠ‚ç‚¹ï¼ŒPod ä¼šä¸€ç›´åœ¨è¯¥èŠ‚ç‚¹è¿è¡Œï¼Œç›´åˆ° Pod åœæ­¢æˆ–è€…è¢«ç»ˆæ­¢ã€‚")]),s._v(" "),t("h4",{attrs:{id:"_5-1-ç”Ÿå‘½å‘¨æœŸ"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-1-ç”Ÿå‘½å‘¨æœŸ"}},[s._v("ğŸŒ™")]),s._v(" 5.1 ç”Ÿå‘½å‘¨æœŸ")]),s._v(" "),t("p",[s._v("å’Œä¸€ä¸ªä¸ªç‹¬ç«‹çš„åº”ç”¨å®¹å™¨ä¸€æ ·ï¼ŒPod ä¹Ÿè¢«è®¤ä¸ºæ˜¯ç›¸å¯¹ä¸´æ—¶æ€§ï¼ˆè€Œä¸æ˜¯é•¿æœŸå­˜åœ¨ï¼‰çš„å®ä½“ã€‚ Pod ä¼šè¢«åˆ›å»ºã€èµ‹äºˆä¸€ä¸ªå”¯ä¸€çš„ ID(UID)ï¼Œ å¹¶è¢«è°ƒåº¦åˆ°èŠ‚ç‚¹ï¼Œå¹¶åœ¨ç»ˆæ­¢ï¼ˆæ ¹æ®é‡å¯ç­–ç•¥ï¼‰æˆ–åˆ é™¤ä¹‹å‰ä¸€ç›´è¿è¡Œåœ¨è¯¥èŠ‚ç‚¹ã€‚å¦‚æœä¸€ä¸ªèŠ‚ç‚¹æ­»æ‰äº†ï¼Œè°ƒåº¦åˆ°è¯¥èŠ‚ç‚¹çš„ Pod ä¹Ÿè¢«è®¡åˆ’åœ¨ç»™å®šè¶…æ—¶æœŸé™ç»“æŸååˆ é™¤ã€‚")]),s._v(" "),t("p",[s._v("Pod è‡ªèº«ä¸å…·æœ‰è‡ªæ„ˆèƒ½åŠ›ã€‚å¦‚æœ Pod è¢«è°ƒåº¦åˆ°æŸèŠ‚ç‚¹è€Œè¯¥èŠ‚ç‚¹ä¹‹åå¤±æ•ˆï¼Œ Pod ä¼šè¢«åˆ é™¤ï¼›ç±»ä¼¼åœ°ï¼ŒPod æ— æ³•åœ¨å› èŠ‚ç‚¹èµ„æºè€—å°½æˆ–è€…èŠ‚ç‚¹ç»´æŠ¤è€Œè¢«é©±é€æœŸé—´ç»§ç»­å­˜æ´»ã€‚ Kubernetes ä½¿ç”¨ä¸€ç§é«˜çº§æŠ½è±¡æ¥ç®¡ç†è¿™äº›ç›¸å¯¹è€Œè¨€å¯éšæ—¶ä¸¢å¼ƒçš„ Pod å®ä¾‹ï¼Œ ç§°ä½œæ§åˆ¶å™¨ã€‚")]),s._v(" "),t("p",[s._v("ä»»ä½•ç»™å®šçš„ Pod ï¼ˆç”± UID å®šä¹‰ï¼‰ä»ä¸ä¼šè¢«â€œé‡æ–°è°ƒåº¦ï¼ˆrescheduledï¼‰â€åˆ°ä¸åŒçš„èŠ‚ç‚¹ï¼› ç›¸åï¼Œè¿™ä¸€ Pod å¯ä»¥è¢«ä¸€ä¸ªæ–°çš„ã€å‡ ä¹å®Œå…¨ç›¸åŒçš„ Pod æ›¿æ¢æ‰ã€‚ å¦‚æœéœ€è¦ï¼Œæ–° Pod çš„åå­—å¯ä»¥ä¸å˜ï¼Œä½†æ˜¯å…¶ UID ä¼šä¸åŒã€‚")]),s._v(" "),t("p",[s._v("å¦‚æœæŸç‰©å£°ç§°å…¶ç”Ÿå‘½æœŸä¸æŸ Pod ç›¸åŒï¼Œä¾‹å¦‚å­˜å‚¨å·ï¼Œ è¿™å°±æ„å‘³ç€è¯¥å¯¹è±¡åœ¨æ­¤ Pod ï¼ˆUID äº¦ç›¸åŒï¼‰å­˜åœ¨æœŸé—´ä¹Ÿä¸€ç›´å­˜åœ¨ã€‚ å¦‚æœ Pod å› ä¸ºä»»ä½•åŸå› è¢«åˆ é™¤ï¼Œç”šè‡³å®Œå…¨ç›¸åŒçš„æ›¿ä»£ Pod è¢«åˆ›å»ºæ—¶ï¼Œ è¿™ä¸ªç›¸å…³çš„å¯¹è±¡ï¼ˆä¾‹å¦‚è¿™é‡Œçš„å·ï¼‰ä¹Ÿä¼šè¢«åˆ é™¤å¹¶é‡å»ºã€‚")]),s._v(" "),t("h4",{attrs:{id:"_5-2-pod-é˜¶æ®µ"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-2-pod-é˜¶æ®µ"}},[s._v("ğŸŒ™")]),s._v(" 5.2 pod é˜¶æ®µ")]),s._v(" "),t("p",[s._v("Pod é˜¶æ®µçš„æ•°é‡å’Œå«ä¹‰æ˜¯ä¸¥æ ¼å®šä¹‰çš„ã€‚ é™¤äº†æœ¬æ–‡æ¡£ä¸­åˆ—ä¸¾çš„å†…å®¹å¤–ï¼Œä¸åº”è¯¥å†å‡å®š Pod æœ‰å…¶ä»–çš„ "),t("code",[s._v("phase")]),s._v(" å€¼ã€‚")]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",{staticStyle:{"text-align":"left"}},[s._v("å–å€¼")]),s._v(" "),t("th",{staticStyle:{"text-align":"left"}},[s._v("æè¿°")])])]),s._v(" "),t("tbody",[t("tr",[t("td",{staticStyle:{"text-align":"left"}},[t("code",[s._v("Pending")]),s._v("ï¼ˆæ‚¬å†³ï¼‰")]),s._v(" "),t("td",{staticStyle:{"text-align":"left"}},[s._v("Pod å·²è¢« Kubernetes ç³»ç»Ÿæ¥å—ï¼Œä½†æœ‰ä¸€ä¸ªæˆ–è€…å¤šä¸ªå®¹å™¨å°šæœªåˆ›å»ºäº¦æœªè¿è¡Œã€‚æ­¤é˜¶æ®µåŒ…æ‹¬ç­‰å¾… Pod è¢«è°ƒåº¦çš„æ—¶é—´å’Œé€šè¿‡ç½‘ç»œä¸‹è½½é•œåƒçš„æ—¶é—´ã€‚")])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"left"}},[t("code",[s._v("Running")]),s._v("ï¼ˆè¿è¡Œä¸­ï¼‰")]),s._v(" "),t("td",{staticStyle:{"text-align":"left"}},[s._v("Pod å·²ç»ç»‘å®šåˆ°äº†æŸä¸ªèŠ‚ç‚¹ï¼ŒPod ä¸­æ‰€æœ‰çš„å®¹å™¨éƒ½å·²è¢«åˆ›å»ºã€‚è‡³å°‘æœ‰ä¸€ä¸ªå®¹å™¨ä»åœ¨è¿è¡Œï¼Œæˆ–è€…æ­£å¤„äºå¯åŠ¨æˆ–é‡å¯çŠ¶æ€ã€‚")])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"left"}},[t("code",[s._v("Succeeded")]),s._v("ï¼ˆæˆåŠŸï¼‰")]),s._v(" "),t("td",{staticStyle:{"text-align":"left"}},[s._v("Pod ä¸­çš„æ‰€æœ‰å®¹å™¨éƒ½å·²æˆåŠŸç»ˆæ­¢ï¼Œå¹¶ä¸”ä¸ä¼šå†é‡å¯ã€‚")])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"left"}},[t("code",[s._v("Failed")]),s._v("ï¼ˆå¤±è´¥ï¼‰")]),s._v(" "),t("td",{staticStyle:{"text-align":"left"}},[s._v("Pod ä¸­çš„æ‰€æœ‰å®¹å™¨éƒ½å·²ç»ˆæ­¢ï¼Œå¹¶ä¸”è‡³å°‘æœ‰ä¸€ä¸ªå®¹å™¨æ˜¯å› ä¸ºå¤±è´¥ç»ˆæ­¢ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå®¹å™¨ä»¥é 0 çŠ¶æ€é€€å‡ºæˆ–è€…è¢«ç³»ç»Ÿç»ˆæ­¢ã€‚")])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"left"}},[t("code",[s._v("Unknown")]),s._v("ï¼ˆæœªçŸ¥ï¼‰")]),s._v(" "),t("td",{staticStyle:{"text-align":"left"}},[s._v("å› ä¸ºæŸäº›åŸå› æ— æ³•å–å¾— Pod çš„çŠ¶æ€ã€‚è¿™ç§æƒ…å†µé€šå¸¸æ˜¯å› ä¸ºä¸ Pod æ‰€åœ¨ä¸»æœºé€šä¿¡å¤±è´¥ã€‚")])])])]),s._v(" "),t("blockquote",[t("p",[t("strong",[s._v("è¯´æ˜ï¼š")])]),s._v(" "),t("ol",[t("li",[t("p",[s._v("å½“ä¸€ä¸ª Pod è¢«åˆ é™¤æ—¶ï¼Œæ‰§è¡Œä¸€äº› kubectl å‘½ä»¤ä¼šå±•ç¤ºè¿™ä¸ª Pod çš„çŠ¶æ€ä¸º "),t("code",[s._v("Terminating")]),s._v("ï¼ˆç»ˆæ­¢ï¼‰ã€‚ è¿™ä¸ª "),t("code",[s._v("Terminating")]),s._v(" çŠ¶æ€å¹¶ä¸æ˜¯ Pod é˜¶æ®µä¹‹ä¸€ã€‚ Pod è¢«èµ‹äºˆä¸€ä¸ªå¯ä»¥ä½“é¢ç»ˆæ­¢çš„æœŸé™ï¼Œé»˜è®¤ä¸º 30 ç§’ã€‚ ä½ å¯ä»¥ä½¿ç”¨ "),t("code",[s._v("--force")]),s._v(" å‚æ•°æ¥å¼ºåˆ¶ç»ˆæ­¢ Podã€‚")])]),s._v(" "),t("li",[t("p",[s._v("å¦‚æœæŸèŠ‚ç‚¹æ­»æ‰æˆ–è€…ä¸é›†ç¾¤ä¸­å…¶ä»–èŠ‚ç‚¹å¤±è”ï¼ŒKubernetes ä¼šå®æ–½ä¸€ç§ç­–ç•¥ï¼Œå°†å¤±å»çš„èŠ‚ç‚¹ä¸Šè¿è¡Œçš„æ‰€æœ‰ Pod çš„ "),t("code",[s._v("phase")]),s._v(" è®¾ç½®ä¸º "),t("code",[s._v("Failed")]),s._v("ã€‚")])])])]),s._v(" "),t("h3",{attrs:{id:"_6-contrainer-ç‰¹æ€§"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-contrainer-ç‰¹æ€§"}},[s._v("ğŸŒ™")]),s._v(" 6 Contrainer ç‰¹æ€§")]),s._v(" "),t("h4",{attrs:{id:"_6-1-å®¹å™¨ç”Ÿå‘½å‘¨æœŸ"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-1-å®¹å™¨ç”Ÿå‘½å‘¨æœŸ"}},[s._v("ğŸŒ™")]),s._v(" 6.1 å®¹å™¨ç”Ÿå‘½å‘¨æœŸ")]),s._v(" "),t("p",[s._v("Kubernetes ä¼šè·Ÿè¸ª Pod ä¸­æ¯ä¸ªå®¹å™¨çš„çŠ¶æ€ï¼Œå°±åƒå®ƒè·Ÿè¸ª Pod æ€»ä½“ä¸Šçš„é˜¶æ®µä¸€æ ·ã€‚ ä½ å¯ä»¥ä½¿ç”¨å®¹å™¨ç”Ÿå‘½å‘¨æœŸå›è°ƒæ¥åœ¨å®¹å™¨ç”Ÿå‘½å‘¨æœŸä¸­çš„ç‰¹å®šæ—¶é—´ç‚¹è§¦å‘äº‹ä»¶ã€‚")]),s._v(" "),t("p",[s._v("ä¸€æ—¦è°ƒåº¦å™¨å°† Pod åˆ†æ´¾ç»™æŸä¸ªèŠ‚ç‚¹ï¼Œ"),t("code",[s._v("kubelet")]),s._v(" å°±é€šè¿‡å®¹å™¨è¿è¡Œæ—¶å¼€å§‹ä¸º Pod åˆ›å»ºå®¹å™¨ã€‚å®¹å™¨çš„çŠ¶æ€æœ‰ä¸‰ç§ï¼š"),t("code",[s._v("Waiting")]),s._v("ï¼ˆç­‰å¾…ï¼‰ã€"),t("code",[s._v("Running")]),s._v("ï¼ˆè¿è¡Œä¸­ï¼‰å’Œ "),t("code",[s._v("Terminated")]),s._v("ï¼ˆå·²ç»ˆæ­¢ï¼‰ã€‚")]),s._v(" "),t("p",[s._v("è¦æ£€æŸ¥ Pod ä¸­å®¹å™¨çš„çŠ¶æ€ï¼Œä½ å¯ä»¥ä½¿ç”¨ "),t("code",[s._v("kubectl describe pod <pod åç§°>")]),s._v("ã€‚ å…¶è¾“å‡ºä¸­åŒ…å« Pod ä¸­æ¯ä¸ªå®¹å™¨çš„çŠ¶æ€ã€‚")]),s._v(" "),t("p",[s._v("æ¯ç§çŠ¶æ€éƒ½æœ‰ç‰¹å®šçš„å«ä¹‰ï¼š")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("Waiting")]),s._v(" ï¼ˆç­‰å¾…ï¼‰")])]),s._v(" "),t("p",[s._v("å¦‚æœå®¹å™¨å¹¶ä¸å¤„åœ¨ "),t("code",[s._v("Running")]),s._v(" æˆ– "),t("code",[s._v("Terminated")]),s._v(" çŠ¶æ€ä¹‹ä¸€ï¼Œå®ƒå°±å¤„åœ¨ "),t("code",[s._v("Waiting")]),s._v(" çŠ¶æ€ã€‚ å¤„äº "),t("code",[s._v("Waiting")]),s._v(" çŠ¶æ€çš„å®¹å™¨ä»åœ¨è¿è¡Œå®ƒå®Œæˆå¯åŠ¨æ‰€éœ€è¦çš„æ“ä½œï¼šä¾‹å¦‚ï¼Œ ä»æŸä¸ªå®¹å™¨é•œåƒä»“åº“æ‹‰å–å®¹å™¨é•œåƒï¼Œæˆ–è€…å‘å®¹å™¨åº”ç”¨ Secret æ•°æ®ç­‰ç­‰ã€‚ å½“ä½ ä½¿ç”¨ "),t("code",[s._v("kubectl")]),s._v(" æ¥æŸ¥è¯¢åŒ…å« "),t("code",[s._v("Waiting")]),s._v(" çŠ¶æ€çš„å®¹å™¨çš„ Pod æ—¶ï¼Œä½ ä¹Ÿä¼šçœ‹åˆ°ä¸€ä¸ª Reason å­—æ®µï¼Œå…¶ä¸­ç»™å‡ºäº†å®¹å™¨å¤„äºç­‰å¾…çŠ¶æ€çš„åŸå› ã€‚")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("Running")]),s._v("ï¼ˆè¿è¡Œä¸­ï¼‰")])]),s._v(" "),t("p",[t("code",[s._v("Running")]),s._v(" çŠ¶æ€è¡¨æ˜å®¹å™¨æ­£åœ¨æ‰§è¡ŒçŠ¶æ€å¹¶ä¸”æ²¡æœ‰é—®é¢˜å‘ç”Ÿã€‚ å¦‚æœé…ç½®äº† "),t("code",[s._v("postStart")]),s._v(" å›è°ƒï¼Œé‚£ä¹ˆè¯¥å›è°ƒå·²ç»æ‰§è¡Œä¸”å·²å®Œæˆã€‚ å¦‚æœä½ ä½¿ç”¨ "),t("code",[s._v("kubectl")]),s._v(" æ¥æŸ¥è¯¢åŒ…å« "),t("code",[s._v("Running")]),s._v(" çŠ¶æ€çš„å®¹å™¨çš„ Pod æ—¶ï¼Œ ä½ ä¹Ÿä¼šçœ‹åˆ°å…³äºå®¹å™¨è¿›å…¥ "),t("code",[s._v("Running")]),s._v(" çŠ¶æ€çš„ä¿¡æ¯ã€‚")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("Terminated")]),s._v("ï¼ˆå·²ç»ˆæ­¢ï¼‰")])]),s._v(" "),t("p",[s._v("å¤„äº "),t("code",[s._v("Terminated")]),s._v(" çŠ¶æ€çš„å®¹å™¨å·²ç»å¼€å§‹æ‰§è¡Œå¹¶ä¸”æˆ–è€…æ­£å¸¸ç»“æŸæˆ–è€…å› ä¸ºæŸäº›åŸå› å¤±è´¥ã€‚ å¦‚æœä½ ä½¿ç”¨ "),t("code",[s._v("kubectl")]),s._v(" æ¥æŸ¥è¯¢åŒ…å« "),t("code",[s._v("Terminated")]),s._v(" çŠ¶æ€çš„å®¹å™¨çš„ Pod æ—¶ï¼Œ ä½ ä¼šçœ‹åˆ°å®¹å™¨è¿›å…¥æ­¤çŠ¶æ€çš„åŸå› ã€é€€å‡ºä»£ç ä»¥åŠå®¹å™¨æ‰§è¡ŒæœŸé—´çš„èµ·æ­¢æ—¶é—´ã€‚")]),s._v(" "),t("p",[s._v("å¦‚æœå®¹å™¨é…ç½®äº† "),t("code",[s._v("preStop")]),s._v(" å›è°ƒï¼Œåˆ™è¯¥å›è°ƒä¼šåœ¨å®¹å™¨è¿›å…¥ "),t("code",[s._v("Terminated")]),s._v(" çŠ¶æ€ä¹‹å‰æ‰§è¡Œã€‚")]),s._v(" "),t("h4",{attrs:{id:"_6-2-å®¹å™¨ç”Ÿå‘½å‘¨æœŸå›è°ƒ-äº‹ä»¶-é’©å­"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-2-å®¹å™¨ç”Ÿå‘½å‘¨æœŸå›è°ƒ-äº‹ä»¶-é’©å­"}},[s._v("ğŸŒ™")]),s._v(" 6.2 å®¹å™¨ç”Ÿå‘½å‘¨æœŸå›è°ƒ/äº‹ä»¶/é’©å­")]),s._v(" "),t("p",[s._v("ç±»ä¼¼äºè®¸å¤šå…·æœ‰ç”Ÿå‘½å‘¨æœŸå›è°ƒç»„ä»¶çš„ç¼–ç¨‹è¯­è¨€æ¡†æ¶ï¼Œä¾‹å¦‚ Angularã€Vueã€Kubernetes ä¸ºå®¹å™¨æä¾›äº†ç”Ÿå‘½å‘¨æœŸå›è°ƒã€‚ å›è°ƒä½¿å®¹å™¨èƒ½å¤Ÿäº†è§£å…¶ç®¡ç†ç”Ÿå‘½å‘¨æœŸä¸­çš„äº‹ä»¶ï¼Œå¹¶åœ¨æ‰§è¡Œç›¸åº”çš„ç”Ÿå‘½å‘¨æœŸå›è°ƒæ—¶è¿è¡Œåœ¨å¤„ç†ç¨‹åºä¸­å®ç°çš„ä»£ç ã€‚")]),s._v(" "),t("p",[s._v("æœ‰ä¸¤ä¸ªå›è°ƒæš´éœ²ç»™å®¹å™¨ï¼š")]),s._v(" "),t("ul",[t("li",[t("p",[t("code",[s._v("PostStart")]),s._v(" è¿™ä¸ªå›è°ƒåœ¨å®¹å™¨è¢«åˆ›å»ºä¹‹åç«‹å³è¢«æ‰§è¡Œã€‚ ä½†æ˜¯ï¼Œä¸èƒ½ä¿è¯å›è°ƒä¼šåœ¨å®¹å™¨å…¥å£ç‚¹ï¼ˆENTRYPOINTï¼‰ä¹‹å‰æ‰§è¡Œã€‚ æ²¡æœ‰å‚æ•°ä¼ é€’ç»™å¤„ç†ç¨‹åºã€‚")])]),s._v(" "),t("li",[t("p",[t("code",[s._v("PreStop")]),s._v(" åœ¨å®¹å™¨å›  API è¯·æ±‚æˆ–è€…ç®¡ç†äº‹ä»¶ï¼ˆè¯¸å¦‚å­˜æ´»æ€æ¢é’ˆã€å¯åŠ¨æ¢é’ˆå¤±è´¥ã€èµ„æºæŠ¢å ã€èµ„æºç«äº‰ç­‰ï¼‰ è€Œè¢«ç»ˆæ­¢ä¹‹å‰ï¼Œæ­¤å›è°ƒä¼šè¢«è°ƒç”¨ã€‚ å¦‚æœå®¹å™¨å·²ç»å¤„äºå·²ç»ˆæ­¢æˆ–è€…å·²å®ŒæˆçŠ¶æ€ï¼Œåˆ™å¯¹ preStop å›è°ƒçš„è°ƒç”¨å°†å¤±è´¥ã€‚ åœ¨ç”¨æ¥åœæ­¢å®¹å™¨çš„ TERM ä¿¡å·è¢«å‘å‡ºä¹‹å‰ï¼Œå›è°ƒå¿…é¡»æ‰§è¡Œç»“æŸã€‚ Pod çš„ç»ˆæ­¢å®½é™å‘¨æœŸåœ¨ "),t("code",[s._v("PreStop")]),s._v(" å›è°ƒè¢«æ‰§è¡Œä¹‹å‰å³å¼€å§‹è®¡æ•°ï¼Œ æ‰€ä»¥æ— è®ºå›è°ƒå‡½æ•°çš„æ‰§è¡Œç»“æœå¦‚ä½•ï¼Œå®¹å™¨æœ€ç»ˆéƒ½ä¼šåœ¨ Pod çš„ç»ˆæ­¢å®½é™æœŸå†…è¢«ç»ˆæ­¢ã€‚ æ²¡æœ‰å‚æ•°ä¼šè¢«ä¼ é€’ç»™å¤„ç†ç¨‹åºã€‚")])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("ä½¿ç”¨å®¹å™¨ç”Ÿå‘½å‘¨æœŸå›è°ƒ")])])])]),s._v(" "),t("div",{staticClass:"language-yaml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yaml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# nginx-pod.yml")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiVersion")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" v1\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kind")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Pod\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("metadata")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nginx\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("spec")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("containers")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nginx\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("image")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nginx"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.19")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("lifecycle")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("postStart")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#å®¹å™¨åˆ›å»ºè¿‡ç¨‹ä¸­æ‰§è¡Œ")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("exec")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("command")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/bin/sh"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"-c"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"echo postStart >> /start.txt"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("preStop")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#å®¹å™¨ç»ˆæ­¢ä¹‹å‰æ‰§è¡Œ")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("exec")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("command")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/bin/sh"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"-c"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"echo postStop >> /stop.txt && sleep 5"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("ports")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    \t\t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("containerPort")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br")])]),t("h4",{attrs:{id:"_6-3-å®¹å™¨é‡å¯ç­–ç•¥"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-3-å®¹å™¨é‡å¯ç­–ç•¥"}},[s._v("ğŸŒ™")]),s._v(" 6.3 å®¹å™¨é‡å¯ç­–ç•¥")]),s._v(" "),t("p",[s._v("Pod çš„ "),t("code",[s._v("spec")]),s._v(" ä¸­åŒ…å«ä¸€ä¸ª "),t("code",[s._v("restartPolicy")]),s._v(" å­—æ®µï¼Œå…¶å¯èƒ½å–å€¼åŒ…æ‹¬ "),t("code",[s._v("Always(æ€»æ˜¯é‡å¯)ã€OnFailure(å®¹å™¨å¼‚å¸¸é€€å‡ºçŠ¶æ€ç é 0,é‡å¯) å’Œ Never")]),s._v("ã€‚é»˜è®¤å€¼æ˜¯ "),t("code",[s._v("Always")]),s._v("ã€‚")]),s._v(" "),t("p",[t("code",[s._v("restartPolicy")]),s._v(" é€‚ç”¨äº Pod ä¸­çš„æ‰€æœ‰å®¹å™¨ã€‚"),t("code",[s._v("restartPolicy")]),s._v(" ä»…é’ˆå¯¹åŒä¸€èŠ‚ç‚¹ä¸Š "),t("code",[s._v("kubelet")]),s._v(" çš„å®¹å™¨é‡å¯åŠ¨ä½œã€‚å½“ Pod ä¸­çš„å®¹å™¨é€€å‡ºæ—¶ï¼Œ"),t("code",[s._v("kubelet")]),s._v(" ä¼šæŒ‰æŒ‡æ•°å›é€€æ–¹å¼è®¡ç®—é‡å¯çš„å»¶è¿Ÿï¼ˆ10sã€20sã€40sã€...ï¼‰ï¼Œå…¶æœ€é•¿å»¶è¿Ÿä¸º 5 åˆ†é’Ÿã€‚ ä¸€æ—¦æŸå®¹å™¨æ‰§è¡Œäº† 10 åˆ†é’Ÿå¹¶ä¸”æ²¡æœ‰å‡ºç°é—®é¢˜ï¼Œ"),t("code",[s._v("kubelet")]),s._v(" å¯¹è¯¥å®¹å™¨çš„é‡å¯å›é€€è®¡æ—¶å™¨æ‰§è¡Œé‡ç½®æ“ä½œã€‚")]),s._v(" "),t("div",{staticClass:"language-yaml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yaml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiVersion")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" v1\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kind")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Pod\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("metadata")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nginx\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("labels")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("app")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nginx\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("spec")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("containers")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nginx\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("image")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nginx"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.19")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("imagePullPolicy")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" IfNotPresent\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("restartPolicy")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Always "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# OnFailure Never")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br")])]),t("h4",{attrs:{id:"_6-4-è‡ªå®šä¹‰å®¹å™¨å¯åŠ¨å‘½ä»¤"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-4-è‡ªå®šä¹‰å®¹å™¨å¯åŠ¨å‘½ä»¤"}},[s._v("ğŸŒ™")]),s._v(" 6.4 è‡ªå®šä¹‰å®¹å™¨å¯åŠ¨å‘½ä»¤")]),s._v(" "),t("p",[s._v("å’Œ Docker å®¹å™¨ä¸€æ ·,k8sä¸­å®¹å™¨ä¹Ÿå¯ä»¥é€šè¿‡commandã€args ç”¨æ¥ä¿®æ”¹å®¹å™¨å¯åŠ¨é»˜è®¤æ‰§è¡Œå‘½ä»¤ä»¥åŠä¼ é€’ç›¸å…³å‚æ•°ã€‚"),t("strong",[s._v("ä½†ä¸€èˆ¬æ¨èä½¿ç”¨ command ä¿®æ”¹å¯åŠ¨å‘½ä»¤ï¼Œä½¿ç”¨ args ä¸ºå¯åŠ¨å‘½ä»¤ä¼ é€’å‚æ•°ã€‚")])]),s._v(" "),t("div",{staticClass:"language-yaml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yaml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiVersion")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" v1\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kind")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Pod\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("metadata")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" redis\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("labels")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("app")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" redis\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("spec")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("containers")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" redis\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("image")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" redis"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("5.0.10\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("command")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"redis-server"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#ç”¨æ¥æŒ‡å®šå¯åŠ¨å‘½ä»¤")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("args")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"--appendonly yes"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ç”¨æ¥ä¸ºå¯åŠ¨å‘½ä»¤ä¼ é€’å‚æ•°")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('#args: ["redis-server","--appendonly yes"] # å•ç‹¬ä½¿ç”¨ä¿®æ”¹å¯åŠ¨å‘½ä»¤å¹¶ä¼ é€’å‚æ•°')]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#args:                                     # å¦ä¸€ç§è¯­æ³•æ ¼å¼")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#  - redis-server")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('#  - "--appendonly yes"')]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("imagePullPolicy")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" IfNotPresent\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("restartPolicy")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Always\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br")])]),t("h4",{attrs:{id:"_6-5-å®¹å™¨æ¢é’ˆ"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-5-å®¹å™¨æ¢é’ˆ"}},[s._v("ğŸŒ™")]),s._v(" 6.5 å®¹å™¨æ¢é’ˆ")]),s._v(" "),t("p",[s._v("probe æ˜¯ç”± kubeletå¯¹å®¹å™¨æ‰§è¡Œçš„å®šæœŸè¯Šæ–­ã€‚ è¦æ‰§è¡Œè¯Šæ–­ï¼Œkubelet æ—¢å¯ä»¥åœ¨å®¹å™¨å†…æ‰§è¡Œä»£ç ï¼Œä¹Ÿå¯ä»¥å‘å‡ºä¸€ä¸ªç½‘ç»œè¯·æ±‚ã€‚")]),s._v(" "),t("p",[s._v("å®šä¹‰: å®¹å™¨æ¢é’ˆ å°±æ˜¯ç”¨æ¥å®šæœŸå¯¹å®¹å™¨è¿›è¡Œå¥åº·æ£€æŸ¥çš„ã€‚")]),s._v(" "),t("p",[t("strong",[s._v("æ¢æµ‹ç±»å‹")])]),s._v(" "),t("p",[s._v("é’ˆå¯¹è¿è¡Œä¸­çš„å®¹å™¨ï¼Œ"),t("code",[s._v("kubelet")]),s._v(" å¯ä»¥é€‰æ‹©æ˜¯å¦æ‰§è¡Œä»¥ä¸‹ä¸‰ç§æ¢é’ˆï¼Œä»¥åŠå¦‚ä½•é’ˆå¯¹æ¢æµ‹ç»“æœä½œå‡ºååº”ï¼š")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("livenessProbe")]),s._v(" "),t("strong",[s._v("æŒ‡ç¤ºå®¹å™¨æ˜¯å¦æ­£åœ¨è¿è¡Œ")]),s._v("ã€‚å¦‚æœå­˜æ´»æ€æ¢æµ‹å¤±è´¥ï¼Œåˆ™ kubelet ä¼šæ€æ­»å®¹å™¨ï¼Œ å¹¶ä¸”å®¹å™¨å°†æ ¹æ®å…¶é‡å¯ç­–ç•¥å†³å®šæœªæ¥ã€‚å¦‚æœå®¹å™¨ä¸æä¾›å­˜æ´»æ¢é’ˆï¼Œ åˆ™é»˜è®¤çŠ¶æ€ä¸º "),t("code",[s._v("Success")]),s._v("ã€‚")]),s._v(" "),t("li",[t("code",[s._v("readinessProbe")]),t("strong",[s._v("æŒ‡ç¤ºå®¹å™¨æ˜¯å¦å‡†å¤‡å¥½ä¸ºè¯·æ±‚æä¾›æœ")]),s._v("ã€‚å¦‚æœå°±ç»ªæ€æ¢æµ‹å¤±è´¥ï¼Œ ç«¯ç‚¹æ§åˆ¶å™¨å°†ä»ä¸ Pod åŒ¹é…çš„æ‰€æœ‰æœåŠ¡çš„ç«¯ç‚¹åˆ—è¡¨ä¸­åˆ é™¤è¯¥ Pod çš„ IP åœ°å€ã€‚ åˆå§‹å»¶è¿Ÿä¹‹å‰çš„å°±ç»ªæ€çš„çŠ¶æ€å€¼é»˜è®¤ä¸º "),t("code",[s._v("Failure")]),s._v("ã€‚ å¦‚æœå®¹å™¨ä¸æä¾›å°±ç»ªæ€æ¢é’ˆï¼Œåˆ™é»˜è®¤çŠ¶æ€ä¸º "),t("code",[s._v("Success")]),s._v("ã€‚")]),s._v(" "),t("li",[t("code",[s._v("startupProbe 1.7+")]),t("strong",[s._v("æŒ‡ç¤ºå®¹å™¨ä¸­çš„åº”ç”¨æ˜¯å¦å·²ç»å¯åŠ¨")]),s._v("ã€‚å¦‚æœæä¾›äº†å¯åŠ¨æ¢é’ˆï¼Œåˆ™æ‰€æœ‰å…¶ä»–æ¢é’ˆéƒ½ä¼šè¢« ç¦ç”¨ï¼Œç›´åˆ°æ­¤æ¢é’ˆæˆåŠŸä¸ºæ­¢ã€‚å¦‚æœå¯åŠ¨æ¢æµ‹å¤±è´¥ï¼Œ"),t("code",[s._v("kubelet")]),s._v(" å°†æ€æ­»å®¹å™¨ï¼Œ è€Œå®¹å™¨ä¾å…¶é‡å¯ç­–ç•¥è¿›è¡Œé‡å¯ã€‚ å¦‚æœå®¹å™¨æ²¡æœ‰æä¾›å¯åŠ¨æ¢æµ‹ï¼Œåˆ™é»˜è®¤çŠ¶æ€ä¸º "),t("code",[s._v("Success")]),s._v("ã€‚")])]),s._v(" "),t("p",[t("strong",[s._v("æ¢é’ˆæœºåˆ¶")])]),s._v(" "),t("p",[s._v("ä½¿ç”¨æ¢é’ˆæ¥æ£€æŸ¥å®¹å™¨æœ‰å››ç§ä¸åŒçš„æ–¹æ³•ã€‚ æ¯ä¸ªæ¢é’ˆéƒ½å¿…é¡»å‡†ç¡®å®šä¹‰ä¸ºè¿™å››ç§æœºåˆ¶ä¸­çš„ä¸€ç§ï¼š")]),s._v(" "),t("ul",[t("li",[t("p",[t("code",[s._v("exec")])]),s._v(" "),t("p",[s._v("åœ¨å®¹å™¨å†…æ‰§è¡ŒæŒ‡å®šå‘½ä»¤ã€‚å¦‚æœå‘½ä»¤é€€å‡ºæ—¶è¿”å›ç ä¸º 0 åˆ™è®¤ä¸ºè¯Šæ–­æˆåŠŸã€‚")])]),s._v(" "),t("li",[t("p",[t("code",[s._v("grpc")])]),s._v(" "),t("p",[s._v('ä½¿ç”¨ gRPC æ‰§è¡Œä¸€ä¸ªè¿œç¨‹è¿‡ç¨‹è°ƒç”¨ã€‚ ç›®æ ‡åº”è¯¥å®ç° gRPCå¥åº·æ£€æŸ¥ã€‚ å¦‚æœå“åº”çš„çŠ¶æ€æ˜¯ "SERVING"ï¼Œåˆ™è®¤ä¸ºè¯Šæ–­æˆåŠŸã€‚ gRPC æ¢é’ˆæ˜¯ä¸€ä¸ª Alpha ç‰¹æ€§ï¼Œåªæœ‰åœ¨ä½ å¯ç”¨äº† "GRPCContainerProbe" ç‰¹æ€§é—¨æ§æ—¶æ‰èƒ½ä½¿ç”¨ã€‚')])]),s._v(" "),t("li",[t("p",[t("code",[s._v("httpGet")])]),s._v(" "),t("p",[s._v("å¯¹å®¹å™¨çš„ IP åœ°å€ä¸ŠæŒ‡å®šç«¯å£å’Œè·¯å¾„æ‰§è¡Œ HTTP "),t("code",[s._v("GET")]),s._v(" è¯·æ±‚ã€‚å¦‚æœå“åº”çš„çŠ¶æ€ç å¤§äºç­‰äº 200 ä¸”å°äº 400ï¼Œåˆ™è¯Šæ–­è¢«è®¤ä¸ºæ˜¯æˆåŠŸçš„ã€‚")])]),s._v(" "),t("li",[t("p",[t("code",[s._v("tcpSocket")])]),s._v(" "),t("p",[s._v("å¯¹å®¹å™¨çš„ IP åœ°å€ä¸Šçš„æŒ‡å®šç«¯å£æ‰§è¡Œ TCP æ£€æŸ¥ã€‚å¦‚æœç«¯å£æ‰“å¼€ï¼Œåˆ™è¯Šæ–­è¢«è®¤ä¸ºæ˜¯æˆåŠŸçš„ã€‚ å¦‚æœè¿œç¨‹ç³»ç»Ÿï¼ˆå®¹å™¨ï¼‰åœ¨æ‰“å¼€è¿æ¥åç«‹å³å°†å…¶å…³é—­ï¼Œè¿™ç®—ä½œæ˜¯å¥åº·çš„ã€‚")])])]),s._v(" "),t("p",[t("strong",[s._v("æ¢é’ˆç»“æœ")])]),s._v(" "),t("p",[s._v("æ¯æ¬¡æ¢æµ‹éƒ½å°†è·å¾—ä»¥ä¸‹ä¸‰ç§ç»“æœä¹‹ä¸€ï¼š")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("Success")]),s._v("ï¼ˆæˆåŠŸï¼‰å®¹å™¨é€šè¿‡äº†è¯Šæ–­ã€‚")]),s._v(" "),t("li",[t("code",[s._v("Failure")]),s._v("ï¼ˆå¤±è´¥ï¼‰å®¹å™¨æœªé€šè¿‡è¯Šæ–­ã€‚")]),s._v(" "),t("li",[t("code",[s._v("Unknown")]),s._v("ï¼ˆæœªçŸ¥ï¼‰è¯Šæ–­å¤±è´¥ï¼Œå› æ­¤ä¸ä¼šé‡‡å–ä»»ä½•è¡ŒåŠ¨ã€‚")])]),s._v(" "),t("p",[t("strong",[s._v("æ¢é’ˆå‚æ•°")])]),s._v(" "),t("div",{staticClass:"language-yml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("initialDelaySeconds")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#åˆå§‹åŒ–æ—¶é—´5s")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("periodSeconds")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("    \t\t "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#æ£€æµ‹é—´éš”æ—¶é—´4s")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("timeoutSeconds")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("  \t\t\t "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#é»˜è®¤æ£€æµ‹è¶…æ—¶æ—¶é—´ä¸º1s")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("failureThreshold")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("  \t\t "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#é»˜è®¤å¤±è´¥æ¬¡æ•°ä¸º3æ¬¡ï¼Œè¾¾åˆ°3æ¬¡åé‡å¯pod")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("successThreshold")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("   \t "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#é»˜è®¤æˆåŠŸæ¬¡æ•°ä¸º1æ¬¡ï¼Œ1æ¬¡ç›‘æµ‹æˆåŠŸä»£è¡¨æˆåŠŸ")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("p",[t("strong",[s._v("ä½¿ç”¨æ¢é’ˆ")])]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("exec")])])]),s._v(" "),t("div",{staticClass:"language-yaml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yaml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiVersion")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" v1\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kind")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Pod\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("metadata")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" liveness"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("exec\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("labels")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("exec")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" exec\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("spec")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("containers")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nginx\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("image")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nginx"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.19")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("ports")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("containerPort")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("args")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" /bin/sh\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("c\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" sleep 7;nginx "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v('g "daemon off;" '),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#è¿™ä¸€æ­¥ä¼šå’Œåˆå§‹åŒ–åŒæ—¶å¼€å§‹è¿è¡Œï¼Œä¹Ÿå°±æ˜¯åœ¨åˆå§‹åŒ–5såå’Œ7ç§’ä¹‹é—´ï¼Œä¼šæ£€æµ‹å‡ºä¸€æ¬¡å¤±è´¥ï¼Œ7ç§’åå¯åŠ¨åæ£€æµ‹æ­£å¸¸ï¼Œæ‰€ä»¥podä¸ä¼šé‡å¯")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("imagePullPolicy")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" IfNotPresent\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("livenessProbe")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("exec")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#è¿™é‡Œä½¿ç”¨ exec æ‰§è¡Œ shell å‘½ä»¤æ£€æµ‹å®¹å™¨çŠ¶æ€")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("command")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("  \n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" ls\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" /var/run/nginx.pid  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#æŸ¥çœ‹æ˜¯å¦æœ‰pidæ–‡ä»¶")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("initialDelaySeconds")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#åˆå§‹åŒ–æ—¶é—´5s")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("periodSeconds")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#æ£€æµ‹é—´éš”æ—¶é—´4s")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("timeoutSeconds")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#é»˜è®¤æ£€æµ‹è¶…æ—¶æ—¶é—´ä¸º1s")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("failureThreshold")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#é»˜è®¤å¤±è´¥æ¬¡æ•°ä¸º3æ¬¡ï¼Œè¾¾åˆ°3æ¬¡åé‡å¯pod")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("successThreshold")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#é»˜è®¤æˆåŠŸæ¬¡æ•°ä¸º1æ¬¡ï¼Œ1 æ¬¡ä»£è¡¨æˆåŠŸ")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br")])]),t("blockquote",[t("p",[t("code",[s._v("è¯´æ˜ï¼š")])]),s._v(" "),t("ol",[t("li",[s._v("å¦‚æœ sleep 7sï¼Œç¬¬ä¸€æ¬¡æ£€æµ‹å‘ç°å¤±è´¥ï¼Œä½†æ˜¯ç¬¬äºŒæ¬¡æ£€æµ‹å‘ç°æˆåŠŸåå®¹å™¨å°±ä¸€ç›´å¤„äºå¥åº·çŠ¶æ€ä¸ä¼šé‡å¯ã€‚")]),s._v(" "),t("li",[s._v("å¦‚æœ sleep 30sï¼Œç¬¬ä¸€æ¬¡æ£€æµ‹å¤±è´¥ï¼Œè¶…è¿‡ 3 æ¬¡æ£€æµ‹åŒæ ·å¤±è´¥ï¼Œk8s å°±å›æ€æ­»å®¹å™¨è¿›è¡Œé‡å¯ï¼Œåå¤å¾ªç¯è¿™ä¸ªè¿‡ç¨‹ã€‚")])])]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("tcpSocket")])])]),s._v(" "),t("div",{staticClass:"language-yaml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yaml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiVersion")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" v1\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kind")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Pod\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("metadata")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" liveness"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("tcpsocket\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("labels")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("tcpsocket")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" tcpsocket\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("spec")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("containers")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nginx\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("image")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nginx"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.19")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("ports")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("containerPort")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("args")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" /bin/sh\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("c\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" sleep 7;nginx "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v('g "daemon off;"  '),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#è¿™ä¸€æ­¥ä¼šå’Œåˆå§‹åŒ–åŒæ—¶å¼€å§‹è¿è¡Œï¼Œä¹Ÿå°±æ˜¯åœ¨åˆå§‹åŒ–5såå’Œ7ç§’ä¹‹é—´ï¼Œä¼šæ£€æµ‹å‡ºä¸€æ¬¡å¤±è´¥ï¼Œ7ç§’åå¯åŠ¨åæ£€æµ‹æ­£å¸¸ï¼Œæ‰€ä»¥podä¸ä¼šé‡å¯")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("imagePullPolicy")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" IfNotPresent\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("livenessProbe")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("tcpSocket")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("port")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("initialDelaySeconds")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#åˆå§‹åŒ–æ—¶é—´5s")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("periodSeconds")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#æ£€æµ‹é—´éš”æ—¶é—´4s")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("timeoutSeconds")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#é»˜è®¤æ£€æµ‹è¶…æ—¶æ—¶é—´ä¸º1s")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("failureThreshold")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#é»˜è®¤å¤±è´¥æ¬¡æ•°ä¸º3æ¬¡ï¼Œè¾¾åˆ°3æ¬¡åé‡å¯pod")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("successThreshold")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#é»˜è®¤æˆåŠŸæ¬¡æ•°ä¸º1æ¬¡ï¼Œ1 æ¬¡ä»£è¡¨æˆåŠŸ")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br")])]),t("ul",[t("li",[t("strong",[s._v("httpGet")])])]),s._v(" "),t("div",{staticClass:"language-yaml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yaml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# probe-liveness-httget.yml")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiVersion")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" v1\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kind")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Pod\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("metadata")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" liveness"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("httpget\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("labels")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("httpget")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" httpget\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("spec")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("containers")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nginx\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("image")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nginx"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.19")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("ports")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("containerPort")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("args")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" /bin/sh\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("c\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" sleep 7;nginx "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v('g "daemon off;" '),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#è¿™ä¸€æ­¥ä¼šå’Œåˆå§‹åŒ–åŒæ—¶å¼€å§‹è¿è¡Œï¼Œä¹Ÿå°±æ˜¯åœ¨åˆå§‹åŒ–5såå’Œ7ç§’ä¹‹é—´ï¼Œä¼šæ£€æµ‹å‡ºä¸€æ¬¡å¤±è´¥ï¼Œ7ç§’åå¯åŠ¨åæ£€æµ‹æ­£å¸¸ï¼Œæ‰€ä»¥podä¸ä¼šé‡å¯")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("imagePullPolicy")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" IfNotPresent\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("livenessProbe")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("httpGet")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#httpget")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("port")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#è®¿é—®çš„ç«¯å£")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("path")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" /index.html   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#è®¿é—®çš„è·¯å¾„")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("initialDelaySeconds")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#åˆå§‹åŒ–æ—¶é—´5s")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("periodSeconds")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#æ£€æµ‹é—´éš”æ—¶é—´4s")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("timeoutSeconds")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#é»˜è®¤æ£€æµ‹è¶…æ—¶æ—¶é—´ä¸º1s")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("failureThreshold")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#é»˜è®¤å¤±è´¥æ¬¡æ•°ä¸º3æ¬¡ï¼Œè¾¾åˆ°3æ¬¡åé‡å¯pod")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("successThreshold")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#é»˜è®¤æˆåŠŸæ¬¡æ•°ä¸º1æ¬¡ï¼Œ1 æ¬¡ä»£è¡¨æˆåŠŸ")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br")])]),t("ul",[t("li",[t("p",[s._v("GRPC æ¢é’ˆ")]),s._v(" "),t("blockquote",[t("p",[s._v("å®˜æ–¹å‚è€ƒåœ°å€: https://kubernetes.io/zh-cn/docs/tasks/configure-pod-container/configure-liveness-readiness-startup-probes/")])])])]),s._v(" "),t("h4",{attrs:{id:"_6-6-èµ„æºé™åˆ¶"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-6-èµ„æºé™åˆ¶"}},[s._v("ğŸŒ™")]),s._v(" 6.6 èµ„æºé™åˆ¶")]),s._v(" "),t("p",[s._v("åœ¨k8sä¸­å¯¹äºå®¹å™¨èµ„æºé™åˆ¶ä¸»è¦åˆ†ä¸ºä»¥ä¸‹ä¸¤ç±»:")]),s._v(" "),t("ul",[t("li",[s._v("å†…å­˜èµ„æºé™åˆ¶: å†…å­˜"),t("strong",[s._v("è¯·æ±‚")]),s._v("ï¼ˆrequestï¼‰å’Œå†…å­˜"),t("strong",[s._v("é™åˆ¶")]),s._v("ï¼ˆlimitï¼‰åˆ†é…ç»™ä¸€ä¸ªå®¹å™¨ã€‚ æˆ‘ä»¬ä¿éšœå®¹å™¨æ‹¥æœ‰å®ƒè¯·æ±‚æ•°é‡çš„å†…å­˜ï¼Œä½†ä¸å…è®¸ä½¿ç”¨è¶…è¿‡é™åˆ¶æ•°é‡çš„å†…å­˜ã€‚\n"),t("ul",[t("li",[s._v("å®˜ç½‘å‚è€ƒåœ°å€: https://kubernetes.io/zh-cn/docs/tasks/configure-pod-container/assign-memory-resource/")])])]),s._v(" "),t("li",[s._v("CPU èµ„æºé™åˆ¶: ä¸ºå®¹å™¨è®¾ç½® CPU "),t("strong",[s._v("requestï¼ˆè¯·æ±‚ï¼‰")]),s._v(" å’Œ CPU "),t("strong",[s._v("limitï¼ˆé™åˆ¶ï¼‰")]),s._v("ã€‚ å®¹å™¨ä½¿ç”¨çš„ CPU ä¸èƒ½è¶…è¿‡æ‰€é…ç½®çš„é™åˆ¶ã€‚ å¦‚æœç³»ç»Ÿæœ‰ç©ºé—²çš„ CPU æ—¶é—´ï¼Œåˆ™å¯ä»¥ä¿è¯ç»™å®¹å™¨åˆ†é…å…¶æ‰€è¯·æ±‚æ•°é‡çš„ CPU èµ„æºã€‚\n"),t("ul",[t("li",[s._v("å®˜ç½‘å‚è€ƒåœ°å€: https://kubernetes.io/zh-cn/docs/tasks/configure-pod-container/assign-cpu-resource/")])])])]),s._v(" "),t("p",[s._v("è¯·æ±‚ request memory cpu :å¯ä»¥ä½¿ç”¨çš„åŸºç¡€èµ„æº  100M")]),s._v(" "),t("p",[s._v("é™åˆ¶ limit   memory cpu :å¯ä»¥ä½¿ç”¨çš„æœ€å¤§èµ„æº  200M è¶…è¿‡æœ€å¤§èµ„æºä¹‹åå®¹å™¨ä¼šè¢« kill , OOM é”™è¯¯")]),s._v(" "),t("h5",{attrs:{id:"_1-metrics-server"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-metrics-server"}},[s._v("ğŸŒ™")]),s._v(" "),t("strong",[s._v("1 metrics-server")])]),s._v(" "),t("blockquote",[t("p",[s._v("å®˜ç½‘åœ°å€: https://github.com/kubernetes-sigs/metrics-server")])]),s._v(" "),t("p",[t("strong",[s._v("Kubernetes Metrics Server")]),s._v(" (KubernetesæŒ‡æ ‡æœåŠ¡å™¨)ï¼Œå®ƒæ˜¯ä¸€ä¸ª"),t("strong",[s._v("å¯æ‰©å±•çš„ã€é«˜æ•ˆçš„å®¹å™¨èµ„æºåº¦é‡æº")]),s._v("ã€‚Metrics Server ç”¨äºç›‘æ§æ¯ä¸ª Node å’Œ Pod çš„è´Ÿè½½ï¼ˆç”¨äºKuberneteså†…ç½®è‡ªåŠ¨æ‰©ç¼©ç®¡é“ï¼‰ã€‚Metrics Server ä»Kubelets æ”¶é›†èµ„æºæŒ‡æ ‡ï¼Œå¹¶é€šè¿‡ Metrics API åœ¨Kubernetes apiserverä¸­å…¬å¼€ï¼Œä¾› Horizontal Pod Autoscaler å’Œ Vertical Pod Autoscaler ä½¿ç”¨ã€‚Metrics API ä¹Ÿå¯ä»¥é€šè¿‡ kubectl top è®¿é—®ï¼Œä½¿å…¶æ›´å®¹æ˜“è°ƒè¯•è‡ªåŠ¨æ‰©ç¼©ç®¡é“ã€‚")]),s._v(" "),t("ul",[t("li",[s._v("æŸ¥çœ‹ metrics-serverï¼ˆæˆ–è€…å…¶ä»–èµ„æºæŒ‡æ ‡ API "),t("code",[s._v("metrics.k8s.io")]),s._v(" æœåŠ¡æä¾›è€…ï¼‰æ˜¯å¦æ­£åœ¨è¿è¡Œï¼Œ è¯·é”®å…¥ä»¥ä¸‹å‘½ä»¤ï¼š")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("kubectl get apiservices\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[s._v("å¦‚æœèµ„æºæŒ‡æ ‡ API å¯ç”¨ï¼Œåˆ™ä¼šè¾“å‡ºå°†åŒ…å«ä¸€ä¸ªå¯¹ "),t("code",[s._v("metrics.k8s.io")]),s._v(" çš„å¼•ç”¨ã€‚")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("NAME\nv1beta1.metrics.k8s.io\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("ul",[t("li",[s._v("å®‰è£… metrics-server")])]),s._v(" "),t("div",{staticClass:"language-yaml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yaml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# components.yaml")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiVersion")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" v1\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kind")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" ServiceAccount\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("metadata")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("labels")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("k8s-app")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" metrics"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("server\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" metrics"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("server\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("namespace")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" kube"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("system\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("---")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiVersion")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" rbac.authorization.k8s.io/v1\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kind")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" ClusterRole\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("metadata")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("labels")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("k8s-app")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" metrics"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("server\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("rbac.authorization.k8s.io/aggregate-to-admin")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"true"')]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("rbac.authorization.k8s.io/aggregate-to-edit")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"true"')]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("rbac.authorization.k8s.io/aggregate-to-view")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"true"')]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" system"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("aggregated"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("metrics"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("reader\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("rules")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiGroups")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" metrics.k8s.io\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("resources")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" pods\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" nodes\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("verbs")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" get\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" list\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" watch\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("---")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiVersion")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" rbac.authorization.k8s.io/v1\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kind")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" ClusterRole\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("metadata")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("labels")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("k8s-app")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" metrics"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("server\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" system"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("metrics"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("server\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("rules")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiGroups")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("resources")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" nodes/metrics\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("verbs")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" get\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiGroups")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("resources")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" pods\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" nodes\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("verbs")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" get\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" list\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" watch\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("---")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiVersion")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" rbac.authorization.k8s.io/v1\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kind")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" RoleBinding\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("metadata")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("labels")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("k8s-app")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" metrics"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("server\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" metrics"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("server"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("auth"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("reader\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("namespace")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" kube"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("system\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("roleRef")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiGroup")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" rbac.authorization.k8s.io\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kind")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Role\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" extension"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("apiserver"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("authentication"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("reader\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("subjects")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kind")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" ServiceAccount\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" metrics"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("server\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("namespace")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" kube"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("system\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("---")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiVersion")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" rbac.authorization.k8s.io/v1\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kind")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" ClusterRoleBinding\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("metadata")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("labels")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("k8s-app")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" metrics"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("server\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" metrics"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("server"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("system"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("auth"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("delegator\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("roleRef")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiGroup")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" rbac.authorization.k8s.io\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kind")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" ClusterRole\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" system"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("auth"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("delegator\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("subjects")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kind")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" ServiceAccount\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" metrics"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("server\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("namespace")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" kube"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("system\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("---")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiVersion")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" rbac.authorization.k8s.io/v1\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kind")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" ClusterRoleBinding\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("metadata")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("labels")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("k8s-app")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" metrics"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("server\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" system"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("metrics"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("server\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("roleRef")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiGroup")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" rbac.authorization.k8s.io\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kind")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" ClusterRole\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" system"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("metrics"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("server\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("subjects")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kind")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" ServiceAccount\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" metrics"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("server\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("namespace")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" kube"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("system\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("---")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiVersion")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" v1\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kind")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Service\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("metadata")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("labels")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("k8s-app")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" metrics"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("server\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" metrics"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("server\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("namespace")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" kube"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("system\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("spec")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("ports")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" https\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("port")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("443")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("protocol")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" TCP\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("targetPort")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" https\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("selector")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("k8s-app")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" metrics"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("server\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("---")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiVersion")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" apps/v1\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kind")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Deployment\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("metadata")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("labels")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("k8s-app")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" metrics"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("server\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" metrics"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("server\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("namespace")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" kube"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("system\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("spec")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("selector")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("matchLabels")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("k8s-app")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" metrics"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("server\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("strategy")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("rollingUpdate")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("maxUnavailable")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("template")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("metadata")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("labels")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("k8s-app")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" metrics"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("server\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("spec")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("containers")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("args")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("cert"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("dir=/tmp\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("secure"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("port=4443\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("kubelet"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("preferred"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("address"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("types=InternalIP"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("ExternalIP"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("Hostname\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("kubelet"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("use"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("node"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("status"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("port\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("metric"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("resolution=15s\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("kubelet"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("insecure"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("tls "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#ä¿®æ”¹å»æ‰è¯ä¹¦éªŒè¯")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("image")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" dyrnq/metrics"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("server"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("v0.6.2 "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#ä¿®æ”¹å®˜æ–¹æ— æ³•ä¸‹è½½")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("imagePullPolicy")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" IfNotPresent\n          "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("livenessProbe")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("failureThreshold")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("httpGet")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n              "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("path")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" /livez\n              "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("port")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" https\n              "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("scheme")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" HTTPS\n            "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("periodSeconds")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" metrics"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("server\n          "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("ports")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("containerPort")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4443")]),s._v("\n              "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" https\n              "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("protocol")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" TCP\n          "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("readinessProbe")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("failureThreshold")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("httpGet")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n              "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("path")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" /readyz\n              "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("port")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" https\n              "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("scheme")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" HTTPS\n            "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("initialDelaySeconds")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("periodSeconds")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("resources")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("requests")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n              "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("cpu")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" 100m\n              "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("memory")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" 200Mi\n          "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("securityContext")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("allowPrivilegeEscalation")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean important"}},[s._v("false")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("readOnlyRootFilesystem")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean important"}},[s._v("true")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("runAsNonRoot")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean important"}},[s._v("true")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("runAsUser")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1000")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("volumeMounts")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("mountPath")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" /tmp\n              "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" tmp"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("dir\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("hostNetwork")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean important"}},[s._v("true")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#å¿…é¡»æŒ‡å®šè¿™ä¸ªæ‰è¡Œ")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("nodeSelector")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kubernetes.io/os")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" linux\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("priorityClassName")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" system"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("cluster"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("critical\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("serviceAccountName")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" metrics"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("server\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("volumes")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("emptyDir")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" tmp"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("dir\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("---")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiVersion")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" apiregistration.k8s.io/v1\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kind")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" APIService\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("metadata")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("labels")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("k8s-app")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" metrics"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("server\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" v1beta1.metrics.k8s.io\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("spec")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("group")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" metrics.k8s.io\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("groupPriorityMinimum")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("insecureSkipTLSVerify")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean important"}},[s._v("true")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("service")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" metrics"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("server\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("namespace")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" kube"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("system\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("version")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" v1beta1\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("versionPriority")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br"),t("span",{staticClass:"line-number"},[s._v("41")]),t("br"),t("span",{staticClass:"line-number"},[s._v("42")]),t("br"),t("span",{staticClass:"line-number"},[s._v("43")]),t("br"),t("span",{staticClass:"line-number"},[s._v("44")]),t("br"),t("span",{staticClass:"line-number"},[s._v("45")]),t("br"),t("span",{staticClass:"line-number"},[s._v("46")]),t("br"),t("span",{staticClass:"line-number"},[s._v("47")]),t("br"),t("span",{staticClass:"line-number"},[s._v("48")]),t("br"),t("span",{staticClass:"line-number"},[s._v("49")]),t("br"),t("span",{staticClass:"line-number"},[s._v("50")]),t("br"),t("span",{staticClass:"line-number"},[s._v("51")]),t("br"),t("span",{staticClass:"line-number"},[s._v("52")]),t("br"),t("span",{staticClass:"line-number"},[s._v("53")]),t("br"),t("span",{staticClass:"line-number"},[s._v("54")]),t("br"),t("span",{staticClass:"line-number"},[s._v("55")]),t("br"),t("span",{staticClass:"line-number"},[s._v("56")]),t("br"),t("span",{staticClass:"line-number"},[s._v("57")]),t("br"),t("span",{staticClass:"line-number"},[s._v("58")]),t("br"),t("span",{staticClass:"line-number"},[s._v("59")]),t("br"),t("span",{staticClass:"line-number"},[s._v("60")]),t("br"),t("span",{staticClass:"line-number"},[s._v("61")]),t("br"),t("span",{staticClass:"line-number"},[s._v("62")]),t("br"),t("span",{staticClass:"line-number"},[s._v("63")]),t("br"),t("span",{staticClass:"line-number"},[s._v("64")]),t("br"),t("span",{staticClass:"line-number"},[s._v("65")]),t("br"),t("span",{staticClass:"line-number"},[s._v("66")]),t("br"),t("span",{staticClass:"line-number"},[s._v("67")]),t("br"),t("span",{staticClass:"line-number"},[s._v("68")]),t("br"),t("span",{staticClass:"line-number"},[s._v("69")]),t("br"),t("span",{staticClass:"line-number"},[s._v("70")]),t("br"),t("span",{staticClass:"line-number"},[s._v("71")]),t("br"),t("span",{staticClass:"line-number"},[s._v("72")]),t("br"),t("span",{staticClass:"line-number"},[s._v("73")]),t("br"),t("span",{staticClass:"line-number"},[s._v("74")]),t("br"),t("span",{staticClass:"line-number"},[s._v("75")]),t("br"),t("span",{staticClass:"line-number"},[s._v("76")]),t("br"),t("span",{staticClass:"line-number"},[s._v("77")]),t("br"),t("span",{staticClass:"line-number"},[s._v("78")]),t("br"),t("span",{staticClass:"line-number"},[s._v("79")]),t("br"),t("span",{staticClass:"line-number"},[s._v("80")]),t("br"),t("span",{staticClass:"line-number"},[s._v("81")]),t("br"),t("span",{staticClass:"line-number"},[s._v("82")]),t("br"),t("span",{staticClass:"line-number"},[s._v("83")]),t("br"),t("span",{staticClass:"line-number"},[s._v("84")]),t("br"),t("span",{staticClass:"line-number"},[s._v("85")]),t("br"),t("span",{staticClass:"line-number"},[s._v("86")]),t("br"),t("span",{staticClass:"line-number"},[s._v("87")]),t("br"),t("span",{staticClass:"line-number"},[s._v("88")]),t("br"),t("span",{staticClass:"line-number"},[s._v("89")]),t("br"),t("span",{staticClass:"line-number"},[s._v("90")]),t("br"),t("span",{staticClass:"line-number"},[s._v("91")]),t("br"),t("span",{staticClass:"line-number"},[s._v("92")]),t("br"),t("span",{staticClass:"line-number"},[s._v("93")]),t("br"),t("span",{staticClass:"line-number"},[s._v("94")]),t("br"),t("span",{staticClass:"line-number"},[s._v("95")]),t("br"),t("span",{staticClass:"line-number"},[s._v("96")]),t("br"),t("span",{staticClass:"line-number"},[s._v("97")]),t("br"),t("span",{staticClass:"line-number"},[s._v("98")]),t("br"),t("span",{staticClass:"line-number"},[s._v("99")]),t("br"),t("span",{staticClass:"line-number"},[s._v("100")]),t("br"),t("span",{staticClass:"line-number"},[s._v("101")]),t("br"),t("span",{staticClass:"line-number"},[s._v("102")]),t("br"),t("span",{staticClass:"line-number"},[s._v("103")]),t("br"),t("span",{staticClass:"line-number"},[s._v("104")]),t("br"),t("span",{staticClass:"line-number"},[s._v("105")]),t("br"),t("span",{staticClass:"line-number"},[s._v("106")]),t("br"),t("span",{staticClass:"line-number"},[s._v("107")]),t("br"),t("span",{staticClass:"line-number"},[s._v("108")]),t("br"),t("span",{staticClass:"line-number"},[s._v("109")]),t("br"),t("span",{staticClass:"line-number"},[s._v("110")]),t("br"),t("span",{staticClass:"line-number"},[s._v("111")]),t("br"),t("span",{staticClass:"line-number"},[s._v("112")]),t("br"),t("span",{staticClass:"line-number"},[s._v("113")]),t("br"),t("span",{staticClass:"line-number"},[s._v("114")]),t("br"),t("span",{staticClass:"line-number"},[s._v("115")]),t("br"),t("span",{staticClass:"line-number"},[s._v("116")]),t("br"),t("span",{staticClass:"line-number"},[s._v("117")]),t("br"),t("span",{staticClass:"line-number"},[s._v("118")]),t("br"),t("span",{staticClass:"line-number"},[s._v("119")]),t("br"),t("span",{staticClass:"line-number"},[s._v("120")]),t("br"),t("span",{staticClass:"line-number"},[s._v("121")]),t("br"),t("span",{staticClass:"line-number"},[s._v("122")]),t("br"),t("span",{staticClass:"line-number"},[s._v("123")]),t("br"),t("span",{staticClass:"line-number"},[s._v("124")]),t("br"),t("span",{staticClass:"line-number"},[s._v("125")]),t("br"),t("span",{staticClass:"line-number"},[s._v("126")]),t("br"),t("span",{staticClass:"line-number"},[s._v("127")]),t("br"),t("span",{staticClass:"line-number"},[s._v("128")]),t("br"),t("span",{staticClass:"line-number"},[s._v("129")]),t("br"),t("span",{staticClass:"line-number"},[s._v("130")]),t("br"),t("span",{staticClass:"line-number"},[s._v("131")]),t("br"),t("span",{staticClass:"line-number"},[s._v("132")]),t("br"),t("span",{staticClass:"line-number"},[s._v("133")]),t("br"),t("span",{staticClass:"line-number"},[s._v("134")]),t("br"),t("span",{staticClass:"line-number"},[s._v("135")]),t("br"),t("span",{staticClass:"line-number"},[s._v("136")]),t("br"),t("span",{staticClass:"line-number"},[s._v("137")]),t("br"),t("span",{staticClass:"line-number"},[s._v("138")]),t("br"),t("span",{staticClass:"line-number"},[s._v("139")]),t("br"),t("span",{staticClass:"line-number"},[s._v("140")]),t("br"),t("span",{staticClass:"line-number"},[s._v("141")]),t("br"),t("span",{staticClass:"line-number"},[s._v("142")]),t("br"),t("span",{staticClass:"line-number"},[s._v("143")]),t("br"),t("span",{staticClass:"line-number"},[s._v("144")]),t("br"),t("span",{staticClass:"line-number"},[s._v("145")]),t("br"),t("span",{staticClass:"line-number"},[s._v("146")]),t("br"),t("span",{staticClass:"line-number"},[s._v("147")]),t("br"),t("span",{staticClass:"line-number"},[s._v("148")]),t("br"),t("span",{staticClass:"line-number"},[s._v("149")]),t("br"),t("span",{staticClass:"line-number"},[s._v("150")]),t("br"),t("span",{staticClass:"line-number"},[s._v("151")]),t("br"),t("span",{staticClass:"line-number"},[s._v("152")]),t("br"),t("span",{staticClass:"line-number"},[s._v("153")]),t("br"),t("span",{staticClass:"line-number"},[s._v("154")]),t("br"),t("span",{staticClass:"line-number"},[s._v("155")]),t("br"),t("span",{staticClass:"line-number"},[s._v("156")]),t("br"),t("span",{staticClass:"line-number"},[s._v("157")]),t("br"),t("span",{staticClass:"line-number"},[s._v("158")]),t("br"),t("span",{staticClass:"line-number"},[s._v("159")]),t("br"),t("span",{staticClass:"line-number"},[s._v("160")]),t("br"),t("span",{staticClass:"line-number"},[s._v("161")]),t("br"),t("span",{staticClass:"line-number"},[s._v("162")]),t("br"),t("span",{staticClass:"line-number"},[s._v("163")]),t("br"),t("span",{staticClass:"line-number"},[s._v("164")]),t("br"),t("span",{staticClass:"line-number"},[s._v("165")]),t("br"),t("span",{staticClass:"line-number"},[s._v("166")]),t("br"),t("span",{staticClass:"line-number"},[s._v("167")]),t("br"),t("span",{staticClass:"line-number"},[s._v("168")]),t("br"),t("span",{staticClass:"line-number"},[s._v("169")]),t("br"),t("span",{staticClass:"line-number"},[s._v("170")]),t("br"),t("span",{staticClass:"line-number"},[s._v("171")]),t("br"),t("span",{staticClass:"line-number"},[s._v("172")]),t("br"),t("span",{staticClass:"line-number"},[s._v("173")]),t("br"),t("span",{staticClass:"line-number"},[s._v("174")]),t("br"),t("span",{staticClass:"line-number"},[s._v("175")]),t("br"),t("span",{staticClass:"line-number"},[s._v("176")]),t("br"),t("span",{staticClass:"line-number"},[s._v("177")]),t("br"),t("span",{staticClass:"line-number"},[s._v("178")]),t("br"),t("span",{staticClass:"line-number"},[s._v("179")]),t("br"),t("span",{staticClass:"line-number"},[s._v("180")]),t("br"),t("span",{staticClass:"line-number"},[s._v("181")]),t("br"),t("span",{staticClass:"line-number"},[s._v("182")]),t("br"),t("span",{staticClass:"line-number"},[s._v("183")]),t("br"),t("span",{staticClass:"line-number"},[s._v("184")]),t("br"),t("span",{staticClass:"line-number"},[s._v("185")]),t("br"),t("span",{staticClass:"line-number"},[s._v("186")]),t("br"),t("span",{staticClass:"line-number"},[s._v("187")]),t("br"),t("span",{staticClass:"line-number"},[s._v("188")]),t("br"),t("span",{staticClass:"line-number"},[s._v("189")]),t("br"),t("span",{staticClass:"line-number"},[s._v("190")]),t("br"),t("span",{staticClass:"line-number"},[s._v("191")]),t("br"),t("span",{staticClass:"line-number"},[s._v("192")]),t("br"),t("span",{staticClass:"line-number"},[s._v("193")]),t("br"),t("span",{staticClass:"line-number"},[s._v("194")]),t("br"),t("span",{staticClass:"line-number"},[s._v("195")]),t("br"),t("span",{staticClass:"line-number"},[s._v("196")]),t("br"),t("span",{staticClass:"line-number"},[s._v("197")]),t("br"),t("span",{staticClass:"line-number"},[s._v("198")]),t("br"),t("span",{staticClass:"line-number"},[s._v("199")]),t("br")])]),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ kubectl appply "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-f")]),s._v(" components.yaml\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h5",{attrs:{id:"_2-æŒ‡å®šå†…å­˜è¯·æ±‚å’Œé™åˆ¶"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-æŒ‡å®šå†…å­˜è¯·æ±‚å’Œé™åˆ¶"}},[s._v("ğŸŒ™")]),s._v(" "),t("strong",[s._v("2 æŒ‡å®šå†…å­˜è¯·æ±‚å’Œé™åˆ¶")])]),s._v(" "),t("p",[s._v("å®˜ç½‘: https://kubernetes.io/zh-cn/docs/tasks/configure-pod-container/assign-memory-resource/")]),s._v(" "),t("p",[s._v("ä¸ºå®¹å™¨æŒ‡å®šå†…å­˜è¯·æ±‚ï¼Œè¯·åœ¨å®¹å™¨èµ„æºæ¸…å•ä¸­åŒ…å« "),t("code",[s._v("resourcesï¼šrequests")]),s._v(" å­—æ®µã€‚ åŒç†ï¼Œè¦æŒ‡å®šå†…å­˜é™åˆ¶ï¼Œè¯·åŒ…å« "),t("code",[s._v("resourcesï¼šlimits")]),s._v("ã€‚")]),s._v(" "),t("div",{staticClass:"language-yaml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yaml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# nginx-memory-demo.yaml")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#å†…å­˜èµ„æºçš„åŸºæœ¬å•ä½æ˜¯å­—èŠ‚ï¼ˆbyteï¼‰ã€‚ä½ å¯ä»¥ä½¿ç”¨è¿™äº›åç¼€ä¹‹ä¸€ï¼Œå°†å†…å­˜è¡¨ç¤ºä¸º çº¯æ•´æ•°æˆ–å®šç‚¹æ•´æ•°ï¼šEã€Pã€Tã€Gã€Mã€Kã€Eiã€Piã€Tiã€Giã€Miã€Kiã€‚ ä¾‹å¦‚ï¼Œä¸‹é¢æ˜¯ä¸€äº›è¿‘ä¼¼ç›¸åŒçš„å€¼ï¼š128974848, 129e6, 129M, 123Mi")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiVersion")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" v1\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kind")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Pod\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("metadata")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nginx"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("memory"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("demo\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("spec")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("containers")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nginx"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("memory"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("demo\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("image")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nginx"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.19")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("resources")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("requests")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("memory")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"100Mi"')]),s._v(" \n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("limits")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("memory")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"200Mi"')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br")])]),t("ul",[t("li",[t("code",[s._v("æŸ¥çœ‹å®¹å™¨å†…å­˜ä½¿ç”¨æƒ…å†µ")])])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ kubectl get pod nginx-memory-demo "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--output")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("yaml\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[t("code",[s._v("æŸ¥çœ‹å®¹å™¨æ­£åœ¨ä½¿ç”¨å†…å­˜æƒ…å†µ")])])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ kubectl "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("top")]),s._v(" pod nginx-memory-demo \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[t("p",[t("code",[s._v("å†…å­˜è¯·æ±‚å’Œé™åˆ¶çš„ç›®çš„")])]),s._v(" "),t("p",[s._v("é€šè¿‡ä¸ºé›†ç¾¤ä¸­è¿è¡Œçš„å®¹å™¨é…ç½®å†…å­˜è¯·æ±‚å’Œé™åˆ¶ï¼Œä½ å¯ä»¥æœ‰æ•ˆåˆ©ç”¨é›†ç¾¤èŠ‚ç‚¹ä¸Šå¯ç”¨çš„å†…å­˜èµ„æºã€‚ é€šè¿‡å°† Pod çš„å†…å­˜è¯·æ±‚ä¿æŒåœ¨è¾ƒä½æ°´å¹³ï¼Œä½ å¯ä»¥æ›´å¥½åœ°å®‰æ’ Pod è°ƒåº¦ã€‚ é€šè¿‡è®©å†…å­˜é™åˆ¶å¤§äºå†…å­˜è¯·æ±‚ï¼Œä½ å¯ä»¥å®Œæˆä¸¤ä»¶äº‹ï¼š")]),s._v(" "),t("ul",[t("li",[s._v("Pod å¯ä»¥è¿›è¡Œä¸€äº›çªå‘æ´»åŠ¨ï¼Œä»è€Œæ›´å¥½çš„åˆ©ç”¨å¯ç”¨å†…å­˜ã€‚")]),s._v(" "),t("li",[s._v("Pod åœ¨çªå‘æ´»åŠ¨æœŸé—´ï¼Œå¯ä½¿ç”¨çš„å†…å­˜è¢«é™åˆ¶ä¸ºåˆç†çš„æ•°é‡ã€‚")])])]),s._v(" "),t("li",[t("p",[t("code",[s._v("æ²¡æœ‰æŒ‡å®šå†…å­˜é™åˆ¶")])]),s._v(" "),t("p",[s._v("å¦‚æœä½ æ²¡æœ‰ä¸ºä¸€ä¸ªå®¹å™¨æŒ‡å®šå†…å­˜é™åˆ¶ï¼Œåˆ™è‡ªåŠ¨éµå¾ªä»¥ä¸‹æƒ…å†µä¹‹ä¸€ï¼š")]),s._v(" "),t("ul",[t("li",[s._v("å®¹å™¨å¯æ— é™åˆ¶åœ°ä½¿ç”¨å†…å­˜ã€‚å®¹å™¨å¯ä»¥ä½¿ç”¨å…¶æ‰€åœ¨èŠ‚ç‚¹æ‰€æœ‰çš„å¯ç”¨å†…å­˜ï¼Œ è¿›è€Œå¯èƒ½å¯¼è‡´è¯¥èŠ‚ç‚¹è°ƒç”¨ OOM Killerã€‚ æ­¤å¤–ï¼Œå¦‚æœå‘ç”Ÿ OOM Killï¼Œæ²¡æœ‰èµ„æºé™åˆ¶çš„å®¹å™¨å°†è¢«æ€æ‰çš„å¯è¡Œæ€§æ›´å¤§ã€‚")]),s._v(" "),t("li",[s._v("è¿è¡Œçš„å®¹å™¨æ‰€åœ¨å‘½åç©ºé—´æœ‰é»˜è®¤çš„å†…å­˜é™åˆ¶ï¼Œé‚£ä¹ˆè¯¥å®¹å™¨ä¼šè¢«è‡ªåŠ¨åˆ†é…é»˜è®¤é™åˆ¶ã€‚")])])])]),s._v(" "),t("h5",{attrs:{id:"_3-æŒ‡å®š-cpu-è¯·æ±‚å’Œé™åˆ¶"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-æŒ‡å®š-cpu-è¯·æ±‚å’Œé™åˆ¶"}},[s._v("ğŸŒ™")]),s._v(" "),t("strong",[s._v("3 æŒ‡å®š CPU è¯·æ±‚å’Œé™åˆ¶")])]),s._v(" "),t("p",[s._v("å®˜ç½‘: https://kubernetes.io/zh-cn/docs/tasks/configure-pod-container/assign-cpu-resource/")]),s._v(" "),t("p",[s._v("ä¸ºå®¹å™¨æŒ‡å®š CPU è¯·æ±‚ï¼Œè¯·åœ¨å®¹å™¨èµ„æºæ¸…å•ä¸­åŒ…å« "),t("code",[s._v("resources: requests")]),s._v(" å­—æ®µã€‚ è¦æŒ‡å®š CPU é™åˆ¶ï¼Œè¯·åŒ…å« "),t("code",[s._v("resources:limits")]),s._v("ã€‚")]),s._v(" "),t("div",{staticClass:"language-yaml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yaml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# nginx-cpu-demo.yaml")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#CPU èµ„æºä»¥ CPU å•ä½åº¦é‡ã€‚å°æ•°å€¼æ˜¯å¯ä»¥ä½¿ç”¨çš„ã€‚ä¸€ä¸ªè¯·æ±‚ 0.5 CPU çš„å®¹å™¨ä¿è¯ä¼šè·å¾—è¯·æ±‚ 1 ä¸ª CPU çš„å®¹å™¨çš„ CPU çš„ä¸€åŠã€‚ ä½ å¯ä»¥ä½¿ç”¨åç¼€ m è¡¨ç¤ºæ¯«ã€‚ä¾‹å¦‚ 100m CPUã€100 milliCPU å’Œ 0.1 CPU éƒ½ç›¸åŒã€‚ CPU è¯·æ±‚åªèƒ½ä½¿ç”¨ç»å¯¹æ•°é‡ï¼Œè€Œä¸æ˜¯ç›¸å¯¹æ•°é‡ã€‚0.1 åœ¨å•æ ¸ã€åŒæ ¸æˆ– 48 æ ¸è®¡ç®—æœºä¸Šçš„ CPU æ•°é‡å€¼æ˜¯ä¸€æ ·çš„ã€‚")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiVersion")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" v1\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kind")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Pod\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("metadata")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nginx"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("cpu"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("demo\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("spec")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("containers")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nginx"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("cpu"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("demo\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("image")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nginx"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.19")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("resources")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("limits")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("cpu")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1"')]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("requests")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("cpu")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"0.5"')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br")])]),t("ul",[t("li",[s._v("æ˜¾ç¤º pod è¯¦ç»†ä¿¡æ¯")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ kubectl get pod nginx-cpu-demo "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--output")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("yaml \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[s._v("æ˜¾ç¤º pod è¿è¡ŒæŒ‡æ ‡")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ kubectl "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("top")]),s._v(" pod nginx-cpu-demo\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[t("p",[t("code",[s._v("CPU è¯·æ±‚å’Œé™åˆ¶çš„åˆè¡·")])]),s._v(" "),t("p",[s._v("é€šè¿‡é…ç½®ä½ çš„é›†ç¾¤ä¸­è¿è¡Œçš„å®¹å™¨çš„ CPU è¯·æ±‚å’Œé™åˆ¶ï¼Œä½ å¯ä»¥æœ‰æ•ˆåˆ©ç”¨é›†ç¾¤ä¸Šå¯ç”¨çš„ CPU èµ„æºã€‚ é€šè¿‡å°† Pod CPU è¯·æ±‚ä¿æŒåœ¨è¾ƒä½æ°´å¹³ï¼Œå¯ä»¥ä½¿ Pod æ›´æœ‰æœºä¼šè¢«è°ƒåº¦ã€‚ é€šè¿‡ä½¿ CPU é™åˆ¶å¤§äº CPU è¯·æ±‚ï¼Œä½ å¯ä»¥å®Œæˆä¸¤ä»¶äº‹ï¼š")]),s._v(" "),t("ul",[t("li",[s._v("Pod å¯èƒ½ä¼šæœ‰çªå‘æ€§çš„æ´»åŠ¨ï¼Œå®ƒå¯ä»¥åˆ©ç”¨ç¢°å·§å¯ç”¨çš„ CPU èµ„æºã€‚")]),s._v(" "),t("li",[s._v("Pod åœ¨çªå‘è´Ÿè½½æœŸé—´å¯ä»¥ä½¿ç”¨çš„ CPU èµ„æºæ•°é‡ä»è¢«é™åˆ¶ä¸ºåˆç†çš„æ•°é‡ã€‚")])])]),s._v(" "),t("li",[t("p",[t("code",[s._v("å¦‚æœä¸æŒ‡å®š CPU é™åˆ¶")])]),s._v(" "),t("p",[s._v("å¦‚æœä½ æ²¡æœ‰ä¸ºå®¹å™¨æŒ‡å®š CPU é™åˆ¶ï¼Œåˆ™ä¼šå‘ç”Ÿä»¥ä¸‹æƒ…å†µä¹‹ä¸€ï¼š")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("å®¹å™¨åœ¨å¯ä»¥ä½¿ç”¨çš„ CPU èµ„æºä¸Šæ²¡æœ‰ä¸Šé™ã€‚å› è€Œå¯ä»¥ä½¿ç”¨æ‰€åœ¨èŠ‚ç‚¹ä¸Šæ‰€æœ‰çš„å¯ç”¨ CPU èµ„æºã€‚")])]),s._v(" "),t("li",[t("p",[s._v("å®¹å™¨åœ¨å…·æœ‰é»˜è®¤ CPU é™åˆ¶çš„åå­—ç©ºé—´ä¸­è¿è¡Œï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨ä¸ºå®¹å™¨è®¾ç½®é»˜è®¤é™åˆ¶ã€‚")])])])]),s._v(" "),t("li",[t("p",[t("code",[s._v("å¦‚æœä½ è®¾ç½®äº† CPU é™åˆ¶ä½†æœªè®¾ç½® CPU è¯·æ±‚")])])])]),s._v(" "),t("p",[s._v("â€‹\tå¦‚æœä½ ä¸ºå®¹å™¨æŒ‡å®šäº† CPU é™åˆ¶å€¼ä½†æœªä¸ºå…¶è®¾ç½® CPU è¯·æ±‚ï¼ŒKubernetes ä¼šè‡ªåŠ¨ä¸ºå…¶ è®¾ç½®ä¸ CPU é™åˆ¶ç›¸åŒçš„ CPU è¯·æ±‚å€¼ã€‚ç±»ä¼¼çš„ï¼Œå¦‚æœå®¹å™¨è®¾ç½®äº†å†…å­˜é™åˆ¶å€¼ä½†æœªè®¾ç½® å†…å­˜è¯·æ±‚å€¼ï¼ŒKubernetes ä¹Ÿä¼šä¸ºå…¶è®¾ç½®ä¸å†…å­˜é™åˆ¶å€¼ç›¸åŒçš„å†…å­˜è¯·æ±‚ã€‚")]),s._v(" "),t("h3",{attrs:{id:"_7-pod-ä¸­-init-å®¹å™¨"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_7-pod-ä¸­-init-å®¹å™¨"}},[s._v("ğŸŒ™")]),s._v(" 7 Pod ä¸­ init å®¹å™¨")]),s._v(" "),t("p",[s._v("Init å®¹å™¨æ˜¯ä¸€ç§ç‰¹æ®Šå®¹å™¨ï¼Œåœ¨Pod å†…çš„åº”ç”¨å®¹å™¨å¯åŠ¨ä¹‹å‰è¿è¡Œã€‚Init å®¹å™¨å¯ä»¥åŒ…æ‹¬ä¸€äº›åº”ç”¨é•œåƒä¸­ä¸å­˜åœ¨çš„å®ç”¨å·¥å…·å’Œå®‰è£…è„šæœ¬ã€‚")]),s._v(" "),t("h4",{attrs:{id:"_7-1-init-å®¹å™¨ç‰¹ç‚¹"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_7-1-init-å®¹å™¨ç‰¹ç‚¹"}},[s._v("ğŸŒ™")]),s._v(" 7.1 init å®¹å™¨ç‰¹ç‚¹")]),s._v(" "),t("p",[s._v("init å®¹å™¨ä¸æ™®é€šçš„å®¹å™¨éå¸¸åƒï¼Œé™¤äº†å¦‚ä¸‹å‡ ç‚¹ï¼š")]),s._v(" "),t("ul",[t("li",[s._v("å®ƒä»¬æ€»æ˜¯è¿è¡Œåˆ°å®Œæˆã€‚å¦‚æœ Pod çš„ Init å®¹å™¨å¤±è´¥ï¼Œkubelet ä¼šä¸æ–­åœ°é‡å¯è¯¥ Init å®¹å™¨ç›´åˆ°è¯¥å®¹å™¨æˆåŠŸä¸ºæ­¢ã€‚ ç„¶è€Œï¼Œå¦‚æœ Pod å¯¹åº”çš„ "),t("code",[s._v("restartPolicy")]),s._v(' å€¼ä¸º "Never"ï¼Œå¹¶ä¸” Pod çš„ Init å®¹å™¨å¤±è´¥ï¼Œ åˆ™ Kubernetes ä¼šå°†æ•´ä¸ª Pod çŠ¶æ€è®¾ç½®ä¸ºå¤±è´¥ã€‚')]),s._v(" "),t("li",[s._v("æ¯ä¸ªéƒ½å¿…é¡»åœ¨ä¸‹ä¸€ä¸ªå¯åŠ¨ä¹‹å‰æˆåŠŸå®Œæˆã€‚")]),s._v(" "),t("li",[s._v("åŒæ—¶ Init å®¹å™¨ä¸æ”¯æŒ "),t("code",[s._v("lifecycle")]),s._v("ã€"),t("code",[s._v("livenessProbe")]),s._v("ã€"),t("code",[s._v("readinessProbe")]),s._v(" å’Œ "),t("code",[s._v("startupProbe")]),s._v("ï¼Œ å› ä¸ºå®ƒä»¬å¿…é¡»åœ¨ Pod å°±ç»ªä¹‹å‰è¿è¡Œå®Œæˆã€‚")]),s._v(" "),t("li",[s._v("å¦‚æœä¸ºä¸€ä¸ª Pod æŒ‡å®šäº†å¤šä¸ª Init å®¹å™¨ï¼Œè¿™äº›å®¹å™¨ä¼šæŒ‰é¡ºåºé€ä¸ªè¿è¡Œã€‚ æ¯ä¸ª Init å®¹å™¨å¿…é¡»è¿è¡ŒæˆåŠŸï¼Œä¸‹ä¸€ä¸ªæ‰èƒ½å¤Ÿè¿è¡Œã€‚å½“æ‰€æœ‰çš„ Init å®¹å™¨è¿è¡Œå®Œæˆæ—¶ï¼Œ Kubernetes æ‰ä¼šä¸º Pod åˆå§‹åŒ–åº”ç”¨å®¹å™¨å¹¶åƒå¹³å¸¸ä¸€æ ·è¿è¡Œã€‚")]),s._v(" "),t("li",[s._v("Init å®¹å™¨æ”¯æŒåº”ç”¨å®¹å™¨çš„å…¨éƒ¨å­—æ®µå’Œç‰¹æ€§ï¼ŒåŒ…æ‹¬èµ„æºé™åˆ¶ã€æ•°æ®å·å’Œå®‰å…¨è®¾ç½®ã€‚ ç„¶è€Œï¼ŒInit å®¹å™¨å¯¹èµ„æºè¯·æ±‚å’Œé™åˆ¶çš„å¤„ç†ç¨æœ‰ä¸åŒã€‚")])]),s._v(" "),t("h4",{attrs:{id:"_7-2-ä½¿ç”¨-init-å®¹å™¨"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_7-2-ä½¿ç”¨-init-å®¹å™¨"}},[s._v("ğŸŒ™")]),s._v(" 7.2 ä½¿ç”¨ init å®¹å™¨")]),s._v(" "),t("blockquote",[t("p",[s._v("å®˜ç½‘åœ°å€: https://kubernetes.io/zh-cn/docs/concepts/workloads/pods/init-containers/")])]),s._v(" "),t("p",[s._v("åœ¨ Pod çš„è§„çº¦ä¸­ä¸ç”¨æ¥æè¿°åº”ç”¨å®¹å™¨çš„ "),t("code",[s._v("containers")]),s._v(" æ•°ç»„å¹³è¡Œçš„ä½ç½®æŒ‡å®š Init å®¹å™¨ã€‚")]),s._v(" "),t("div",{staticClass:"language-yaml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yaml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiVersion")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" v1\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kind")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Pod\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("metadata")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" init"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("demo\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("spec")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("containers")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" myapp"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("container\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("image")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" busybox"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.28")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("command")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'sh'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'-c'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'echo The app is running! && sleep 3600'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("initContainers")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" init"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("myservice\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("image")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" busybox"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.28")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("command")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'sh'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'-c'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'echo init-myservice is running! && sleep 5'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" init"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("mydb\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("image")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" busybox"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.28")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("command")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'sh'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'-c'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'echo init-mydb is running! && sleep 10'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br")])]),t("ul",[t("li",[s._v("æŸ¥çœ‹å¯åŠ¨è¯¦ç»†")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ kubectl describe pod init-demo\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# éƒ¨åˆ†ç»“æœ")]),s._v("\nEvents:\n  Type    Reason     Age    From               Message\n  ----    ------     ----   ----               -------\n  Normal  Scheduled  2m16s  default-scheduler  Successfully assigned default/init-demo to k8s-node2\n  Normal  Pulling    2m16s  kubelet            Pulling image "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"busybox:1.28"')]),s._v("\n  Normal  Pulled     118s   kubelet            Successfully pulled image "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"busybox:1.28"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(".370617268s "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(".370620685s including waiting"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  Normal  Created    118s   kubelet            Created container init-myservice\n  Normal  Started    118s   kubelet            Started container init-myservice\n  Normal  Pulled     112s   kubelet            Container image "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"busybox:1.28"')]),s._v(" already present on machine\n  Normal  Created    112s   kubelet            Created container init-mydb\n  Normal  Started    112s   kubelet            Started container init-mydb\n  Normal  Pulled     101s   kubelet            Container image "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"busybox:1.28"')]),s._v(" already present on machine\n  Normal  Created    101s   kubelet            Created container myapp-container\n  Normal  Started    101s   kubelet            Started container myapp-container\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br")])]),t("h3",{attrs:{id:"_8-èŠ‚ç‚¹äº²å’Œæ€§åˆ†é…-pod"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_8-èŠ‚ç‚¹äº²å’Œæ€§åˆ†é…-pod"}},[s._v("ğŸŒ™")]),s._v(" 8 èŠ‚ç‚¹äº²å’Œæ€§åˆ†é… Pod")]),s._v(" "),t("blockquote",[t("p",[s._v("å®˜æ–¹åœ°å€: http://kubernetes.p2hp.com/docs/concepts/scheduling-eviction/assign-pod-node.html")])]),s._v(" "),t("p",[s._v("ä½ å¯ä»¥çº¦æŸä¸€ä¸ª Pod ä»¥ä¾¿ "),t("strong",[s._v("é™åˆ¶")]),s._v(" å…¶åªèƒ½åœ¨ç‰¹å®šçš„èŠ‚ç‚¹ä¸Šè¿è¡Œï¼Œ æˆ–ä¼˜å…ˆåœ¨ç‰¹å®šçš„èŠ‚ç‚¹ä¸Šè¿è¡Œã€‚ æœ‰å‡ ç§æ–¹æ³•å¯ä»¥å®ç°è¿™ç‚¹ï¼Œæ¨èçš„æ–¹æ³•éƒ½æ˜¯ç”¨ "),t("strong",[s._v("æ ‡ç­¾é€‰æ‹©ç®—ç¬¦")]),s._v("æ¥è¿›è¡Œé€‰æ‹©ã€‚ é€šå¸¸è¿™æ ·çš„çº¦æŸä¸æ˜¯å¿…é¡»çš„ï¼Œå› ä¸ºè°ƒåº¦å™¨å°†è‡ªåŠ¨è¿›è¡Œåˆç†çš„æ”¾ç½®ï¼ˆæ¯”å¦‚ï¼Œå°† Pod åˆ†æ•£åˆ°èŠ‚ç‚¹ä¸Šï¼Œ è€Œä¸æ˜¯å°† Pod æ”¾ç½®åœ¨å¯ç”¨èµ„æºä¸è¶³çš„èŠ‚ç‚¹ä¸Šç­‰ç­‰ï¼‰ã€‚ä½†åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œä½ å¯èƒ½éœ€è¦è¿›ä¸€æ­¥æ§åˆ¶ Pod è¢«éƒ¨ç½²åˆ°å“ªä¸ªèŠ‚ç‚¹ã€‚ä¾‹å¦‚ï¼Œç¡®ä¿ Pod æœ€ç»ˆè½åœ¨è¿æ¥äº† SSD çš„æœºå™¨ä¸Šï¼Œ æˆ–è€…å°†æ¥è‡ªä¸¤ä¸ªä¸åŒçš„æœåŠ¡ä¸”æœ‰å¤§é‡é€šä¿¡çš„ Pods è¢«æ”¾ç½®åœ¨åŒä¸€ä¸ªå¯ç”¨åŒºã€‚")]),s._v(" "),t("p",[s._v("ä½ å¯ä»¥ä½¿ç”¨ä¸‹åˆ—æ–¹æ³•ä¸­çš„ä»»ä½•ä¸€ç§æ¥é€‰æ‹© Kubernetes å¯¹ç‰¹å®š Pod çš„è°ƒåº¦ï¼š")]),s._v(" "),t("ul",[t("li",[s._v("ä¸èŠ‚ç‚¹æ ‡ç­¾åŒ¹é…çš„ nodeSelector  "),t("strong",[s._v("æ¨è")])]),s._v(" "),t("li",[s._v("äº²å’Œæ€§ä¸åäº²å’Œæ€§ "),t("strong",[s._v("æ¨è")])]),s._v(" "),t("li",[s._v("nodeName")]),s._v(" "),t("li",[s._v("Pod æ‹“æ‰‘åˆ†å¸ƒçº¦æŸ "),t("strong",[s._v("æ¨è")])])]),s._v(" "),t("blockquote",[t("p",[t("strong",[t("code",[s._v("å®šä¹‰: ä½¿ç”¨èŠ‚ç‚¹äº²å’Œæ€§å¯ä»¥æŠŠ Kubernetes Pod åˆ†é…åˆ°ç‰¹å®šèŠ‚ç‚¹ã€‚")])])])]),s._v(" "),t("h4",{attrs:{id:"_8-1-ç»™èŠ‚ç‚¹æ·»åŠ æ ‡ç­¾"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_8-1-ç»™èŠ‚ç‚¹æ·»åŠ æ ‡ç­¾"}},[s._v("ğŸŒ™")]),s._v(" 8.1 ç»™èŠ‚ç‚¹æ·»åŠ æ ‡ç­¾")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("åˆ—å‡ºé›†ç¾¤ä¸­çš„èŠ‚ç‚¹åŠå…¶æ ‡ç­¾ï¼š")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ kubectl get nodes --show-labels\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#è¾“å‡ºç±»ä¼¼äºæ­¤ï¼š")]),s._v("\nNAME        STATUS   ROLES           AGE   VERSION   LABELS\nk8s-node1   Ready    control-plane   10d   v1.26.0   beta.kubernetes.io/arch"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("arm64,beta.kubernetes.io/os"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("linux"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\nk8s-node2   Ready    "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("          10d   v1.26.0   beta.kubernetes.io/arch"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("arm64,beta.kubernetes.io/os"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("linux"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\nk8s-node3   Ready    "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("          10d   v1.26.0   beta.kubernetes.io/arch"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("arm64,beta.kubernetes.io/os"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("linux"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("é€‰æ‹©ä¸€ä¸ªèŠ‚ç‚¹ï¼Œç»™å®ƒæ·»åŠ ä¸€ä¸ªæ ‡ç­¾ï¼š")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("kubectl label nodes k8s-node1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("èŠ‚ç‚¹åç§°"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("disktype")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("ssd\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("éªŒè¯ä½ æ‰€é€‰èŠ‚ç‚¹å…·æœ‰ "),t("code",[s._v("disktype=ssd")]),s._v(" æ ‡ç­¾ï¼š")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ kubectl get nodes --show-labels\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#è¾“å‡ºç±»ä¼¼äºæ­¤ï¼š")]),s._v("\nNAME        STATUS   ROLES           AGE   VERSION   LABELS\nk8s-node1   Ready    control-plane   10d   v1.26.0   beta.kubernetes.io/arch"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("arm64,beta.kubernetes.io/os"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("linux,disktype"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("ssd"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\nk8s-node2   Ready    "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("          10d   v1.26.0   beta.kubernetes.io/arch"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("arm64,beta.kubernetes.io/os"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("linux"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\nk8s-node3   Ready    "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("          10d   v1.26.0   beta.kubernetes.io/arch"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("arm64,beta.kubernetes.io/os"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("linux"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])])])]),s._v(" "),t("h4",{attrs:{id:"_8-2-æ ¹æ®é€‰æ‹©èŠ‚ç‚¹æ ‡ç­¾æŒ‡æ´¾-pod-åˆ°æŒ‡å®šèŠ‚ç‚¹-nodeselector"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_8-2-æ ¹æ®é€‰æ‹©èŠ‚ç‚¹æ ‡ç­¾æŒ‡æ´¾-pod-åˆ°æŒ‡å®šèŠ‚ç‚¹-nodeselector"}},[s._v("ğŸŒ™")]),s._v(" 8.2 æ ¹æ®é€‰æ‹©èŠ‚ç‚¹æ ‡ç­¾æŒ‡æ´¾ pod åˆ°æŒ‡å®šèŠ‚ç‚¹[nodeSelector]")]),s._v(" "),t("div",{staticClass:"language-yml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiVersion")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" v1\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kind")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Pod\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("metadata")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nginx\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("labels")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("env")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nginx\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("spec")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("containers")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nginx\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("image")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nginx"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.19")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("imagePullPolicy")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" IfNotPresent\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("nodeSelector")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("disktype")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" ssd  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# é€‰æ‹©èŠ‚ç‚¹ä¸ºæ ‡ç­¾ä¸º ssd çš„èŠ‚ç‚¹")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br")])]),t("h4",{attrs:{id:"_8-3-æ ¹æ®èŠ‚ç‚¹åç§°æŒ‡æ´¾-pod-åˆ°æŒ‡å®šèŠ‚ç‚¹-nodename"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_8-3-æ ¹æ®èŠ‚ç‚¹åç§°æŒ‡æ´¾-pod-åˆ°æŒ‡å®šèŠ‚ç‚¹-nodename"}},[s._v("ğŸŒ™")]),s._v(" 8.3 æ ¹æ®èŠ‚ç‚¹åç§°æŒ‡æ´¾ pod åˆ°æŒ‡å®šèŠ‚ç‚¹[nodeName]")]),s._v(" "),t("div",{staticClass:"language-yml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiVersion")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" v1\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kind")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Pod\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("metadata")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nginx\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("spec")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("nodeName")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" worker1    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# è°ƒåº¦ Pod åˆ°ç‰¹å®šçš„èŠ‚ç‚¹")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("containers")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nginx\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("image")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nginx\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("imagePullPolicy")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" IfNotPresent\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br")])]),t("h4",{attrs:{id:"_8-4-æ ¹æ®-äº²å’Œæ€§å’Œåäº²å’Œæ€§-æŒ‡æ´¾-pod-åˆ°æŒ‡å®šèŠ‚ç‚¹"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_8-4-æ ¹æ®-äº²å’Œæ€§å’Œåäº²å’Œæ€§-æŒ‡æ´¾-pod-åˆ°æŒ‡å®šèŠ‚ç‚¹"}},[s._v("ğŸŒ™")]),s._v(" 8.4 æ ¹æ® äº²å’Œæ€§å’Œåäº²å’Œæ€§ æŒ‡æ´¾ pod åˆ°æŒ‡å®šèŠ‚ç‚¹")]),s._v(" "),t("p",[s._v("å®˜ç½‘åœ°å€: http://kubernetes.p2hp.com/docs/concepts/scheduling-eviction/assign-pod-node.html")]),s._v(" "),t("p",[t("strong",[s._v("è¯´æ˜")])]),s._v(" "),t("p",[t("code",[s._v("nodeSelector")]),s._v(" æä¾›äº†ä¸€ç§æœ€ç®€å•çš„æ–¹æ³•æ¥å°† Pod çº¦æŸåˆ°å…·æœ‰ç‰¹å®šæ ‡ç­¾çš„èŠ‚ç‚¹ä¸Šã€‚ äº²å’Œæ€§å’Œåäº²å’Œæ€§æ‰©å±•äº†ä½ å¯ä»¥å®šä¹‰çš„çº¦æŸç±»å‹ã€‚ä½¿ç”¨äº²å’Œæ€§ä¸åäº²å’Œæ€§çš„ä¸€äº›å¥½å¤„æœ‰ï¼š")]),s._v(" "),t("ul",[t("li",[s._v("äº²å’Œæ€§ã€åäº²å’Œæ€§è¯­è¨€çš„è¡¨è¾¾èƒ½åŠ›æ›´å¼ºã€‚"),t("code",[s._v("nodeSelector")]),s._v(" åªèƒ½é€‰æ‹©æ‹¥æœ‰æ‰€æœ‰æŒ‡å®šæ ‡ç­¾çš„èŠ‚ç‚¹ã€‚ äº²å’Œæ€§ã€åäº²å’Œæ€§ä¸ºä½ æä¾›å¯¹é€‰æ‹©é€»è¾‘çš„æ›´å¼ºæ§åˆ¶èƒ½åŠ›ã€‚")]),s._v(" "),t("li",[s._v("ä½ å¯ä»¥æ ‡æ˜æŸè§„åˆ™æ˜¯â€œè½¯éœ€æ±‚â€æˆ–è€…â€œåå¥½â€ï¼Œè¿™æ ·è°ƒåº¦å™¨åœ¨æ— æ³•æ‰¾åˆ°åŒ¹é…èŠ‚ç‚¹æ—¶ä»ç„¶è°ƒåº¦è¯¥ Podã€‚")]),s._v(" "),t("li",[s._v("ä½ å¯ä»¥ä½¿ç”¨èŠ‚ç‚¹ä¸Šï¼ˆæˆ–å…¶ä»–æ‹“æ‰‘åŸŸä¸­ï¼‰è¿è¡Œçš„å…¶ä»– Pod çš„æ ‡ç­¾æ¥å®æ–½è°ƒåº¦çº¦æŸï¼Œ è€Œä¸æ˜¯åªèƒ½ä½¿ç”¨èŠ‚ç‚¹æœ¬èº«çš„æ ‡ç­¾ã€‚è¿™ä¸ªèƒ½åŠ›è®©ä½ èƒ½å¤Ÿå®šä¹‰è§„åˆ™å…è®¸å“ªäº› Pod å¯ä»¥è¢«æ”¾ç½®åœ¨ä¸€èµ·ã€‚")])]),s._v(" "),t("p",[t("strong",[s._v("äº²å’Œæ€§åŠŸèƒ½ç”±ä¸¤ç§ç±»å‹çš„äº²å’Œæ€§ç»„æˆï¼š")])]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("èŠ‚ç‚¹äº²å’Œæ€§")]),s._v("åŠŸèƒ½ç±»ä¼¼äº "),t("code",[s._v("nodeSelector")]),s._v(" å­—æ®µï¼Œä½†å®ƒçš„è¡¨è¾¾èƒ½åŠ›æ›´å¼ºï¼Œå¹¶ä¸”å…è®¸ä½ æŒ‡å®šè½¯è§„åˆ™ã€‚")]),s._v(" "),t("li",[s._v("Pod é—´äº²å’Œæ€§/åäº²å’Œæ€§å…è®¸ä½ æ ¹æ®å…¶ä»– Pod çš„æ ‡ç­¾æ¥çº¦æŸ Podã€‚")])]),s._v(" "),t("p",[s._v("èŠ‚ç‚¹äº²å’Œæ€§æ¦‚å¿µä¸Šç±»ä¼¼äº "),t("code",[s._v("nodeSelector")]),s._v("ï¼Œ å®ƒä½¿ä½ å¯ä»¥æ ¹æ®èŠ‚ç‚¹ä¸Šçš„æ ‡ç­¾æ¥çº¦æŸ Pod å¯ä»¥è°ƒåº¦åˆ°å“ªäº›èŠ‚ç‚¹ä¸Šã€‚ èŠ‚ç‚¹äº²å’Œæ€§æœ‰ä¸¤ç§ï¼š")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("requiredDuringSchedulingIgnoredDuringExecution")]),s._v("ï¼š è°ƒåº¦å™¨åªæœ‰åœ¨è§„åˆ™è¢«æ»¡è¶³çš„æ—¶å€™æ‰èƒ½æ‰§è¡Œè°ƒåº¦ã€‚æ­¤åŠŸèƒ½ç±»ä¼¼äº "),t("code",[s._v("nodeSelector")]),s._v("ï¼Œ ä½†å…¶è¯­æ³•è¡¨è¾¾èƒ½åŠ›æ›´å¼ºã€‚")]),s._v(" "),t("li",[t("code",[s._v("preferredDuringSchedulingIgnoredDuringExecution")]),s._v("ï¼š è°ƒåº¦å™¨ä¼šå°è¯•å¯»æ‰¾æ»¡è¶³å¯¹åº”è§„åˆ™çš„èŠ‚ç‚¹ã€‚å¦‚æœæ‰¾ä¸åˆ°åŒ¹é…çš„èŠ‚ç‚¹ï¼Œè°ƒåº¦å™¨ä»ç„¶ä¼šè°ƒåº¦è¯¥ Podã€‚")])]),s._v(" "),t("p",[t("strong",[s._v("æ³¨æ„ï¼šåœ¨ä¸Šè¿°ç±»å‹ä¸­ï¼Œ"),t("code",[s._v("IgnoredDuringExecution")]),s._v(" æ„å‘³ç€å¦‚æœèŠ‚ç‚¹æ ‡ç­¾åœ¨ Kubernetes è°ƒåº¦ Pod åå‘ç”Ÿäº†å˜æ›´ï¼ŒPod ä»å°†ç»§ç»­è¿è¡Œã€‚")])]),s._v(" "),t("div",{staticClass:"language-yml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiVersion")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" v1\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kind")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Pod\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("metadata")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" with"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("node"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("affinity\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("spec")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("affinity")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("nodeAffinity")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    \t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#èŠ‚ç‚¹å¿…é¡»åŒ…å«ä¸€ä¸ªé”®åä¸º ssd çš„æ ‡ç­¾ï¼Œ å¹¶ä¸”è¯¥æ ‡ç­¾çš„å–å€¼å¿…é¡»ä¸º fast æˆ– superfastã€‚")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("requiredDuringSchedulingIgnoredDuringExecution")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" \n        "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("nodeSelectorTerms")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("matchExpressions")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("key")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" ssd\n            "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("operator")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" In\n            "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("values")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" fast\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" superfast\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("containers")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nginx\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("image")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nginx"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.19")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br")])]),t("p",[t("strong",[s._v("æ³¨æ„: ä½ å¯ä»¥ä½¿ç”¨ "),t("code",[s._v("In")]),s._v("ã€"),t("code",[s._v("NotIn")]),s._v("ã€"),t("code",[s._v("Exists")]),s._v("ã€"),t("code",[s._v("DoesNotExist")]),s._v("ã€"),t("code",[s._v("Gt")]),s._v(" å’Œ "),t("code",[s._v("Lt")]),s._v(" ä¹‹ä¸€ä½œä¸ºæ“ä½œç¬¦ã€‚"),t("code",[s._v("NotIn")]),s._v(" å’Œ "),t("code",[s._v("DoesNotExist")]),s._v(" å¯ç”¨æ¥å®ç°èŠ‚ç‚¹åäº²å’Œæ€§è¡Œä¸ºã€‚")])]),s._v(" "),t("h4",{attrs:{id:"_8-5-èŠ‚ç‚¹äº²å’Œæ€§æƒé‡"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_8-5-èŠ‚ç‚¹äº²å’Œæ€§æƒé‡"}},[s._v("ğŸŒ™")]),s._v(" 8.5 èŠ‚ç‚¹äº²å’Œæ€§æƒé‡")]),s._v(" "),t("p",[s._v("ä½ å¯ä»¥ä¸º "),t("code",[s._v("preferredDuringSchedulingIgnoredDuringExecution")]),s._v(" äº²å’Œæ€§ç±»å‹çš„æ¯ä¸ªå®ä¾‹è®¾ç½® "),t("code",[s._v("weight")]),s._v(" å­—æ®µï¼Œå…¶å–å€¼èŒƒå›´æ˜¯ 1 åˆ° 100ã€‚")]),s._v(" "),t("div",{staticClass:"language-yml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiVersion")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" v1\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kind")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Pod\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("metadata")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" with"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("node"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("affinity\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("spec")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("affinity")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("nodeAffinity")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#èŠ‚ç‚¹æœ€å¥½å…·æœ‰ä¸€ä¸ªé”®åä¸º app ä¸”å–å€¼ä¸º fast çš„æ ‡ç­¾ã€‚")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("preferredDuringSchedulingIgnoredDuringExecution")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("weight")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#å–å€¼èŒƒå›´æ˜¯ 1 åˆ° 100")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("preference")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("matchExpressions")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("key")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" ssd\n            "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("operator")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" In\n            "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("values")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" fast\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("weight")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("50")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("preference")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("matchExpressions")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("key")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" app\n            "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("operator")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" In\n            "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("values")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" demo\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("containers")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nginx\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("image")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nginx"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.19")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br")])]),t("h4",{attrs:{id:"_8-6-pod-é—´äº²å’Œæ€§å’Œåäº²å’Œæ€§åŠæƒé‡"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_8-6-pod-é—´äº²å’Œæ€§å’Œåäº²å’Œæ€§åŠæƒé‡"}},[s._v("ğŸŒ™")]),s._v(" 8.6 pod é—´äº²å’Œæ€§å’Œåäº²å’Œæ€§åŠæƒé‡")]),s._v(" "),t("p",[s._v("ä¸èŠ‚ç‚¹äº²å’Œæ€§ç±»ä¼¼ï¼ŒPod çš„äº²å’Œæ€§ä¸åäº²å’Œæ€§ä¹Ÿæœ‰ä¸¤ç§ç±»å‹ï¼š")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("requiredDuringSchedulingIgnoredDuringExecution")])]),s._v(" "),t("li",[t("code",[s._v("preferredDuringSchedulingIgnoredDuringExecution")])])]),s._v(" "),t("p",[s._v("ä¾‹å¦‚ï¼Œä½ å¯ä»¥ä½¿ç”¨ "),t("code",[s._v("requiredDuringSchedulingIgnoredDuringExecution")]),s._v(" äº²å’Œæ€§æ¥å‘Šè¯‰è°ƒåº¦å™¨ï¼Œ å°†ä¸¤ä¸ªæœåŠ¡çš„ Pod æ”¾åˆ°åŒä¸€ä¸ªäº‘æä¾›å•†å¯ç”¨åŒºå†…ï¼Œå› ä¸ºå®ƒä»¬å½¼æ­¤ä¹‹é—´é€šä¿¡éå¸¸é¢‘ç¹ã€‚ ç±»ä¼¼åœ°ï¼Œä½ å¯ä»¥ä½¿ç”¨ "),t("code",[s._v("preferredDuringSchedulingIgnoredDuringExecution")]),s._v(" åäº²å’Œæ€§æ¥å°†åŒä¸€æœåŠ¡çš„å¤šä¸ª Pod åˆ†å¸ƒåˆ°å¤šä¸ªäº‘æä¾›å•†å¯ç”¨åŒºä¸­ã€‚")]),s._v(" "),t("p",[s._v("è¦ä½¿ç”¨ Pod é—´äº²å’Œæ€§ï¼Œå¯ä»¥ä½¿ç”¨ Pod è§„çº¦ä¸­çš„ "),t("code",[s._v("spec.affinity.podAffinity")]),s._v(" å­—æ®µã€‚ å¯¹äº Pod é—´åäº²å’Œæ€§ï¼Œå¯ä»¥ä½¿ç”¨ Pod è§„çº¦ä¸­çš„ "),t("code",[s._v("spec.affinity.podAntiAffinity")]),s._v(" å­—æ®µã€‚")]),s._v(" "),t("div",{staticClass:"language-yml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiVersion")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" v1\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kind")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Pod\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("metadata")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" redis\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("labels")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("app")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" redis\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("spec")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("containers")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" redis\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("image")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" redis"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("5.0.10\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("imagePullPolicy")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" IfNotPresent\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("restartPolicy")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Always\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("affinity")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("podAffinity")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("requiredDuringSchedulingIgnoredDuringExecution")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#æ›´ç¡®åˆ‡çš„è¯´ï¼Œè°ƒåº¦å™¨å¿…é¡»å°† Pod è°ƒåº¦åˆ°å…·æœ‰ cpu æ ‡ç­¾çš„èŠ‚ç‚¹ä¸Šï¼Œå¹¶ä¸”é›†ç¾¤ä¸­è‡³å°‘æœ‰ä¸€ä¸ªä½äºè¯¥å¯ç”¨åŒºçš„èŠ‚ç‚¹ä¸Šè¿è¡Œç€å¸¦æœ‰ app=nginx æ ‡ç­¾çš„ Podã€‚")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("topologyKey")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" cpu\n          "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("labelSelector")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("matchExpressions")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n              "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("key")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" app\n                "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("operator")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" In\n                "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("values")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n                  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" nginx\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br")])]),t("ul",[t("li",[t("strong",[s._v("pod é—´äº²å’Œæ€§æƒé‡")])])]),s._v(" "),t("div",{staticClass:"language-yml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiVersion")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" v1\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kind")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Pod\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("metadata")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" redis\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("labels")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("app")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" redis\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("spec")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("containers")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" redis\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("image")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" redis"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("5.0.10\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("imagePullPolicy")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" IfNotPresent\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("restartPolicy")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Always\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("affinity")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("podAffinity")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("preferredDuringSchedulingIgnoredDuringExecution")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#æ›´ç¡®åˆ‡çš„è¯´ï¼Œè°ƒåº¦å™¨å¿…é¡»å°† Pod è°ƒåº¦åˆ°å…·æœ‰ cpu æ ‡ç­¾çš„èŠ‚ç‚¹ä¸Šï¼Œå¹¶ä¸”é›†ç¾¤ä¸­è‡³å°‘æœ‰ä¸€ä¸ªä½äºè¯¥å¯ç”¨åŒºçš„èŠ‚ç‚¹ä¸Šè¿è¡Œç€å¸¦æœ‰ app=nginx æ ‡ç­¾çš„ Podã€‚")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("podAffinityTerm")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("topologyKey")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" cpu\n            "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("labelSelector")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n              "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("matchExpressions")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("key")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" app\n                  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("operator")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" In\n                  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("values")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n                    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" nginx\n          "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("weight")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("podAffinityTerm")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("topologyKey")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" cpu\n            "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("labelSelector")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n              "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("matchExpressions")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("key")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" app\n                  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("operator")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" In\n                  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("values")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n                    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" web\n          "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("weight")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("30")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br")])]),t("h4",{attrs:{id:"_8-7-æ±¡ç‚¹å’Œå®¹å¿åº¦"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_8-7-æ±¡ç‚¹å’Œå®¹å¿åº¦"}},[s._v("ğŸŒ™")]),s._v(" 8.7 æ±¡ç‚¹å’Œå®¹å¿åº¦")]),s._v(" "),t("p",[s._v("å‚è€ƒ: http://kubernetes.p2hp.com/docs/concepts/scheduling-eviction/taint-and-toleration.html")]),s._v(" "),t("h4",{attrs:{id:"_8-8-pod-æ‹“æ‰‘åˆ†å¸ƒçº¦æŸ"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_8-8-pod-æ‹“æ‰‘åˆ†å¸ƒçº¦æŸ"}},[s._v("ğŸŒ™")]),s._v(" 8.8 Pod æ‹“æ‰‘åˆ†å¸ƒçº¦æŸ")]),s._v(" "),t("p",[s._v("å‚è€ƒ: http://kubernetes.p2hp.com/docs/concepts/scheduling-eviction/topology-spread-constraints/")]),s._v(" "),t("h2",{attrs:{id:"ç¬¬å››ç« -controller-æ§åˆ¶å™¨"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ç¬¬å››ç« -controller-æ§åˆ¶å™¨"}},[s._v("ğŸŒ™")]),s._v(" ç¬¬å››ç«  Controller æ§åˆ¶å™¨")]),s._v(" "),t("ul",[t("li",[s._v("ä»€ä¹ˆæ˜¯ Controller ä»¥åŠä½œç”¨")]),s._v(" "),t("li",[s._v("å¸¸è§çš„ Controller æ§åˆ¶å™¨")]),s._v(" "),t("li",[s._v("Controller å¦‚ä½•ç®¡ç† Pod")]),s._v(" "),t("li",[s._v("Deployment åŸºæœ¬æ“ä½œä¸åº”ç”¨")]),s._v(" "),t("li",[s._v("é€šè¿‡æ§åˆ¶å™¨å®ç° Pod å‡çº§å›æ»šå’Œå¼¹æ€§ä¼¸ç¼©")]),s._v(" "),t("li",[s._v("StatefulSet åŸºæœ¬æ“ä½œä¸åº”ç”¨")]),s._v(" "),t("li",[s._v("Daemonset åŸºæœ¬æ“ä½œä¸åº”ç”¨")]),s._v(" "),t("li",[s._v("Job åŸºæœ¬æ“ä½œä¸åº”ç”¨")]),s._v(" "),t("li",[s._v("Controller æ— æ³•è§£å†³é—®é¢˜")])]),s._v(" "),t("h3",{attrs:{id:"_1-controller-æ§åˆ¶å™¨"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-controller-æ§åˆ¶å™¨"}},[s._v("ğŸŒ™")]),s._v(" 1 Controller æ§åˆ¶å™¨")]),s._v(" "),t("p",[s._v("å®˜ç½‘: http://kubernetes.p2hp.com/docs/concepts/architecture/controller.html")]),s._v(" "),t("h4",{attrs:{id:"_1-1-ä»€ä¹ˆæ˜¯-controller"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-ä»€ä¹ˆæ˜¯-controller"}},[s._v("ğŸŒ™")]),s._v(" 1.1 ä»€ä¹ˆæ˜¯ Controller")]),s._v(" "),t("p",[t("code",[s._v("Kubernetes é€šå¸¸ä¸ä¼šç›´æ¥åˆ›å»º Podï¼Œ è€Œæ˜¯é€šè¿‡ Controller æ¥ç®¡ç† Pod çš„ã€‚")]),t("strong",[s._v("Controller ä¸­å®šä¹‰äº† Pod çš„éƒ¨ç½²ç‰¹æ€§ï¼Œæ¯”å¦‚æœ‰å‡ ä¸ªå‰¯æœ¬ã€åœ¨ä»€ä¹ˆæ ·çš„ Node ä¸Šè¿è¡Œç­‰")]),s._v("ã€‚é€šä¿—çš„è¯´å¯ä»¥è®¤ä¸º Controller å°±æ˜¯ç”¨æ¥ç®¡ç† Pod ä¸€ä¸ªå¯¹è±¡ã€‚å…¶æ ¸å¿ƒä½œç”¨å¯ä»¥é€šè¿‡ä¸€å¥è¯æ€»ç»“ï¼š "),t("strong",[t("code",[s._v("é€šè¿‡ç›‘æ§é›†ç¾¤çš„å…¬å…±çŠ¶æ€ï¼Œå¹¶è‡´åŠ›äºå°†å½“å‰çŠ¶æ€è½¬å˜ä¸ºæœŸæœ›çš„çŠ¶æ€ã€‚")])])]),s._v(" "),t("p",[t("strong",[s._v("é€šä¿—å®šä¹‰:  controller å¯ä»¥ç®¡ç† pod è®© pod æ›´å…·æœ‰è¿ç»´èƒ½åŠ›")])]),s._v(" "),t("h4",{attrs:{id:"_1-2-å¸¸è§çš„-controller-æ§åˆ¶å™¨"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-å¸¸è§çš„-controller-æ§åˆ¶å™¨"}},[s._v("ğŸŒ™")]),s._v(" 1.2 å¸¸è§çš„ Controller æ§åˆ¶å™¨")]),s._v(" "),t("ul",[t("li",[t("p",[t("code",[s._v("Deployment")]),s._v(" æ˜¯æœ€å¸¸ç”¨çš„ Controllerã€‚Deployment å¯ä»¥ç®¡ç† Pod çš„å¤šä¸ªå‰¯æœ¬ï¼Œå¹¶ç¡®ä¿ Pod æŒ‰ç…§æœŸæœ›çš„çŠ¶æ€è¿è¡Œã€‚")]),s._v(" "),t("ul",[t("li",[s._v("ReplicaSet å®ç°äº† Pod çš„å¤šå‰¯æœ¬ç®¡ç†ã€‚ä½¿ç”¨ Deployment æ—¶ä¼šè‡ªåŠ¨åˆ›å»º ReplicaSet,ä¹Ÿå°±æ˜¯è¯´ Deployment æ˜¯é€šè¿‡ ReplicaSet æ¥ç®¡ç† Pod çš„å¤šä¸ªå‰¯æœ¬çš„ï¼Œæˆ‘ä»¬é€šå¸¸ä¸éœ€è¦ç›´æ¥ä½¿ç”¨ ReplicaSetã€‚")])])]),s._v(" "),t("li",[t("p",[t("code",[s._v("Daemonset")]),s._v(" ç”¨äºæ¯ä¸ªNode æœ€å¤šåªè¿è¡Œä¸€ä¸ª Pod å‰¯æœ¬çš„åœºæ™¯ã€‚æ­£å¦‚å…¶åç§°æ‰€æ­ç¤ºçš„ï¼ŒDaemonSet é€šå¸¸ç”¨äºè¿è¡Œ daemonã€‚")])]),s._v(" "),t("li",[t("p",[t("code",[s._v("Statefuleset")]),s._v(" èƒ½å¤Ÿä¿è¯ Pod çš„æ¯ä¸ªå‰¯æœ¬åœ¨æ•´ä¸ªç”Ÿå‘½å‘¨æœŸä¸­åç§°æ˜¯ä¸å˜çš„ï¼Œè€Œå…¶ä»–Controller ä¸æä¾›è¿™ä¸ªåŠŸèƒ½ã€‚å½“æŸä¸ª Pod å‘ç”Ÿæ•…éšœéœ€è¦åˆ é™¤å¹¶é‡æ–°å¯åŠ¨æ—¶ï¼ŒPod çš„åç§°ä¼šå‘ç”Ÿå˜åŒ–ï¼ŒåŒæ—¶ StatefuleSet ä¼šä¿è¯å‰¯æœ¬æŒ‰ç…§å›ºå®šçš„é¡ºåºå¯åŠ¨ã€æ›´æ–°æˆ–è€…åˆ é™¤ã€‚")])]),s._v(" "),t("li",[t("p",[t("code",[s._v("Job")]),s._v("  ç”¨äºè¿è¡Œç»“æŸå°±åˆ é™¤çš„åº”ç”¨ï¼Œè€Œå…¶ä»– Controller ä¸­çš„ Pod é€šå¸¸æ˜¯é•¿æœŸæŒç»­è¿è¡Œã€‚")])])]),s._v(" "),t("h4",{attrs:{id:"_1-3-controller-å¦‚ä½•ç®¡ç†-pod"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-controller-å¦‚ä½•ç®¡ç†-pod"}},[s._v("ğŸŒ™")]),s._v(" 1.3 Controller å¦‚ä½•ç®¡ç† Pod")]),s._v(" "),t("p",[t("strong",[t("code",[s._v("æ³¨æ„: Controller é€šè¿‡ label å…³è”èµ·æ¥ Pods")])])]),s._v(" "),t("p",[t("img",{attrs:{src:"https://minioweb.baizhiedu.xin/typora-imgs/2023/03/07/image-20230307105007568.png",alt:"image-20230307105007568"}})]),s._v(" "),t("h3",{attrs:{id:"_2-deployment"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-deployment"}},[s._v("ğŸŒ™")]),s._v(" 2 Deployment")]),s._v(" "),t("p",[s._v("å®˜æ–¹åœ°å€: http://kubernetes.p2hp.com/docs/concepts/workloads/controllers/deployment.html")]),s._v(" "),t("p",[s._v("ä¸€ä¸ª Deployment ä¸º Pod å’Œ ReplicaSetæä¾›å£°æ˜å¼çš„æ›´æ–°èƒ½åŠ›ã€‚")]),s._v(" "),t("p",[s._v("ä½ è´Ÿè´£æè¿° Deployment ä¸­çš„ "),t("strong",[s._v("ç›®æ ‡çŠ¶æ€")]),s._v("ï¼Œè€Œ Deployment æ§åˆ¶å™¨ï¼ˆControllerï¼‰ä»¥å—æ§é€Ÿç‡æ›´æ”¹å®é™…çŠ¶æ€ï¼Œ ä½¿å…¶å˜ä¸ºæœŸæœ›çŠ¶æ€ã€‚ä½ å¯ä»¥å®šä¹‰ Deployment ä»¥åˆ›å»ºæ–°çš„ ReplicaSetï¼Œæˆ–åˆ é™¤ç°æœ‰ Deploymentï¼Œ å¹¶é€šè¿‡æ–°çš„ Deployment æ”¶å…»å…¶èµ„æºã€‚")]),s._v(" "),t("h4",{attrs:{id:"_2-1-åˆ›å»º-deployment"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-åˆ›å»º-deployment"}},[s._v("ğŸŒ™")]),s._v(" 2.1 åˆ›å»º deployment")]),s._v(" "),t("div",{staticClass:"language-yml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiVersion")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" apps/v1\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kind")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Deployment\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("metadata")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nginx"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("deployment\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("labels")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("app")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nginx\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("spec")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("replicas")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("selector")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("matchLabels")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("app")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nginx\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("template")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("metadata")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("labels")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("app")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nginx\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("spec")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("containers")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nginx\n          "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("image")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nginx"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.19")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("ports")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("containerPort")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br")])]),t("h4",{attrs:{id:"_2-2-æŸ¥çœ‹-deployment"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-æŸ¥çœ‹-deployment"}},[s._v("ğŸŒ™")]),s._v(" 2.2 æŸ¥çœ‹ deployment")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# éƒ¨ç½²åº”ç”¨")]),s._v("\n$ kubectl apply "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-f")]),s._v(" app.yaml\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# æŸ¥çœ‹ deployment")]),s._v("\n$ kubectl get deployment\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# æŸ¥çœ‹ pod")]),s._v("\n$ kubectl get pod "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-o")]),s._v(" wide\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# æŸ¥çœ‹ pod è¯¦æƒ…")]),s._v("\n$ kubectl describe pod pod-name\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# æŸ¥çœ‹ deployment è¯¦ç»†")]),s._v("\n$ kubectl describe deployment åç§°\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# æŸ¥çœ‹ log")]),s._v("\n$ kubectl logs pod-name\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# è¿›å…¥ Pod å®¹å™¨ç»ˆç«¯ï¼Œ -c container-name å¯ä»¥æŒ‡å®šè¿›å…¥å“ªä¸ªå®¹å™¨ã€‚")]),s._v("\n$ kubectl "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exec")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-it")]),s._v(" pod-name -- "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("bash")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# è¾“å‡ºåˆ°æ–‡ä»¶")]),s._v("\n$ kubectl get deployment nginx-deployment "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-o")]),s._v(" yaml "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" test.yaml\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br")])]),t("ul",[t("li",[t("code",[s._v("NAME")]),s._v(" åˆ—å‡ºäº†åå­—ç©ºé—´ä¸­ Deployment çš„åç§°ã€‚")]),s._v(" "),t("li",[t("code",[s._v("READY")]),s._v(" æ˜¾ç¤ºåº”ç”¨ç¨‹åºçš„å¯ç”¨çš„â€œå‰¯æœ¬â€æ•°ã€‚æ˜¾ç¤ºçš„æ¨¡å¼æ˜¯â€œå°±ç»ªä¸ªæ•°/æœŸæœ›ä¸ªæ•°â€ã€‚")]),s._v(" "),t("li",[t("code",[s._v("UP-TO-DATE")]),s._v(" æ˜¾ç¤ºä¸ºäº†è¾¾åˆ°æœŸæœ›çŠ¶æ€å·²ç»æ›´æ–°çš„å‰¯æœ¬æ•°ã€‚")]),s._v(" "),t("li",[t("code",[s._v("AVAILABLE")]),s._v(" æ˜¾ç¤ºåº”ç”¨å¯ä¾›ç”¨æˆ·ä½¿ç”¨çš„å‰¯æœ¬æ•°ã€‚")]),s._v(" "),t("li",[t("code",[s._v("AGE")]),s._v(" æ˜¾ç¤ºåº”ç”¨ç¨‹åºè¿è¡Œçš„æ—¶é—´ã€‚")])]),s._v(" "),t("blockquote",[t("p",[s._v("è¯·æ³¨æ„æœŸæœ›å‰¯æœ¬æ•°æ˜¯æ ¹æ® "),t("code",[s._v(".spec.replicas")]),s._v(" å­—æ®µè®¾ç½® 3ã€‚")])]),s._v(" "),t("h4",{attrs:{id:"_2-3-æ‰©ç¼©-deployment"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-æ‰©ç¼©-deployment"}},[s._v("ğŸŒ™")]),s._v(" 2.3 æ‰©ç¼© deployment")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# æŸ¥è¯¢å‰¯æœ¬")]),s._v("\n$ kubectl get rs"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("replicaset\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ä¼¸ç¼©æ‰©å±•å‰¯æœ¬")]),s._v("\n$ kubectl scale deployment nginx "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--replicas")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("h4",{attrs:{id:"_2-4-å›æ»š-deployment"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-4-å›æ»š-deployment"}},[s._v("ğŸŒ™")]),s._v(" 2.4 å›æ»š deployment")]),s._v(" "),t("blockquote",[t("p",[t("strong",[s._v("è¯´æ˜ï¼š")])]),s._v(" "),t("p",[s._v("ä»…å½“ Deployment Pod æ¨¡æ¿ï¼ˆå³ "),t("code",[s._v(".spec.template")]),s._v("ï¼‰å‘ç”Ÿæ”¹å˜æ—¶ï¼Œä¾‹å¦‚æ¨¡æ¿çš„æ ‡ç­¾æˆ–å®¹å™¨é•œåƒè¢«æ›´æ–°ï¼Œ æ‰ä¼šè§¦å‘ Deployment ä¸Šçº¿ã€‚å…¶ä»–æ›´æ–°ï¼ˆå¦‚å¯¹ Deployment æ‰§è¡Œæ‰©ç¼©å®¹çš„æ“ä½œï¼‰ä¸ä¼šè§¦å‘ä¸Šçº¿åŠ¨ä½œã€‚")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# æŸ¥çœ‹ä¸Šçº¿çŠ¶æ€")]),s._v("\n$ kubectl rollout status "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("deployment nginx-deployment "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" deployment/nginx"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# æŸ¥çœ‹å†å²")]),s._v("\n$ kubectl rollout "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("history")]),s._v(" deployment nginx-deployment\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# æŸ¥çœ‹æŸæ¬¡å†å²çš„è¯¦ç»†ä¿¡æ¯")]),s._v("\n$ kubectl rollout "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("history")]),s._v(" deployment/nginx-deployment "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--revision")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# å›åˆ°ä¸Šä¸ªç‰ˆæœ¬")]),s._v("\n$ kubectl rollout undo deployment nginx-deployment\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# å›åˆ°æŒ‡å®šç‰ˆæœ¬")]),s._v("\n$ kubectl rollout undo deployment nginx-deployment --to-revision"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# é‡æ–°éƒ¨ç½²")]),s._v("\n$ kubectl rollout restart deployment nginx-deployment\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# æš‚åœè¿è¡Œï¼Œæš‚åœåï¼Œå¯¹ deployment çš„ä¿®æ”¹ä¸ä¼šç«‹åˆ»ç”Ÿæ•ˆï¼Œæ¢å¤åæ‰åº”ç”¨è®¾ç½®")]),s._v("\n$ kubectl rollout pause deployment ngixn-deployment\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# æ¢å¤")]),s._v("\n$ kubectl rollout resume deployment nginx-deployment\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br")])]),t("h4",{attrs:{id:"_2-5-åˆ é™¤-deployment"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-5-åˆ é™¤-deployment"}},[s._v("ğŸŒ™")]),s._v(" 2.5 åˆ é™¤ deployment")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# åˆ é™¤ Deployment")]),s._v("\n$ kubectl delete deployment nginx-deployment\n$ kubect delete "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-f")]),s._v(" nginx-deployment.yml\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# åˆ é™¤é»˜è®¤å‘½åç©ºé—´ä¸‹å…¨éƒ¨èµ„æº")]),s._v("\n$ kubectl delete all "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--all")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# åˆ é™¤æŒ‡å®šå‘½åç©ºé—´çš„èµ„æº")]),s._v("\n$ kubectl delete all "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--all")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-n")]),s._v(" å‘½åç©ºé—´çš„åç§°\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("h3",{attrs:{id:"_3-statefulset"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-statefulset"}},[s._v("ğŸŒ™")]),s._v(" 3 StatefulSet")]),s._v(" "),t("h4",{attrs:{id:"_3-1-ä»€ä¹ˆæ˜¯-statefulset"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-ä»€ä¹ˆæ˜¯-statefulset"}},[s._v("ğŸŒ™")]),s._v(" 3.1 ä»€ä¹ˆæ˜¯ StatefulSet")]),s._v(" "),t("p",[s._v("å®˜æ–¹åœ°å€ï¼š https://kubernetes.io/zh-cn/docs/concepts/workloads/controllers/statefulset/")]),s._v(" "),t("p",[t("strong",[s._v("StatefulSet æ˜¯ç”¨æ¥ç®¡ç†"),t("code",[s._v("æœ‰çŠ¶æ€åº”ç”¨")]),s._v("çš„å·¥ä½œè´Ÿè½½ API å¯¹è±¡ã€‚")])]),s._v(" "),t("p",[t("strong",[s._v("æ— çŠ¶æ€åº”ç”¨: åº”ç”¨æœ¬èº«ä¸å­˜å‚¨ä»»ä½•æ•°æ®çš„åº”ç”¨ç§°ä¹‹ä¸ºæ— çŠ¶æ€åº”ç”¨ã€‚")])]),s._v(" "),t("p",[t("strong",[s._v("æœ‰çŠ¶æ€åº”ç”¨: åº”ç”¨æœ¬èº«éœ€è¦å­˜å‚¨ç›¸å…³æ•°æ®åº”ç”¨ç§°ä¹‹ä¸ºæœ‰çŠ¶æ€åº”ç”¨ã€‚")])]),s._v(" "),t("p",[s._v("åšå®¢: å‰ç«¯vue  åç«¯ java   mysql redis es ....")]),s._v(" "),t("p",[s._v("æ•°æ®é‡‡é›†:  é‡‡é›†ç¨‹åº æœ‰çŠ¶æ€åº”ç”¨")]),s._v(" "),t("p",[s._v("StatefulSet ç”¨æ¥ç®¡ç†æŸ Pod é›†åˆçš„éƒ¨ç½²å’Œæ‰©ç¼©ï¼Œ "),t("strong",[s._v("å¹¶ä¸ºè¿™äº› Pod æä¾›æŒä¹…å­˜å‚¨å’ŒæŒä¹…æ ‡è¯†ç¬¦ã€‚")])]),s._v(" "),t("p",[s._v("å’Œ Deployment ç±»ä¼¼ï¼Œ StatefulSet ç®¡ç†åŸºäºç›¸åŒå®¹å™¨è§„çº¦çš„ä¸€ç»„ Podã€‚ä½†å’Œ Deployment ä¸åŒçš„æ˜¯ï¼Œ "),t("strong",[s._v("StatefulSet ä¸ºå®ƒä»¬çš„æ¯ä¸ª Pod ç»´æŠ¤äº†ä¸€ä¸ªæœ‰ç²˜æ€§çš„ IDã€‚è¿™äº› Pod æ˜¯åŸºäºç›¸åŒçš„è§„çº¦æ¥åˆ›å»ºçš„ï¼Œ ä½†æ˜¯ä¸èƒ½ç›¸äº’æ›¿æ¢ï¼šæ— è®ºæ€ä¹ˆè°ƒåº¦ï¼Œæ¯ä¸ª Pod éƒ½æœ‰ä¸€ä¸ªæ°¸ä¹…ä¸å˜çš„ IDã€‚")])]),s._v(" "),t("p",[s._v("å¦‚æœå¸Œæœ›ä½¿ç”¨å­˜å‚¨å·ä¸ºå·¥ä½œè´Ÿè½½æä¾›æŒä¹…å­˜å‚¨ï¼Œå¯ä»¥ä½¿ç”¨ StatefulSet ä½œä¸ºè§£å†³æ–¹æ¡ˆçš„ä¸€éƒ¨åˆ†ã€‚ å°½ç®¡ StatefulSet ä¸­çš„å•ä¸ª Pod ä»å¯èƒ½å‡ºç°æ•…éšœï¼Œ ä½†æŒä¹…çš„ Pod æ ‡è¯†ç¬¦ä½¿å¾—å°†ç°æœ‰å·ä¸æ›¿æ¢å·²å¤±è´¥ Pod çš„æ–° Pod ç›¸åŒ¹é…å˜å¾—æ›´åŠ å®¹æ˜“ã€‚")]),s._v(" "),t("h4",{attrs:{id:"_3-2-statefulset-ç‰¹ç‚¹"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-statefulset-ç‰¹ç‚¹"}},[s._v("ğŸŒ™")]),s._v(" 3.2 StatefulSet ç‰¹ç‚¹")]),s._v(" "),t("p",[s._v("StatefulSet å¯¹äºéœ€è¦æ»¡è¶³ä»¥ä¸‹ä¸€ä¸ªæˆ–å¤šä¸ªéœ€æ±‚çš„åº”ç”¨ç¨‹åºå¾ˆæœ‰ä»·å€¼ï¼š")]),s._v(" "),t("ul",[t("li",[s._v("ç¨³å®šçš„ã€å”¯ä¸€çš„ç½‘ç»œæ ‡è¯†ç¬¦ã€‚")]),s._v(" "),t("li",[s._v("ç¨³å®šçš„ã€æŒä¹…çš„å­˜å‚¨ã€‚")]),s._v(" "),t("li",[s._v("æœ‰åºçš„ã€ä¼˜é›…çš„éƒ¨ç½²å’Œæ‰©ç¼©ã€‚")]),s._v(" "),t("li",[s._v("æœ‰åºçš„ã€è‡ªåŠ¨çš„æ»šåŠ¨æ›´æ–°ã€‚")])]),s._v(" "),t("p",[s._v("åœ¨ä¸Šé¢æè¿°ä¸­ï¼Œâ€œç¨³å®šçš„â€æ„å‘³ç€ Pod è°ƒåº¦æˆ–é‡è°ƒåº¦çš„æ•´ä¸ªè¿‡ç¨‹æ˜¯æœ‰æŒä¹…æ€§çš„ã€‚ å¦‚æœåº”ç”¨ç¨‹åºä¸éœ€è¦ä»»ä½•ç¨³å®šçš„æ ‡è¯†ç¬¦æˆ–æœ‰åºçš„éƒ¨ç½²ã€åˆ é™¤æˆ–æ‰©ç¼©ï¼Œ åˆ™åº”è¯¥ä½¿ç”¨ç”±ä¸€ç»„æ— çŠ¶æ€çš„å‰¯æœ¬æ§åˆ¶å™¨æä¾›çš„å·¥ä½œè´Ÿè½½æ¥éƒ¨ç½²åº”ç”¨ç¨‹åºï¼Œæ¯”å¦‚ Deploymentæˆ–è€… ReplicaSet å¯èƒ½æ›´é€‚ç”¨äºä½ çš„æ— çŠ¶æ€åº”ç”¨éƒ¨ç½²éœ€è¦ã€‚")]),s._v(" "),t("h4",{attrs:{id:"_3-3-é™åˆ¶"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-é™åˆ¶"}},[s._v("ğŸŒ™")]),s._v(" 3.3 é™åˆ¶")]),s._v(" "),t("ul",[t("li",[s._v("ç»™å®š Pod çš„å­˜å‚¨å¿…é¡»ç”± PersistentVolume Provisioner åŸºäºæ‰€è¯·æ±‚çš„ "),t("code",[s._v("storage class")]),s._v(" æ¥åˆ¶å¤‡ï¼Œæˆ–è€…ç”±ç®¡ç†å‘˜é¢„å…ˆåˆ¶å¤‡ã€‚")]),s._v(" "),t("li",[s._v("åˆ é™¤æˆ–è€…æ‰©ç¼© StatefulSet å¹¶"),t("strong",[s._v("ä¸ä¼š")]),s._v("åˆ é™¤å®ƒå…³è”çš„å­˜å‚¨å·ã€‚ è¿™æ ·åšæ˜¯ä¸ºäº†ä¿è¯æ•°æ®å®‰å…¨ï¼Œå®ƒé€šå¸¸æ¯”è‡ªåŠ¨æ¸…é™¤ StatefulSet æ‰€æœ‰ç›¸å…³çš„èµ„æºæ›´æœ‰ä»·å€¼ã€‚")]),s._v(" "),t("li",[s._v("StatefulSet å½“å‰éœ€è¦"),t("a",{attrs:{href:"https://kubernetes.io/zh-cn/docs/concepts/services-networking/service/#headless-services",target:"_blank",rel:"noopener noreferrer"}},[s._v("æ— å¤´æœåŠ¡"),t("OutboundLink")],1),s._v("æ¥è´Ÿè´£ Pod çš„ç½‘ç»œæ ‡è¯†ã€‚ä½ éœ€è¦è´Ÿè´£åˆ›å»ºæ­¤æœåŠ¡ã€‚")]),s._v(" "),t("li",[s._v("å½“åˆ é™¤ä¸€ä¸ª StatefulSet æ—¶ï¼Œè¯¥ StatefulSet ä¸æä¾›ä»»ä½•ç»ˆæ­¢ Pod çš„ä¿è¯ã€‚ ä¸ºäº†å®ç° StatefulSet ä¸­çš„ Pod å¯ä»¥æœ‰åºä¸”ä½“é¢åœ°ç»ˆæ­¢ï¼Œå¯ä»¥åœ¨åˆ é™¤ä¹‹å‰å°† StatefulSet ç¼©å®¹åˆ° 0ã€‚")]),s._v(" "),t("li",[s._v("åœ¨é»˜è®¤ Pod ç®¡ç†ç­–ç•¥("),t("code",[s._v("OrderedReady")]),s._v(") æ—¶ä½¿ç”¨æ»šåŠ¨æ›´æ–°ï¼Œ å¯èƒ½è¿›å…¥éœ€è¦äººå·¥å¹²é¢„æ‰èƒ½ä¿®å¤çš„æŸåçŠ¶æ€ã€‚")])]),s._v(" "),t("h4",{attrs:{id:"_3-4-ä½¿ç”¨-statefulset"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-4-ä½¿ç”¨-statefulset"}},[s._v("ğŸŒ™")]),s._v(" 3.4 ä½¿ç”¨ StatefulSet")]),s._v(" "),t("h5",{attrs:{id:"_1-æ­å»º-nfs-æœåŠ¡"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-æ­å»º-nfs-æœåŠ¡"}},[s._v("ğŸŒ™")]),s._v(" 1 æ­å»º NFS æœåŠ¡")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#å®‰è£…nfs-utils")]),s._v("\n$ yum "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-y")]),s._v(" rpcbind nfs-utils\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#åˆ›å»ºnfsç›®å½•")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" /root/nfs/data\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#ç¼–è¾‘/etc/exportsè¾“å…¥å¦‚ä¸‹å†…å®¹ ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# insecure:é€šè¿‡ 1024 ä»¥ä¸Šç«¯å£å‘é€ rw: è¯»å†™ sync:è¯·æ±‚æ—¶å†™å…¥å…±äº« no_root_squash:rootç”¨æˆ·æœ‰å®Œå…¨æ ¹ç›®å½•è®¿é—®æƒé™")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/root/nfs/data *(insecure,rw,sync,no_root_squash)"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" /etc/exports\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#å¯åŠ¨ç›¸å…³æœåŠ¡å¹¶é…ç½®å¼€æœºè‡ªå¯åŠ¨")]),s._v("\nsystemctl start rpcbind\nsystemctl start nfs-server\nsystemctl "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("enable")]),s._v(" rpcbind\nsystemctl "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("enable")]),s._v(" nfs-server\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#é‡æ–°æŒ‚è½½ ä½¿ /etc/exportsç”Ÿæ•ˆ")]),s._v("\nexportfs "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-r")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#æŸ¥çœ‹å…±äº«æƒ…å†µ")]),s._v("\nexportfs\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br")])]),t("h5",{attrs:{id:"_2-å®¢æˆ·ç«¯æµ‹è¯•"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-å®¢æˆ·ç«¯æµ‹è¯•"}},[s._v("ğŸŒ™")]),s._v(" 2 å®¢æˆ·ç«¯æµ‹è¯•")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 1.å®‰è£…å®¢æˆ·ç«¯ æ‰€æœ‰èŠ‚ç‚¹å®‰è£…")]),s._v("\n$ yum "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-y")]),s._v(" nfs-utils\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 2.åˆ›å»ºæœ¬åœ°ç›®å½•")]),s._v("\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" /root/nfs\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 3.æŒ‚è½½è¿œç¨‹nfsç›®å½•åˆ°æœ¬åœ°")]),s._v("\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mount")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-t")]),s._v(" nfs "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.15")]),s._v(".0.9:/root/nfs /root/nfs\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 4.å†™å…¥ä¸€ä¸ªæµ‹è¯•æ–‡ä»¶")]),s._v("\n$ "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"hello nfs server"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" /root/nfs/test.txt\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 5.å»è¿œç¨‹ nfs ç›®å½•æŸ¥çœ‹")]),s._v("\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" /root/nfs/test.txt\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# æŒ‚å–æ¶ˆè½½")]),s._v("\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("umount")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-f")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-l")]),s._v(" nfsç›®å½•\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br")])]),t("h5",{attrs:{id:"_3-ä½¿ç”¨-statefulset"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-ä½¿ç”¨-statefulset"}},[s._v("ğŸŒ™")]),s._v(" 3 ä½¿ç”¨ statefulset")]),s._v(" "),t("ul",[t("li",[s._v("class.yml")])]),s._v(" "),t("div",{staticClass:"language-yml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiVersion")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" storage.k8s.io/v1\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kind")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" StorageClass\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("metadata")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nfs"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("client\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("provisioner")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" k8s"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("sigs.io/nfs"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("subdir"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("external"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("provisioner "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# or choose another name, must match deployment's env PROVISIONER_NAME'")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("parameters")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("archiveOnDelete")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"false"')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("ul",[t("li",[s._v("nfs-client-provider")])]),s._v(" "),t("div",{staticClass:"language-yaml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yaml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiVersion")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" apps/v1\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kind")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Deployment\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("metadata")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nfs"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("client"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("provisioner\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("labels")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("app")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nfs"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("client"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("provisioner\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# replace with namespace where provisioner is deployed")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("namespace")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" kube"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("system\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("spec")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("replicas")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("strategy")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("type")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Recreate\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("selector")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("matchLabels")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("app")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nfs"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("client"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("provisioner\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("template")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("metadata")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("labels")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("app")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nfs"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("client"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("provisioner\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("spec")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("serviceAccountName")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nfs"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("client"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("provisioner\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("containers")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nfs"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("client"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("provisioner\n          "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("image")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" chronolaw/nfs"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("subdir"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("external"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("provisioner"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("v4.0.2\n          "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("volumeMounts")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nfs"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("client"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("root\n              "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("mountPath")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" /persistentvolumes\n          "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("env")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" PROVISIONER_NAME\n              "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("value")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" k8s"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("sigs.io/nfs"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("subdir"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("external"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("provisioner\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" NFS_SERVER\n              "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("value")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" 10.15.0.10\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" NFS_PATH\n              "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("value")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" /root/nfs/data\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("volumes")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nfs"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("client"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("root\n          "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("nfs")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("server")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" 10.15.0.10\n            "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("path")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" /root/nfs/data\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br")])]),t("ul",[t("li",[s._v("rbac.yml")])]),s._v(" "),t("div",{staticClass:"language-yml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiVersion")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" v1\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kind")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" ServiceAccount\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("metadata")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nfs"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("client"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("provisioner\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# replace with namespace where provisioner is deployed")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("namespace")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" kube"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("system\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("---")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kind")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" ClusterRole\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiVersion")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" rbac.authorization.k8s.io/v1\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("metadata")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nfs"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("client"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("provisioner"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("runner\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("rules")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiGroups")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("resources")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"nodes"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("verbs")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"get"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"list"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"watch"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiGroups")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("resources")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"persistentvolumes"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("verbs")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"get"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"list"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"watch"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"create"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"delete"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiGroups")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("resources")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"persistentvolumeclaims"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("verbs")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"get"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"list"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"watch"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"update"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiGroups")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"storage.k8s.io"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("resources")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"storageclasses"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("verbs")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"get"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"list"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"watch"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiGroups")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("resources")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"events"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("verbs")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"create"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"update"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"patch"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("---")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kind")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" ClusterRoleBinding\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiVersion")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" rbac.authorization.k8s.io/v1\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("metadata")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" run"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("nfs"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("client"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("provisioner\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("subjects")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kind")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" ServiceAccount\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nfs"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("client"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("provisioner\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# replace with namespace where provisioner is deployed")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("namespace")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" kube"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("system\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("roleRef")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kind")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" ClusterRole\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nfs"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("client"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("provisioner"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("runner\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiGroup")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" rbac.authorization.k8s.io\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("---")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kind")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Role\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiVersion")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" rbac.authorization.k8s.io/v1\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("metadata")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" leader"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("locking"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("nfs"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("client"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("provisioner\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# replace with namespace where provisioner is deployed")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("namespace")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" kube"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("system\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("rules")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiGroups")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("resources")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"endpoints"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("verbs")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"get"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"list"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"watch"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"create"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"update"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"patch"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("---")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kind")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" RoleBinding\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiVersion")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" rbac.authorization.k8s.io/v1\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("metadata")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" leader"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("locking"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("nfs"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("client"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("provisioner\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# replace with namespace where provisioner is deployed")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("namespace")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" kube"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("system\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("subjects")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kind")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" ServiceAccount\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nfs"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("client"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("provisioner\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# replace with namespace where provisioner is deployed")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("namespace")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" kube"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("system\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("roleRef")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kind")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Role\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" leader"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("locking"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("nfs"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("client"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("provisioner\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiGroup")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" rbac.authorization.k8s.io\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br"),t("span",{staticClass:"line-number"},[s._v("41")]),t("br"),t("span",{staticClass:"line-number"},[s._v("42")]),t("br"),t("span",{staticClass:"line-number"},[s._v("43")]),t("br"),t("span",{staticClass:"line-number"},[s._v("44")]),t("br"),t("span",{staticClass:"line-number"},[s._v("45")]),t("br"),t("span",{staticClass:"line-number"},[s._v("46")]),t("br"),t("span",{staticClass:"line-number"},[s._v("47")]),t("br"),t("span",{staticClass:"line-number"},[s._v("48")]),t("br"),t("span",{staticClass:"line-number"},[s._v("49")]),t("br"),t("span",{staticClass:"line-number"},[s._v("50")]),t("br"),t("span",{staticClass:"line-number"},[s._v("51")]),t("br"),t("span",{staticClass:"line-number"},[s._v("52")]),t("br"),t("span",{staticClass:"line-number"},[s._v("53")]),t("br"),t("span",{staticClass:"line-number"},[s._v("54")]),t("br"),t("span",{staticClass:"line-number"},[s._v("55")]),t("br"),t("span",{staticClass:"line-number"},[s._v("56")]),t("br"),t("span",{staticClass:"line-number"},[s._v("57")]),t("br"),t("span",{staticClass:"line-number"},[s._v("58")]),t("br"),t("span",{staticClass:"line-number"},[s._v("59")]),t("br"),t("span",{staticClass:"line-number"},[s._v("60")]),t("br"),t("span",{staticClass:"line-number"},[s._v("61")]),t("br"),t("span",{staticClass:"line-number"},[s._v("62")]),t("br"),t("span",{staticClass:"line-number"},[s._v("63")]),t("br"),t("span",{staticClass:"line-number"},[s._v("64")]),t("br"),t("span",{staticClass:"line-number"},[s._v("65")]),t("br"),t("span",{staticClass:"line-number"},[s._v("66")]),t("br"),t("span",{staticClass:"line-number"},[s._v("67")]),t("br"),t("span",{staticClass:"line-number"},[s._v("68")]),t("br")])]),t("ul",[t("li",[s._v("mysql.yml")])]),s._v(" "),t("div",{staticClass:"language-YAML line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yaml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiVersion")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" v1\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kind")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Namespace\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("metadata")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" ems\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("---")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiVersion")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" storage.k8s.io/v1\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kind")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" StorageClass\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("metadata")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" mysql"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("nfs"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("sc\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("namespace")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" ems\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("provisioner")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" k8s"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("sigs.io/nfs"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("subdir"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("external"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("provisioner\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("parameters")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("onDelete")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"remain"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("---")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiVersion")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" apps/v1\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kind")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" StatefulSet\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("metadata")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" mysql\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("labels")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("app")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" mysql\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("namespace")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" ems\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("spec")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("serviceName")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" mysql "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#headless æ— å¤´æœåŠ¡  ä¿è¯ç½‘ç»œæ ‡è¯†ç¬¦å”¯ä¸€  å¿…é¡»å­˜åœ¨")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("replicas")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("template")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("metadata")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" mysql\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("labels")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("app")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" mysql\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("spec")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("containers")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" mysql\n          "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("image")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" mysql/mysql"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("server"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8.0")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("imagePullPolicy")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" IfNotPresent\n          "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("env")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" MYSQL_ROOT_PASSWORD\n              "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("value")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" root\n          "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("volumeMounts")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("mountPath")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" /var/lib/mysql "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#è‡ªå·±å®¹å™¨å†™å…¥æ•°æ®ç›®å½•")]),s._v("\n              "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" data    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#ä¿å­˜åˆ°æŒ‡å®šä¸€ä¸ªå˜é‡ä¸­ å˜é‡åå­—å°±æ˜¯ data")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("ports")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("containerPort")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3306")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("restartPolicy")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Always\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("volumeClaimTemplates")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#å£°æ˜åŠ¨æ€åˆ›å»ºæ•°æ®å·æ¨¡æ¿")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("metadata")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" data      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# æ•°æ®å·å˜é‡åç§°")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("namespace")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" ems  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# åœ¨å“ªä¸ªå‘½åç©ºé—´åˆ›å»ºæ•°æ®å·")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("spec")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("accessModes")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# è®¿é—®æ•°æ®å·æ¨¡å¼æ˜¯ä»€ä¹ˆ  ")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" ReadWriteMany\n        "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("storageClassName")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" mysql"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("nfs"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("sc "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ä½¿ç”¨å“ªä¸ª storage class æ¨¡æ¿å­˜å‚¨æ•°æ®")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("resources")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("requests")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("storage")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" 2G\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("selector")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("matchLabels")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("app")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" mysql\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("---")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br"),t("span",{staticClass:"line-number"},[s._v("41")]),t("br"),t("span",{staticClass:"line-number"},[s._v("42")]),t("br"),t("span",{staticClass:"line-number"},[s._v("43")]),t("br"),t("span",{staticClass:"line-number"},[s._v("44")]),t("br"),t("span",{staticClass:"line-number"},[s._v("45")]),t("br"),t("span",{staticClass:"line-number"},[s._v("46")]),t("br"),t("span",{staticClass:"line-number"},[s._v("47")]),t("br"),t("span",{staticClass:"line-number"},[s._v("48")]),t("br"),t("span",{staticClass:"line-number"},[s._v("49")]),t("br"),t("span",{staticClass:"line-number"},[s._v("50")]),t("br"),t("span",{staticClass:"line-number"},[s._v("51")]),t("br"),t("span",{staticClass:"line-number"},[s._v("52")]),t("br"),t("span",{staticClass:"line-number"},[s._v("53")]),t("br"),t("span",{staticClass:"line-number"},[s._v("54")]),t("br"),t("span",{staticClass:"line-number"},[s._v("55")]),t("br"),t("span",{staticClass:"line-number"},[s._v("56")]),t("br"),t("span",{staticClass:"line-number"},[s._v("57")]),t("br"),t("span",{staticClass:"line-number"},[s._v("58")]),t("br")])]),t("h3",{attrs:{id:"_4-daemonset"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-daemonset"}},[s._v("ğŸŒ™")]),s._v(" 4 DaemonSet")]),s._v(" "),t("h4",{attrs:{id:"_4-1-ä»€ä¹ˆæ˜¯-daemonset"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-ä»€ä¹ˆæ˜¯-daemonset"}},[s._v("ğŸŒ™")]),s._v(" 4.1 ä»€ä¹ˆæ˜¯ DaemonSet")]),s._v(" "),t("p",[s._v("https://kubernetes.io/zh-cn/docs/concepts/workloads/controllers/daemonset/")]),s._v(" "),t("p",[t("strong",[s._v("DaemonSet")]),s._v(" ç¡®ä¿å…¨éƒ¨ï¼ˆæˆ–è€…æŸäº›ï¼‰èŠ‚ç‚¹ä¸Šè¿è¡Œä¸€ä¸ª Pod çš„å‰¯æœ¬ã€‚ å½“æœ‰èŠ‚ç‚¹åŠ å…¥é›†ç¾¤æ—¶ï¼Œ ä¹Ÿä¼šä¸ºä»–ä»¬æ–°å¢ä¸€ä¸ª Pod ã€‚ å½“æœ‰èŠ‚ç‚¹ä»é›†ç¾¤ç§»é™¤æ—¶ï¼Œè¿™äº› Pod ä¹Ÿä¼šè¢«å›æ”¶ã€‚åˆ é™¤ DaemonSet å°†ä¼šåˆ é™¤å®ƒåˆ›å»ºçš„æ‰€æœ‰ Podã€‚")]),s._v(" "),t("p",[s._v("DaemonSet çš„ä¸€äº›å…¸å‹ç”¨æ³•ï¼š")]),s._v(" "),t("ul",[t("li",[s._v("åœ¨æ¯ä¸ªèŠ‚ç‚¹ä¸Šè¿è¡Œé›†ç¾¤å®ˆæŠ¤è¿›ç¨‹")]),s._v(" "),t("li",[s._v("åœ¨æ¯ä¸ªèŠ‚ç‚¹ä¸Šè¿è¡Œæ—¥å¿—æ”¶é›†å®ˆæŠ¤è¿›ç¨‹")]),s._v(" "),t("li",[s._v("åœ¨æ¯ä¸ªèŠ‚ç‚¹ä¸Šè¿è¡Œç›‘æ§å®ˆæŠ¤è¿›ç¨‹")])]),s._v(" "),t("p",[s._v("ä¸€ç§ç®€å•çš„ç”¨æ³•æ˜¯ä¸ºæ¯ç§ç±»å‹çš„å®ˆæŠ¤è¿›ç¨‹åœ¨æ‰€æœ‰çš„èŠ‚ç‚¹ä¸Šéƒ½å¯åŠ¨ä¸€ä¸ª DaemonSetã€‚ ä¸€ä¸ªç¨å¾®å¤æ‚çš„ç”¨æ³•æ˜¯ä¸ºåŒä¸€ç§å®ˆæŠ¤è¿›ç¨‹éƒ¨ç½²å¤šä¸ª DaemonSetï¼›æ¯ä¸ªå…·æœ‰ä¸åŒçš„æ ‡å¿—ï¼Œ å¹¶ä¸”å¯¹ä¸åŒç¡¬ä»¶ç±»å‹å…·æœ‰ä¸åŒçš„å†…å­˜ã€CPU è¦æ±‚ã€‚")]),s._v(" "),t("h4",{attrs:{id:"_4-2-ä½¿ç”¨-daemonset"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-ä½¿ç”¨-daemonset"}},[s._v("ğŸŒ™")]),s._v(" 4.2 ä½¿ç”¨ DaemonSet")]),s._v(" "),t("div",{staticClass:"language-yml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiVersion")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" apps/v1\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kind")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" DaemonSet\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("metadata")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("labels")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("app")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nginx\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nginx\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("spec")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("selector")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("matchLabels")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("app")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nginx\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("template")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("metadata")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("labels")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("app")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nginx\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("spec")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("containers")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("image")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nginx"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.19")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("imagePullPolicy")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" IfNotPresent\n        "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nginx\n        "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("resources")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("restartPolicy")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Always\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br")])]),t("h3",{attrs:{id:"_5-job"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-job"}},[s._v("ğŸŒ™")]),s._v(" 5 Job")]),s._v(" "),t("h4",{attrs:{id:"_5-1-ä»€ä¹ˆæ˜¯-job"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-1-ä»€ä¹ˆæ˜¯-job"}},[s._v("ğŸŒ™")]),s._v(" 5.1 ä»€ä¹ˆæ˜¯ Job")]),s._v(" "),t("p",[s._v("https://kubernetes.io/zh-cn/docs/concepts/workloads/controllers/job/")]),s._v(" "),t("p",[s._v("Job ä¼šåˆ›å»ºä¸€ä¸ªæˆ–è€…å¤šä¸ª Podï¼Œå¹¶å°†ç»§ç»­é‡è¯• Pod çš„æ‰§è¡Œï¼Œç›´åˆ°æŒ‡å®šæ•°é‡çš„ Pod æˆåŠŸç»ˆæ­¢ã€‚ éšç€ Pod æˆåŠŸç»“æŸï¼ŒJob è·Ÿè¸ªè®°å½•æˆåŠŸå®Œæˆçš„ Pod ä¸ªæ•°ã€‚ å½“æ•°é‡è¾¾åˆ°æŒ‡å®šçš„æˆåŠŸä¸ªæ•°é˜ˆå€¼æ—¶ï¼Œä»»åŠ¡ï¼ˆå³ Jobï¼‰ç»“æŸã€‚ åˆ é™¤ Job çš„æ“ä½œä¼šæ¸…é™¤æ‰€åˆ›å»ºçš„å…¨éƒ¨ Podã€‚ æŒ‚èµ· Job çš„æ“ä½œä¼šåˆ é™¤ Job çš„æ‰€æœ‰æ´»è·ƒ Podï¼Œç›´åˆ° Job è¢«å†æ¬¡æ¢å¤æ‰§è¡Œã€‚")]),s._v(" "),t("p",[s._v("ä¸€ç§ç®€å•çš„ä½¿ç”¨åœºæ™¯ä¸‹ï¼Œä½ ä¼šåˆ›å»ºä¸€ä¸ª Job å¯¹è±¡ä»¥ä¾¿ä»¥ä¸€ç§å¯é çš„æ–¹å¼è¿è¡ŒæŸ Pod ç›´åˆ°å®Œæˆã€‚ å½“ç¬¬ä¸€ä¸ª Pod å¤±è´¥æˆ–è€…è¢«åˆ é™¤ï¼ˆæ¯”å¦‚å› ä¸ºèŠ‚ç‚¹ç¡¬ä»¶å¤±æ•ˆæˆ–è€…é‡å¯ï¼‰æ—¶ï¼ŒJob å¯¹è±¡ä¼šå¯åŠ¨ä¸€ä¸ªæ–°çš„ Podã€‚")]),s._v(" "),t("p",[s._v("ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ Job ä»¥å¹¶è¡Œçš„æ–¹å¼è¿è¡Œå¤šä¸ª Podã€‚")]),s._v(" "),t("h4",{attrs:{id:"_5-2-ä½¿ç”¨-job"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-2-ä½¿ç”¨-job"}},[s._v("ğŸŒ™")]),s._v(" 5.2 ä½¿ç”¨ Job")]),s._v(" "),t("div",{staticClass:"language-yaml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yaml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiVersion")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" batch/v1\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kind")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Job\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("metadata")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" pi\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("spec")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("template")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("spec")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("containers")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" pi\n        "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("image")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" perl"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("5.34.0\n        "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("command")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"perl"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"-Mbignum=bpi"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"-wle"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"print bpi(2000)"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("restartPolicy")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Never\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# å½“å‰ä»»åŠ¡å‡ºç°å¤±è´¥ æœ€å¤§çš„é‡è¯•æ¬¡æ•°")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("backoffLimit")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br")])]),t("h4",{attrs:{id:"_5-3-è‡ªåŠ¨æ¸…ç†å®Œæˆçš„-job"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-3-è‡ªåŠ¨æ¸…ç†å®Œæˆçš„-job"}},[s._v("ğŸŒ™")]),s._v(" 5.3 è‡ªåŠ¨æ¸…ç†å®Œæˆçš„ Job")]),s._v(" "),t("p",[s._v("å®Œæˆçš„ Job é€šå¸¸ä¸éœ€è¦ç•™å­˜åœ¨ç³»ç»Ÿä¸­ã€‚åœ¨ç³»ç»Ÿä¸­ä¸€ç›´ä¿ç•™å®ƒä»¬ä¼šç»™ API æœåŠ¡å™¨å¸¦æ¥é¢å¤–çš„å‹åŠ›ã€‚ å¦‚æœ Job ç”±æŸç§æ›´é«˜çº§åˆ«çš„æ§åˆ¶å™¨æ¥ç®¡ç†ï¼Œä¾‹å¦‚ "),t("a",{attrs:{href:"https://kubernetes.io/zh-cn/docs/concepts/workloads/controllers/cron-jobs/",target:"_blank",rel:"noopener noreferrer"}},[s._v("CronJob"),t("OutboundLink")],1),s._v("ï¼Œ åˆ™ Job å¯ä»¥è¢« CronJob åŸºäºç‰¹å®šçš„æ ¹æ®å®¹é‡è£å®šçš„æ¸…ç†ç­–ç•¥æ¸…ç†æ‰ã€‚")]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("å·²å®Œæˆ Job çš„ TTL æœºåˆ¶")]),s._v(" "),t("ul",[t("li",[s._v("è‡ªåŠ¨æ¸…ç†å·²å®Œæˆ Job ï¼ˆçŠ¶æ€ä¸º "),t("code",[s._v("Complete")]),s._v(" æˆ– "),t("code",[s._v("Failed")]),s._v("ï¼‰çš„å¦ä¸€ç§æ–¹å¼æ˜¯ä½¿ç”¨ç”± TTL æ§åˆ¶å™¨æ‰€æä¾›çš„ TTL æœºåˆ¶ã€‚ é€šè¿‡è®¾ç½® Job çš„ "),t("code",[s._v(".spec.ttlSecondsAfterFinished")]),s._v(" å­—æ®µï¼Œå¯ä»¥è®©è¯¥æ§åˆ¶å™¨æ¸…ç†æ‰å·²ç»“æŸçš„èµ„æºã€‚TTL æ§åˆ¶å™¨æ¸…ç† Job æ—¶ï¼Œä¼šçº§è”å¼åœ°åˆ é™¤ Job å¯¹è±¡ã€‚ æ¢è¨€ä¹‹ï¼Œå®ƒä¼šåˆ é™¤æ‰€æœ‰ä¾èµ–çš„å¯¹è±¡ï¼ŒåŒ…æ‹¬ Pod åŠ Job æœ¬èº«ã€‚ æ³¨æ„ï¼Œå½“ Job è¢«åˆ é™¤æ—¶ï¼Œç³»ç»Ÿä¼šè€ƒè™‘å…¶ç”Ÿå‘½å‘¨æœŸä¿éšœï¼Œä¾‹å¦‚å…¶ Finalizersã€‚")])])])]),s._v(" "),t("div",{staticClass:"language-yaml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yaml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiVersion")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" batch/v1\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kind")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Job\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("metadata")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" pi"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("with"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("ttl\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("spec")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("ttlSecondsAfterFinished")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("template")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("spec")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("containers")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" pi\n        "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("image")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" perl"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("5.34.0\n        "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("command")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"perl"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"-Mbignum=bpi"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"-wle"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"print bpi(2000)"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("restartPolicy")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Never\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br")])]),t("p",[s._v("Job "),t("code",[s._v("pi-with-ttl")]),s._v(" åœ¨ç»“æŸ 100 ç§’ä¹‹åï¼Œå¯ä»¥æˆä¸ºè¢«è‡ªåŠ¨åˆ é™¤çš„å¯¹è±¡ã€‚å¦‚æœè¯¥å­—æ®µè®¾ç½®ä¸º "),t("code",[s._v("0")]),s._v("ï¼ŒJob åœ¨ç»“æŸä¹‹åç«‹å³æˆä¸ºå¯è¢«è‡ªåŠ¨åˆ é™¤çš„å¯¹è±¡ã€‚ å¦‚æœè¯¥å­—æ®µæ²¡æœ‰è®¾ç½®ï¼ŒJob ä¸ä¼šåœ¨ç»“æŸä¹‹åè¢« TTL æ§åˆ¶å™¨è‡ªåŠ¨æ¸…é™¤ã€‚")]),s._v(" "),t("h3",{attrs:{id:"_6-æ§åˆ¶å™¨æ— æ³•è§£å†³é—®é¢˜"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-æ§åˆ¶å™¨æ— æ³•è§£å†³é—®é¢˜"}},[s._v("ğŸŒ™")]),s._v(" 6 æ§åˆ¶å™¨æ— æ³•è§£å†³é—®é¢˜")]),s._v(" "),t("ul",[t("li",[s._v("å¦‚ä½•ä¸º Pod æä¾›ç½‘ç»œæœåŠ¡")]),s._v(" "),t("li",[s._v("å¦‚ä½•å®ç°å¤šä¸ª Pod é—´è´Ÿè½½å‡è¡¡")])]),s._v(" "),t("h2",{attrs:{id:"ç¬¬äº”ç« -service"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ç¬¬äº”ç« -service"}},[s._v("ğŸŒ™")]),s._v(" ç¬¬äº”ç«  Service")]),s._v(" "),t("ul",[t("li",[s._v("ä»€ä¹ˆæ˜¯ Service")]),s._v(" "),t("li",[s._v("ä¸ºä»€ä¹ˆéœ€è¦ Service")]),s._v(" "),t("li",[s._v("Service ç‰¹æ€§")]),s._v(" "),t("li",[s._v("Service ä¸ Pod å…³è”")]),s._v(" "),t("li",[s._v("Service type ç±»å‹")]),s._v(" "),t("li",[s._v("å¦‚ä½•ä½¿ç”¨ Service")]),s._v(" "),t("li",[s._v("å¤šç«¯å£é…ç½®")])]),s._v(" "),t("h3",{attrs:{id:"_1-ä»€ä¹ˆæ˜¯-service"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-ä»€ä¹ˆæ˜¯-service"}},[s._v("ğŸŒ™")]),s._v(" 1 ä»€ä¹ˆæ˜¯ Service")]),s._v(" "),t("h4",{attrs:{id:"_1-1-å®šä¹‰"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-å®šä¹‰"}},[s._v("ğŸŒ™")]),s._v(" 1.1 å®šä¹‰")]),s._v(" "),t("p",[s._v("å®˜ç½‘åœ°å€: https://kubernetes.io/zh-cn/docs/concepts/services-networking/service/")]),s._v(" "),t("p",[s._v("å°†è¿è¡Œåœ¨ä¸€ä¸ªæˆ–ä¸€ç»„ Pod ä¸Šçš„ç½‘ç»œåº”ç”¨ç¨‹åºå…¬å¼€ä¸ºç½‘ç»œæœåŠ¡çš„æ–¹æ³•ã€‚")]),s._v(" "),t("p",[t("strong",[s._v("é€šä¿—å®šä¹‰: Service ç”¨æ¥ä¸º pod æä¾›ç½‘ç»œæœåŠ¡çš„ä¸€ç§æ–¹å¼ã€‚")])]),s._v(" "),t("h4",{attrs:{id:"_1-2-ä¸ºä»€ä¹ˆéœ€è¦-service"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-ä¸ºä»€ä¹ˆéœ€è¦-service"}},[s._v("ğŸŒ™")]),s._v(" 1.2 ä¸ºä»€ä¹ˆéœ€è¦ Service")]),s._v(" "),t("p",[s._v("é—®é¢˜:  å¦‚æœä¸€ç»„ Podï¼ˆç§°ä¸ºâ€œåç«¯â€ï¼‰ä¸ºé›†ç¾¤å†…çš„å…¶ä»– Podï¼ˆç§°ä¸ºâ€œå‰ç«¯â€ï¼‰æä¾›åŠŸèƒ½ï¼Œ é‚£ä¹ˆå‰ç«¯å¦‚ä½•æ‰¾å‡ºå¹¶è·Ÿè¸ªè¦è¿æ¥çš„ IP åœ°å€ï¼Œä»¥ä¾¿å‰ç«¯å¯ä»¥ä½¿ç”¨æä¾›å·¥ä½œè´Ÿè½½çš„åç«¯éƒ¨åˆ†ï¼Ÿ")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://minioweb.baizhiedu.xin/typora-imgs/2023/03/07/image-20230307133342270.png",alt:"image-20230307133342270"}})]),s._v(" "),t("p",[s._v("å¦‚æœè¿™æ˜¯ä¸€ä¸ªå›¾ç‰‡å¤„ç†åç«¯ï¼Œå®ƒè¿è¡Œäº† 3 ä¸ªå‰¯æœ¬ã€‚è¿™äº›å‰¯æœ¬æ˜¯å¯äº’æ¢çš„ â€”â€” å‰ç«¯ä¸éœ€è¦å…³å¿ƒå®ƒä»¬è°ƒç”¨äº†å“ªä¸ªåç«¯å‰¯æœ¬ã€‚ ç„¶è€Œç»„æˆè¿™ä¸€ç»„åç«¯ç¨‹åºçš„ Pod å®é™…ä¸Šå¯èƒ½ä¼šå‘ç”Ÿå˜åŒ–ï¼Œ å‰ç«¯å®¢æˆ·ç«¯ä¸åº”è¯¥ä¹Ÿæ²¡å¿…è¦çŸ¥é“ï¼Œè€Œä¸”ä¹Ÿä¸éœ€è¦è·Ÿè¸ªè¿™ä¸€ç»„åç«¯çš„çŠ¶æ€ã€‚"),t("strong",[s._v("Service å®šä¹‰çš„æŠ½è±¡èƒ½å¤Ÿè§£è€¦è¿™ç§å…³è”")]),s._v("ã€‚")]),s._v(" "),t("p",[t("img",{attrs:{src:a(620),alt:"image-20230307134050380"}})]),s._v(" "),t("h3",{attrs:{id:"_2-ç‰¹æ€§"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-ç‰¹æ€§"}},[s._v("ğŸŒ™")]),s._v(" 2 ç‰¹æ€§")]),s._v(" "),t("ul",[t("li",[s._v("Service é€šè¿‡ label å…³è”å¯¹åº”çš„ Pod")]),s._v(" "),t("li",[s._v("Servcie ç”Ÿå‘½å‘¨æœŸä¸è·Ÿ Pod ç»‘å®šï¼Œä¸ä¼šå› ä¸º Pod é‡æ–°åˆ›å»ºè€Œæ”¹å˜ IP")]),s._v(" "),t("li",[s._v("æä¾›äº†è´Ÿè½½å‡è¡¡åŠŸèƒ½ï¼Œè‡ªåŠ¨è½¬å‘æµé‡åˆ°ä¸åŒ Pod")]),s._v(" "),t("li",[s._v("å¯å¯¹é›†ç¾¤å¤–éƒ¨æä¾›è®¿é—®ç«¯å£")]),s._v(" "),t("li",[s._v("é›†ç¾¤å†…éƒ¨å¯é€šè¿‡æœåŠ¡åå­—è®¿é—®")])]),s._v(" "),t("h3",{attrs:{id:"_3-service-å’Œ-pod-å…³ç³»"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-service-å’Œ-pod-å…³ç³»"}},[s._v("ğŸŒ™")]),s._v(" 3 Service å’Œ Pod å…³ç³»")]),s._v(" "),t("p",[t("img",{attrs:{src:a(621),alt:"image-20230307132243053"}})]),s._v(" "),t("h3",{attrs:{id:"_4-ä½¿ç”¨-service"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-ä½¿ç”¨-service"}},[s._v("ğŸŒ™")]),s._v(" 4 ä½¿ç”¨ Service")]),s._v(" "),t("div",{staticClass:"language-yml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiVersion")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" apps/v1\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kind")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Deployment\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("metadata")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nginx\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("labels")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("app")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nginx\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("spec")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("replicas")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("template")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("metadata")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nginx\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("labels")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("app")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nginx\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("spec")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("containers")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nginx\n          "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("image")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nginx"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.19")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("imagePullPolicy")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" IfNotPresent\n          "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("ports")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("containerPort")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("restartPolicy")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Always\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("selector")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("matchLabels")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("app")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nginx\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("---")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiVersion")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" v1\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kind")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Service\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("metadata")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nginx\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("spec")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("selector")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("app")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nginx\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("ports")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("port")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8080")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#service ç«¯å£")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("targetPort")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#å®¹å™¨ç«¯å£")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("nodePort")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("31001")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#node èŠ‚ç‚¹ç«¯å£ å›ºå®šåœ¨ 30000-32767 ä¹‹é—´")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("type")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" NodePort\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br")])]),t("p",[t("strong",[t("code",[s._v("æ³¨æ„:èŠ‚ç‚¹ç«¯å£å›ºå®šåœ¨ 30000-32767 ä¹‹é—´")])])]),s._v(" "),t("h3",{attrs:{id:"_5-å¤šç«¯å£"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-å¤šç«¯å£"}},[s._v("ğŸŒ™")]),s._v(" 5 å¤šç«¯å£")]),s._v(" "),t("div",{staticClass:"language-yml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiVersion")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" apps/v1\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kind")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Deployment\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("metadata")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nginx\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("labels")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("app")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nginx\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("spec")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("replicas")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("template")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("metadata")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nginx\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("labels")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("app")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nginx\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("spec")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("containers")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nginx\n          "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("image")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nginx"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.19")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("imagePullPolicy")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" IfNotPresent\n          "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("ports")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("containerPort")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("restartPolicy")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Always\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("selector")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("matchLabels")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("app")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nginx\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("---")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiVersion")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" v1\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kind")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Service\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("metadata")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nginx\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("spec")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("selector")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("app")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nginx\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("ports")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("port")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8080")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#service ç«¯å£")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" write\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("targetPort")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#å®¹å™¨ç«¯å£")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("nodePort")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("31001")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#node èŠ‚ç‚¹ç«¯å£ å›ºå®šåœ¨ 30000-32767 ä¹‹é—´")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("port")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8081")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" read\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("targetPort")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("nodePort")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("31002")]),s._v("\n\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("type")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" NodePort\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br"),t("span",{staticClass:"line-number"},[s._v("41")]),t("br"),t("span",{staticClass:"line-number"},[s._v("42")]),t("br"),t("span",{staticClass:"line-number"},[s._v("43")]),t("br")])]),t("h3",{attrs:{id:"_6-ç±»å‹-type"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-ç±»å‹-type"}},[s._v("ğŸŒ™")]),s._v(" 6 ç±»å‹ type")]),s._v(" "),t("p",[s._v("https://kubernetes.io/zh-cn/docs/concepts/services-networking/service/")]),s._v(" "),t("p",[s._v("å¯¹ä¸€äº›åº”ç”¨çš„æŸäº›éƒ¨åˆ†ï¼ˆå¦‚å‰ç«¯ï¼‰ï¼Œå¯èƒ½å¸Œæœ›å°†å…¶æš´éœ²ç»™ Kubernetes é›†ç¾¤å¤–éƒ¨çš„ IP åœ°å€ã€‚")]),s._v(" "),t("p",[s._v("Kubernetes "),t("code",[s._v("ServiceTypes")]),s._v(" å…è®¸æŒ‡å®šä½ æ‰€éœ€è¦çš„ Service ç±»å‹ã€‚")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("ClusterIP")]),s._v("ï¼šåœ¨é›†ç¾¤å†…éƒ¨æš´éœ² Serviceï¼Œåªèƒ½è¢«é›†ç¾¤å†…éƒ¨çš„å…¶ä»–å¯¹è±¡è®¿é—®ï¼Œé€šå¸¸ç”¨äºå†…éƒ¨æœåŠ¡å‘ç°ï¼Œä¸ä¼šå‘é›†ç¾¤å¤–éƒ¨æš´éœ²ã€‚")]),s._v(" "),t("li",[t("code",[s._v("NodePort")]),s._v("ï¼šå°† Service æš´éœ²åœ¨ Node çš„æŸä¸ªç«¯å£ä¸Šï¼Œä»è€Œå¯ä»¥é€šè¿‡ Node çš„ IP åœ°å€å’Œç«¯å£å·æ¥è®¿é—® Serviceï¼Œé€šå¸¸ç”¨äºå¼€å‘å’Œæµ‹è¯•ç¯å¢ƒã€‚")]),s._v(" "),t("li",[t("code",[s._v("LoadBalancer")]),s._v("ï¼šé€šè¿‡äº‘æœåŠ¡å•†æä¾›çš„è´Ÿè½½å‡è¡¡å™¨æ¥å°† Service æš´éœ²åˆ°å…¬ç½‘ä¸Šï¼Œä½¿å¾—å¤–éƒ¨ç”¨æˆ·å¯ä»¥è®¿é—® Serviceã€‚")]),s._v(" "),t("li",[t("code",[s._v("ExternalName")]),s._v("ï¼šå°† Service æ˜ å°„åˆ°ä¸€ä¸ª DNS åç§°ä¸Šï¼Œä»è€Œå¯ä»¥é€šè¿‡ DNS åç§°æ¥è®¿é—® Serviceï¼Œé€šå¸¸ç”¨äºè®¿é—®å¤–éƒ¨æœåŠ¡ã€‚")])]),s._v(" "),t("h4",{attrs:{id:"_6-1-clusterip-ç±»å‹"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-1-clusterip-ç±»å‹"}},[s._v("ğŸŒ™")]),s._v(" 6.1 ClusterIP ç±»å‹")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("è¿™æ˜¯æœ€å¸¸ç”¨çš„ Service ç±»å‹ä¹‹ä¸€")]),s._v("ã€‚åœ¨é›†ç¾¤å†…éƒ¨åˆ›å»ºä¸€ä¸ªè™šæ‹Ÿ IP åœ°å€ï¼Œå®ƒå¯ä»¥è¢«å…¶ä»–åœ¨åŒä¸€é›†ç¾¤å†…çš„ Pod è®¿é—®ï¼Œä½†ä¸èƒ½è¢«é›†ç¾¤å¤–éƒ¨çš„è¯·æ±‚æ‰€è®¿é—®ã€‚è¿™ç§ç±»å‹çš„æœåŠ¡é€šå¸¸ç”¨äºå†…éƒ¨æœåŠ¡çš„æš´éœ²ï¼Œä¾‹å¦‚æ•°æ®åº“æˆ–è€…ç¼“å­˜æœåŠ¡ã€‚æ¯”å¦‚åœ¨ä¸€ä¸ª Web åº”ç”¨ä¸­ï¼Œä½ å¯èƒ½éœ€è¦è¿æ¥åˆ°ä¸€ä¸ªæ•°æ®åº“ï¼Œä½†æ˜¯è¿™ä¸ªæ•°æ®åº“å¹¶ä¸éœ€è¦åœ¨åº”ç”¨ä¹‹å¤–æš´éœ²ã€‚è¿™æ—¶å€™ï¼Œä½ å¯ä»¥ä½¿ç”¨ ClusterIP ç±»å‹çš„ Serviceï¼Œè®©åº”ç”¨å¯ä»¥è®¿é—®åˆ°æ•°æ®åº“ã€‚")])]),s._v(" "),t("h4",{attrs:{id:"_6-2-nodeport-ç±»å‹"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-2-nodeport-ç±»å‹"}},[s._v("ğŸŒ™")]),s._v(" 6.2 NodePort ç±»å‹")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("è¿™ç§ç±»å‹çš„ Service å°†ä¼šåˆ›å»ºä¸€ä¸ªç«¯å£ï¼Œå¹¶ç»‘å®šåˆ°æ¯ä¸ªé›†ç¾¤èŠ‚ç‚¹ä¸Šï¼Œä»è€Œå…è®¸å¤–éƒ¨æµé‡è®¿é—® Serviceã€‚è¿™ä¸ªç±»å‹é€šå¸¸ç”¨äºå…¬å…±æœåŠ¡çš„æš´éœ²ï¼Œä¾‹å¦‚ Web åº”ç”¨æˆ–è€… APIã€‚æ¯”å¦‚ä½ éœ€è¦åœ¨é›†ç¾¤å¤–éƒ¨è®¿é—®åˆ°ä¸€ä¸ªè¿è¡Œåœ¨é›†ç¾¤ä¸­çš„ Web åº”ç”¨ï¼Œä½ å°±å¯ä»¥åˆ›å»ºä¸€ä¸ª NodePort ç±»å‹çš„ Serviceï¼Œé€šè¿‡æŒ‡å®š Service çš„ "),t("code",[s._v("nodePort")]),s._v(" å­—æ®µï¼Œæ¥å°† Service æš´éœ²ç»™é›†ç¾¤å¤–éƒ¨ã€‚")])]),s._v(" "),t("li",[t("p",[s._v("å¦‚æœä½ å°† "),t("code",[s._v("type")]),s._v(" å­—æ®µè®¾ç½®ä¸º "),t("code",[s._v("NodePort")]),s._v("ï¼Œåˆ™ Kubernetes æ§åˆ¶å¹³é¢å°†åœ¨ "),t("code",[s._v("--service-node-port-range")]),s._v(" æ ‡å¿—æŒ‡å®šçš„èŒƒå›´å†…åˆ†é…ç«¯å£ï¼ˆé»˜è®¤å€¼ï¼š30000-32767ï¼‰ã€‚")])])]),s._v(" "),t("h4",{attrs:{id:"_6-3-loadbalancer-ç±»å‹"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-3-loadbalancer-ç±»å‹"}},[s._v("ğŸŒ™")]),s._v(" 6.3 LoadBalancer ç±»å‹")]),s._v(" "),t("ul",[t("li",[s._v("è¿™ç§ç±»å‹çš„ Service ç±»ä¼¼äº NodePortï¼Œä½†æ˜¯ä¼šåœ¨äº‘å‚å•†ä¸­åˆ›å»ºä¸€ä¸ªè´Ÿè½½å‡è¡¡å™¨ã€‚è¿™ä¸ªç±»å‹é€šå¸¸ç”¨äºåœ¨äº‘å¹³å°ä¸Šéƒ¨ç½²åº”ç”¨ã€‚äº‘å¹³å°çš„è´Ÿè½½å‡è¡¡å™¨å°†æµé‡åˆ†å‘åˆ°é›†ç¾¤ä¸­çš„èŠ‚ç‚¹ã€‚è¿™ä¸ªç±»å‹çš„ Service åªèƒ½åœ¨äº‘å¹³å°ä¸Šä½¿ç”¨ï¼Œå¹¶ä¸”éœ€è¦äº‘å‚å•†æä¾›æ”¯æŒã€‚")])]),s._v(" "),t("h4",{attrs:{id:"_6-4-externalname-ç±»å‹"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-4-externalname-ç±»å‹"}},[s._v("ğŸŒ™")]),s._v(" 6.4 ExternalName ç±»å‹")]),s._v(" "),t("ul",[t("li",[s._v("è¿™ç§ç±»å‹çš„ Service å…è®¸ Service åˆ°ä»»ä½•éœ€è¦è®¿é—®çš„ CNAME DNS æ¡ç›®çš„è½¬å‘ã€‚ä¸å…¶å®ƒç±»å‹çš„ Service ä¸åŒï¼Œå®ƒå¹¶ä¸ä¼šä»£ç†è¯·æ±‚åˆ°ä»»ä½• Podã€‚ç›¸åï¼Œå®ƒå°†è¯·æ±‚è½¬å‘åˆ°é…ç½®çš„å¤–éƒ¨åœ°å€ã€‚è¿™ç§ç±»å‹çš„ Service é€šå¸¸ç”¨äºå°†æœåŠ¡ä»£ç†åˆ°é›†ç¾¤å¤–éƒ¨çš„å…¶ä»–æœåŠ¡ã€‚æ¯”å¦‚ä½ æœ‰ä¸€ä¸ªè¿è¡Œåœ¨å¤–éƒ¨ç½‘ç»œä¸Šçš„æœåŠ¡ï¼Œä½ å¸Œæœ›åœ¨ Kubernetes é›†ç¾¤ä¸­ä½¿ç”¨è¯¥æœåŠ¡ï¼Œè¿™æ—¶å€™ä½ å¯ä»¥åˆ›å»ºä¸€ä¸ª ExternalName ç±»å‹çš„ Serviceï¼Œå°†æœåŠ¡çš„ DNS è§£æåˆ° Kubernetes é›†ç¾¤ä¸­ã€‚")])]),s._v(" "),t("h3",{attrs:{id:"_7-å†…éƒ¨é€šä¿¡"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_7-å†…éƒ¨é€šä¿¡"}},[s._v("ğŸŒ™")]),s._v(" 7 å†…éƒ¨é€šä¿¡")]),s._v(" "),t("h4",{attrs:{id:"_7-1-åˆ›å»º-pod"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_7-1-åˆ›å»º-pod"}},[s._v("ğŸŒ™")]),s._v(" 7.1 åˆ›å»º pod")]),s._v(" "),t("div",{staticClass:"language-yml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiVersion")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" apps/v1\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kind")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Deployment\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("metadata")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" mysql\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("labels")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("app")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" mysql\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("spec")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("selector")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("matchLabels")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("app")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" mysql\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("replicas")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("template")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("metadata")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("labels")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("app")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" mysql\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("spec")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("containers")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" mysql\n        "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("image")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" mysql/mysql"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("server"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8.0")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("env")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" MYSQL_ROOT_PASSWORD\n          "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("value")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" root\n        "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("ports")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" mysql\n          "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("containerPort")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3306")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("---")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiVersion")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" v1\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kind")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Service\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("metadata")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" mysql\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("spec")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("selector")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("app")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" mysql\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("ports")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" mysql\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("port")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3306")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("targetPort")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3306")]),s._v("\n\t"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("type")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" ClusterIP\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br")])]),t("div",{staticClass:"language-yml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiVersion")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" apps/v1\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kind")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Deployment\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("metadata")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nginx\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("labels")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("app")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nginx\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("spec")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("selector")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("matchLabels")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("app")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nginx\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("replicas")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("template")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("metadata")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("labels")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("app")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nginx\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("spec")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("hostNetwork")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean important"}},[s._v("true")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("containers")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nginx\n        "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("image")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nginx"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("latest\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('#command: ["/bin/sh", "-c"]')]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#args:")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#- apt-get update && apt-get install -y mysql-client && nginx -g 'daemon off;'")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("ports")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" http\n          "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("containerPort")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("---")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiVersion")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" v1\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kind")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Service\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("metadata")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nginx\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("spec")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("selector")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("app")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nginx\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("ports")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" http\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("port")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8081")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("targetPort")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("\n\t"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("type")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" ClusterIP\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br")])]),t("h4",{attrs:{id:"_7-2-ç›¸äº’è®¿é—®"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_7-2-ç›¸äº’è®¿é—®"}},[s._v("ğŸŒ™")]),s._v(" 7.2 ç›¸äº’è®¿é—®")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# è¿›å…¥ nginx è®¿é—®mysql")]),s._v("\n$ mysql "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-h")]),s._v(" mysql "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-uroot")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-ppassword")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# æ³¨æ„ï¼šè¿™é‡Œçš„ mysql æ˜¯ MySQL Service çš„åç§°ï¼Œè€Œä¸æ˜¯ Pod çš„åç§°ã€‚")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("h2",{attrs:{id:"ç¬¬å…­ç« -å­˜å‚¨"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ç¬¬å…­ç« -å­˜å‚¨"}},[s._v("ğŸŒ™")]),s._v(" ç¬¬å…­ç«  å­˜å‚¨")]),s._v(" "),t("ul",[t("li",[s._v("ä»€ä¹ˆæ˜¯å· Volume")]),s._v(" "),t("li",[s._v("å¸¸ç”¨å·çš„ç±»å‹")]),s._v(" "),t("li",[s._v("ä½¿ç”¨æ–¹å¼")]),s._v(" "),t("li",[s._v("Persistent Volume å’Œ Persistent Volume Claim")]),s._v(" "),t("li",[s._v("é™æ€ä¾›ç»™")]),s._v(" "),t("li",[s._v("åŠ¨æ€ä¾›ç»™")])]),s._v(" "),t("h3",{attrs:{id:"_1-å·-volume"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-å·-volume"}},[s._v("ğŸŒ™")]),s._v(" 1 å· Volume")]),s._v(" "),t("p",[s._v("å®˜ç½‘åœ°å€: https://kubernetes.io/zh-cn/docs/concepts/storage/volumes/")]),s._v(" "),t("p",[s._v("Container ä¸­çš„æ–‡ä»¶åœ¨ç£ç›˜ä¸Šæ˜¯ä¸´æ—¶å­˜æ”¾çš„ï¼Œè¿™ç»™ Container ä¸­è¿è¡Œçš„è¾ƒé‡è¦çš„åº”ç”¨ç¨‹åºå¸¦æ¥ä¸€äº›é—®é¢˜ã€‚ é—®é¢˜ä¹‹ä¸€æ˜¯å½“å®¹å™¨å´©æºƒæ—¶æ–‡ä»¶ä¸¢å¤±ã€‚ kubelet ä¼šé‡æ–°å¯åŠ¨å®¹å™¨ï¼Œä½†å®¹å™¨ä¼šä»¥å¹²å‡€çš„çŠ¶æ€é‡å¯ã€‚ ç¬¬äºŒä¸ªé—®é¢˜ä¼šåœ¨åŒä¸€ "),t("code",[s._v("Pod")]),s._v(" ä¸­è¿è¡Œå¤šä¸ªå®¹å™¨å¹¶å…±äº«æ–‡ä»¶æ—¶å‡ºç°ã€‚ "),t("strong",[t("code",[s._v("Kubernetes Volume è¿™ä¸€æŠ½è±¡æ¦‚å¿µèƒ½å¤Ÿè§£å†³è¿™ä¸¤ä¸ªé—®é¢˜ã€‚")])])]),s._v(" "),t("h3",{attrs:{id:"_2-å·çš„ç±»å‹"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-å·çš„ç±»å‹"}},[s._v("ğŸŒ™")]),s._v(" 2 å·çš„ç±»å‹")]),s._v(" "),t("p",[s._v("Kubernetes æ”¯æŒå¾ˆå¤šç±»å‹çš„å·ã€‚ Pod å¯ä»¥åŒæ—¶ä½¿ç”¨ä»»æ„æ•°ç›®çš„å·ç±»å‹ã€‚ ä¸´æ—¶å·ç±»å‹çš„ç”Ÿå‘½å‘¨æœŸä¸ Pod ç›¸åŒï¼Œä½†æŒä¹…å·å¯ä»¥æ¯” Pod çš„å­˜æ´»æœŸé•¿ã€‚ å½“ Pod ä¸å†å­˜åœ¨æ—¶ï¼ŒKubernetes ä¹Ÿä¼šé”€æ¯ä¸´æ—¶å·ï¼›ä¸è¿‡ Kubernetes ä¸ä¼šé”€æ¯æŒä¹…å·ã€‚ å¯¹äºç»™å®š Pod ä¸­ä»»ä½•ç±»å‹çš„å·ï¼Œåœ¨å®¹å™¨é‡å¯æœŸé—´æ•°æ®éƒ½ä¸ä¼šä¸¢å¤±ã€‚")]),s._v(" "),t("p",[s._v("å·çš„æ ¸å¿ƒæ˜¯ä¸€ä¸ªç›®å½•ï¼Œå…¶ä¸­å¯èƒ½å­˜æœ‰æ•°æ®ï¼ŒPod ä¸­çš„å®¹å™¨å¯ä»¥è®¿é—®è¯¥ç›®å½•ä¸­çš„æ•°æ®ã€‚ æ‰€é‡‡ç”¨çš„ä¸åŒå·çš„ç±»å‹å°†å†³å®šè¯¥ç›®å½•å¦‚ä½•å½¢æˆçš„ã€ä½¿ç”¨ä½•ç§ä»‹è´¨ä¿å­˜æ•°æ®ä»¥åŠç›®å½•ä¸­å­˜æ”¾çš„å†…å®¹ã€‚å¸¸ç”¨çš„å·ç±»å‹æœ‰ "),t("strong",[s._v("configMapã€emptyDirã€localã€nfsã€secret")]),s._v(" ç­‰ã€‚")]),s._v(" "),t("ul",[t("li",[s._v("ConfigMapï¼šå¯ä»¥å°†é…ç½®æ–‡ä»¶ä»¥é”®å€¼å¯¹çš„å½¢å¼ä¿å­˜åˆ° ConfigMap ä¸­ï¼Œå¹¶ä¸”å¯ä»¥åœ¨ Pod ä¸­ä»¥æ–‡ä»¶æˆ–ç¯å¢ƒå˜é‡çš„å½¢å¼ä½¿ç”¨ã€‚ConfigMap å¯ä»¥ç”¨æ¥å­˜å‚¨ä¸æ•æ„Ÿçš„é…ç½®ä¿¡æ¯ï¼Œå¦‚åº”ç”¨ç¨‹åºçš„é…ç½®æ–‡ä»¶ã€‚")]),s._v(" "),t("li",[s._v("EmptyDirï¼šæ˜¯ä¸€ä¸ªç©ºç›®å½•ï¼Œå¯ä»¥åœ¨ Pod ä¸­ç”¨æ¥å­˜å‚¨ä¸´æ—¶æ•°æ®ï¼Œå½“ Pod è¢«åˆ é™¤æ—¶ï¼Œè¯¥ç›®å½•ä¹Ÿä¼šè¢«åˆ é™¤ã€‚")]),s._v(" "),t("li",[s._v("Localï¼šå°†æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿçš„ç›®å½•æˆ–æ–‡ä»¶æ˜ å°„åˆ° Pod ä¸­çš„ä¸€ä¸ª Volume ä¸­ï¼Œå¯ä»¥ç”¨æ¥åœ¨ Pod ä¸­å…±äº«æ–‡ä»¶æˆ–æ•°æ®ã€‚")]),s._v(" "),t("li",[s._v("NFSï¼šå°†ç½‘ç»œä¸Šçš„ä¸€ä¸ªæˆ–å¤šä¸ª NFS å…±äº«ç›®å½•æŒ‚è½½åˆ° Pod ä¸­çš„ Volume ä¸­ï¼Œå¯ä»¥ç”¨æ¥åœ¨å¤šä¸ª Pod ä¹‹é—´å…±äº«æ•°æ®ã€‚")]),s._v(" "),t("li",[s._v("Secretï¼šå°†æ•æ„Ÿä¿¡æ¯ä»¥å¯†æ–‡çš„å½¢å¼ä¿å­˜åˆ° Secret ä¸­ï¼Œå¹¶ä¸”å¯ä»¥åœ¨ Pod ä¸­ä»¥æ–‡ä»¶æˆ–ç¯å¢ƒå˜é‡çš„å½¢å¼ä½¿ç”¨ã€‚Secret å¯ä»¥ç”¨æ¥å­˜å‚¨æ•æ„Ÿä¿¡æ¯ï¼Œå¦‚ç”¨æˆ·åå¯†ç ã€è¯ä¹¦ç­‰ã€‚")])]),s._v(" "),t("h3",{attrs:{id:"_3-ä½¿ç”¨æ–¹å¼"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-ä½¿ç”¨æ–¹å¼"}},[s._v("ğŸŒ™")]),s._v(" 3 ä½¿ç”¨æ–¹å¼")]),s._v(" "),t("p",[s._v("ä½¿ç”¨å·æ—¶, åœ¨ "),t("code",[s._v(".spec.volumes")]),s._v(" å­—æ®µä¸­è®¾ç½®ä¸º Pod æä¾›çš„å·ï¼Œå¹¶åœ¨ "),t("code",[s._v(".spec.containers[*].volumeMounts")]),s._v(" å­—æ®µä¸­å£°æ˜å·åœ¨å®¹å™¨ä¸­çš„æŒ‚è½½ä½ç½®ã€‚ å®¹å™¨ä¸­çš„è¿›ç¨‹çœ‹åˆ°çš„æ–‡ä»¶ç³»ç»Ÿè§†å›¾æ˜¯ç”±å®ƒä»¬çš„å®¹å™¨é•œåƒçš„åˆå§‹å†…å®¹ä»¥åŠæŒ‚è½½åœ¨å®¹å™¨ä¸­çš„å·ï¼ˆå¦‚æœå®šä¹‰äº†çš„è¯ï¼‰æ‰€ç»„æˆçš„ã€‚ å…¶ä¸­æ ¹æ–‡ä»¶ç³»ç»ŸåŒå®¹å™¨é•œåƒçš„å†…å®¹ç›¸å»åˆã€‚ ä»»ä½•åœ¨è¯¥æ–‡ä»¶ç³»ç»Ÿä¸‹çš„å†™å…¥æ“ä½œï¼Œå¦‚æœè¢«å…è®¸çš„è¯ï¼Œéƒ½ä¼šå½±å“æ¥ä¸‹æ¥å®¹å™¨ä¸­è¿›ç¨‹è®¿é—®æ–‡ä»¶ç³»ç»Ÿæ—¶æ‰€çœ‹åˆ°çš„å†…å®¹ã€‚")]),s._v(" "),t("div",{staticClass:"language-yml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiVersion")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" v1\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kind")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Pod\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("metadata")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" configmap"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("pod\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("spec")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("containers")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" test\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("image")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" busybox"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.28")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("volumeMounts")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n     \t\t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("...")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("...")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("...")]),s._v(".\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("volumes")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  \t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("...")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("...")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("...")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("...")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br")])]),t("h3",{attrs:{id:"_4-å¸¸è§ç±»å‹"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-å¸¸è§ç±»å‹"}},[s._v("ğŸŒ™")]),s._v(" 4 å¸¸è§ç±»å‹")]),s._v(" "),t("h4",{attrs:{id:"_4-1-emptydir"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-emptydir"}},[s._v("ğŸŒ™")]),s._v(" 4.1 emptyDir")]),s._v(" "),t("div",{staticClass:"language-yaml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yaml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiVersion")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" v1\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kind")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Pod\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("metadata")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" emptydir"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("example\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("spec")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("containers")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" writer\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("image")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" busybox\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("command")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/bin/sh"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"-c"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("\"echo 'Hello World!' > /data/hello.txt ; sleep 3600\"")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("volumeMounts")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" shared"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("data\n          "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("mountPath")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" /data\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" reader\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("image")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" busybox\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("command")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/bin/sh"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"-c"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"cat /data/hello.txt ; sleep 3600"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("volumeMounts")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" shared"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("data\n          "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("mountPath")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" /data\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("volumes")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" shared"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("data\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("emptyDir")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br")])]),t("p",[t("code",[s._v("æ€»ç»“: emptyDir æ˜¯ Host ä¸Šåˆ›å»ºçš„ä¸´æ—¶ç›®å½•ï¼Œå…¶ä¼˜ç‚¹æ˜¯èƒ½å¤Ÿæ–¹ä¾¿åœ°ä¸º Pod ä¸­çš„å®¹å™¨æä¾›å…±äº«å­˜å‚¨ï¼Œä¸éœ€è¦é¢å¤–çš„é…ç½®ã€‚å®ƒä¸å…·å¤‡æŒä¹…æ€§ï¼Œå¦‚æœPod ä¸å­˜åœ¨äº†ï¼ŒemptyDir ä¹Ÿå°±æ²¡æœ‰äº†ã€‚æ ¹æ®è¿™ä¸ªç‰¹æ€§ï¼ŒemptyDir ç‰¹åˆ«é€‚åˆ Pod ä¸­çš„å®¹å™¨éœ€è¦ä¸´æ—¶å…±äº«å­˜å‚¨ç©ºé—´çš„åœºæ™¯ï¼Œæ¯”å¦‚å‰é¢çš„ç”Ÿäº§è€…æ¶ˆè´¹è€…ç”¨ä¾‹ã€‚")])]),s._v(" "),t("h4",{attrs:{id:"_4-2-hostpath"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-hostpath"}},[s._v("ğŸŒ™")]),s._v(" 4.2 hostPath")]),s._v(" "),t("div",{staticClass:"language-yaml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yaml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiVersion")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" v1\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kind")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Pod\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("metadata")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" busybox"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("hostpath\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("spec")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("containers")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" busybox\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("image")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" busybox\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("command")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/bin/sh"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"-c"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("\"echo 'hello' > /data/data.txt && sleep 3600\"")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("volumeMounts")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" data\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("mountPath")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" /data\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("volumes")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" data\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("hostPath")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("path")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" /data/hostpath\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br")])]),t("p",[t("code",[s._v("æ€»ç»“: å¦‚æœ Pod è¢«é”€æ¯€äº†ï¼ŒhostPath å¯¹åº”çš„ç›®å½•è¿˜æ˜¯ä¼šè¢«ä¿ç•™ï¼Œä»è¿™ä¸€ç‚¹æ¥çœ‹ï¼ŒhostPath çš„æŒä¹…æ€§æ¯”emptyDir å¼ºã€‚ä¸è¿‡ä¸€æ—¦Host å´©æºƒï¼ŒhostPath ä¹Ÿå°±æ— æ³•è®¿é—®äº†ã€‚ä½†æ˜¯è¿™ç§æ–¹å¼ä¹Ÿå¸¦æ¥å¦å¤–ä¸€ä¸ªé—®é¢˜å¢åŠ äº† pod ä¸èŠ‚ç‚¹çš„è€¦åˆã€‚")])]),s._v(" "),t("h4",{attrs:{id:"_4-3-nfs"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-3-nfs"}},[s._v("ğŸŒ™")]),s._v(" 4.3 nfs")]),s._v(" "),t("p",[s._v("nfs: network filesystem : ç½‘ç»œæ–‡ä»¶å­˜å‚¨ç³»ç»Ÿ")]),s._v(" "),t("div",{staticClass:"language-yaml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yaml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiVersion")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" v1\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kind")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Pod\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("metadata")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nfs"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("test\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("spec")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("containers")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" busybox\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("image")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" busybox\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("command")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/bin/sh"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"-c"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"while true; do sleep 3600; done"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("volumeMounts")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nfs"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("volume\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("mountPath")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" /mnt/nfs\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("volumes")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nfs"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("volume\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("nfs")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("server")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" <NFS_SERVER_IP"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("path")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" /path/to/nfs/share\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br")])]),t("p",[t("code",[s._v("æ€»ç»“: ç›¸å¯¹äº emptyDir å’Œ hostPathï¼Œè¿™ç§ volume ç±»å‹çš„æœ€å¤§ç‰¹ç‚¹å°±æ˜¯ä¸ä¾èµ– Kuberees Volume çš„åº•å±‚åŸºç¡€è®¾æ–½ç”±ç‹¬ç«‹çš„å­˜å‚¨ç³»ç»Ÿç®¡ç†ï¼Œä¸ Kubernetes é›†ç¾¤æ˜¯åˆ†ç¦»çš„ã€‚æ•°æ®è¢«æŒä¹…åŒ–åï¼Œå³ä½¿æ•´ä¸ª Kubernetes å´©æºƒä¹Ÿä¸ä¼šå—æŸã€‚å½“ç„¶ï¼Œè¿ç»´è¿™æ ·çš„å­˜å‚¨ç³»ç»Ÿé€šå¸¸ä¸æ˜¯ä¸€é¡¹ç®€å•çš„å·¥ä½œï¼Œç‰¹åˆ«æ˜¯å¯¹å¯é æ€§ã€å¯ç”¨æ€§å’Œæ‰©å±•æ€§ æœ‰è¾ƒé«˜è¦æ±‚çš„æ—¶å€™ã€‚")])]),s._v(" "),t("h3",{attrs:{id:"_5-pv-pvc"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-pv-pvc"}},[s._v("ğŸŒ™")]),s._v(" 5 PV &  PVC")]),s._v(" "),t("h4",{attrs:{id:"_5-1-é—®é¢˜"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-1-é—®é¢˜"}},[s._v("ğŸŒ™")]),s._v(" 5.1 é—®é¢˜")]),s._v(" "),t("p",[s._v("Volume æä¾›äº†éå¸¸å¥½çš„æ•°æ®æŒä¹…åŒ–æ–¹æ¡ˆï¼Œä¸è¿‡åœ¨å¯ç®¡ç†æ€§ä¸Šè¿˜æœ‰ä¸è¶³ã€‚å‰é¢ nfs ä¾‹å­æ¥è¯´ï¼Œè¦ä½¿ç”¨ Volumeï¼Œ Pod å¿…é¡»äº‹å…ˆçŸ¥é“ä»¥ä¸‹ä¿¡æ¯ï¼š")]),s._v(" "),t("ul",[t("li",[s._v("å½“å‰çš„ Volume ç±»å‹å¹¶æ˜ç¡® Volume å·²ç»åˆ›å»ºå¥½ã€‚")]),s._v(" "),t("li",[s._v("å¿…é¡»çŸ¥é“ Volume çš„å…·ä½“åœ°å€ä¿¡æ¯ã€‚")])]),s._v(" "),t("p",[s._v("ä½†æ˜¯ Pod é€šå¸¸æ˜¯ç”±åº”ç”¨çš„å¼€å‘äººå‘˜ç»´æŠ¤ï¼Œè€Œ Volume åˆ™é€šå¸¸æ˜¯ç”±å­˜å‚¨ç³»ç»Ÿçš„ç®¡ç†å‘˜ç»´æŠ¤ã€‚å¼€å‘äººå‘˜è¦è·å¾—ä¸Šé¢çš„ä¿¡æ¯ï¼Œè¦ä¹ˆè¯¢é—®ç®¡ç†å‘˜ï¼Œè¦ä¹ˆè‡ªå·±å°±æ˜¯ç®¡ç†å‘˜ã€‚è¿™æ ·å°±å¸¦æ¥ä¸€ä¸ªç®¡ç†ä¸Šçš„é—®é¢˜ï¼šåº”ç”¨å¼€å‘äººå‘˜å’Œç³»ç»Ÿç®¡ç†å‘˜çš„èŒè´£è€¦åˆåœ¨ä¸€èµ·äº†ã€‚å¦‚æœç³»ç»Ÿè§„æ¨¡è¾ƒå°æˆ–è€…å¯¹äºå¼€å‘ç¯å¢ƒï¼Œè¿™æ ·çš„æƒ…å†µè¿˜å¯ä»¥æ¥å—ï¼Œå½“é›†ç¾¤è§„æ¨¡å˜å¤§ï¼Œç‰¹åˆ«æ˜¯å¯¹äºç”Ÿäº§ç¯å¢ƒï¼Œè€ƒè™‘åˆ°æ•ˆç‡å’Œå®‰å…¨æ€§ï¼Œè¿™å°±æˆäº†å¿…é¡»è¦è§£å†³çš„é—®é¢˜ã€‚")]),s._v(" "),t("h4",{attrs:{id:"_5-2-pv-pvc"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-2-pv-pvc"}},[s._v("ğŸŒ™")]),s._v(" 5.2 PV &  PVC")]),s._v(" "),t("p",[s._v("Kubernetes ç»™å‡ºçš„è§£å†³æ–¹æ¡ˆæ˜¯ "),t("code",[s._v("Persistent Volume å’Œ Persistent Volume Claim")]),s._v("ã€‚")]),s._v(" "),t("p",[s._v("PersistentVolume(PVï¼‰æ˜¯å¤–éƒ¨å­˜å‚¨ç³»ç»Ÿä¸­çš„ä¸€å—å­˜å‚¨ç©ºé—´ï¼Œç”±ç®¡ç†å‘˜åˆ›å»ºå’Œç»´æŠ¤ã€‚ä¸ Volume ä¸€æ ·ï¼ŒPV å…·æœ‰æŒä¹…æ€§ï¼Œç”Ÿå‘½å‘¨æœŸç‹¬ç«‹äº Podã€‚")]),s._v(" "),t("p",[s._v("Persistent Volume Claim (PVC)æ˜¯å¯¹ PV çš„ç”³è¯· (Claimï¼‰ã€‚PVC é€šå¸¸ç”±æ™®é€šç”¨æˆ·åˆ›å»ºå’Œç»´æŠ¤ã€‚éœ€è¦ä¸º Pod åˆ†é…å­˜å‚¨èµ„æºæ—¶ï¼Œç”¨æˆ·å¯ä»¥åˆ›å»ºä¸€ä¸ªPVCï¼ŒæŒ‡æ˜å­˜å‚¨èµ„æºçš„å®¹é‡å¤§å°å’Œè®¿é—®æ¨¡å¼ ï¼ˆæ¯”å¦‚åªè¯»ï¼‰ç­‰ä¿¡æ¯ï¼ŒKubernetes ä¼šæŸ¥æ‰¾å¹¶æä¾›æ»¡è¶³æ¡ä»¶çš„ PVã€‚æœ‰äº† PersistentVolumeClaimï¼Œç”¨æˆ·åªéœ€è¦å‘Šè¯‰ Kubernetes éœ€è¦ä»€ä¹ˆæ ·çš„å­˜å‚¨èµ„æºï¼Œè€Œä¸å¿…å…³å¿ƒçœŸæ­£çš„ç©ºé—´ä»å“ªé‡Œåˆ†é…ã€å¦‚ä½•è®¿é—®ç­‰åº•å±‚ç»†èŠ‚ä¿¡æ¯ã€‚è¿™äº› Storage Provider çš„åº•å±‚ä¿¡æ¯äº¤ç»™ç®¡ç†å‘˜æ¥å¤„ç†ï¼Œåªæœ‰ç®¡ç†å‘˜æ‰åº”è¯¥å…³å¿ƒåˆ›å»º PersistentVolume çš„ç»†èŠ‚ä¿¡æ¯ã€‚")]),s._v(" "),t("h4",{attrs:{id:"_5-3-åŸºæœ¬ä½¿ç”¨"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-3-åŸºæœ¬ä½¿ç”¨"}},[s._v("ğŸŒ™")]),s._v(" 5.3 åŸºæœ¬ä½¿ç”¨")]),s._v(" "),t("ul",[t("li",[s._v("åˆ›å»º PV")])]),s._v(" "),t("div",{staticClass:"language-yaml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yaml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiVersion")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" v1\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kind")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" PersistentVolume\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("metadata")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nfs"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("pv\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("spec")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("capacity")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("storage")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" 1Gi "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#æŒ‡å®šå®¹é‡å¤§å°")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("accessModes")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# è®¿é—®æ¨¡å¼ ")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" ReadWriteMany\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("persistentVolumeReclaimPolicy")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Retain\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("storageClassName")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nfs\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("nfs")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("path")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" /"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("nfs"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("serverç›®å½•åç§°"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("server")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("nfs"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("server IP åœ°å€"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br")])]),t("ul",[t("li",[t("p",[s._v("**accessModes: ** æ”¯æŒçš„è®¿é—®æ¨¡å¼æœ‰3ç§ï¼š")]),s._v(" "),t("ul",[t("li",[s._v("ReadWriteOnce è¡¨ç¤º PV èƒ½ä»¥ readwrite æ¨¡å¼ mount åˆ°å•ä¸ªèŠ‚ç‚¹\n"),t("ul",[t("li",[s._v("è¿™ä¸ªPVåªèƒ½è¢«æŸä¸ªèŠ‚ç‚¹ä»¥è¯»å†™æ–¹å¼æŒ‚è½½ï¼Œæ„å‘³ç€è¿™ä¸ªPVåªèƒ½è¢«ä¸€ä¸ªPodæŒ‚è½½åˆ°æŸä¸ªèŠ‚ç‚¹ä¸Šï¼Œå¹¶ä¸”è¿™ä¸ªPodå¯ä»¥å¯¹è¿™ä¸ªPVè¿›è¡Œè¯»å†™æ“ä½œã€‚å¦‚æœå°è¯•åœ¨å…¶ä»–èŠ‚ç‚¹ä¸ŠæŒ‚è½½è¿™ä¸ªPVï¼Œå°±ä¼šå¤±è´¥ã€‚")])])]),s._v(" "),t("li",[s._v("ReadOnlyMany  è¡¨ç¤º PV èƒ½ä»¥ read-only æ¨¡å¼ mount åˆ°å¤šä¸ªèŠ‚ç‚¹ï¼Œ\n"),t("ul",[t("li",[s._v("è¿™ä¸ªPVèƒ½è¢«å¤šä¸ªèŠ‚ç‚¹ä»¥åªè¯»æ–¹å¼æŒ‚è½½ï¼Œæ„å‘³ç€è¿™ä¸ªPVå¯ä»¥è¢«å¤šä¸ªPodæŒ‚è½½åˆ°å¤šä¸ªèŠ‚ç‚¹ä¸Šã€‚")])])]),s._v(" "),t("li",[s._v("ReadWriteMany è¡¨ç¤º PV èƒ½ä»¥ read-write æ¨¡å¼ mount åˆ°å¤šä¸ªèŠ‚ç‚¹ã€‚\n"),t("ul",[t("li",[s._v("è¿™ä¸ªPVèƒ½è¢«å¤šä¸ªèŠ‚ç‚¹ä»¥è¯»å†™æ–¹å¼æŒ‚è½½ï¼Œæ„å‘³ç€è¿™ä¸ªPVå¯ä»¥è¢«å¤šä¸ªPodæŒ‚è½½åˆ°å¤šä¸ªèŠ‚ç‚¹ä¸Šã€‚")])])])])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("persistentVolumeReclaimPolicy:")]),s._v(" æŒ‡å®šå½“ PV çš„å›æ”¶ç­–ç•¥æ”¯æŒçš„ç­–ç•¥æœ‰3ç§ï¼š")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("Retainï¼šåœ¨ PVC è¢«åˆ é™¤åï¼Œä¿ç•™ PV å’Œå…¶æ•°æ®ï¼Œæ‰‹åŠ¨æ¸…ç† PV ä¸­çš„æ•°æ®ã€‚")])]),s._v(" "),t("li",[t("p",[s._v("Deleteï¼šåœ¨ PVC è¢«åˆ é™¤åï¼Œè‡ªåŠ¨åˆ é™¤ PV å’Œå…¶æ•°æ®ã€‚")])]),s._v(" "),t("li",[t("p",[s._v("Recycleï¼šåœ¨ PVC è¢«åˆ é™¤åï¼Œé€šè¿‡åˆ é™¤ PV ä¸­çš„æ•°æ®æ¥å‡†å¤‡ PV ä»¥ä¾›é‡æ–°ä½¿ç”¨ã€‚")]),s._v(" "),t("p",[t("code",[s._v("å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œ")]),s._v("persistentVolumeReclaimPolicy"),t("code",[s._v("åªé€‚ç”¨äºä¸€äº›ç±»å‹çš„ PVï¼Œå¦‚ NFSã€HostPathã€iSCSI ç­‰ã€‚å¯¹äºä¸€äº›äº‘å¹³å°æä¾›çš„å­˜å‚¨ï¼Œå¦‚ AWS EBS å’Œ Azure Diskï¼Œç”±äºåº•å±‚æä¾›å•†ä¼šè‡ªåŠ¨å¤„ç† PV çš„å›æ”¶é—®é¢˜ï¼Œå› æ­¤è¯¥å±æ€§ä¸é€‚ç”¨ã€‚")])])])])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("storageClassName:")]),s._v(" æŒ‡å®š PV çš„class ä¸º nfsã€‚ç›¸å½“äºä¸º PV è®¾ç½®äº†ä¸€ä¸ªåˆ†ç±»ï¼ŒPVCå¯ä»¥æŒ‡å®š class ç”³è¯·ç›¸åº” class çš„ PVã€‚")])]),s._v(" "),t("li",[t("p",[s._v("åˆ›å»º PVC")])])]),s._v(" "),t("div",{staticClass:"language-yaml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yaml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiVersion")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" v1\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kind")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" PersistentVolumeClaim\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("metadata")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nfs"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("pvc\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("spec")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("accessModes")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" ReadWriteMany\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("resources")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("requests")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("storage")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" 1Gi\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("storageClassName")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nfs "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# é€šè¿‡åå­—è¿›è¡Œé€‰æ‹©")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#selector:  é€šè¿‡æ ‡ç­¾å½¢å¼")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#  matchLabels:")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#    pv-name: nfs-pv")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br")])]),t("ul",[t("li",[s._v("ä½¿ç”¨ PVC")])]),s._v(" "),t("div",{staticClass:"language-yml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiVersion")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" v1\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kind")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Pod\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("metadata")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" busybox"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("nfs\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("spec")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("containers")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" busybox\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("image")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" busybox\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("command")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/bin/sh"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("args")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"-c"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("\"while true; do echo 'Hello NFS!' >> /data/index.html; sleep 1; done\"")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("volumeMounts")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nfs"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("volume\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("mountPath")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" /data\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("volumes")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nfs"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("volume\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("persistentVolumeClaim")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("claimName")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nfs"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("pvc\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br")])]),t("h4",{attrs:{id:"_5-4-åŠ¨æ€ä¾›ç»™"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-4-åŠ¨æ€ä¾›ç»™"}},[s._v("ğŸŒ™")]),s._v(" 5.4 åŠ¨æ€ä¾›ç»™")]),s._v(" "),t("p",[s._v("åœ¨å‰é¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬æå‰åˆ›å»ºäº†PVï¼Œç„¶åé€šè¿‡ PVC ç”³è¯· PV å¹¶åœ¨Pod ä¸­ä½¿ç”¨ï¼Œè¿™ç§æ–¹å¼å«ä½œé™æ€ä¾›ç»™ ( Static Provision)ä¸ä¹‹å¯¹åº”çš„æ˜¯åŠ¨æ€ä¾›ç»™ (Dynamical Provisionï¼‰ï¼Œå³å¦‚æœæ²¡æœ‰æ»¡è¶³PVC æ¡ä»¶çš„PVï¼Œä¼šåŠ¨æ€åˆ›å»º PVã€‚ç›¸æ¯”é™æ€ä¾›ç»™ï¼ŒåŠ¨æ€ä¾›ç»™æœ‰æ˜æ˜¾çš„ä¼˜åŠ¿ï¼šä¸éœ€è¦æå‰åˆ›å»º PVï¼Œå‡å°‘äº†ç®¡ç†å‘˜\nçš„å·¥ä½œé‡ï¼Œæ•ˆç‡é«˜ã€‚åŠ¨æ€ä¾›ç»™æ˜¯é€šè¿‡ StorageClass å®ç°çš„ï¼ŒStorageClass å®šä¹‰äº†å¦‚ä½•åˆ›å»º PVï¼Œä½†éœ€è¦æ³¨æ„çš„æ˜¯æ¯ä¸ª StorageClass éƒ½æœ‰ä¸€ä¸ªåˆ¶å¤‡å™¨ï¼ˆProvisionerï¼‰ï¼Œç”¨æ¥å†³å®šä½¿ç”¨å“ªä¸ªå·æ’ä»¶åˆ¶å¤‡ PVã€‚ è¯¥å­—æ®µå¿…é¡»æŒ‡å®šã€‚(https://kubernetes.io/zh-cn/docs/concepts/storage/storage-classes/) æ‰èƒ½å®ç°åŠ¨æ€åˆ›å»ºï¼Œä¸‹é¢æˆ‘ä»¬ä»¥ NFS ä¸ºä¾‹ï¼š")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("å®šä¹‰ NFS Provider")]),s._v(" "),t("div",{staticClass:"language-yaml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yaml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiVersion")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" apps/v1\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kind")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Deployment\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("metadata")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nfs"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("client"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("provisioner\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("labels")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("app")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nfs"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("client"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("provisioner\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# replace with namespace where provisioner is deployed")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("namespace")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" kube"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("system\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("spec")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("replicas")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("strategy")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("type")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Recreate\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("selector")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("matchLabels")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("app")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nfs"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("client"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("provisioner\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("template")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("metadata")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("labels")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("app")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nfs"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("client"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("provisioner\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("spec")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("serviceAccountName")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nfs"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("client"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("provisioner\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("containers")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nfs"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("client"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("provisioner\n          "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("image")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" chronolaw/nfs"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("subdir"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("external"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("provisioner"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("v4.0.2\n          "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("volumeMounts")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nfs"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("client"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("root\n              "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("mountPath")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" /persistentvolumes\n          "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("env")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" PROVISIONER_NAME\n              "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("value")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" k8s"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("sigs.io/nfs"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("subdir"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("external"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("provisioner\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" NFS_SERVER\n              "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("value")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" 10.15.0.25\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" NFS_PATH\n              "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("value")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" /root/nfs/data\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("volumes")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nfs"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("client"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("root\n          "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("nfs")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("server")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" 10.15.0.25\n            "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("path")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" /root/nfs/data\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br")])]),t("div",{staticClass:"language-yaml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yaml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiVersion")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" v1\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kind")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" ServiceAccount\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("metadata")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nfs"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("client"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("provisioner\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# replace with namespace where provisioner is deployed")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("namespace")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" kube"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("system\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("---")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kind")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" ClusterRole\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiVersion")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" rbac.authorization.k8s.io/v1\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("metadata")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nfs"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("client"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("provisioner"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("runner\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("rules")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiGroups")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("resources")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"nodes"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("verbs")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"get"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"list"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"watch"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiGroups")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("resources")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"persistentvolumes"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("verbs")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"get"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"list"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"watch"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"create"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"delete"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiGroups")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("resources")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"persistentvolumeclaims"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("verbs")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"get"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"list"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"watch"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"update"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiGroups")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"storage.k8s.io"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("resources")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"storageclasses"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("verbs")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"get"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"list"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"watch"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiGroups")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("resources")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"events"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("verbs")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"create"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"update"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"patch"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("---")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kind")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" ClusterRoleBinding\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiVersion")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" rbac.authorization.k8s.io/v1\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("metadata")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" run"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("nfs"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("client"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("provisioner\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("subjects")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kind")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" ServiceAccount\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nfs"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("client"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("provisioner\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# replace with namespace where provisioner is deployed")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("namespace")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" kube"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("system\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("roleRef")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kind")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" ClusterRole\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nfs"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("client"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("provisioner"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("runner\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiGroup")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" rbac.authorization.k8s.io\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("---")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kind")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Role\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiVersion")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" rbac.authorization.k8s.io/v1\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("metadata")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" leader"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("locking"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("nfs"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("client"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("provisioner\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# replace with namespace where provisioner is deployed")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("namespace")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" kube"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("system\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("rules")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiGroups")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("resources")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"endpoints"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("verbs")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"get"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"list"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"watch"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"create"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"update"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"patch"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("---")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kind")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" RoleBinding\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiVersion")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" rbac.authorization.k8s.io/v1\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("metadata")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" leader"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("locking"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("nfs"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("client"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("provisioner\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# replace with namespace where provisioner is deployed")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("namespace")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" kube"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("system\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("subjects")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kind")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" ServiceAccount\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nfs"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("client"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("provisioner\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# replace with namespace where provisioner is deployed")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("namespace")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" kube"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("system\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("roleRef")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kind")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Role\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" leader"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("locking"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("nfs"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("client"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("provisioner\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiGroup")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" rbac.authorization.k8s.io\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br"),t("span",{staticClass:"line-number"},[s._v("41")]),t("br"),t("span",{staticClass:"line-number"},[s._v("42")]),t("br"),t("span",{staticClass:"line-number"},[s._v("43")]),t("br"),t("span",{staticClass:"line-number"},[s._v("44")]),t("br"),t("span",{staticClass:"line-number"},[s._v("45")]),t("br"),t("span",{staticClass:"line-number"},[s._v("46")]),t("br"),t("span",{staticClass:"line-number"},[s._v("47")]),t("br"),t("span",{staticClass:"line-number"},[s._v("48")]),t("br"),t("span",{staticClass:"line-number"},[s._v("49")]),t("br"),t("span",{staticClass:"line-number"},[s._v("50")]),t("br"),t("span",{staticClass:"line-number"},[s._v("51")]),t("br"),t("span",{staticClass:"line-number"},[s._v("52")]),t("br"),t("span",{staticClass:"line-number"},[s._v("53")]),t("br"),t("span",{staticClass:"line-number"},[s._v("54")]),t("br"),t("span",{staticClass:"line-number"},[s._v("55")]),t("br"),t("span",{staticClass:"line-number"},[s._v("56")]),t("br"),t("span",{staticClass:"line-number"},[s._v("57")]),t("br"),t("span",{staticClass:"line-number"},[s._v("58")]),t("br"),t("span",{staticClass:"line-number"},[s._v("59")]),t("br"),t("span",{staticClass:"line-number"},[s._v("60")]),t("br"),t("span",{staticClass:"line-number"},[s._v("61")]),t("br"),t("span",{staticClass:"line-number"},[s._v("62")]),t("br"),t("span",{staticClass:"line-number"},[s._v("63")]),t("br"),t("span",{staticClass:"line-number"},[s._v("64")]),t("br"),t("span",{staticClass:"line-number"},[s._v("65")]),t("br"),t("span",{staticClass:"line-number"},[s._v("66")]),t("br"),t("span",{staticClass:"line-number"},[s._v("67")]),t("br"),t("span",{staticClass:"line-number"},[s._v("68")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("å®šä¹‰ StorageClass")]),s._v(" "),t("div",{staticClass:"language-yaml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yaml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiVersion")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" storage.k8s.io/v1\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kind")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" StorageClass\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("metadata")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" mysql"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("nfs"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("sc\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("provisioner")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" k8s"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("sigs.io/nfs"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("subdir"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("external"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("provisioner\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("parameters")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("onDelete")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"remain"')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("ä½¿ç”¨ StorageClass åŠ¨æ€åˆ›å»º")]),s._v(" "),t("div",{staticClass:"language-yaml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yaml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiVersion")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" apps/v1\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kind")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" StatefulSet\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("metadata")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" mysql\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("labels")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("app")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" mysql\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("spec")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("serviceName")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" mysql "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#headless æ— å¤´æœåŠ¡  ä¿è¯ç½‘ç»œæ ‡è¯†ç¬¦å”¯ä¸€  å¿…é¡»å­˜åœ¨")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("replicas")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("template")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("metadata")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" mysql\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("labels")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("app")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" mysql\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("spec")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("containers")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" mysql\n          "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("image")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" mysql/mysql"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("server"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8.0")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("imagePullPolicy")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" IfNotPresent\n          "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("env")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" MYSQL_ROOT_PASSWORD\n              "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("value")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" root\n          "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("volumeMounts")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("mountPath")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" /var/lib/mysql "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#è‡ªå·±å®¹å™¨å†™å…¥æ•°æ®ç›®å½•")]),s._v("\n              "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" data    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#ä¿å­˜åˆ°æŒ‡å®šä¸€ä¸ªå˜é‡ä¸­ å˜é‡åå­—å°±æ˜¯ data")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("ports")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("containerPort")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3306")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("restartPolicy")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Always\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("volumeClaimTemplates")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#å£°æ˜åŠ¨æ€åˆ›å»ºæ•°æ®å·æ¨¡æ¿")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("metadata")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" data      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# æ•°æ®å·å˜é‡åç§°")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("spec")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("accessModes")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# è®¿é—®æ¨¡å¼")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" ReadWriteMany\n        "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("storageClassName")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" mysql"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("nfs"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("sc "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ä½¿ç”¨å“ªä¸ª storage class æ¨¡æ¿å­˜å‚¨æ•°æ®")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("resources")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("requests")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("storage")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" 2G\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("selector")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("matchLabels")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("app")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" mysql\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br"),t("span",{staticClass:"line-number"},[s._v("41")]),t("br")])])])]),s._v(" "),t("h2",{attrs:{id:"ç¬¬ä¸ƒç« -configmap-secret"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ç¬¬ä¸ƒç« -configmap-secret"}},[s._v("ğŸŒ™")]),s._v(" ç¬¬ä¸ƒç«  ConfigMap & Secret")]),s._v(" "),t("ul",[t("li",[s._v("ConfigMap")]),s._v(" "),t("li",[s._v("Secret")])]),s._v(" "),t("h3",{attrs:{id:"_1-configmap"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-configmap"}},[s._v("ğŸŒ™")]),s._v(" 1 ConfigMap")]),s._v(" "),t("h4",{attrs:{id:"_1-1-ç®€ä»‹-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-ç®€ä»‹-2"}},[s._v("ğŸŒ™")]),s._v(" 1.1 ç®€ä»‹")]),s._v(" "),t("p",[s._v("åœ¨ Kubernetes ä¸­ï¼Œ"),t("strong",[s._v("ConfigMap æ˜¯ä¸€ç§ç”¨äºå­˜å‚¨éæ•æ„Ÿä¿¡æ¯çš„ Kubernetes å¯¹è±¡")]),s._v("ã€‚å®ƒç”¨äºå­˜å‚¨é…ç½®æ•°æ®ï¼Œå¦‚é”®å€¼å¯¹ã€æ•´ä¸ªé…ç½®æ–‡ä»¶æˆ– JSON æ•°æ®ç­‰ã€‚ConfigMap é€šå¸¸ç”¨äºå®¹å™¨é•œåƒä¸­çš„é…ç½®æ–‡ä»¶ã€å‘½ä»¤è¡Œå‚æ•°å’Œç¯å¢ƒå˜é‡ç­‰ã€‚")]),s._v(" "),t("p",[s._v("ConfigMap å¯ä»¥é€šè¿‡ä¸‰ç§æ–¹å¼è¿›è¡Œé…ç½®æ•°æ®çš„æ³¨å…¥ï¼š")]),s._v(" "),t("ol",[t("li",[s._v("ç¯å¢ƒå˜é‡æ³¨å…¥ï¼šå°†é…ç½®æ•°æ®æ³¨å…¥åˆ° Pod ä¸­çš„å®¹å™¨ç¯å¢ƒå˜é‡ä¸­ã€‚")]),s._v(" "),t("li",[s._v("é…ç½®æ–‡ä»¶æ³¨å…¥ï¼šå°†é…ç½®æ•°æ®æ³¨å…¥åˆ° Pod ä¸­çš„å®¹å™¨æ–‡ä»¶ç³»ç»Ÿä¸­ï¼Œå®¹å™¨å¯ä»¥è¯»å–è¿™äº›æ–‡ä»¶ã€‚")]),s._v(" "),t("li",[s._v("å‘½ä»¤è¡Œå‚æ•°æ³¨å…¥ï¼šå°†é…ç½®æ•°æ®æ³¨å…¥åˆ°å®¹å™¨çš„å‘½ä»¤è¡Œå‚æ•°ä¸­ã€‚")])]),s._v(" "),t("h4",{attrs:{id:"_1-2-ä¼˜ç‚¹"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-ä¼˜ç‚¹"}},[s._v("ğŸŒ™")]),s._v(" 1.2 ä¼˜ç‚¹")]),s._v(" "),t("ol",[t("li",[s._v("é¿å…äº†ç¡¬ç¼–ç ï¼Œå°†é…ç½®æ•°æ®ä¸åº”ç”¨ä»£ç åˆ†ç¦»ã€‚")]),s._v(" "),t("li",[s._v("ä¾¿äºç»´æŠ¤å’Œæ›´æ–°ï¼Œå¯ä»¥å•ç‹¬ä¿®æ”¹ ConfigMap è€Œä¸éœ€è¦é‡æ–°æ„å»ºé•œåƒã€‚")]),s._v(" "),t("li",[s._v("å¯ä»¥é€šè¿‡å¤šç§æ–¹å¼æ³¨å…¥é…ç½®æ•°æ®ï¼Œæ›´åŠ çµæ´»ã€‚")]),s._v(" "),t("li",[s._v("å¯ä»¥é€šè¿‡ Kubernetes çš„è‡ªåŠ¨åŒ–æœºåˆ¶å¯¹ ConfigMap è¿›è¡Œç‰ˆæœ¬æ§åˆ¶å’Œå›æ»šã€‚")]),s._v(" "),t("li",[s._v("ConfigMap å¯ä»¥è¢«å¤šä¸ª Pod å…±äº«ï¼Œå‡å°‘äº†é…ç½®æ•°æ®çš„é‡å¤å­˜å‚¨ã€‚")])]),s._v(" "),t("h4",{attrs:{id:"_1-3-å®šä¹‰-configmap"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-å®šä¹‰-configmap"}},[s._v("ğŸŒ™")]),s._v(" 1.3 å®šä¹‰ ConfigMap")]),s._v(" "),t("ul",[t("li",[t("p",[t("strong",[s._v("åŸºæœ¬æ“ä½œ")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# æŸ¥çœ‹ configmap")]),s._v("\n$ kubectl get configmap/cm  \n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# æŸ¥çœ‹è¯¦ç»†")]),s._v("\n$ kubectl describe configmap/cm my-config\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# åˆ é™¤ cm")]),s._v("\n$ kubectl delete cm my-config\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("å‘½ä»¤è¡Œåˆ›å»º")]),s._v("ï¼š")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("å¯ä»¥ä½¿ç”¨"),t("code",[s._v("kubectl create configmap")]),s._v("å‘½ä»¤æ¥åˆ›å»ºconfigmapï¼Œå…·ä½“å‘½ä»¤å¦‚ä¸‹ï¼š")])]),s._v(" "),t("li",[t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ kubectl create configmap my-config --from-literal"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("key1"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("value1 --from-literal"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("key2"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("value2\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])])])])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("é€šè¿‡é…ç½®æ–‡ä»¶åˆ›å»º")]),s._v("ï¼š"),t("strong",[s._v("æ¨è")])]),s._v(" "),t("ul",[t("li",[t("p",[s._v("å¯ä»¥é€šè¿‡åˆ›å»ºYAMLæ–‡ä»¶çš„æ–¹å¼æ¥å®šä¹‰configmapçš„å†…å®¹ã€‚ä¾‹å¦‚ï¼Œåˆ›å»ºä¸€ä¸ªåä¸º"),t("code",[s._v("my-config")]),s._v("çš„configmapï¼Œå†…å®¹å¦‚ä¸‹ï¼š")])]),s._v(" "),t("li",[t("div",{staticClass:"language-yaml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yaml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiVersion")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" v1\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kind")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" ConfigMap\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("metadata")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" my"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("config\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("data")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("key1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" value1\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("key2")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" value2\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])])]),s._v(" "),t("li",[t("div",{staticClass:"language-yaml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yaml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiVersion")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" v1\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kind")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" ConfigMap\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("metadata")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" app"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("config\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("data")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("application.yml")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("|")]),t("span",{pre:!0,attrs:{class:"token scalar string"}},[s._v("\n    name: xiaochen")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("ç„¶åä½¿ç”¨"),t("code",[s._v("kubectl apply -f")]),s._v("å‘½ä»¤æ¥åˆ›å»ºconfigmapã€‚")])])])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("é€šè¿‡æ–‡ä»¶åˆ›å»º:")])]),s._v(" "),t("ul",[t("li",[t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-n")]),s._v(" admin "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("./username\n$ "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-n")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("123456")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" ./password\n$ kubectl create configmap myconfigmap --from-file"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("./username --from-file"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("./password\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])])])])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("é€šè¿‡æ–‡ä»¶å¤¹åˆ›å»º")]),s._v("ï¼š")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("å¯ä»¥å°†å¤šä¸ªé…ç½®æ–‡ä»¶æ”¾åœ¨åŒä¸€ä¸ªæ–‡ä»¶å¤¹ä¸‹ï¼Œç„¶åä½¿ç”¨"),t("code",[s._v("kubectl create configmap")]),s._v("å‘½ä»¤æ¥åˆ›å»ºconfigmapï¼Œä¾‹å¦‚ï¼š")])]),s._v(" "),t("li",[t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ kubectl create configmap my-config --from-file"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("config-files/\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("è¿™å°†åˆ›å»ºä¸€ä¸ªåä¸º"),t("code",[s._v("my-config")]),s._v("çš„configmapï¼Œå…¶ä¸­åŒ…å«"),t("code",[s._v("config-files/")]),s._v("æ–‡ä»¶å¤¹ä¸‹æ‰€æœ‰çš„æ–‡ä»¶å†…å®¹ä½œä¸ºé”®å€¼å¯¹ã€‚")])])])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("é€šè¿‡ç¯å¢ƒå˜é‡åˆ›å»º")]),s._v("ï¼š")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("å¯ä»¥å°†ç¯å¢ƒå˜é‡çš„å€¼è½¬æ¢ä¸ºconfigmapã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å°†å½“å‰ç¯å¢ƒå˜é‡çš„å€¼è½¬æ¢ä¸ºconfigmapï¼š")])]),s._v(" "),t("li",[t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ kubectl create configmap my-config --from-env-file"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("env")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])])])])])]),s._v(" "),t("h4",{attrs:{id:"_1-4-ä½¿ç”¨"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-ä½¿ç”¨"}},[s._v("ğŸŒ™")]),s._v(" 1.4 ä½¿ç”¨")]),s._v(" "),t("ul",[t("li",[s._v("ç¯å¢ƒå˜é‡ä¸­ä½¿ç”¨")])]),s._v(" "),t("div",{staticClass:"language-yml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiVersion")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" v1\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kind")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Pod\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("metadata")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" my"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("pod\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("spec")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("containers")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" my"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("container\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("image")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" busybox\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("command")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/bin/sh"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"-c"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"echo $BUSY_NAME ; sleep 3600;"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("env")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# name: æ˜¯å®¹å™¨éœ€è¦ç¯å¢ƒå˜é‡åç§°")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" BUSY_NAME\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# valueForm: value æ¥æºä¸ä»€ä¹ˆ")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("valueFrom")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("configMapKeyRef")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# å€¼æ¥æºä¸ configmap  æ¥æºä¸å“ªä¸ª configmap æ¥æºä¸å“ªä¸ª configmap ä¸­ key")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" app"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("cm\n          "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("key")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" name\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ä¸€æ¬¡æ€§æ³¨å…¥è¿™ä¸ª configmap")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("envFrom")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("configMapRef")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" my"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("config\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br")])]),t("p",[t("code",[s._v("æ³¨æ„: env æ˜¯æŒ‡å®š configmap ä¸­æŸä¸ª key è¿›è¡Œæ³¨å…¥ envForm å°† configmap ä¸­å†…å®¹å…¨éƒ¨æ³¨å…¥")])]),s._v(" "),t("ul",[t("li",[s._v("é€šè¿‡ Volume ä½¿ç”¨é…ç½®")])]),s._v(" "),t("div",{staticClass:"language-yaml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yaml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiVersion")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" v1\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kind")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Pod\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("metadata")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" myapp"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("pod\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("spec")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("containers")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" myapp"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("container\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("image")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" busybox\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("command")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/bin/sh"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"-c"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"sleep 3600"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("volumeMounts")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" data"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("volume\n          "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("mountPath")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" /data\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("volumes")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" data"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("volume\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("configMap")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" application"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("cm\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br")])]),t("h3",{attrs:{id:"_2-secret"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-secret"}},[s._v("ğŸŒ™")]),s._v(" 2 Secret")]),s._v(" "),t("h4",{attrs:{id:"_2-1-ç®€ä»‹"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-ç®€ä»‹"}},[s._v("ğŸŒ™")]),s._v(" 2.1 ç®€ä»‹")]),s._v(" "),t("p",[s._v("åœ¨ Kubernetes ä¸­ï¼ŒSecret æ˜¯ä¸€ç§ç”¨äºå­˜å‚¨å’Œç®¡ç†æ•æ„Ÿä¿¡æ¯çš„å¯¹è±¡ç±»å‹ï¼Œå¦‚å¯†ç ã€APIå¯†é’¥ã€è¯ä¹¦ç­‰ç­‰ã€‚å®ƒä»¬ä¸ ConfigMap ç›¸ä¼¼ï¼Œä½†åœ¨å¤„ç†æ•æ„Ÿä¿¡æ¯æ—¶ï¼ŒSecret ä¼šæä¾›æ›´é«˜çš„å®‰å…¨æ€§å’Œä¿å¯†æ€§ã€‚")]),s._v(" "),t("p",[s._v("Secret å¯ä»¥ç”¨äºå°†è¿™äº›æ•æ„Ÿä¿¡æ¯æ³¨å…¥åˆ°å®¹å™¨ä¸­ï¼Œå¹¶ç¡®ä¿è¿™äº›ä¿¡æ¯åœ¨è¿è¡Œæ—¶ä¸ä¼šè¢«æ„å¤–æ³„æ¼æˆ–æš´éœ²ç»™å…¶ä»–äººã€‚Secret å¯ä»¥é€šè¿‡å¤šç§æ–¹å¼å®šä¹‰å’Œä½¿ç”¨ï¼Œä¾‹å¦‚ç›´æ¥å®šä¹‰ã€ä»æ–‡ä»¶ä¸­åŠ è½½ã€ä»ç¯å¢ƒå˜é‡ä¸­åŠ è½½ç­‰ã€‚")]),s._v(" "),t("p",[s._v("åœ¨ Kubernetes ä¸­ï¼ŒSecrets é€šå¸¸è¢«ç”¨äºä»¥ä¸‹åœºæ™¯ï¼š")]),s._v(" "),t("ul",[t("li",[s._v("ä½œä¸ºå·æŒ‚è½½åˆ° Pod ä¸­ï¼Œç”¨äºå­˜å‚¨è¯ä¹¦ã€å¯†é’¥ç­‰æ•æ„Ÿæ–‡ä»¶")]),s._v(" "),t("li",[s._v("åœ¨ Pod ä¸­ä½¿ç”¨ç¯å¢ƒå˜é‡ï¼Œç”¨äºå­˜å‚¨ç”¨æˆ·åå’Œå¯†ç ç­‰æ•æ„Ÿä¿¡æ¯")]),s._v(" "),t("li",[s._v("ç”¨äºå­˜å‚¨ Docker é•œåƒä»“åº“çš„ç™»å½•ä¿¡æ¯")]),s._v(" "),t("li",[s._v("ç”¨äºå­˜å‚¨å¤–éƒ¨æœåŠ¡çš„ API å¯†é’¥")])]),s._v(" "),t("p",[s._v("Secrets å¯ä»¥åœ¨ Pod çš„ spec ä¸­é€šè¿‡ volume å’Œç¯å¢ƒå˜é‡çš„æ–¹å¼å¼•ç”¨ã€‚å½“å®¹å™¨ä½¿ç”¨ volume æ¥å¼•ç”¨ Secret æ—¶ï¼ŒSecret ä¼šä»¥æ–‡ä»¶çš„å½¢å¼æŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚å½“å®¹å™¨ä½¿ç”¨ç¯å¢ƒå˜é‡æ¥å¼•ç”¨ Secret æ—¶ï¼ŒSecret ä¸­çš„æ•°æ®ä¼šä»¥ base64 ç¼–ç åï¼Œä»¥é”®å€¼å¯¹çš„å½¢å¼æ³¨å…¥åˆ°å®¹å™¨çš„ç¯å¢ƒå˜é‡ä¸­ã€‚")]),s._v(" "),t("p",[t("code",[s._v("éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒSecret å¹¶ä¸æä¾›å¼ºå¤§çš„å®‰å…¨ä¿è¯ï¼Œåªæ˜¯ç®€å•åœ°å°†æ•°æ®å­˜å‚¨åœ¨ base64 ç¼–ç çš„å½¢å¼ä¸‹ï¼Œå¹¶ä¸æä¾›åŠ å¯†æˆ–å…¶ä»–å®‰å…¨æªæ–½ï¼Œå› æ­¤ä¸è¦å°†é«˜åº¦æ•æ„Ÿçš„ä¿¡æ¯å­˜å‚¨åœ¨ Secret ä¸­ã€‚åœ¨å¤„ç†é«˜åº¦æ•æ„Ÿçš„ä¿¡æ¯æ—¶ï¼Œéœ€è¦ä½¿ç”¨æ›´é«˜çº§åˆ«çš„ä¿æŠ¤æœºåˆ¶ï¼Œå¦‚ä½¿ç”¨åŠ å¯†æ•°æ®çš„ Volume ç±»å‹ï¼Œæˆ–è€…ä½¿ç”¨ç¬¬ä¸‰æ–¹åŠ å¯†è§£å†³æ–¹æ¡ˆç­‰ã€‚")])]),s._v(" "),t("h4",{attrs:{id:"_2-1-å®šä¹‰-secret"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-å®šä¹‰-secret"}},[s._v("ğŸŒ™")]),s._v(" 2.1 å®šä¹‰ Secret")]),s._v(" "),t("ul",[t("li",[t("p",[t("strong",[s._v("ä½¿ç”¨å‘½ä»¤è¡Œåˆ›å»º")]),s._v("ï¼š")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("å¯ä»¥ä½¿ç”¨ kubectl create secret å‘½ä»¤æ¥åˆ›å»º secretï¼Œä¾‹å¦‚ï¼š")])]),s._v(" "),t("li",[t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ kubectl create secret generic my-secret --from-literal"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("username"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("admin --from-literal"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("password"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("admin123\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])])])])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("ä½¿ç”¨ YAML æ–‡ä»¶å®šä¹‰")]),s._v("ï¼š")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("å¯ä»¥åˆ›å»ºä¸€ä¸ª YAML æ–‡ä»¶æ¥å®šä¹‰ Secret å¯¹è±¡ï¼Œä¾‹å¦‚ï¼š")])]),s._v(" "),t("li",[t("div",{staticClass:"language-yaml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yaml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiVersion")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" v1\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kind")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Secret\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("metadata")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" my"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("secret\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("type")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Opaque\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("data")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("username")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" YWRtaW4= "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# base64 ç¼–ç åçš„ç”¨æˆ·å admin")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("password")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" MWYyZDFlMmU2N2Rm "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# base64 ç¼–ç åçš„å¯†ç  1f2d1e2e67df")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])])]),s._v(" "),t("li",[t("p",[t("code",[s._v("æ³¨æ„: è¿™ä¸ª YAML æ–‡ä»¶å®šä¹‰äº†ä¸€ä¸ªåä¸º my-secret çš„ Secret å¯¹è±¡ï¼Œå…¶ä¸­åŒ…å«äº†ä¸¤ä¸ª base64 ç¼–ç åçš„ key-value å¯¹ï¼šusername å’Œ passwordã€‚")])])])])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("ä½¿ç”¨æ–‡ä»¶åˆ›å»º:")])]),s._v(" "),t("ul",[t("li",[t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-n")]),s._v(" admin "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("./username\n$ "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-n")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("123456")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" ./password\n$ kubectl create secret generic mysecret --from-file"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("./username --from-file"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("./password\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])])])])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("é€šè¿‡ç¯å¢ƒå˜é‡åˆ›å»º")]),s._v("ï¼š")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("å¯ä»¥å°†ç¯å¢ƒå˜é‡çš„å€¼è½¬æ¢ä¸ºsecretã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å°†å½“å‰ç¯å¢ƒå˜é‡çš„å€¼è½¬æ¢ä¸ºsecretï¼š")])]),s._v(" "),t("li",[t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ kubectl create secret generic  my-config --from-env-file"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("env")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])])])])])]),s._v(" "),t("h4",{attrs:{id:"_2-2-ä½¿ç”¨"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-ä½¿ç”¨"}},[s._v("ğŸŒ™")]),s._v(" 2.2 ä½¿ç”¨")]),s._v(" "),t("ul",[t("li",[s._v("ç¯å¢ƒå˜é‡,å‘½ä»¤è¡Œå‚æ•°ä½¿ç”¨ Secret")])]),s._v(" "),t("div",{staticClass:"language-yaml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yaml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiVersion")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" v1\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kind")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Pod\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("metadata")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" my"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("pod\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("spec")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("containers")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" myapp"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("container\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("image")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" busybox\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("command")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/bin/sh"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"-c"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"sleep 3600"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("env")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" USERNAME\n          "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("valueFrom")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("secretKeyRef")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n              "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" my"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("secret\n              "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("key")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" username\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" PASSWORD\n          "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("valueFrom")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("secretKeyRef")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n              "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" my"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("secret\n              "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("key")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" password\n      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ä¸€æ¬¡æ€§æ³¨å…¥è¿™ä¸ª secret")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("envFrom")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("secretRef")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        \t  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" my"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("secret\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("restartPolicy")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Never\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br")])]),t("ul",[t("li",[s._v("volume ä½¿ç”¨")])]),s._v(" "),t("div",{staticClass:"language-yaml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yaml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiVersion")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" v1\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kind")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Pod\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("metadata")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" myapp"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("pod\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("spec")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("containers")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" myapp"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("container\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("image")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" busybox\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("command")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/bin/sh"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"-c"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"sleep 3600"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("volumeMounts")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" secret"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("volume\n          "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("mountPath")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" /data\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("volumes")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" secret"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("volume\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("secret")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("secretName")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" aaa\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br")])]),t("h2",{attrs:{id:"ç¬¬å…«ç« -ingress"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ç¬¬å…«ç« -ingress"}},[s._v("ğŸŒ™")]),s._v(" ç¬¬å…«ç«  Ingress")]),s._v(" "),t("ul",[t("li",[s._v("ä»€ä¹ˆæ˜¯ Ingress")]),s._v(" "),t("li",[s._v("Ingress å’Œ Service åŒºåˆ«")]),s._v(" "),t("li",[s._v("Ingress æ§åˆ¶å™¨ Traefik ä½¿ç”¨")]),s._v(" "),t("li",[s._v("Ingress Routeçš„å®šä¹‰")])]),s._v(" "),t("h3",{attrs:{id:"_1-ç®€ä»‹-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-ç®€ä»‹-2"}},[s._v("ğŸŒ™")]),s._v(" 1 ç®€ä»‹")]),s._v(" "),t("p",[s._v("https://kubernetes.io/zh-cn/docs/concepts/services-networking/ingress/")]),s._v(" "),t("p",[t("strong",[s._v("Ingress æ˜¯ä¸€ç§ Kubernetes èµ„æºç±»å‹ï¼Œå®ƒå…è®¸åœ¨ Kubernetes é›†ç¾¤ä¸­æš´éœ² HTTP å’Œ HTTPS æœåŠ¡")]),s._v("ã€‚é€šè¿‡ Ingressï¼Œæ‚¨å¯ä»¥å°†æµé‡è·¯ç”±åˆ°ä¸åŒçš„æœåŠ¡å’Œç«¯ç‚¹ï¼Œè€Œæ— éœ€ä½¿ç”¨ä¸åŒçš„è´Ÿè½½å‡è¡¡å™¨ã€‚Ingress é€šå¸¸ä½¿ç”¨ Ingress Controller å®ç°ï¼Œå®ƒæ˜¯ä¸€ä¸ªè¿è¡Œåœ¨ Kubernetes é›†ç¾¤ä¸­çš„è´Ÿè½½å‡è¡¡å™¨ï¼Œå®ƒæ ¹æ®Ingress è§„åˆ™é…ç½®è·¯ç”±è§„åˆ™å¹¶å°†æµé‡è½¬å‘åˆ°ç›¸åº”çš„æœåŠ¡ã€‚")]),s._v(" "),t("p",[s._v("åœ¨ Kubernetes ä¸­ï¼Œä¸€ä¸ª Ingress èµ„æºå®šä¹‰äº†ä¸€ç»„è§„åˆ™ï¼Œè¿™äº›è§„åˆ™ç”¨äºæŒ‡å®šå¤–éƒ¨æµé‡å¦‚ä½•åˆ°è¾¾é›†ç¾¤ä¸­çš„æœåŠ¡ã€‚Ingress èµ„æºå®šä¹‰åŒ…æ‹¬åŸŸåã€æœåŠ¡ã€è·¯å¾„å’Œå…¶ä»–ä¿¡æ¯ï¼Œé€šè¿‡è¿™äº›ä¿¡æ¯ï¼ŒIngress Controller å°±èƒ½å¤Ÿå°†è¯·æ±‚è·¯ç”±åˆ°æ­£ç¡®çš„æœåŠ¡ã€‚åŒæ—¶ï¼ŒIngress è¿˜æä¾›äº† TLS é€‰é¡¹ï¼Œå¯ä»¥ä½¿ç”¨ SSL/TLS æ¥åŠ å¯†ä¼ è¾“æ•°æ®ã€‚")]),s._v(" "),t("p",[s._v("æ€»ä¹‹ï¼ŒIngress æ˜¯ä¸€ç§å¼ºå¤§çš„ Kubernetes èµ„æºç±»å‹ï¼Œå¯ä»¥å¸®åŠ©æ‚¨åœ¨ Kubernetes é›†ç¾¤ä¸­è½»æ¾åœ°ç®¡ç† HTTP å’Œ HTTPS æœåŠ¡ï¼Œå¹¶æä¾›çµæ´»çš„è·¯ç”±å’Œè´Ÿè½½å‡è¡¡é€‰é¡¹ã€‚")]),s._v(" "),t("p",[s._v("Ingress ç®€å•ç¤ºä¾‹ï¼š")]),s._v(" "),t("p",[t("img",{attrs:{src:a(622),alt:"image-20230422104305506"}})]),s._v(" "),t("h3",{attrs:{id:"_2-ingress-å’Œ-service-åŒºåˆ«"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-ingress-å’Œ-service-åŒºåˆ«"}},[s._v("ğŸŒ™")]),s._v(" 2 Ingress å’Œ Service åŒºåˆ«")]),s._v(" "),t("p",[s._v("Ingress å’Œ Serviceéƒ½æ˜¯ Kubernetes ä¸­ç”¨äºå°†æµé‡è·¯ç”±åˆ°åº”ç”¨ç¨‹åºçš„æœºåˆ¶ï¼Œä½†å®ƒä»¬åœ¨è·¯ç”±å±‚é¢ä¸Šæœ‰æ‰€ä¸åŒï¼š")]),s._v(" "),t("ul",[t("li",[s._v("Service æ˜¯ Kubernetes ä¸­æŠ½è±¡çš„åº”ç”¨ç¨‹åºæœåŠ¡ï¼Œå®ƒå…¬å¼€äº†ä¸€ä¸ªå•ä¸€çš„IPåœ°å€å’Œç«¯å£ï¼Œå¯ä»¥ç”¨äºåœ¨ Kubernetes é›†ç¾¤å†…éƒ¨çš„ Pod ä¹‹é—´è¿›è¡Œæµé‡è·¯ç”±ã€‚")]),s._v(" "),t("li",[s._v("Ingress æ˜¯ä¸€ä¸ª Kubernetes èµ„æºå¯¹è±¡ï¼Œå®ƒæä¾›äº†å¯¹é›†ç¾¤å¤–éƒ¨æµé‡è·¯ç”±çš„è§„åˆ™ã€‚Ingress é€šè¿‡ä¸€ä¸ªå…¬å…±IPåœ°å€å’Œç«¯å£å°†æµé‡è·¯ç”±åˆ°ä¸€ä¸ªæˆ–å¤šä¸ªServiceã€‚")])]),s._v(" "),t("h3",{attrs:{id:"_3-ingress-controller"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-ingress-controller"}},[s._v("ğŸŒ™")]),s._v(" 3 Ingress Controller")]),s._v(" "),t("p",[s._v("Ingress Controller æ˜¯ Kubernetes ä¸­çš„ä¸€ç§èµ„æºï¼Œå®ƒè´Ÿè´£å°†å¤–éƒ¨è¯·æ±‚è½¬å‘åˆ°é›†ç¾¤å†…éƒ¨çš„ Service ä¸­ï¼Œå¹¶æä¾›è´Ÿè½½å‡è¡¡ã€SSL ç»ˆæ­¢ç­‰åŠŸèƒ½ã€‚Ingress Controller é€šå¸¸ä¼šè¿è¡Œåœ¨ Kubernetes é›†ç¾¤ä¸­ï¼Œä½œä¸ºä¸€ç»„ Deployment å’Œ Service çš„å½¢å¼éƒ¨ç½²ã€‚")]),s._v(" "),t("p",[s._v("å¸¸è§çš„ Ingress Controller åŒ…æ‹¬ï¼š")]),s._v(" "),t("ol",[t("li",[s._v("Nginx Ingress Controller æ˜¯ç”± Kubernetes ç¤¾åŒºç»´æŠ¤çš„å¦ä¸€ä¸ª Ingress Controllerï¼Œå®ƒä¹Ÿæ˜¯ä½¿ç”¨ Nginx ä½œä¸ºåå‘ä»£ç†å®ç°çš„ï¼Œå¯ä»¥æ”¯æŒ HTTP å’Œ HTTPS ç­‰åè®®ï¼Œæ”¯æŒè´Ÿè½½å‡è¡¡ã€è·¯ç”±ã€HTTPSè¯ä¹¦ç®¡ç†ç­‰åŠŸèƒ½ã€‚")]),s._v(" "),t("li",[s._v("Ingress Nginx Controller æ˜¯å®˜æ–¹ç»´æŠ¤çš„ä¸€ä¸ª Ingress Controllerï¼Œå®ƒæ˜¯ä½¿ç”¨ Nginx ä½œä¸ºåå‘ä»£ç†å®ç°çš„ï¼Œå¯ä»¥æ”¯æŒ HTTP å’Œ HTTPS ç­‰åè®®ï¼Œæ”¯æŒè´Ÿè½½å‡è¡¡ã€è·¯ç”±ã€HTTPSè¯ä¹¦ç®¡ç†ç­‰åŠŸèƒ½ã€‚")]),s._v(" "),t("li",[s._v("Traefik Ingress Controllerï¼šåŸºäº Go è¯­è¨€å¼€å‘çš„ Ingress Controllerï¼Œæ”¯æŒå¤šç§è·¯ç”±åŒ¹é…æ–¹å¼å’Œå¤šç§åç«¯æœåŠ¡å‘ç°æ–¹å¼ã€‚\n"),t("ul",[t("li",[t("strong",[s._v("Traefik Ingress Controller: æ ‡å‡†å®ç° æ”¯æŒ å®˜æ–¹ Ingress è·¯ç”±è§„åˆ™ æ³¨æ„: è¿™ç§æ–¹å¼ä½¿ç”¨ç¹ç!")])]),s._v(" "),t("li",[t("strong",[s._v("Traefik Route CRD(customer resuource definition)è‡ªå®šä¹‰èµ„æº  æ³¨æ„: ä½¿ç”¨è¿™ç§æ–¹å¼ç®€å•,è‡ªå®šä¹‰èµ„æºæ–¹å¼å®šä¹‰è·¯ç”±è§„åˆ™ã€‚")])])])]),s._v(" "),t("li",[s._v("Istio Ingress Controllerï¼šåŸºäº Istio Service Mesh å®ç°çš„ Ingress Controllerï¼Œæä¾›äº†æ›´ä¸°å¯Œçš„è´Ÿè½½å‡è¡¡ã€æµé‡æ§åˆ¶å’Œå®‰å…¨åŠŸèƒ½ã€‚")]),s._v(" "),t("li",[s._v("Kong Ingress Controllerï¼šä½¿ç”¨ Kong ä½œä¸ºåå‘ä»£ç†å®ç° Ingress åŠŸèƒ½ï¼Œæ”¯æŒ API ç®¡ç†å’Œ Gateway åŠŸèƒ½ã€‚")])]),s._v(" "),t("h3",{attrs:{id:"_4-ä½¿ç”¨-traefik-ingress-crd-æ–¹å¼"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-ä½¿ç”¨-traefik-ingress-crd-æ–¹å¼"}},[s._v("ğŸŒ™")]),s._v(" 4 ä½¿ç”¨ Traefik Ingress CRD æ–¹å¼")]),s._v(" "),t("p",[s._v("å®˜æ–¹ç½‘ç«™: https://doc.traefik.io/traefik/")]),s._v(" "),t("p",[s._v("å…·ä½“å‚è€ƒ: https://doc.traefik.io/traefik/user-guides/crd-acme/")]),s._v(" "),t("h4",{attrs:{id:"_1-pod-æ— æ³•è®¿é—®-service-è§£å†³æ–¹æ¡ˆ"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-pod-æ— æ³•è®¿é—®-service-è§£å†³æ–¹æ¡ˆ"}},[s._v("ğŸŒ™")]),s._v(" 1 pod æ— æ³•è®¿é—® Service è§£å†³æ–¹æ¡ˆ")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ kubectl edit cm kube-proxy "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-n")]),s._v(" kube-system\nipvs:\nexcludeCIDRs: null\nminSyncPeriod: 0s\nscheduler: "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v("\nstrictARP: "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),s._v("\nsyncPeriod: 0s\ntcpFinTimeout: 0s\ntcpTimeout: 0s\nudpTimeout: 0s\nkind: KubeProxyConfiguration\nmetricsBindAddress: "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v("\nmode: "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ipvs"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#è¿™é‡Œé»˜è®¤ä¸ºç©ºï¼Œå¡«å†™ipvsä¿å­˜")]),s._v("\n\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" /etc/sysconfig/modules/ipvs.modules "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("EOF\n#!/bin/bash\nmodprobe -- ip_vs\nmodprobe -- ip_vs_rr\nmodprobe -- ip_vs_wrr\nmodprobe -- ip_vs_sh\nmodprobe -- nf_conntrack\nmodprobe -- br_netfilter\nEOF")]),s._v("\n\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("755")]),s._v(" /etc/sysconfig/modules/ipvs.modules "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("bash")]),s._v(" /etc/sysconfig/modules/ipvs.modules "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" lsmod "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-e")]),s._v(" ip_vs "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-e")]),s._v(" nf_conntrack_ipv4\n\n$ kubectl get pod "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-n")]),s._v(" kube-system "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" kube-proxy "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("awk")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('\'{system("kubectl delete pod "$1" -n kube-system")}\'')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br")])]),t("h2",{attrs:{id:"ç¬¬ä¹ç« -å‘½åç©ºé—´"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ç¬¬ä¹ç« -å‘½åç©ºé—´"}},[s._v("ğŸŒ™")]),s._v(" ç¬¬ä¹ç«  å‘½åç©ºé—´")]),s._v(" "),t("ul",[t("li",[s._v("å‘½åç©ºé—´ ä»¥åŠ ä½œç”¨")]),s._v(" "),t("li",[s._v("å‘½åç©ºé—´åŸºæœ¬æ“ä½œ")]),s._v(" "),t("li",[s._v("è·¨å‘½åç©ºé—´è¯´æ˜")])]),s._v(" "),t("h3",{attrs:{id:"_1-å‘½åç©ºé—´"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-å‘½åç©ºé—´"}},[s._v("ğŸŒ™")]),s._v(" 1 å‘½åç©ºé—´")]),s._v(" "),t("p",[s._v("Kubernetes ä¸­å‘½åç©ºé—´ï¼ˆNamespaceï¼‰æ˜¯ç”¨æ¥éš”ç¦» Kubernetes é›†ç¾¤å†…çš„ä¸åŒèµ„æºå¯¹è±¡çš„ä¸€ç§æ–¹å¼ã€‚æ¯ä¸ª Kubernetes å¯¹è±¡éƒ½å¿…é¡»è¢«åˆ†é…åˆ°ä¸€ä¸ªå‘½åç©ºé—´ä¸­ï¼Œè€Œä¸”é»˜è®¤æƒ…å†µä¸‹ï¼Œä¸€ä¸ªå¯¹è±¡åªèƒ½è¢«åŒä¸€å‘½åç©ºé—´å†…çš„å…¶ä»–å¯¹è±¡è®¿é—®ã€‚Kubernetes å¯ä»¥å¸®åŠ©ç”¨æˆ·åœ¨åŒä¸€é›†ç¾¤å†…éƒ¨éƒ¨ç½²å¤šä¸ªç‹¬ç«‹çš„åº”ç”¨ç¨‹åºï¼Œæ¯ä¸ªåº”ç”¨ç¨‹åºéƒ½åœ¨è‡ªå·±çš„å‘½åç©ºé—´å†…è¿è¡Œã€‚")]),s._v(" "),t("h3",{attrs:{id:"_2-åŸºæœ¬æ“ä½œ"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-åŸºæœ¬æ“ä½œ"}},[s._v("ğŸŒ™")]),s._v(" 2 åŸºæœ¬æ“ä½œ")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# åˆ›å»ºå‘½åç©ºé—´")]),s._v("\n$ kubectl create namespace"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("ns testapp\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# éƒ¨ç½²åº”ç”¨åˆ°æŒ‡å®šçš„å‘½åç©ºé—´")]),s._v("\n$ kubectl apply "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-f")]),s._v(" app.yml "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--namespace")]),s._v(" testapp\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# æŸ¥è¯¢")]),s._v("\n$ kubectl get pod "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--namespace")]),s._v(" kube-system\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("ul",[t("li",[s._v("ä½¿ç”¨ yml å½¢å¼åˆ›å»º")])]),s._v(" "),t("div",{staticClass:"language-yaml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yaml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiVersion")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" v1\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kind")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Namespace\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("metadata")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" ems\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("p",[s._v("å¯ä»¥ç”¨ "),t("a",{attrs:{href:"https://github.com/ahmetb/kubectx",target:"_blank",rel:"noopener noreferrer"}},[s._v("kubens"),t("OutboundLink")],1),s._v(" å¿«é€Ÿåˆ‡æ¢ namespace")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# åˆ—å‡ºæ‰€æœ‰å‘½åç©ºé—´")]),s._v("\n$ kubens\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# åˆ‡æ¢å‘½åç©ºé—´")]),s._v("\n$ kubens kube-system\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# å›åˆ°ä¸Šä¸ªå‘½åç©ºé—´")]),s._v("\n$ kubens -\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("h3",{attrs:{id:"_3-å‘½åç©ºé—´è¯´æ˜"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-å‘½åç©ºé—´è¯´æ˜"}},[s._v("ğŸŒ™")]),s._v(" 3 å‘½åç©ºé—´è¯´æ˜")]),s._v(" "),t("p",[s._v("ä¸‹é¢æ˜¯ä¸€äº›å¸¸è§çš„å¯ä»¥è·¨å‘½åç©ºé—´çš„èµ„æºå¯¹è±¡ï¼š")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("Node")])]),s._v(" "),t("li",[t("code",[s._v("Namespace")])]),s._v(" "),t("li",[t("code",[s._v("ClusterRole")])]),s._v(" "),t("li",[t("code",[s._v("ClusterRoleBinding")])]),s._v(" "),t("li",[t("code",[s._v("CustomResourceDefinition")])])]),s._v(" "),t("p",[s._v("ä¸‹é¢æ˜¯ä¸€äº›ä¸èƒ½è·¨å‘½åç©ºé—´çš„èµ„æºå¯¹è±¡ï¼š")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("Pod")])]),s._v(" "),t("li",[t("code",[s._v("ReplicaSet")])]),s._v(" "),t("li",[t("code",[s._v("Deployment")])]),s._v(" "),t("li",[t("code",[s._v("Service")])]),s._v(" "),t("li",[t("code",[s._v("ConfigMap")])]),s._v(" "),t("li",[t("code",[s._v("Secret")])]),s._v(" "),t("li",[t("code",[s._v("Ingress")])]),s._v(" "),t("li",[t("code",[s._v("PersistentVolume")])]),s._v(" "),t("li",[t("code",[s._v("PersistentVolumeClaim")])]),s._v(" "),t("li",[t("code",[s._v("Role")])]),s._v(" "),t("li",[t("code",[s._v("RoleBinding")])]),s._v(" "),t("li",[t("code",[s._v("ServiceAccount")])])]),s._v(" "),t("h2",{attrs:{id:"ç¬¬åç« -helm"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ç¬¬åç« -helm"}},[s._v("ğŸŒ™")]),s._v(" ç¬¬åç«  Helm")]),s._v(" "),t("ul",[t("li",[s._v("ä»€ä¹ˆæ˜¯ Helm")]),s._v(" "),t("li",[s._v("å®‰è£… Helm")]),s._v(" "),t("li",[s._v("é‡è¦æ¦‚å¿µ")]),s._v(" "),t("li",[s._v("ä½¿ç”¨ Helm")])]),s._v(" "),t("h3",{attrs:{id:"_1-ç®€ä»‹-3"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-ç®€ä»‹-3"}},[s._v("ğŸŒ™")]),s._v(" 1 ç®€ä»‹")]),s._v(" "),t("p",[s._v("â€‹\tå®˜ç½‘åœ°å€: https://helm.sh/zh/")]),s._v(" "),t("p",[s._v("â€‹\tHelmæ˜¯ä¸€ä¸ªKubernetesåº”ç”¨ç¨‹åºåŒ…ç®¡ç†å·¥å…·ï¼Œå®ƒå…è®¸ä½ è½»æ¾ç®¡ç†å’Œéƒ¨ç½²Kubernetesåº”ç”¨ç¨‹åºã€‚Helmé€šè¿‡ä½¿ç”¨ç§°ä¸ºChartsçš„é¢„å®šä¹‰æ¨¡æ¿æ¥ç®€åŒ–Kubernetesåº”ç”¨ç¨‹åºçš„éƒ¨ç½²å’Œç®¡ç†ã€‚ChartåŒ…å«äº†ä¸€ç»„Kuberneteså¯¹è±¡å®šä¹‰ï¼Œå¯ä»¥æè¿°ä¸€ä¸ªåº”ç”¨ç¨‹åºçš„å®Œæ•´éƒ¨ç½²å’Œèµ„æºéœ€æ±‚ï¼ŒåŒ…æ‹¬Deploymentã€Serviceã€ConfigMapã€Secretç­‰ã€‚ä½¿ç”¨Helmï¼Œä½ å¯ä»¥è½»æ¾åœ°å®‰è£…ã€å‡çº§ã€å¸è½½å’Œå›æ»šKubernetesåº”ç”¨ç¨‹åºã€‚")]),s._v(" "),t("p",[s._v("åŒæ—¶ï¼ŒHelmè¿˜æä¾›äº†ä¸€äº›ä¾¿æ·çš„åŠŸèƒ½ï¼Œå¦‚ä¾èµ–ç®¡ç†ã€å…¨å±€å˜é‡ã€æ¡ä»¶æ¸²æŸ“ç­‰ï¼Œå¯ä»¥å¸®åŠ©ä½ æ›´å¥½åœ°ç®¡ç†åº”ç”¨ç¨‹åºçš„éƒ¨ç½²ã€‚Helmæœ‰ä¸¤ä¸ªä¸»è¦çš„ç»„ä»¶ï¼šHelmå®¢æˆ·ç«¯ï¼ˆhelmï¼‰å’ŒHelmæœåŠ¡å™¨ï¼ˆTillerï¼‰ã€‚Helmå®¢æˆ·ç«¯å¯ä»¥åœ¨æœ¬åœ°è¿è¡Œï¼Œè€ŒTilleråˆ™è¿è¡Œåœ¨Kubernetesé›†ç¾¤ä¸­ï¼Œå¹¶è´Ÿè´£å°†Chartsè½¬æ¢ä¸ºKuberneteså¯¹è±¡ã€‚")]),s._v(" "),t("h3",{attrs:{id:"_2-å®‰è£…"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-å®‰è£…"}},[s._v("ğŸŒ™")]),s._v(" 2 å®‰è£…")]),s._v(" "),t("p",[s._v("ä¸‹è½½åœ°å€: https://github.com/helm/helm/releases")]),s._v(" "),t("blockquote",[t("p",[s._v("æ¯ä¸ªHelm "),t("a",{attrs:{href:"https://github.com/helm/helm/releases",target:"_blank",rel:"noopener noreferrer"}},[s._v("ç‰ˆæœ¬"),t("OutboundLink")],1),s._v("éƒ½æä¾›äº†å„ç§æ“ä½œç³»ç»Ÿçš„äºŒè¿›åˆ¶ç‰ˆæœ¬ï¼Œè¿™äº›ç‰ˆæœ¬å¯ä»¥æ‰‹åŠ¨ä¸‹è½½å’Œå®‰è£…ã€‚")])]),s._v(" "),t("ol",[t("li",[t("p",[s._v("ä¸‹è½½ "),t("a",{attrs:{href:"https://github.com/helm/helm/releases",target:"_blank",rel:"noopener noreferrer"}},[s._v("éœ€è¦çš„ç‰ˆæœ¬"),t("OutboundLink")],1)])]),s._v(" "),t("li",[t("p",[s._v("è§£å‹("),t("code",[s._v("tar -zxvf helm-v3.0.0-linux-amd64.tar.gz")]),s._v(")")])]),s._v(" "),t("li",[t("p",[s._v("åœ¨è§£å‹ç›®å½•ä¸­æ‰¾åˆ°"),t("code",[s._v("helm")]),s._v("ç¨‹åºï¼Œç§»åŠ¨åˆ°éœ€è¦çš„ç›®å½•ä¸­("),t("code",[s._v("mv linux-amd64/helm /usr/local/bin/helm")]),s._v(")")])]),s._v(" "),t("li",[t("p",[s._v("æ·»åŠ ä»“åº“: helm repo add bitnami https://charts.bitnami.com/bitnami")])]),s._v(" "),t("li",[t("p",[s._v("éªŒè¯å®‰è£…: "),t("code",[s._v("helm help")]),s._v(".")])])]),s._v(" "),t("h3",{attrs:{id:"_3-é‡è¦æ¦‚å¿µ"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-é‡è¦æ¦‚å¿µ"}},[s._v("ğŸŒ™")]),s._v(" 3 é‡è¦æ¦‚å¿µ")]),s._v(" "),t("ul",[t("li",[t("p",[t("em",[t("strong",[s._v("Chart")])]),s._v(" ä»£è¡¨ç€ Helm åŒ…ã€‚å®ƒåŒ…å«åœ¨ Kubernetes é›†ç¾¤å†…éƒ¨è¿è¡Œåº”ç”¨ç¨‹åºï¼Œå·¥å…·æˆ–æœåŠ¡æ‰€éœ€çš„æ‰€æœ‰èµ„æºå®šä¹‰ã€‚ä½ å¯ä»¥æŠŠå®ƒçœ‹ä½œæ˜¯ Homebrew formulaï¼ŒApt dpkgï¼Œæˆ– Yum RPM åœ¨Kubernetes ä¸­çš„ç­‰ä»·ç‰©ã€‚")])]),s._v(" "),t("li",[t("p",[t("em",[t("strong",[s._v("Repository")]),s._v("ï¼ˆä»“åº“ï¼‰")]),s._v(" æ˜¯ç”¨æ¥å­˜æ”¾å’Œå…±äº« charts çš„åœ°æ–¹ã€‚å®ƒå°±åƒ Perl çš„ "),t("a",{attrs:{href:"https://www.cpan.org/",target:"_blank",rel:"noopener noreferrer"}},[s._v("CPAN æ¡£æ¡ˆåº“ç½‘ç»œ"),t("OutboundLink")],1),s._v(" æˆ–æ˜¯ Fedora çš„ "),t("a",{attrs:{href:"https://src.fedoraproject.org/",target:"_blank",rel:"noopener noreferrer"}},[s._v("è½¯ä»¶åŒ…ä»“åº“"),t("OutboundLink")],1),s._v("ï¼Œåªä¸è¿‡å®ƒæ˜¯ä¾› Kubernetes åŒ…æ‰€ä½¿ç”¨çš„ã€‚")])]),s._v(" "),t("li",[t("p",[t("em",[t("strong",[s._v("Release")])]),s._v(" æ˜¯è¿è¡Œåœ¨ Kubernetes é›†ç¾¤ä¸­çš„ chart çš„å®ä¾‹ã€‚ä¸€ä¸ª chart é€šå¸¸å¯ä»¥åœ¨åŒä¸€ä¸ªé›†ç¾¤ä¸­å®‰è£…å¤šæ¬¡ã€‚æ¯ä¸€æ¬¡å®‰è£…éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ "),t("em",[s._v("release")]),s._v("ã€‚ä»¥ MySQL chartä¸ºä¾‹ï¼Œå¦‚æœä½ æƒ³åœ¨ä½ çš„é›†ç¾¤ä¸­è¿è¡Œä¸¤ä¸ªæ•°æ®åº“ï¼Œä½ å¯ä»¥å®‰è£…è¯¥chartä¸¤æ¬¡ã€‚æ¯ä¸€ä¸ªæ•°æ®åº“éƒ½ä¼šæ‹¥æœ‰å®ƒè‡ªå·±çš„ "),t("em",[s._v("release")]),s._v(" å’Œ "),t("em",[s._v("release name")]),s._v("ã€‚")])])]),s._v(" "),t("h3",{attrs:{id:"_4-ä½¿ç”¨"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-ä½¿ç”¨"}},[s._v("ğŸŒ™")]),s._v(" 4 ä½¿ç”¨")]),s._v(" "),t("h4",{attrs:{id:"_4-1-æœç´¢-charts"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-æœç´¢-charts"}},[s._v("ğŸŒ™")]),s._v(" 4.1 æœç´¢ charts")]),s._v(" "),t("p",[s._v("Helm è‡ªå¸¦ä¸€ä¸ªå¼ºå¤§çš„æœç´¢å‘½ä»¤ï¼Œå¯ä»¥ç”¨æ¥ä»ä¸¤ç§æ¥æºä¸­è¿›è¡Œæœç´¢ï¼š")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("helm search hub")]),s._v(" ä» "),t("a",{attrs:{href:"https://artifacthub.io/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Artifact Hub"),t("OutboundLink")],1),s._v(" ä¸­æŸ¥æ‰¾å¹¶åˆ—å‡º helm chartsã€‚ Artifact Hubä¸­å­˜æ”¾äº†å¤§é‡ä¸åŒçš„ä»“åº“ã€‚")]),s._v(" "),t("li",[t("code",[s._v("helm search repo")]),s._v(" ä»ä½ æ·»åŠ ï¼ˆä½¿ç”¨ "),t("code",[s._v("helm repo add")]),s._v("ï¼‰åˆ°æœ¬åœ° helm å®¢æˆ·ç«¯ä¸­çš„ä»“åº“ä¸­è¿›è¡ŒæŸ¥æ‰¾ã€‚è¯¥å‘½ä»¤åŸºäºæœ¬åœ°æ•°æ®è¿›è¡Œæœç´¢ï¼Œæ— éœ€è¿æ¥äº’è”ç½‘ã€‚")])]),s._v(" "),t("h4",{attrs:{id:"_4-2-å®‰è£…"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-å®‰è£…"}},[s._v("ğŸŒ™")]),s._v(" 4.2 å®‰è£…")]),s._v(" "),t("p",[s._v("ä½¿ç”¨ "),t("code",[s._v("helm install")]),s._v(" å‘½ä»¤æ¥å®‰è£…ä¸€ä¸ªæ–°çš„ helm åŒ…ã€‚æœ€ç®€å•çš„ä½¿ç”¨æ–¹æ³•åªéœ€è¦ä¼ å…¥ä¸¤ä¸ªå‚æ•°ï¼šä½ å‘½åçš„releaseåå­—å’Œä½ æƒ³å®‰è£…çš„chartçš„åç§°ã€‚")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@k8s-node1 ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# helm install nginx bitnami/nginx")]),s._v("\nNAME: nginx\nLAST DEPLOYED: Wed Apr  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" 07:18:04 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2023")]),s._v("\nNAMESPACE: kube-system\nSTATUS: deployed\nREVISION: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\nTEST SUITE: None\nNOTES:\nCHART NAME: nginx\nCHART VERSION: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("13.2")]),s._v(".34\nAPP VERSION: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.23")]),s._v(".4\n\n** Please be patient "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("while")]),s._v(" the chart is being deployed **\nNGINX can be accessed through the following DNS name from within your cluster:\n\n    nginx.kube-system.svc.cluster.local "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("port "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\nTo access NGINX from outside the cluster, follow the steps below:\n\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(". Get the NGINX URL by running these commands:\n\n  NOTE: It may take a few minutes "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" the LoadBalancer IP to be available.\n        Watch the status with: "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'kubectl get svc --namespace kube-system -w nginx'")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("SERVICE_PORT")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("kubectl get "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--namespace")]),s._v(" kube-system "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-o")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("jsonpath")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"{.spec.ports[0].port}"')]),s._v(" services nginx"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("SERVICE_IP")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("kubectl get svc "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--namespace")]),s._v(" kube-system nginx "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-o")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("jsonpath")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'{.status.loadBalancer.ingress[0].ip}'")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"http://'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${SERVICE_IP}")]),s._v(":"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${SERVICE_PORT}")]),s._v('"')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br")])]),t("blockquote",[t("p",[s._v("æ³¨æ„: å®‰è£…chartæ—¶åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„ "),t("em",[s._v("release")]),s._v(" å¯¹è±¡ã€‚ä¸Šè¿°å‘å¸ƒè¢«å‘½åä¸º "),t("code",[s._v("nginx")]),s._v("ã€‚ ï¼ˆå¦‚æœæƒ³è®©Helmç”Ÿæˆä¸€ä¸ªåç§°ï¼Œåˆ é™¤å‘å¸ƒåç§°å¹¶ä½¿ç”¨"),t("code",[s._v("--generate-name")]),s._v("ã€‚ï¼‰")])]),s._v(" "),t("p",[s._v("helm å®‰è£…é¡ºåº: \thttps://helm.sh/zh/docs/intro/using_helm/")]),s._v(" "),t("hr"),s._v(" "),t("h4",{attrs:{id:"_4-3-æŸ¥çœ‹åˆ—è¡¨"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-3-æŸ¥çœ‹åˆ—è¡¨"}},[s._v("ğŸŒ™")]),s._v(" 4.3 æŸ¥çœ‹åˆ—è¡¨")]),s._v(" "),t("p",[s._v("ä½ å¯ä»¥é€šè¿‡ "),t("code",[s._v("helm list")]),s._v(" å‘½ä»¤çœ‹åˆ°å½“å‰éƒ¨ç½²çš„æ‰€æœ‰ releaseï¼š")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@k8s-node1 ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# helm list")]),s._v("\nNAME    NAMESPACE       REVISION        UPDATED                                 STATUS          CHART           APP VERSION\nnginx   kube-system     "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("               "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2023")]),s._v("-04-05 07:34:48.421708425 "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-0400")]),s._v(" EDT deployed        nginx-13.2.34   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.23")]),s._v(".4 \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("h4",{attrs:{id:"_4-3-æŸ¥çœ‹çŠ¶æ€"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-3-æŸ¥çœ‹çŠ¶æ€"}},[s._v("ğŸŒ™")]),s._v(" 4.3 æŸ¥çœ‹çŠ¶æ€")]),s._v(" "),t("p",[s._v("ä½ å¯ä»¥ä½¿ç”¨ "),t("code",[s._v("helm status")]),s._v(" æ¥è¿½è¸ª release çš„çŠ¶æ€ï¼Œæˆ–æ˜¯é‡æ–°è¯»å–é…ç½®ä¿¡æ¯ï¼š")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@k8s-node1 ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# helm status nginx")]),s._v("\nNAME: nginx\nLAST DEPLOYED: Wed Apr  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" 07:18:04 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2023")]),s._v("\nNAMESPACE: kube-system\nSTATUS: deployed\nREVISION: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\nTEST SUITE: None\nNOTES:\nCHART NAME: nginx\nCHART VERSION: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("13.2")]),s._v(".34\nAPP VERSION: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.23")]),s._v(".4\n\n** Please be patient "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("while")]),s._v(" the chart is being deployed **\nNGINX can be accessed through the following DNS name from within your cluster:\n\n    nginx.kube-system.svc.cluster.local "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("port "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\nTo access NGINX from outside the cluster, follow the steps below:\n\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(". Get the NGINX URL by running these commands:\n\n  NOTE: It may take a few minutes "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" the LoadBalancer IP to be available.\n        Watch the status with: "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'kubectl get svc --namespace kube-system -w nginx'")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("SERVICE_PORT")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("kubectl get "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--namespace")]),s._v(" kube-system "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-o")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("jsonpath")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"{.spec.ports[0].port}"')]),s._v(" services nginx"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("SERVICE_IP")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("kubectl get svc "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--namespace")]),s._v(" kube-system nginx "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-o")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("jsonpath")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'{.status.loadBalancer.ingress[0].ip}'")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"http://'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${SERVICE_IP}")]),s._v(":"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${SERVICE_PORT}")]),s._v('"')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br")])]),t("h4",{attrs:{id:"_4-4-å¸è½½"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-4-å¸è½½"}},[s._v("ğŸŒ™")]),s._v(" 4.4 å¸è½½")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@k8s-node1 ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# helm uninstall nginx")]),s._v("\nrelease "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"nginx"')]),s._v(" uninstalled\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h3",{attrs:{id:"_5-å®‰è£…è‡ªå®šä¹‰-chart"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-å®‰è£…è‡ªå®šä¹‰-chart"}},[s._v("ğŸŒ™")]),s._v(" 5 å®‰è£…è‡ªå®šä¹‰ Chart")]),s._v(" "),t("p",[s._v("ä¸Šè¿°å®‰è£…æ–¹å¼åªä¼šä½¿ç”¨ chart çš„é»˜è®¤é…ç½®é€‰é¡¹ã€‚å¾ˆå¤šæ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦è‡ªå®šä¹‰ chart æ¥æŒ‡å®šæˆ‘ä»¬æƒ³è¦çš„é…ç½®ã€‚")]),s._v(" "),t("h4",{attrs:{id:"_5-1-æ‹‰å–è‡ªå®šä¹‰çš„-chart"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-1-æ‹‰å–è‡ªå®šä¹‰çš„-chart"}},[s._v("ğŸŒ™")]),s._v(" 5.1 æ‹‰å–è‡ªå®šä¹‰çš„ chart")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@k8s-node1 ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# helm create app")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("blockquote",[t("p",[t("code",[s._v("æ³¨æ„: å½“å‰ç›®å½•ä¸­ä¼šå‡ºç°ä¸€ä¸ª nginx-xxx.tgz æ–‡ä»¶ è¿™ä¸ªæ–‡ä»¶å°±æ˜¯ charts çš„åŒ…ã€‚")])])]),s._v(" "),t("h4",{attrs:{id:"_5-2-æŸ¥çœ‹-chart-ç›®å½•ç»“æ„"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-2-æŸ¥çœ‹-chart-ç›®å½•ç»“æ„"}},[s._v("ğŸŒ™")]),s._v(" 5.2 æŸ¥çœ‹ chart ç›®å½•ç»“æ„")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("app/\n  Chart.yaml\n  values.yaml\n  charts/\n  templates/\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("ul",[t("li",[t("p",[t("code",[s._v("templates/")]),s._v(" ç›®å½•åŒ…æ‹¬äº†æ¨¡æ¿æ–‡ä»¶ã€‚å½“Helmè¯„ä¼°chartæ—¶ï¼Œä¼šé€šè¿‡æ¨¡æ¿æ¸²æŸ“å¼•æ“å°†æ‰€æœ‰æ–‡ä»¶å‘é€åˆ°"),t("code",[s._v("templates/")]),s._v("ç›®å½•ä¸­ã€‚ ç„¶åæ”¶é›†æ¨¡æ¿çš„ç»“æœå¹¶å‘é€ç»™Kubernetesã€‚")])]),s._v(" "),t("li",[t("p",[t("code",[s._v("values.yaml")]),s._v(" æ–‡ä»¶ä¹Ÿå¯¼å…¥åˆ°äº†æ¨¡æ¿ã€‚è¿™ä¸ªæ–‡ä»¶åŒ…å«äº†chartçš„ "),t("em",[s._v("é»˜è®¤å€¼")]),s._v(" ã€‚è¿™äº›å€¼ä¼šåœ¨ç”¨æˆ·æ‰§è¡Œ"),t("code",[s._v("helm install")]),s._v(" æˆ– "),t("code",[s._v("helm upgrade")]),s._v("æ—¶è¢«è¦†ç›–ã€‚")])]),s._v(" "),t("li",[t("p",[t("code",[s._v("Chart.yaml")]),s._v(" æ–‡ä»¶åŒ…å«äº†è¯¥chartçš„æè¿°ã€‚ä½ å¯ä»¥ä»æ¨¡æ¿ä¸­è®¿é—®å®ƒã€‚"),t("code",[s._v("charts/")]),s._v("ç›®å½• "),t("em",[s._v("å¯ä»¥")]),s._v(" åŒ…å«å…¶ä»–çš„chart(ç§°ä¹‹ä¸º "),t("em",[s._v("å­chart")]),s._v(")ã€‚")])])]),s._v(" "),t("h4",{attrs:{id:"_5-3-è‡ªå®šä¹‰æ¨¡æ¿"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-3-è‡ªå®šä¹‰æ¨¡æ¿"}},[s._v("ğŸŒ™")]),s._v(" 5.3 è‡ªå®šä¹‰æ¨¡æ¿")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-rf")]),s._v(" mychart/templates/*\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[s._v("ç¼–å†™ namespace.yaml")])]),s._v(" "),t("div",{staticClass:"language-yaml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yaml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiVersion")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" v1\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kind")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Namespace\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("metadata")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" .Chart.Name "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("namespace")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" .Values.namespace "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("ul",[t("li",[s._v("ç¼–å†™ deployment.yml")])]),s._v(" "),t("div",{staticClass:"language-yaml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yaml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiVersion")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" apps/v1\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kind")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Deployment\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("metadata")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" .Chart.Name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("namespace")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(".Values.namespace"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("labels")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("app")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" .Chart.Name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("spec")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("replicas")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" .Values.replicas "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("template")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("metadata")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" .Chart.Name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("labels")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("app")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" .Chart.Name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("spec")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("containers")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" .Chart.Name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("image")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" .Values.image"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("imagePullPolicy")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(".Values.imagePullPolicy"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("ports")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("containerPort")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(".Values.containerPort"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("restartPolicy")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" .Values.restartPolicy "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("selector")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("matchLabels")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("app")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" .Chart.Name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br")])]),t("ul",[t("li",[s._v("ç¼–å†™ service.yml")])]),s._v(" "),t("div",{staticClass:"language-yaml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yaml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiVersion")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" v1\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kind")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Service\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("metadata")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(".Chart.Name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("namespace")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(".Values.namespace"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("spec")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("selector")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("app")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(".Chart.Name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("ports")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("port")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(".Values.service.port"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("targetPort")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(".Values.containerPort"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("type")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" .Values.service.type "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br")])]),t("ul",[t("li",[s._v("ç¼–å†™ Chart.yml")])]),s._v(" "),t("div",{staticClass:"language-yaml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yaml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiVersion")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" v2\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" app\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("description")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" A Helm chart for Kubernetes\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# A chart can be either an 'application' or a 'library' chart.")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Application charts are a collection of templates that can be packaged into versioned archives")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# to be deployed.")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Library charts provide useful utilities or functions for the chart developer. They're included as")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# a dependency of application charts to inject those utilities and functions into the rendering")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# pipeline. Library charts do not define any templates and therefore cannot be deployed.")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("type")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" application\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# This is the chart version. This version number should be incremented each time you make changes")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# to the chart and its templates, including the app version.")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Versions are expected to follow Semantic Versioning (https://semver.org/)")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("version")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" 0.1.0\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# This is the version number of the application being deployed. This version number should be")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# incremented each time you make changes to the application. Versions are not expected to")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# follow Semantic Versioning. They should reflect the version the application is using.")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# It is recommended to use it with quotes.")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("appVersion")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1.16.0"')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br")])]),t("ul",[t("li",[s._v("ç¼–å†™ values.yaml")])]),s._v(" "),t("div",{staticClass:"language-yml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("replicas")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("namespace")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" app\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("image")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nginx"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.19")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("imagePullPolicy")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" IfNotPresent\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("restartPolicy")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Always\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("containerPort")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("service")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("port")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("type")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" ClusterIP\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br")])]),t("h4",{attrs:{id:"_5-4-éªŒè¯æ˜¯å¦å­˜åœ¨é”™è¯¯"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-4-éªŒè¯æ˜¯å¦å­˜åœ¨é”™è¯¯"}},[s._v("ğŸŒ™")]),s._v(" 5.4 éªŒè¯æ˜¯å¦å­˜åœ¨é”™è¯¯")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ helm lint app\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h4",{attrs:{id:"_5-5-æ‰“åŒ…è‡ªå®šä¹‰-chart"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-5-æ‰“åŒ…è‡ªå®šä¹‰-chart"}},[s._v("ğŸŒ™")]),s._v(" 5.5 æ‰“åŒ…è‡ªå®šä¹‰ chart")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ helm package app\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h4",{attrs:{id:"_5-6-å®‰è£…-chart"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-6-å®‰è£…-chart"}},[s._v("ğŸŒ™")]),s._v(" 5.6 å®‰è£… chart")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ helm "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" app myapp-1.tgz\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])])])}),[],!1,null,null,null);t.default=e.exports}}]);