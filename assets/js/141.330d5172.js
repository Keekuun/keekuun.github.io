(window.webpackJsonp=window.webpackJsonp||[]).push([[141],{846:function(t,s,n){"use strict";n.r(s);var a=n(2),e=Object(a.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"nodejsä¹‹streamæ¨¡å—å­¦ä¹ ç¬”è®°"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#nodejsä¹‹streamæ¨¡å—å­¦ä¹ ç¬”è®°"}},[t._v("ğŸŒ™")]),t._v(" NodeJSä¹‹streamæ¨¡å—å­¦ä¹ ç¬”è®°")]),t._v(" "),s("h2",{attrs:{id:"_1-stream-æµ-æ¨¡å—ç®€ä»‹"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-stream-æµ-æ¨¡å—ç®€ä»‹"}},[t._v("ğŸŒ™")]),t._v(" 1.streamï¼ˆæµï¼‰æ¨¡å—ç®€ä»‹")]),t._v(" "),s("p",[t._v("æµï¼ˆstreamï¼‰æ˜¯ Node.js ä¸­å¤„ç†æµå¼æ•°æ®çš„æŠ½è±¡æ¥å£ã€‚ "),s("code",[t._v("stream")]),t._v(" æ¨¡å—ç”¨äºæ„å»ºå®ç°äº†æµæ¥å£çš„å¯¹è±¡ã€‚")]),t._v(" "),s("p",[t._v("Node.js æä¾›äº†å¤šç§æµå¯¹è±¡ã€‚ ä¾‹å¦‚ï¼Œ"),s("a",{attrs:{href:"http://nodejs.cn/s/2RqpEw",target:"_blank",rel:"noopener noreferrer"}},[t._v("HTTP æœåŠ¡å™¨çš„è¯·æ±‚"),s("OutboundLink")],1),t._v("å’Œ "),s("a",{attrs:{href:"http://nodejs.cn/s/tQWUzG",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("process.stdout")]),s("OutboundLink")],1),t._v(" éƒ½æ˜¯æµçš„å®ä¾‹ã€‚")]),t._v(" "),s("p",[t._v("æµå¯ä»¥æ˜¯å¯è¯»çš„ã€å¯å†™çš„ã€æˆ–è€…å¯è¯»å¯å†™çš„ã€‚ æ‰€æœ‰çš„æµéƒ½æ˜¯ "),s("a",{attrs:{href:"http://nodejs.cn/s/pGAddE",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("EventEmitter")]),s("OutboundLink")],1),t._v(" çš„å®ä¾‹ã€‚")]),t._v(" "),s("p",[t._v("è®¿é—® "),s("code",[t._v("stream")]),t._v(" æ¨¡å—ï¼š")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" stream "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'stream'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("å°½ç®¡ç†è§£æµçš„å·¥ä½œæ–¹å¼å¾ˆé‡è¦ï¼Œä½†æ˜¯ "),s("code",[t._v("stream")]),t._v(" æ¨¡å—ä¸»è¦ç”¨äºå¼€å‘è€…åˆ›å»ºæ–°ç±»å‹çš„æµå®ä¾‹ã€‚ å¯¹äºä»¥æ¶ˆè´¹æµå¯¹è±¡ä¸ºä¸»çš„å¼€å‘è€…ï¼Œæå°‘éœ€è¦ç›´æ¥ä½¿ç”¨ "),s("code",[t._v("stream")]),t._v(" æ¨¡å—ã€‚")]),t._v(" "),s("h2",{attrs:{id:"_2-æµçš„ç±»å‹"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-æµçš„ç±»å‹"}},[t._v("ğŸŒ™")]),t._v(" 2. æµçš„ç±»å‹")]),t._v(" "),s("p",[t._v("Node.js ä¸­æœ‰å››ç§åŸºæœ¬çš„æµç±»å‹ï¼š")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"http://nodejs.cn/s/9JUnJ8",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("Writable")]),s("OutboundLink")],1),t._v(" - å¯å†™å…¥æ•°æ®çš„æµï¼ˆä¾‹å¦‚ "),s("a",{attrs:{href:"http://nodejs.cn/s/VdSJQa",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("fs.createWriteStream()")]),s("OutboundLink")],1),t._v("ï¼‰ã€‚")]),t._v(" "),s("li",[s("a",{attrs:{href:"http://nodejs.cn/s/YuDKX1",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("Readable")]),s("OutboundLink")],1),t._v(" - å¯è¯»å–æ•°æ®çš„æµï¼ˆä¾‹å¦‚ "),s("a",{attrs:{href:"http://nodejs.cn/s/wiVPXD",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("fs.createReadStream()")]),s("OutboundLink")],1),t._v("ï¼‰ã€‚")]),t._v(" "),s("li",[s("a",{attrs:{href:"http://nodejs.cn/s/2iRabr",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("Duplex")]),s("OutboundLink")],1),t._v(" - å¯è¯»åˆå¯å†™çš„æµï¼ˆä¾‹å¦‚ "),s("a",{attrs:{href:"http://nodejs.cn/s/wsJ1o1",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("net.Socket")]),s("OutboundLink")],1),t._v("ï¼‰ã€‚")]),t._v(" "),s("li",[s("a",{attrs:{href:"http://nodejs.cn/s/fhVJQM",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("Transform")]),s("OutboundLink")],1),t._v(" - åœ¨è¯»å†™è¿‡ç¨‹ä¸­å¯ä»¥ä¿®æ”¹æˆ–è½¬æ¢æ•°æ®çš„ "),s("code",[t._v("Duplex")]),t._v(" æµï¼ˆä¾‹å¦‚ "),s("a",{attrs:{href:"http://nodejs.cn/s/n6ED45",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("zlib.createDeflate()")]),s("OutboundLink")],1),t._v("ï¼‰ã€‚")])]),t._v(" "),s("p",[t._v("æ­¤å¤–ï¼Œè¯¥æ¨¡å—è¿˜åŒ…æ‹¬å®ç”¨å‡½æ•° "),s("a",{attrs:{href:"http://nodejs.cn/s/kGvtzK",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("stream.pipeline()")]),s("OutboundLink")],1),t._v("ã€"),s("a",{attrs:{href:"http://nodejs.cn/s/DjDduq",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("stream.finished()")]),s("OutboundLink")],1),t._v(" å’Œ "),s("a",{attrs:{href:"http://nodejs.cn/s/bSCxhZ",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("stream.Readable.from()")]),s("OutboundLink")],1),t._v("ã€‚")]),t._v(" "),s("h2",{attrs:{id:"_3-å¯å†™æµ-stream-writable"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-å¯å†™æµ-stream-writable"}},[t._v("ğŸŒ™")]),t._v(" 3.å¯å†™æµ "),s("code",[t._v("stream.Writable")])]),t._v(" "),s("p",[t._v("å¯å†™æµæ˜¯å¯¹æ•°æ®è¦è¢«å†™å…¥çš„ç›®çš„åœ°çš„ä¸€ç§æŠ½è±¡ã€‚")]),t._v(" "),s("p",[t._v("å¯å†™æµçš„ä¾‹å­åŒ…æ‹¬ï¼š")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"http://nodejs.cn/s/2F5RHd",target:"_blank",rel:"noopener noreferrer"}},[t._v("å®¢æˆ·ç«¯çš„ HTTP è¯·æ±‚"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"http://nodejs.cn/s/rMXoZ1",target:"_blank",rel:"noopener noreferrer"}},[t._v("æœåŠ¡å™¨çš„ HTTP å“åº”"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"http://nodejs.cn/s/2uZDVA",target:"_blank",rel:"noopener noreferrer"}},[t._v("fs çš„å†™å…¥æµ"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"http://nodejs.cn/s/duYbh2",target:"_blank",rel:"noopener noreferrer"}},[t._v("zlib æµ"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"http://nodejs.cn/s/FuEfsg",target:"_blank",rel:"noopener noreferrer"}},[t._v("crypto æµ"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"http://nodejs.cn/s/wsJ1o1",target:"_blank",rel:"noopener noreferrer"}},[t._v("TCP socket"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"http://nodejs.cn/s/Su8gEr",target:"_blank",rel:"noopener noreferrer"}},[t._v("å­è¿›ç¨‹ stdin"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"http://nodejs.cn/s/tQWUzG",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("process.stdout")]),s("OutboundLink")],1),t._v("ã€"),s("a",{attrs:{href:"http://nodejs.cn/s/wPv5zY",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("process.stderr")]),s("OutboundLink")],1)])]),t._v(" "),s("p",[t._v("ä¸Šé¢çš„ä¸€äº›ä¾‹å­äº‹å®ä¸Šæ˜¯å®ç°äº†å¯å†™æµæ¥å£çš„ "),s("a",{attrs:{href:"http://nodejs.cn/s/2iRabr",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("Duplex")]),s("OutboundLink")],1),t._v(" æµã€‚")]),t._v(" "),s("p",[t._v("æ‰€æœ‰å¯å†™æµéƒ½å®ç°äº† "),s("code",[t._v("stream.Writable")]),t._v(" ç±»å®šä¹‰çš„æ¥å£ã€‚")]),t._v(" "),s("p",[t._v("å°½ç®¡å¯å†™æµçš„å…·ä½“å®ä¾‹å¯èƒ½ç•¥æœ‰å·®åˆ«ï¼Œä½†æ‰€æœ‰çš„å¯å†™æµéƒ½éµå¾ªåŒä¸€åŸºæœ¬çš„ä½¿ç”¨æ¨¡å¼ï¼Œå¦‚ä»¥ä¸‹ä¾‹å­æ‰€ç¤ºï¼š")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" myStream "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getWritableStreamSomehow")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nmyStream"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("write")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ä¸€äº›æ•°æ®'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nmyStream"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("write")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'æ›´å¤šæ•°æ®'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nmyStream"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("end")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'å®Œæˆå†™å…¥æ•°æ®'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br")])]),s("h3",{attrs:{id:"_3-1-stream-writable-äº‹ä»¶"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-stream-writable-äº‹ä»¶"}},[t._v("ğŸŒ™")]),t._v(" 3.1 "),s("code",[t._v("stream.Writable")]),t._v(" äº‹ä»¶")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("äº‹ä»¶åç§°")]),t._v(" "),s("th",[t._v("è¯´æ˜")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[s("code",[t._v("close")])]),t._v(" "),s("td",[t._v("å½“æµæˆ–å…¶åº•å±‚èµ„æºï¼ˆæ¯”å¦‚æ–‡ä»¶æè¿°ç¬¦ï¼‰è¢«å…³é—­æ—¶è§¦å‘ã€‚ è¡¨æ˜ä¸ä¼šå†è§¦å‘å…¶ä»–äº‹ä»¶ï¼Œä¹Ÿä¸ä¼šå†å‘ç”Ÿæ“ä½œã€‚å¦‚æœä½¿ç”¨ "),s("code",[t._v("emitClose")]),t._v(" é€‰é¡¹åˆ›å»º"),s("a",{attrs:{href:"http://nodejs.cn/s/9JUnJ8",target:"_blank",rel:"noopener noreferrer"}},[t._v("å¯å†™æµ"),s("OutboundLink")],1),t._v("ï¼Œåˆ™å®ƒå°†ä¼šå§‹ç»ˆå‘å‡º "),s("code",[t._v("'close'")]),t._v(" äº‹ä»¶ã€‚")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("drain")])]),t._v(" "),s("td",[t._v("å¦‚æœè°ƒç”¨ "),s("a",{attrs:{href:"http://nodejs.cn/s/doppiK",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("stream.write(chunk)")]),s("OutboundLink")],1),t._v(" è¿”å› "),s("code",[t._v("false")]),t._v("ï¼Œåˆ™å½“å¯ä»¥ç»§ç»­å†™å…¥æ•°æ®åˆ°æµæ—¶ä¼šè§¦å‘ "),s("code",[t._v("'drain'")]),t._v(" äº‹ä»¶ã€‚")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("error")])]),t._v(" "),s("td",[t._v("å¦‚æœåœ¨å†™å…¥æˆ–ç®¡é“æ•°æ®æ—¶å‘ç”Ÿé”™è¯¯ï¼Œåˆ™ä¼šè§¦å‘ "),s("code",[t._v("'error'")]),t._v(" äº‹ä»¶ã€‚ å½“è°ƒç”¨æ—¶ï¼Œç›‘å¬å™¨å›è°ƒä¼šä¼ å…¥ä¸€ä¸ª "),s("code",[t._v("Error")]),t._v(" å‚æ•°ã€‚é™¤éåœ¨åˆ›å»ºæµæ—¶å°† "),s("a",{attrs:{href:"http://nodejs.cn/s/u7KYa2",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("autoDestroy")]),s("OutboundLink")],1),t._v(" é€‰é¡¹è®¾ç½®ä¸º "),s("code",[t._v("false")]),t._v("ï¼Œå¦åˆ™åœ¨è§¦å‘ "),s("code",[t._v("'error'")]),t._v(" äº‹ä»¶æ—¶æµä¼šè¢«å…³é—­ã€‚åœ¨ "),s("code",[t._v("'error'")]),t._v(" ä¹‹åï¼Œé™¤ "),s("code",[t._v("'close'")]),t._v(" äº‹ä»¶å¤–ï¼Œä¸åº”å†è§¦å‘å…¶ä»–äº‹ä»¶ï¼ˆåŒ…æ‹¬ "),s("code",[t._v("'error'")]),t._v(" äº‹ä»¶ï¼‰ã€‚")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("finish")])]),t._v(" "),s("td",[t._v("è°ƒç”¨ "),s("a",{attrs:{href:"http://nodejs.cn/s/nvArK4",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("stream.end()")]),s("OutboundLink")],1),t._v(" ä¸”ç¼“å†²æ•°æ®éƒ½å·²ä¼ ç»™åº•å±‚ç³»ç»Ÿä¹‹åè§¦å‘ã€‚")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("pipe")])]),t._v(" "),s("td",[t._v("å½“åœ¨å¯è¯»æµä¸Šè°ƒç”¨ "),s("a",{attrs:{href:"http://nodejs.cn/s/Ea2ZNW",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("stream.pipe()")]),s("OutboundLink")],1),t._v(" æ–¹æ³•æ—¶ä¼šå‘å‡º "),s("code",[t._v("'pipe'")]),t._v(" äº‹ä»¶ï¼Œå¹¶å°†æ­¤å¯å†™æµæ·»åŠ åˆ°å…¶ç›®æ ‡é›†ã€‚")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("unpipe")])]),t._v(" "),s("td",[t._v("åœ¨å¯è¯»æµä¸Šè°ƒç”¨ "),s("a",{attrs:{href:"http://nodejs.cn/s/35GqHX",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("stream.unpipe()")]),s("OutboundLink")],1),t._v(" æ–¹æ³•æ—¶ä¼šå‘å‡º "),s("code",[t._v("'unpipe'")]),t._v("äº‹ä»¶ï¼Œä»å…¶ç›®æ ‡é›†ä¸­ç§»é™¤æ­¤å¯å†™æµã€‚å½“å¯è¯»æµé€šè¿‡ç®¡é“æµå‘å¯å†™æµå‘ç”Ÿé”™è¯¯æ—¶ï¼Œä¹Ÿä¼šè§¦å‘æ­¤äº‹ä»¶ã€‚")])])])]),t._v(" "),s("h3",{attrs:{id:"_3-2-stream-writableæ–¹æ³•"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-stream-writableæ–¹æ³•"}},[t._v("ğŸŒ™")]),t._v(" 3.2 "),s("code",[t._v("stream.Writable")]),t._v("æ–¹æ³•")]),t._v(" "),s("ul",[s("li",[s("p",[s("code",[t._v("writable.cork()")]),t._v("ï¼šå¼ºåˆ¶æŠŠæ‰€æœ‰å†™å…¥çš„æ•°æ®éƒ½ç¼“å†²åˆ°å†…å­˜ä¸­ã€‚ å½“è°ƒç”¨ "),s("a",{attrs:{href:"http://nodejs.cn/s/2Bzt8L",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("stream.uncork()")]),s("OutboundLink")],1),t._v(" æˆ– "),s("a",{attrs:{href:"http://nodejs.cn/s/nvArK4",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("stream.end()")]),s("OutboundLink")],1),t._v(" æ–¹æ³•æ—¶ï¼Œç¼“å†²çš„æ•°æ®æ‰ä¼šè¢«è¾“å‡ºã€‚")])]),t._v(" "),s("li",[s("p",[s("code",[t._v("writable.destroy([error])")]),t._v("ï¼šé”€æ¯æµã€‚ å¯é€‰åœ°è§¦å‘ "),s("code",[t._v("error")]),t._v("ï¼Œå¹¶ä¸”è§¦å‘ "),s("code",[t._v("'close'")]),t._v(" äº‹ä»¶ï¼ˆé™¤éå°† "),s("code",[t._v("emitClose")]),t._v(" è®¾ç½®ä¸º "),s("code",[t._v("false")]),t._v("ï¼‰ã€‚")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("error")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/qZ873x",target:"_blank",rel:"noopener noreferrer"}},[t._v("Error"),s("OutboundLink")],1),t._v(" å¯é€‰ï¼Œä½¿ç”¨ "),s("code",[t._v("'error'")]),t._v(" äº‹ä»¶è§¦å‘çš„é”™è¯¯ã€‚")]),t._v(" "),s("li",[t._v("è¿”å›: "),s("a",{attrs:{href:"http://nodejs.cn/s/v7Fsu2",target:"_blank",rel:"noopener noreferrer"}},[t._v("this"),s("OutboundLink")],1)])])]),t._v(" "),s("li",[s("p",[s("code",[t._v("writable.destroyed")]),t._v(" : boolean åœ¨è°ƒç”¨äº† "),s("a",{attrs:{href:"http://nodejs.cn/s/tLkQ7J",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("writable.destroy()")]),s("OutboundLink")],1),t._v(" ä¹‹åä¸º "),s("code",[t._v("true")]),t._v("ã€‚")])]),t._v(" "),s("li",[s("p",[s("code",[t._v("writable.end([chunk[, encoding]][, callback])")]),t._v(":è°ƒç”¨ "),s("code",[t._v("writable.end()")]),t._v(" è¡¨æ˜å·²æ²¡æœ‰æ•°æ®è¦è¢«å†™å…¥"),s("a",{attrs:{href:"http://nodejs.cn/s/9JUnJ8",target:"_blank",rel:"noopener noreferrer"}},[t._v("å¯å†™æµ"),s("OutboundLink")],1),t._v("ã€‚ å¯é€‰çš„ "),s("code",[t._v("chunk")]),t._v(" å’Œ "),s("code",[t._v("encoding")]),t._v(" å‚æ•°å¯ä»¥åœ¨å…³é—­æµä¹‹å‰å†å†™å…¥ä¸€å—æ•°æ®ã€‚ å¦‚æœä¼ å…¥äº† "),s("code",[t._v("callback")]),t._v(" å‡½æ•°ï¼Œåˆ™ä¼šåšä¸ºç›‘å¬å™¨æ·»åŠ åˆ° "),s("a",{attrs:{href:"http://nodejs.cn/s/VBJRc8",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("'finish'")]),s("OutboundLink")],1),t._v(" äº‹ä»¶å’Œ "),s("code",[t._v("'error'")]),t._v(" äº‹ä»¶ã€‚")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("chunk")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[t._v("string"),s("OutboundLink")],1),t._v(" | "),s("a",{attrs:{href:"http://nodejs.cn/s/6x1hD3",target:"_blank",rel:"noopener noreferrer"}},[t._v("Buffer"),s("OutboundLink")],1),t._v(" | "),s("a",{attrs:{href:"http://nodejs.cn/s/ZbDkpm",target:"_blank",rel:"noopener noreferrer"}},[t._v("Uint8Array"),s("OutboundLink")],1),t._v(" | "),s("a",{attrs:{href:"http://nodejs.cn/s/6sTGdS",target:"_blank",rel:"noopener noreferrer"}},[t._v("any"),s("OutboundLink")],1),t._v(" è¦å†™å…¥çš„æ•°æ®ã€‚ å¯¹äºéå¯¹è±¡æ¨¡å¼çš„æµï¼Œ "),s("code",[t._v("chunk")]),t._v(" å¿…é¡»æ˜¯å­—ç¬¦ä¸²ã€ "),s("code",[t._v("Buffer")]),t._v("ã€æˆ– "),s("code",[t._v("Uint8Array")]),t._v("ã€‚ å¯¹äºå¯¹è±¡æ¨¡å¼çš„æµï¼Œ "),s("code",[t._v("chunk")]),t._v(" å¯ä»¥æ˜¯ä»»ä½• JavaScript å€¼ï¼Œé™¤äº† "),s("code",[t._v("null")]),t._v("ã€‚")]),t._v(" "),s("li",[s("code",[t._v("encoding")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[t._v("string"),s("OutboundLink")],1),t._v(" å¦‚æœ "),s("code",[t._v("chunk")]),t._v(" æ˜¯å­—ç¬¦ä¸²ï¼Œåˆ™æŒ‡å®šå­—ç¬¦ç¼–ç ã€‚")]),t._v(" "),s("li",[s("code",[t._v("callback")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/ceTQa6",target:"_blank",rel:"noopener noreferrer"}},[t._v("function"),s("OutboundLink")],1),t._v(" å½“æµç»“æŸæˆ–æŠ¥é”™æ—¶çš„å›è°ƒå‡½æ•°ã€‚")]),t._v(" "),s("li",[t._v("è¿”å›: "),s("a",{attrs:{href:"http://nodejs.cn/s/v7Fsu2",target:"_blank",rel:"noopener noreferrer"}},[t._v("this"),s("OutboundLink")],1)])]),t._v(" "),s("p",[t._v("è°ƒç”¨ "),s("a",{attrs:{href:"http://nodejs.cn/s/nvArK4",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("stream.end()")]),s("OutboundLink")],1),t._v(" ä¹‹åå†è°ƒç”¨ "),s("a",{attrs:{href:"http://nodejs.cn/s/doppiK",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("stream.write()")]),s("OutboundLink")],1),t._v(" ä¼šå¯¼è‡´é”™è¯¯ã€‚")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å…ˆå†™å…¥ 'hello, 'ï¼Œç»“æŸå‰å†å†™å…¥ 'world!'ã€‚")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" fs "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'fs'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" file "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" fs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createWriteStream")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ä¾‹å­.txt'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nfile"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("write")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'hello, '")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nfile"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("end")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'world!'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åé¢ä¸å…è®¸å†å†™å…¥æ•°æ®ï¼")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br")])])]),t._v(" "),s("li",[s("p",[s("code",[t._v("writable.setDefaultEncoding(encoding)")]),t._v("ä¸º"),s("a",{attrs:{href:"http://nodejs.cn/s/9JUnJ8",target:"_blank",rel:"noopener noreferrer"}},[t._v("å¯å†™æµ"),s("OutboundLink")],1),t._v("è®¾ç½®é»˜è®¤çš„ "),s("code",[t._v("encoding")]),t._v("ã€‚è¿”å›ï¼šthis")])]),t._v(" "),s("li",[s("p",[s("code",[t._v("writable.uncork()")]),t._v("è°ƒç”¨ "),s("a",{attrs:{href:"http://nodejs.cn/s/HbaGHW",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("stream.cork()")]),s("OutboundLink")],1),t._v(" åç¼“å†²çš„æ‰€æœ‰æ•°æ®è¾“å‡ºåˆ°ç›®æ ‡ã€‚")]),t._v(" "),s("p",[t._v("å½“ä½¿ç”¨ "),s("a",{attrs:{href:"http://nodejs.cn/s/HbaGHW",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("writable.cork()")]),s("OutboundLink")],1),t._v(" å’Œ "),s("code",[t._v("writable.uncork()")]),t._v(" æ¥ç®¡ç†æµçš„å†™å…¥ç¼“å†²æ—¶ï¼Œå»ºè®®ä½¿ç”¨ "),s("code",[t._v("process.nextTick()")]),t._v(" æ¥å»¶è¿Ÿè°ƒç”¨ "),s("code",[t._v("writable.uncork()")]),t._v("ã€‚ é€šè¿‡è¿™ç§æ–¹å¼ï¼Œå¯ä»¥å¯¹å•ä¸ª Node.js äº‹ä»¶å¾ªç¯ä¸­è°ƒç”¨çš„æ‰€æœ‰ "),s("code",[t._v("writable.write()")]),t._v(" è¿›è¡Œæ‰¹å¤„ç†ã€‚")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("stream"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("cork")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nstream"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("write")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ä¸€äº› '")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nstream"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("write")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'æ•°æ® '")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nprocess"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("nextTick")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" stream"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("uncork")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br")])]),s("p",[t._v("å¦‚æœä¸€ä¸ªæµä¸Šå¤šæ¬¡è°ƒç”¨ "),s("a",{attrs:{href:"http://nodejs.cn/s/HbaGHW",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("writable.cork()")]),s("OutboundLink")],1),t._v("ï¼Œåˆ™å¿…é¡»è°ƒç”¨åŒæ ·æ¬¡æ•°çš„ "),s("code",[t._v("writable.uncork()")]),t._v(" æ‰èƒ½è¾“å‡ºç¼“å†²çš„æ•°æ®ã€‚")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("stream"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("cork")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nstream"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("write")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ä¸€äº› '")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nstream"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("cork")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nstream"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("write")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'æ•°æ® '")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nprocess"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("nextTick")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  stream"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("uncork")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ•°æ®ä¸ä¼šè¢«è¾“å‡ºï¼Œç›´åˆ°ç¬¬äºŒæ¬¡è°ƒç”¨ uncork()ã€‚")]),t._v("\n  stream"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("uncork")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br")])])]),t._v(" "),s("li",[s("p",[s("code",[t._v("writable.write(chunk[, encoding][, callback])")])]),t._v(" "),s("ul",[s("li",[s("code",[t._v("chunk")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[t._v("string"),s("OutboundLink")],1),t._v(" | "),s("a",{attrs:{href:"http://nodejs.cn/s/6x1hD3",target:"_blank",rel:"noopener noreferrer"}},[t._v("Buffer"),s("OutboundLink")],1),t._v(" | "),s("a",{attrs:{href:"http://nodejs.cn/s/ZbDkpm",target:"_blank",rel:"noopener noreferrer"}},[t._v("Uint8Array"),s("OutboundLink")],1),t._v(" | [any](è¦å†™å…¥çš„æ•°æ®ã€‚  å¯¹äºéå¯¹è±¡æ¨¡å¼çš„æµï¼Œ "),s("code",[t._v("chunk")]),t._v(" å¿…é¡»æ˜¯å­—ç¬¦ä¸²ã€ "),s("code",[t._v("Buffer")]),t._v(" æˆ– "),s("code",[t._v("Uint8Array")]),t._v("ã€‚ å¯¹äºå¯¹è±¡æ¨¡å¼çš„æµï¼Œ "),s("code",[t._v("chunk")]),t._v(" å¯ä»¥æ˜¯ä»»ä½• JavaScript å€¼ï¼Œé™¤äº† "),s("code",[t._v("null")]),t._v("ã€‚")]),t._v(" "),s("li",[s("code",[t._v("encoding")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[t._v("string"),s("OutboundLink")],1),t._v(" å¦‚æœ "),s("code",[t._v("chunk")]),t._v(" æ˜¯å­—ç¬¦ä¸²ï¼Œåˆ™æŒ‡å®šå­—ç¬¦ç¼–ç ã€‚")]),t._v(" "),s("li",[s("code",[t._v("callback")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/ceTQa6",target:"_blank",rel:"noopener noreferrer"}},[t._v("function"),s("OutboundLink")],1),t._v(" å½“æ•°æ®å—è¢«è¾“å‡ºåˆ°ç›®æ ‡åçš„å›è°ƒå‡½æ•°ã€‚")]),t._v(" "),s("li",[t._v("è¿”å›: "),s("a",{attrs:{href:"http://nodejs.cn/s/jFbvuT",target:"_blank",rel:"noopener noreferrer"}},[t._v("boolean"),s("OutboundLink")],1),t._v(" å¦‚æœæµéœ€è¦ç­‰å¾… "),s("code",[t._v("'drain'")]),t._v(" äº‹ä»¶è§¦å‘æ‰èƒ½ç»§ç»­å†™å…¥æ›´å¤šæ•°æ®ï¼Œåˆ™è¿”å› "),s("code",[t._v("false")]),t._v("ï¼Œå¦åˆ™è¿”å› "),s("code",[t._v("true")]),t._v("ã€‚")])]),t._v(" "),s("p",[s("code",[t._v("writable.write()")]),t._v(" å†™å…¥æ•°æ®åˆ°æµï¼Œå¹¶åœ¨æ•°æ®è¢«å®Œå…¨å¤„ç†ä¹‹åè°ƒç”¨ "),s("code",[t._v("callback")]),t._v("ã€‚ å¦‚æœå‘ç”Ÿé”™è¯¯ï¼Œåˆ™ "),s("code",[t._v("callback")]),t._v(" å¯èƒ½è¢«è°ƒç”¨ä¹Ÿå¯èƒ½ä¸è¢«è°ƒç”¨ã€‚ ä¸ºäº†å¯é åœ°æ£€æµ‹é”™è¯¯ï¼Œå¯ä»¥ä¸º "),s("code",[t._v("'error'")]),t._v(" äº‹ä»¶æ·»åŠ ç›‘å¬å™¨ã€‚ "),s("code",[t._v("callback")]),t._v(" ä¼šåœ¨è§¦å‘ "),s("code",[t._v("'error'")]),t._v(" ä¹‹å‰è¢«å¼‚æ­¥åœ°è°ƒç”¨ã€‚")]),t._v(" "),s("p",[t._v("åœ¨æ¥æ”¶äº† "),s("code",[t._v("chunk")]),t._v(" åï¼Œå¦‚æœå†…éƒ¨çš„ç¼“å†²å°äºåˆ›å»ºæµæ—¶é…ç½®çš„ "),s("code",[t._v("highWaterMark")]),t._v("ï¼Œåˆ™è¿”å› "),s("code",[t._v("true")]),t._v(" ã€‚ å¦‚æœè¿”å› "),s("code",[t._v("false")]),t._v(" ï¼Œåˆ™åº”è¯¥åœæ­¢å‘æµå†™å…¥æ•°æ®ï¼Œç›´åˆ° "),s("a",{attrs:{href:"http://nodejs.cn/s/gFdjtJ",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("'drain'")]),s("OutboundLink")],1),t._v(" äº‹ä»¶è¢«è§¦å‘ã€‚")]),t._v(" "),s("p",[t._v("å½“æµè¿˜æœªè¢«æ’ç©ºæ—¶ï¼Œè°ƒç”¨ "),s("code",[t._v("write()")]),t._v(" ä¼šç¼“å†² "),s("code",[t._v("chunk")]),t._v("ï¼Œå¹¶è¿”å› "),s("code",[t._v("false")]),t._v("ã€‚ ä¸€æ—¦æ‰€æœ‰å½“å‰ç¼“å†²çš„æ•°æ®å—éƒ½è¢«æ’ç©ºäº†ï¼ˆè¢«æ“ä½œç³»ç»Ÿæ¥æ”¶å¹¶ä¼ è¾“ï¼‰ï¼Œåˆ™è§¦å‘ "),s("code",[t._v("'drain'")]),t._v(" äº‹ä»¶ã€‚ å»ºè®®ä¸€æ—¦ "),s("code",[t._v("write()")]),t._v(" è¿”å› falseï¼Œåˆ™ä¸å†å†™å…¥ä»»ä½•æ•°æ®å—ï¼Œç›´åˆ° "),s("code",[t._v("'drain'")]),t._v(" äº‹ä»¶è¢«è§¦å‘ã€‚ å½“æµè¿˜æœªè¢«æ’ç©ºæ—¶ï¼Œä¹Ÿæ˜¯å¯ä»¥è°ƒç”¨ "),s("code",[t._v("write()")]),t._v("ï¼ŒNode.js ä¼šç¼“å†²æ‰€æœ‰è¢«å†™å…¥çš„æ•°æ®å—ï¼Œç›´åˆ°è¾¾åˆ°æœ€å¤§å†…å­˜å ç”¨ï¼Œè¿™æ—¶å®ƒä¼šæ— æ¡ä»¶ä¸­æ­¢ã€‚ ç”šè‡³åœ¨å®ƒä¸­æ­¢ä¹‹å‰ï¼Œ é«˜å†…å­˜å ç”¨å°†ä¼šå¯¼è‡´åƒåœ¾å›æ”¶å™¨çš„æ€§èƒ½å˜å·®å’Œ RSS å˜é«˜ï¼ˆå³ä½¿å†…å­˜ä¸å†éœ€è¦ï¼Œé€šå¸¸ä¹Ÿä¸ä¼šè¢«é‡Šæ”¾å›ç³»ç»Ÿï¼‰ã€‚ å¦‚æœè¿œç¨‹çš„å¦ä¸€ç«¯æ²¡æœ‰è¯»å–æ•°æ®ï¼ŒTCP çš„ socket å¯èƒ½æ°¸è¿œä¹Ÿä¸ä¼šæ’ç©ºï¼Œæ‰€ä»¥å†™å…¥åˆ°ä¸€ä¸ªä¸ä¼šæ’ç©ºçš„ socket å¯èƒ½ä¼šå¯¼è‡´è¿œç¨‹å¯åˆ©ç”¨çš„æ¼æ´ã€‚")]),t._v(" "),s("p",[t._v("å¯¹äº "),s("a",{attrs:{href:"http://nodejs.cn/s/fhVJQM",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("Transform")]),s("OutboundLink")],1),t._v(", å†™å…¥æ•°æ®åˆ°ä¸€ä¸ªä¸ä¼šæ’ç©ºçš„æµå°¤å…¶æˆé—®é¢˜ï¼Œå› ä¸º "),s("code",[t._v("Transform")]),t._v(" æµé»˜è®¤ä¼šè¢«æš‚åœï¼Œç›´åˆ°å®ƒä»¬è¢« pipe æˆ–è€…æ·»åŠ äº† "),s("code",[t._v("'data'")]),t._v(" æˆ– "),s("code",[t._v("'readable'")]),t._v(" äº‹ä»¶å¥æŸ„ã€‚")]),t._v(" "),s("p",[t._v("å¦‚æœè¦è¢«å†™å…¥çš„æ•°æ®å¯ä»¥æ ¹æ®éœ€è¦ç”Ÿæˆæˆ–è€…å–å¾—ï¼Œå»ºè®®å°†é€»è¾‘å°è£…ä¸ºä¸€ä¸ª"),s("a",{attrs:{href:"http://nodejs.cn/s/YuDKX1",target:"_blank",rel:"noopener noreferrer"}},[t._v("å¯è¯»æµ"),s("OutboundLink")],1),t._v("å¹¶ä¸”ä½¿ç”¨ "),s("a",{attrs:{href:"http://nodejs.cn/s/Ea2ZNW",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("stream.pipe()")]),s("OutboundLink")],1),t._v("ã€‚ å¦‚æœè¦ä¼˜å…ˆè°ƒç”¨ "),s("code",[t._v("write()")]),t._v("ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ "),s("a",{attrs:{href:"http://nodejs.cn/s/gFdjtJ",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("'drain'")]),s("OutboundLink")],1),t._v(" äº‹ä»¶æ¥é˜²æ­¢èƒŒå‹ä¸é¿å…å†…å­˜é—®é¢˜:")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("write")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("data"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" cb")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("stream"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("write")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    stream"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("once")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'drain'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" cb"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    process"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("nextTick")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("cb"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åœ¨å›è°ƒå‡½æ•°è¢«æ‰§è¡Œåå†è¿›è¡Œå…¶ä»–çš„å†™å…¥ã€‚")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("write")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'hello'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'å®Œæˆå†™å…¥ï¼Œå¯ä»¥è¿›è¡Œæ›´å¤šçš„å†™å…¥'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br")])]),s("p",[t._v("å¯¹è±¡æ¨¡å¼ä¸‹çš„å¯å†™æµå°†ä¼šå§‹ç»ˆå¿½ç•¥ "),s("code",[t._v("encoding")]),t._v(" å‚æ•°ã€‚")])])]),t._v(" "),s("h2",{attrs:{id:"_4-å¯è¯»æµ-stream-readable"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-å¯è¯»æµ-stream-readable"}},[t._v("ğŸŒ™")]),t._v(" 4.å¯è¯»æµ "),s("code",[t._v("stream.Readable")])]),t._v(" "),s("p",[t._v("å¯è¯»æµæ˜¯å¯¹æä¾›æ•°æ®çš„æ¥æºçš„ä¸€ç§æŠ½è±¡ã€‚")]),t._v(" "),s("p",[t._v("å¯è¯»æµçš„ä¾‹å­åŒ…æ‹¬ï¼š")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"http://nodejs.cn/s/2RqpEw",target:"_blank",rel:"noopener noreferrer"}},[t._v("å®¢æˆ·ç«¯çš„ HTTP å“åº”"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"http://nodejs.cn/s/2RqpEw",target:"_blank",rel:"noopener noreferrer"}},[t._v("æœåŠ¡å™¨çš„ HTTP è¯·æ±‚"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"http://nodejs.cn/s/C3Eioq",target:"_blank",rel:"noopener noreferrer"}},[t._v("fs çš„è¯»å–æµ"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"http://nodejs.cn/s/duYbh2",target:"_blank",rel:"noopener noreferrer"}},[t._v("zlib æµ"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"http://nodejs.cn/s/FuEfsg",target:"_blank",rel:"noopener noreferrer"}},[t._v("crypto æµ"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"http://nodejs.cn/s/wsJ1o1",target:"_blank",rel:"noopener noreferrer"}},[t._v("TCP socket"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"http://nodejs.cn/s/F2vs59",target:"_blank",rel:"noopener noreferrer"}},[t._v("å­è¿›ç¨‹ stdout ä¸ stderr"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"http://nodejs.cn/s/gagmJq",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("process.stdin")]),s("OutboundLink")],1)])]),t._v(" "),s("p",[t._v("æ‰€æœ‰"),s("a",{attrs:{href:"http://nodejs.cn/s/YuDKX1",target:"_blank",rel:"noopener noreferrer"}},[t._v("å¯è¯»æµ"),s("OutboundLink")],1),t._v("éƒ½å®ç°äº† "),s("code",[t._v("stream.Readable")]),t._v(" ç±»å®šä¹‰çš„æ¥å£ã€‚")]),t._v(" "),s("h3",{attrs:{id:"_4-1-ä¸¤ç§è¯»å–æ¨¡å¼"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-ä¸¤ç§è¯»å–æ¨¡å¼"}},[t._v("ğŸŒ™")]),t._v(" 4.1 ä¸¤ç§è¯»å–æ¨¡å¼")]),t._v(" "),s("ul",[s("li",[t._v("æµåŠ¨æ¨¡å¼ï¼ˆflowingï¼‰ï¼šæ•°æ®è‡ªåŠ¨ä»åº•å±‚ç³»ç»Ÿè¯»å–ï¼Œå¹¶é€šè¿‡ "),s("a",{attrs:{href:"http://nodejs.cn/s/pGAddE",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("EventEmitter")]),s("OutboundLink")],1),t._v(" æ¥å£çš„äº‹ä»¶å°½å¯èƒ½å¿«åœ°è¢«æä¾›ç»™åº”ç”¨ç¨‹åºã€‚")]),t._v(" "),s("li",[t._v("æš‚åœæ¨¡å¼ï¼ˆpausedï¼‰ï¼šå¿…é¡»æ˜¾å¼è°ƒç”¨ "),s("a",{attrs:{href:"http://nodejs.cn/s/SpgRaa",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("stream.read()")]),s("OutboundLink")],1),t._v(" è¯»å–æ•°æ®å—ã€‚")])]),t._v(" "),s("p",[t._v("æ‰€æœ‰"),s("a",{attrs:{href:"http://nodejs.cn/s/YuDKX1",target:"_blank",rel:"noopener noreferrer"}},[t._v("å¯è¯»æµ"),s("OutboundLink")],1),t._v("éƒ½å¼€å§‹äºæš‚åœæ¨¡å¼ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼åˆ‡æ¢åˆ°"),s("strong",[t._v("æµåŠ¨æ¨¡å¼")]),t._v("ï¼š")]),t._v(" "),s("ul",[s("li",[t._v("æ·»åŠ  "),s("a",{attrs:{href:"http://nodejs.cn/s/8CCPjN",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("'data'")]),s("OutboundLink")],1),t._v(" äº‹ä»¶å¥æŸ„ã€‚")]),t._v(" "),s("li",[t._v("è°ƒç”¨ "),s("a",{attrs:{href:"http://nodejs.cn/s/Zhf28N",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("stream.resume()")]),s("OutboundLink")],1),t._v(" æ–¹æ³•ã€‚")]),t._v(" "),s("li",[t._v("è°ƒç”¨ "),s("a",{attrs:{href:"http://nodejs.cn/s/Ea2ZNW",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("stream.pipe()")]),s("OutboundLink")],1),t._v(" æ–¹æ³•å°†æ•°æ®å‘é€åˆ°"),s("a",{attrs:{href:"http://nodejs.cn/s/9JUnJ8",target:"_blank",rel:"noopener noreferrer"}},[t._v("å¯å†™æµ"),s("OutboundLink")],1),t._v("ã€‚")])]),t._v(" "),s("p",[t._v("å¯è¯»æµå¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼åˆ‡æ¢å›"),s("strong",[t._v("æš‚åœæ¨¡å¼")]),t._v("ï¼š")]),t._v(" "),s("ul",[s("li",[t._v("å¦‚æœæ²¡æœ‰ç®¡é“ç›®æ ‡ï¼Œåˆ™è°ƒç”¨ "),s("a",{attrs:{href:"http://nodejs.cn/s/jqytVw",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("stream.pause()")]),s("OutboundLink")],1),t._v("ã€‚")]),t._v(" "),s("li",[t._v("å¦‚æœæœ‰ç®¡é“ç›®æ ‡ï¼Œåˆ™ç§»é™¤æ‰€æœ‰ç®¡é“ç›®æ ‡ã€‚è°ƒç”¨ "),s("a",{attrs:{href:"http://nodejs.cn/s/35GqHX",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("stream.unpipe()")]),s("OutboundLink")],1),t._v(" å¯ä»¥ç§»é™¤å¤šä¸ªç®¡é“ç›®æ ‡ã€‚")])]),t._v(" "),s("h3",{attrs:{id:"_4-2-ä¸‰ç§çŠ¶æ€"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-ä¸‰ç§çŠ¶æ€"}},[t._v("ğŸŒ™")]),t._v(" 4.2 ä¸‰ç§çŠ¶æ€")]),t._v(" "),s("p",[t._v("åœ¨ä»»æ„æ—¶åˆ»ï¼Œå¯è¯»æµä¼šå¤„äºä»¥ä¸‹ä¸‰ç§çŠ¶æ€ä¹‹ä¸€ï¼š")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("readable.readableFlowing === null")])]),t._v(" "),s("li",[s("code",[t._v("readable.readableFlowing === false")])]),t._v(" "),s("li",[s("code",[t._v("readable.readableFlowing === true")])])]),t._v(" "),s("p",[t._v("å½“ "),s("code",[t._v("readable.readableFlowing")]),t._v(" ä¸º "),s("code",[t._v("null")]),t._v(" æ—¶ï¼Œæ²¡æœ‰æä¾›æ¶ˆè´¹æµæ•°æ®çš„æœºåˆ¶ï¼Œæ‰€ä»¥æµä¸ä¼šäº§ç”Ÿæ•°æ®ã€‚ åœ¨è¿™ä¸ªçŠ¶æ€ä¸‹ï¼Œç›‘å¬ "),s("code",[t._v("'data'")]),t._v(" äº‹ä»¶ã€è°ƒç”¨ "),s("code",[t._v("readable.pipe()")]),t._v("ã€æˆ–è°ƒç”¨ "),s("code",[t._v("readable.resume()")]),t._v(" éƒ½ä¼šä½¿ "),s("code",[t._v("readable.readableFlowing")]),t._v(" åˆ‡æ¢åˆ° "),s("code",[t._v("true")]),t._v("ï¼Œå¯è¯»æµå¼€å§‹ä¸»åŠ¨åœ°äº§ç”Ÿæ•°æ®å¹¶è§¦å‘äº‹ä»¶ã€‚")]),t._v(" "),s("p",[t._v("è°ƒç”¨ "),s("code",[t._v("readable.pause()")]),t._v("ã€ "),s("code",[t._v("readable.unpipe()")]),t._v("ã€æˆ–æ¥æ”¶åˆ°èƒŒå‹ï¼Œåˆ™ "),s("code",[t._v("readable.readableFlowing")]),t._v(" ä¼šè¢«è®¾ä¸º "),s("code",[t._v("false")]),t._v("ï¼Œæš‚æ—¶åœæ­¢äº‹ä»¶æµåŠ¨ä½†ä¸ä¼šåœæ­¢æ•°æ®çš„ç”Ÿæˆã€‚ åœ¨è¿™ä¸ªçŠ¶æ€ä¸‹ï¼Œä¸º "),s("code",[t._v("'data'")]),t._v(" äº‹ä»¶ç»‘å®šç›‘å¬å™¨ä¸ä¼šä½¿ "),s("code",[t._v("readable.readableFlowing")]),t._v(" åˆ‡æ¢åˆ° "),s("code",[t._v("true")]),t._v("ã€‚")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" PassThrough"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Writable "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'stream'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" pass "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("PassThrough")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" writable "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Writable")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\npass"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("pipe")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("writable"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\npass"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("unpipe")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("writable"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// readableFlowing ç°åœ¨ä¸º falseã€‚")]),t._v("\n\npass"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'data'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("chunk")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("chunk"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\npass"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("write")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ok'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä¸ä¼šè§¦å‘ 'data' äº‹ä»¶ã€‚")]),t._v("\npass"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("resume")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å¿…é¡»è°ƒç”¨å®ƒæ‰ä¼šè§¦å‘ 'data' äº‹ä»¶ã€‚")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br")])]),s("p",[t._v("å½“ "),s("code",[t._v("readable.readableFlowing")]),t._v(" ä¸º "),s("code",[t._v("false")]),t._v(" æ—¶ï¼Œæ•°æ®å¯èƒ½ä¼šå †ç§¯åœ¨æµçš„å†…éƒ¨ç¼“å†²ä¸­ã€‚")]),t._v(" "),s("h3",{attrs:{id:"_4-3-stream-readableäº‹ä»¶"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-3-stream-readableäº‹ä»¶"}},[t._v("ğŸŒ™")]),t._v(" 4.3 "),s("code",[t._v("stream.Readable")]),t._v("äº‹ä»¶")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("äº‹ä»¶åç§°")]),t._v(" "),s("th",[t._v("è¯´æ˜")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[s("code",[t._v("close")])]),t._v(" "),s("td",[t._v("æµæˆ–å…¶åº•å±‚èµ„æºï¼ˆæ¯”å¦‚æ–‡ä»¶æè¿°ç¬¦ï¼‰è¢«å…³é—­æ—¶è§¦å‘ "),s("code",[t._v("'close'")]),t._v(" äº‹ä»¶ã€‚ è¯¥äº‹ä»¶è¡¨æ˜ä¸ä¼šå†è§¦å‘å…¶ä»–äº‹ä»¶ï¼Œä¹Ÿä¸ä¼šå†å‘ç”Ÿæ“ä½œã€‚å¦‚æœä½¿ç”¨ "),s("code",[t._v("emitClose")]),t._v(" é€‰é¡¹åˆ›å»º"),s("a",{attrs:{href:"http://nodejs.cn/s/YuDKX1",target:"_blank",rel:"noopener noreferrer"}},[t._v("å¯è¯»æµ"),s("OutboundLink")],1),t._v("ï¼Œåˆ™å®ƒå°†ä¼šå§‹ç»ˆå‘å‡º "),s("code",[t._v("'close'")]),t._v(" äº‹ä»¶ã€‚")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("data")])]),t._v(" "),s("td",[t._v("å½“æµå°†æ•°æ®å—ä¼ é€ç»™æ¶ˆè´¹è€…åè§¦å‘ã€‚ å½“è°ƒç”¨ "),s("code",[t._v("readable.pipe()")]),t._v("ï¼Œ "),s("code",[t._v("readable.resume()")]),t._v(" æˆ–ç»‘å®šç›‘å¬å™¨åˆ° "),s("code",[t._v("'data'")]),t._v(" äº‹ä»¶æ—¶ï¼Œæµä¼šè½¬æ¢åˆ°æµåŠ¨æ¨¡å¼ã€‚ å½“è°ƒç”¨ "),s("code",[t._v("readable.read()")]),t._v(" ä¸”æœ‰æ•°æ®å—è¿”å›æ—¶ï¼Œä¹Ÿä¼šè§¦å‘ "),s("code",[t._v("'data'")]),t._v(" äº‹ä»¶ã€‚å°† "),s("code",[t._v("'data'")]),t._v(" äº‹ä»¶ç›‘å¬å™¨é™„åŠ åˆ°å°šæœªæ˜¾å¼æš‚åœçš„æµå°†ä¼šä½¿æµåˆ‡æ¢ä¸ºæµåŠ¨æ¨¡å¼ã€‚ æ•°æ®å°†ä¼šåœ¨å¯ç”¨æ—¶ç«‹å³ä¼ é€’ã€‚")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("end")])]),t._v(" "),s("td",[t._v("å½“æµä¸­æ²¡æœ‰æ•°æ®å¯ä¾›æ¶ˆè´¹æ—¶è§¦å‘ã€‚"),s("code",[t._v("'end'")]),t._v(" äº‹ä»¶åªæœ‰åœ¨æ•°æ®è¢«å®Œå…¨æ¶ˆè´¹æ‰åæ‰ä¼šè§¦å‘ã€‚ è¦æƒ³è§¦å‘è¯¥äº‹ä»¶ï¼Œå¯ä»¥å°†æµè½¬æ¢åˆ°æµåŠ¨æ¨¡å¼ï¼Œæˆ–åå¤è°ƒç”¨ "),s("a",{attrs:{href:"http://nodejs.cn/s/SpgRaa",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("stream.read()")]),s("OutboundLink")],1),t._v(" ç›´åˆ°æ•°æ®è¢«æ¶ˆè´¹å®Œã€‚")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("error")])]),t._v(" "),s("td",[s("code",[t._v("'error'")]),t._v(" äº‹ä»¶å¯èƒ½éšæ—¶ç”± "),s("code",[t._v("Readable")]),t._v(" å®ç°è§¦å‘ã€‚ é€šå¸¸ï¼Œå¦‚æœåº•å±‚çš„æµç”±äºåº•å±‚å†…éƒ¨çš„æ•…éšœè€Œæ— æ³•ç”Ÿæˆæ•°æ®ï¼Œæˆ–è€…æµçš„å®ç°å°è¯•æ¨é€æ— æ•ˆçš„æ•°æ®å—ï¼Œåˆ™å¯èƒ½ä¼šå‘ç”Ÿè¿™ç§æƒ…å†µã€‚ç›‘å¬å™¨å›è°ƒå°†ä¼šä¼ å…¥ä¸€ä¸ª "),s("code",[t._v("Error")]),t._v(" å¯¹è±¡ã€‚")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("pause")])]),t._v(" "),s("td",[t._v("å½“è°ƒç”¨ "),s("a",{attrs:{href:"http://nodejs.cn/s/jqytVw",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("stream.pause()")]),s("OutboundLink")],1),t._v(" å¹¶ä¸” "),s("code",[t._v("readsFlowing")]),t._v(" ä¸ä¸º "),s("code",[t._v("false")]),t._v(" æ—¶ï¼Œå°±ä¼šè§¦å‘ "),s("code",[t._v("'pause'")]),t._v(" äº‹ä»¶ã€‚")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("readable")])]),t._v(" "),s("td",[t._v("å½“æœ‰æ•°æ®å¯ä»æµä¸­è¯»å–æ—¶ï¼Œå°±ä¼šè§¦å‘ "),s("code",[t._v("'readable'")]),t._v(" äº‹ä»¶ã€‚ åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œä¸º "),s("code",[t._v("'readable'")]),t._v(" äº‹ä»¶é™„åŠ ç›‘å¬å™¨å°†ä¼šå¯¼è‡´å°†ä¸€äº›æ•°æ®è¯»å…¥å†…éƒ¨ç¼“å†²åŒºã€‚")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("resume")])]),t._v(" "),s("td",[t._v("å½“è°ƒç”¨ "),s("a",{attrs:{href:"http://nodejs.cn/s/Zhf28N",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("stream.resume()")]),s("OutboundLink")],1),t._v(" å¹¶ä¸” "),s("code",[t._v("readsFlowing")]),t._v(" ä¸ä¸º "),s("code",[t._v("true")]),t._v(" æ—¶ï¼Œå°†ä¼šè§¦å‘ "),s("code",[t._v("'resume'")]),t._v(" äº‹ä»¶ã€‚")])])])]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" readable "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getReadableStreamSomehow")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nreadable"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'data'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("chunk")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("æ¥æ”¶åˆ° ")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("chunk"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length"),s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v(" ä¸ªå­—èŠ‚çš„æ•°æ®")]),s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br")])]),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" readable "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getReadableStreamSomehow")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nreadable"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'data'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("chunk")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("æ¥æ”¶åˆ° ")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("chunk"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length"),s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v(" ä¸ªå­—èŠ‚çš„æ•°æ®")]),s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nreadable"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'end'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'å·²æ²¡æœ‰æ•°æ®'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br")])]),s("h3",{attrs:{id:"_4-4-stream-readableæ–¹æ³•"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-4-stream-readableæ–¹æ³•"}},[t._v("ğŸŒ™")]),t._v(" 4.4 "),s("code",[t._v("stream.Readable")]),t._v("æ–¹æ³•")]),t._v(" "),s("ul",[s("li",[s("p",[s("code",[t._v("readable.destroy([error])")]),t._v("ï¼šé”€æ¯æµã€‚ å¯é€‰åœ°è§¦å‘ "),s("code",[t._v("'error'")]),t._v(" äº‹ä»¶ï¼Œå¹¶è§¦å‘ "),s("code",[t._v("'close'")]),t._v(" äº‹ä»¶ï¼ˆé™¤éå°† "),s("code",[t._v("emitClose")]),t._v(" è®¾ç½®ä¸º "),s("code",[t._v("false")]),t._v("ï¼‰ã€‚ åœ¨æ­¤è°ƒç”¨ä¹‹åï¼Œå¯è¯»æµå°†ä¼šé‡Šæ”¾æ‰€æœ‰å†…éƒ¨çš„èµ„æºï¼Œå¹¶ä¸”å°†ä¼šå¿½ç•¥å¯¹ "),s("code",[t._v("push()")]),t._v(" çš„åç»­è°ƒç”¨ã€‚")]),t._v(" "),s("p",[t._v("ä¸€æ—¦è°ƒç”¨ "),s("code",[t._v("destroy()")]),t._v("ï¼Œåˆ™ä¸ä¼šå†æ‰§è¡Œä»»ä½•å…¶ä»–æ“ä½œï¼Œå¹¶ä¸”é™¤äº† "),s("code",[t._v("_destroy")]),t._v(" ä»¥å¤–çš„å…¶ä»–é”™è¯¯éƒ½ä¸ä¼šä½œä¸º "),s("code",[t._v("'error'")]),t._v(" è§¦å‘ã€‚è¿”å›: "),s("a",{attrs:{href:"http://nodejs.cn/s/v7Fsu2",target:"_blank",rel:"noopener noreferrer"}},[t._v("this"),s("OutboundLink")],1)])]),t._v(" "),s("li",[s("p",[s("code",[t._v("readable.destroyed")]),t._v("ï¼šåœ¨è°ƒç”¨ "),s("a",{attrs:{href:"http://nodejs.cn/s/6VkV74",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("readable.destroy()")]),s("OutboundLink")],1),t._v(" ä¹‹åä¸º "),s("code",[t._v("true")]),t._v("ã€‚è¿”å›: boolean")])]),t._v(" "),s("li",[s("p",[s("code",[t._v("readable.isPaused()")]),t._v("ï¼š"),s("code",[t._v("readable.isPaused()")]),t._v(" æ–¹æ³•è¿”å›å¯è¯»æµå½“å‰çš„æ“ä½œçŠ¶æ€ã€‚ ä¸»è¦ç”¨äº "),s("code",[t._v("readable.pipe()")]),t._v(" åº•å±‚çš„æœºåˆ¶ã€‚è¿”å›: boolean")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" readable "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("stream"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Readable")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nreadable"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("isPaused")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// === false")]),t._v("\nreadable"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("pause")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nreadable"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("isPaused")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// === true")]),t._v("\nreadable"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("resume")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nreadable"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("isPaused")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// === false")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br")])])]),t._v(" "),s("li",[s("p",[s("code",[t._v("readable.pause()")]),t._v("ï¼š"),s("code",[t._v("readable.pause()")]),t._v(" æ–¹æ³•ä½¿æµåŠ¨æ¨¡å¼çš„æµåœæ­¢è§¦å‘ "),s("a",{attrs:{href:"http://nodejs.cn/s/8CCPjN",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("'data'")]),s("OutboundLink")],1),t._v(" äº‹ä»¶ï¼Œå¹¶åˆ‡æ¢å‡ºæµåŠ¨æ¨¡å¼ã€‚ ä»»ä½•å¯ç”¨çš„æ•°æ®éƒ½ä¼šä¿ç•™åœ¨å†…éƒ¨ç¼“å­˜ä¸­ã€‚è¿”å›: "),s("a",{attrs:{href:"http://nodejs.cn/s/v7Fsu2",target:"_blank",rel:"noopener noreferrer"}},[t._v("this"),s("OutboundLink")],1)]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" readable "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getReadableStreamSomehow")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nreadable"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'data'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("chunk")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("æ¥æ”¶åˆ° ")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("chunk"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length"),s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v(" å­—èŠ‚çš„æ•°æ®")]),s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  readable"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("pause")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'æš‚åœä¸€ç§’'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'æ•°æ®é‡æ–°å¼€å§‹æµåŠ¨'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    readable"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("resume")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br")])]),s("p",[t._v("å¦‚æœå­˜åœ¨ "),s("code",[t._v("'readable'")]),t._v(" äº‹ä»¶ç›‘å¬å™¨ï¼Œåˆ™ "),s("code",[t._v("readable.pause()")]),t._v(" æ–¹æ³•ä¸èµ·ä½œç”¨ã€‚")])]),t._v(" "),s("li",[s("p",[s("code",[t._v("readable.pipe(destination[, options])")]),t._v(":")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("destination")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/9JUnJ8",target:"_blank",rel:"noopener noreferrer"}},[t._v("stream.Writable"),s("OutboundLink")],1),t._v(" æ•°æ®å†™å…¥çš„ç›®æ ‡ã€‚")]),t._v(" "),s("li",[s("code",[t._v("options")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/jzn6Ao",target:"_blank",rel:"noopener noreferrer"}},[t._v("object"),s("OutboundLink")],1),t._v(" ç®¡é“é€‰é¡¹ã€‚\n"),s("ul",[s("li",[s("code",[t._v("end")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/jFbvuT",target:"_blank",rel:"noopener noreferrer"}},[t._v("boolean"),s("OutboundLink")],1),t._v(" å½“è¯»å–å™¨ç»“æŸæ—¶ç»ˆæ­¢å†™å…¥å™¨ã€‚"),s("strong",[t._v("é»˜è®¤å€¼:")]),t._v(" "),s("code",[t._v("true")]),t._v("ã€‚")])])]),t._v(" "),s("li",[t._v("è¿”å›: "),s("a",{attrs:{href:"http://nodejs.cn/s/9JUnJ8",target:"_blank",rel:"noopener noreferrer"}},[t._v("stream.Writable"),s("OutboundLink")],1),t._v(" ç›®æ ‡å¯å†™æµï¼Œå¦‚æœæ˜¯ "),s("a",{attrs:{href:"http://nodejs.cn/s/2iRabr",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("Duplex")]),s("OutboundLink")],1),t._v(" æµæˆ– "),s("a",{attrs:{href:"http://nodejs.cn/s/fhVJQM",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("Transform")]),s("OutboundLink")],1),t._v(" æµåˆ™å¯ä»¥å½¢æˆç®¡é“é“¾ã€‚")])]),t._v(" "),s("p",[s("code",[t._v("readable.pipe()")]),t._v(" æ–¹æ³•ç»‘å®šå¯å†™æµåˆ°å¯è¯»æµï¼Œå°†å¯è¯»æµè‡ªåŠ¨åˆ‡æ¢åˆ°æµåŠ¨æ¨¡å¼ï¼Œå¹¶å°†å¯è¯»æµçš„æ‰€æœ‰æ•°æ®æ¨é€åˆ°ç»‘å®šçš„å¯å†™æµã€‚ æ•°æ®æµä¼šè¢«è‡ªåŠ¨ç®¡ç†ï¼Œæ‰€ä»¥å³ä½¿å¯è¯»æµæ›´å¿«ï¼Œç›®æ ‡å¯å†™æµä¹Ÿä¸ä¼šè¶…è´Ÿè·ã€‚")]),t._v(" "),s("p",[s("code",[t._v("readable.pipe()")]),t._v(" ä¼šè¿”å›ç›®æ ‡æµçš„å¼•ç”¨ï¼Œè¿™æ ·å°±å¯ä»¥å¯¹æµè¿›è¡Œé“¾å¼åœ°ç®¡é“æ“ä½œï¼š")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" fs "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'fs'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" r "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" fs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createReadStream")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'file.txt'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" z "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" zlib"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createGzip")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" w "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" fs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createWriteStream")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'file.txt.gz'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("pipe")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("z"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("pipe")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("w"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br")])]),s("p",[t._v("é»˜è®¤æƒ…å†µä¸‹ï¼Œå½“æ¥æºå¯è¯»æµè§¦å‘ "),s("a",{attrs:{href:"http://nodejs.cn/s/ZgviqU",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("'end'")]),s("OutboundLink")],1),t._v(" äº‹ä»¶æ—¶ï¼Œç›®æ ‡å¯å†™æµä¹Ÿä¼šè°ƒç”¨ "),s("a",{attrs:{href:"http://nodejs.cn/s/nvArK4",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("stream.end()")]),s("OutboundLink")],1),t._v(" ç»“æŸå†™å…¥ã€‚ è‹¥è¦ç¦ç”¨è¿™ç§é»˜è®¤è¡Œä¸ºï¼Œ "),s("code",[t._v("end")]),t._v(" é€‰é¡¹åº”è®¾ä¸º "),s("code",[t._v("false")]),t._v("ï¼Œè¿™æ ·ç›®æ ‡æµå°±ä¼šä¿æŒæ‰“å¼€ï¼š")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("reader"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("pipe")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("writer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("end")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nreader"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'end'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  writer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("end")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ç»“æŸ'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br")])])]),t._v(" "),s("li",[s("p",[s("code",[t._v("readable.read([size])")]),t._v(":")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("size")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/SXbo1v",target:"_blank",rel:"noopener noreferrer"}},[t._v("number"),s("OutboundLink")],1),t._v(" è¦è¯»å–çš„æ•°æ®çš„å­—èŠ‚æ•°ã€‚")]),t._v(" "),s("li",[t._v("è¿”å›: "),s("a",{attrs:{href:"http://nodejs.cn/s/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[t._v("string"),s("OutboundLink")],1),t._v(" | "),s("a",{attrs:{href:"http://nodejs.cn/s/6x1hD3",target:"_blank",rel:"noopener noreferrer"}},[t._v("Buffer"),s("OutboundLink")],1),t._v(" | "),s("a",{attrs:{href:"http://nodejs.cn/s/334hvC",target:"_blank",rel:"noopener noreferrer"}},[t._v("null"),s("OutboundLink")],1),t._v(" | "),s("a",{attrs:{href:"http://nodejs.cn/s/6sTGdS",target:"_blank",rel:"noopener noreferrer"}},[t._v("any"),s("OutboundLink")],1)])]),t._v(" "),s("p",[t._v("ä»å†…éƒ¨ç¼“å†²æ‹‰å–å¹¶è¿”å›æ•°æ®ã€‚ å¦‚æœæ²¡æœ‰å¯è¯»çš„æ•°æ®ï¼Œåˆ™è¿”å› "),s("code",[t._v("null")]),t._v("ã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œ "),s("code",[t._v("readable.read()")]),t._v(" è¿”å›çš„æ•°æ®æ˜¯ "),s("code",[t._v("Buffer")]),t._v(" å¯¹è±¡ï¼Œé™¤éä½¿ç”¨ "),s("code",[t._v("readable.setEncoding()")]),t._v(" æŒ‡å®šå­—ç¬¦ç¼–ç æˆ–æµå¤„äºå¯¹è±¡æ¨¡å¼ã€‚")]),t._v(" "),s("p",[t._v("å¯é€‰çš„ "),s("code",[t._v("size")]),t._v(" å‚æ•°æŒ‡å®šè¦è¯»å–çš„ç‰¹å®šå­—èŠ‚æ•°ã€‚ å¦‚æœæ— æ³•è¯»å– "),s("code",[t._v("size")]),t._v(" ä¸ªå­—èŠ‚ï¼Œåˆ™é™¤éæµå·²ç»“æŸï¼Œå¦åˆ™å°†ä¼šè¿”å› "),s("code",[t._v("null")]),t._v("ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå°†ä¼šè¿”å›å†…éƒ¨ buffer ä¸­å‰©ä½™çš„æ‰€æœ‰æ•°æ®ã€‚")]),t._v(" "),s("p",[t._v("å¦‚æœæ²¡æœ‰æŒ‡å®š "),s("code",[t._v("size")]),t._v(" å‚æ•°ï¼Œåˆ™è¿”å›å†…éƒ¨ç¼“å†²ä¸­çš„æ‰€æœ‰æ•°æ®ã€‚")]),t._v(" "),s("p",[s("code",[t._v("size")]),t._v(" å‚æ•°å¿…é¡»å°äºæˆ–ç­‰äº 1 GBã€‚")]),t._v(" "),s("p",[s("code",[t._v("readable.read()")]),t._v(" åº”è¯¥åªå¯¹å¤„äºæš‚åœæ¨¡å¼çš„å¯è¯»æµè°ƒç”¨ã€‚ åœ¨æµåŠ¨æ¨¡å¼ä¸­ï¼Œ "),s("code",[t._v("readable.read()")]),t._v(" ä¼šè‡ªåŠ¨è°ƒç”¨ç›´åˆ°å†…éƒ¨ç¼“å†²çš„æ•°æ®å®Œå…¨è€—å°½ã€‚")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" readable "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getReadableStreamSomehow")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nreadable"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'readable'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" chunk"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("while")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!==")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("chunk "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" readable"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("read")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("æ¥æ”¶åˆ° ")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("chunk"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length"),s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v(" å­—èŠ‚çš„æ•°æ®")]),s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br")])]),s("p",[t._v("ä½¿ç”¨ "),s("code",[t._v("readable.read()")]),t._v(" å¤„ç†æ•°æ®æ—¶ï¼Œ "),s("code",[t._v("while")]),t._v(" å¾ªç¯æ˜¯å¿…éœ€çš„ã€‚ åªæœ‰åœ¨ "),s("code",[t._v("readable.read()")]),t._v(" è¿”å› "),s("code",[t._v("null")]),t._v(" ä¹‹åï¼Œæ‰ä¼šè§¦å‘ "),s("a",{attrs:{href:"http://nodejs.cn/s/J6CZGb",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("'readable'")]),s("OutboundLink")],1),t._v("ã€‚")]),t._v(" "),s("p",[t._v("å¯¹è±¡æ¨¡å¼ä¸‹çš„å¯è¯»æµå°†ä¼šå§‹ç»ˆä»è°ƒç”¨ "),s("a",{attrs:{href:"http://nodejs.cn/s/SpgRaa",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("readable.read(size)")]),s("OutboundLink")],1),t._v(" è¿”å›å•ä¸ªå­é¡¹ï¼Œè€Œä¸ç®¡ "),s("code",[t._v("size")]),t._v(" å‚æ•°çš„å€¼å¦‚ä½•ã€‚")]),t._v(" "),s("p",[t._v("å¦‚æœ "),s("code",[t._v("readable.read()")]),t._v(" è¿”å›ä¸€ä¸ªæ•°æ®å—ï¼Œåˆ™ "),s("code",[t._v("'data'")]),t._v(" äº‹ä»¶ä¹Ÿä¼šè§¦å‘ã€‚")]),t._v(" "),s("p",[t._v("åœ¨ "),s("a",{attrs:{href:"http://nodejs.cn/s/ZgviqU",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("'end'")]),s("OutboundLink")],1),t._v(" äº‹ä»¶è§¦å‘åå†è°ƒç”¨ "),s("a",{attrs:{href:"http://nodejs.cn/s/SpgRaa",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("stream.read([size\\])")]),s("OutboundLink")],1),t._v(" ä¼šè¿”å› "),s("code",[t._v("null")]),t._v("ã€‚ ä¸ä¼šå¼•å‘è¿è¡Œæ—¶é”™è¯¯ã€‚")])]),t._v(" "),s("li",[s("p",[s("code",[t._v("readable.readable")]),t._v(":å¦‚æœå¯ä»¥å®‰å…¨åœ°è°ƒç”¨ "),s("a",{attrs:{href:"http://nodejs.cn/s/SpgRaa",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("readable.read()")]),s("OutboundLink")],1),t._v("ï¼ˆè¿™æ„å‘³ç€æµæ²¡æœ‰è¢«ç ´åæˆ–è§¦å‘ "),s("code",[t._v("'error'")]),t._v(" æˆ– "),s("code",[t._v("'end'")]),t._v("ï¼‰ï¼Œåˆ™ä¸º "),s("code",[t._v("true")]),t._v("ã€‚")])]),t._v(" "),s("li",[s("p",[s("code",[t._v("readable.readableEncoding")]),t._v("ï¼šè·å–ç”¨äºç»™å®šå¯è¯»æµçš„ "),s("code",[t._v("encoding")]),t._v(" å±æ€§ã€‚ å¯ä»¥ä½¿ç”¨ "),s("a",{attrs:{href:"http://nodejs.cn/s/SjJGhm",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("readable.setEncoding()")]),s("OutboundLink")],1),t._v(" æ–¹æ³•è®¾ç½® "),s("code",[t._v("encoding")]),t._v(" å±æ€§ã€‚")])]),t._v(" "),s("li",[s("p",[s("code",[t._v("readable.readableEnded")]),t._v("ï¼š å½“ "),s("a",{attrs:{href:"http://nodejs.cn/s/ZgviqU",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("'end'")]),s("OutboundLink")],1),t._v(" äº‹ä»¶è¢«è§¦å‘æ—¶å˜ä¸º "),s("code",[t._v("true")]),t._v("ã€‚")])]),t._v(" "),s("li",[s("p",[s("code",[t._v("readable.resume()")]),t._v("ï¼šè¿”å›"),s("a",{attrs:{href:"http://nodejs.cn/s/v7Fsu2",target:"_blank",rel:"noopener noreferrer"}},[t._v("this"),s("OutboundLink")],1)]),t._v(" "),s("p",[s("code",[t._v("readable.resume()")]),t._v(" æ–¹æ³•å°†è¢«æš‚åœçš„å¯è¯»æµæ¢å¤è§¦å‘ "),s("a",{attrs:{href:"http://nodejs.cn/s/8CCPjN",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("'data'")]),s("OutboundLink")],1),t._v(" äº‹ä»¶ï¼Œå¹¶å°†æµåˆ‡æ¢åˆ°æµåŠ¨æ¨¡å¼ã€‚")]),t._v(" "),s("p",[s("code",[t._v("readable.resume()")]),t._v(" æ–¹æ³•å¯ä»¥ç”¨æ¥å……åˆ†æ¶ˆè€—æµä¸­çš„æ•°æ®ï¼Œä½†æ— éœ€å®é™…å¤„ç†ä»»ä½•æ•°æ®ï¼š")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getReadableStreamSomehow")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("resume")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'end'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'åˆ°è¾¾æµçš„å°½å¤´ï¼Œä½†æ— éœ€è¯»å–ä»»ä½•æ•°æ®'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br")])]),s("p",[t._v("å½“å­˜åœ¨ "),s("code",[t._v("'readable'")]),t._v(" äº‹ä»¶ç›‘å¬å™¨æ—¶ï¼Œ "),s("code",[t._v("readable.resume()")]),t._v(" æ–¹æ³•ä¸èµ·ä½œç”¨ã€‚")])]),t._v(" "),s("li",[s("p",[s("code",[t._v("readable.setEncoding(encoding)")]),t._v(":")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("encoding")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[t._v("string"),s("OutboundLink")],1),t._v(" å­—ç¬¦ç¼–ç ã€‚")]),t._v(" "),s("li",[t._v("è¿”å›: "),s("a",{attrs:{href:"http://nodejs.cn/s/v7Fsu2",target:"_blank",rel:"noopener noreferrer"}},[t._v("this"),s("OutboundLink")],1)])]),t._v(" "),s("p",[s("code",[t._v("readable.setEncoding()")]),t._v(" æ–¹æ³•ä¸ºä»å¯è¯»æµè¯»å–çš„æ•°æ®è®¾ç½®å­—ç¬¦ç¼–ç ã€‚")]),t._v(" "),s("p",[t._v("é»˜è®¤æƒ…å†µä¸‹æ²¡æœ‰è®¾ç½®å­—ç¬¦ç¼–ç ï¼Œæµæ•°æ®è¿”å›çš„æ˜¯ "),s("code",[t._v("Buffer")]),t._v(" å¯¹è±¡ã€‚ å¦‚æœè®¾ç½®äº†å­—ç¬¦ç¼–ç ï¼Œåˆ™æµæ•°æ®è¿”å›æŒ‡å®šç¼–ç çš„å­—ç¬¦ä¸²ã€‚ ä¾‹å¦‚ï¼Œè°ƒç”¨ "),s("code",[t._v("readable.setEncoding('utf-8')")]),t._v(" ä¼šå°†æ•°æ®è§£æä¸º UTF-8 æ•°æ®ï¼Œå¹¶è¿”å›å­—ç¬¦ä¸²ï¼Œè°ƒç”¨ "),s("code",[t._v("readable.setEncoding('hex')")]),t._v(" åˆ™ä¼šå°†æ•°æ®ç¼–ç æˆåå…­è¿›åˆ¶å­—ç¬¦ä¸²ã€‚")]),t._v(" "),s("p",[t._v("å¯è¯»æµå°†ä¼šæ­£ç¡®åœ°å¤„ç†é€šè¿‡æµä¼ é€’çš„å¤šå­—èŠ‚å­—ç¬¦ï¼Œå¦åˆ™å¦‚æœç®€å•åœ°ä»æµä¸­ä½œä¸º "),s("code",[t._v("Buffer")]),t._v(" å¯¹è±¡æ‹‰å‡ºï¼Œåˆ™ä¼šè¢«ä¸æ­£ç¡®åœ°è§£ç ã€‚")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" readable "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getReadableStreamSomehow")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nreadable"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setEncoding")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'utf8'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nreadable"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'data'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("chunk")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  assert"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("equal")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("typeof")]),t._v(" chunk"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'string'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'è¯»å–åˆ° %d ä¸ªå­—ç¬¦çš„å­—ç¬¦ä¸²æ•°æ®'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" chunk"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br")])])]),t._v(" "),s("li",[s("p",[s("code",[t._v("readable.unpipe([destination])")]),t._v(":")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("destination")]),t._v(" "),s("a",{attrs:{href:"http://nodejs.cn/s/9JUnJ8",target:"_blank",rel:"noopener noreferrer"}},[t._v("stream.Writable"),s("OutboundLink")],1),t._v(" è¦ç§»é™¤ç®¡é“çš„å¯å†™æµã€‚")]),t._v(" "),s("li",[t._v("è¿”å›: "),s("a",{attrs:{href:"http://nodejs.cn/s/v7Fsu2",target:"_blank",rel:"noopener noreferrer"}},[t._v("this"),s("OutboundLink")],1)])]),t._v(" "),s("p",[s("code",[t._v("readable.unpipe()")]),t._v(" æ–¹æ³•è§£ç»‘ä¹‹å‰ä½¿ç”¨ "),s("a",{attrs:{href:"http://nodejs.cn/s/Ea2ZNW",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("stream.pipe()")]),s("OutboundLink")],1),t._v(" æ–¹æ³•ç»‘å®šçš„å¯å†™æµã€‚")]),t._v(" "),s("p",[t._v("å¦‚æœæ²¡æœ‰æŒ‡å®š "),s("code",[t._v("destination")]),t._v(", åˆ™è§£ç»‘æ‰€æœ‰ç®¡é“.")]),t._v(" "),s("p",[t._v("å¦‚æœæŒ‡å®šäº† "),s("code",[t._v("destination")]),t._v(", ä½†å®ƒæ²¡æœ‰å»ºç«‹ç®¡é“ï¼Œåˆ™ä¸èµ·ä½œç”¨.")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" fs "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'fs'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" readable "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getReadableStreamSomehow")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" writable "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" fs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createWriteStream")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'file.txt'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å¯è¯»æµçš„æ‰€æœ‰æ•°æ®å¼€å§‹ä¼ è¾“åˆ° 'file.txt'ï¼Œä½†ä¸€ç§’ååœæ­¢ã€‚")]),t._v("\nreadable"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("pipe")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("writable"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'åœæ­¢å†™å…¥ file.txt'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  readable"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("unpipe")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("writable"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'æ‰‹åŠ¨å…³é—­æ–‡ä»¶æµ'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  writable"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("end")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br")])])]),t._v(" "),s("li",[s("p",[s("code",[t._v("readable.unshift(chunk[, encoding])")]),t._v(":"),s("code",[t._v("readable.unshift()")]),t._v(" æ–¹æ³•å°†æ•°æ®å—æ¨å›å†…éƒ¨ç¼“å†²ã€‚")]),t._v(" "),s("p",[t._v("â€‹\tå¯ç”¨äºä»¥ä¸‹æƒ…æ™¯ï¼šæ­£è¢«æ¶ˆè´¹ä¸­çš„æµéœ€è¦å°†ä¸€äº›å·²ç»è¢«æ‹‰å‡ºçš„æ•°æ®é‡ç½®ä¸ºæœªæ¶ˆè´¹çŠ¶æ€ï¼Œä»¥ä¾¿è¿™äº›æ•°æ®å¯ä»¥ä¼ ç»™å…¶ä»–æ–¹ã€‚")]),t._v(" "),s("p",[t._v("â€‹\tè§¦å‘ "),s("a",{attrs:{href:"http://nodejs.cn/s/ZgviqU",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("'end'")]),s("OutboundLink")],1),t._v(" äº‹ä»¶æˆ–æŠ›å‡ºè¿è¡Œæ—¶é”™è¯¯ä¹‹åï¼Œä¸èƒ½å†è°ƒç”¨ "),s("code",[t._v("stream.unshift()")]),t._v(" æ–¹æ³•ã€‚")]),t._v(" "),s("p",[t._v("ä½¿ç”¨ "),s("code",[t._v("stream.unshift()")]),t._v(" çš„å¼€å‘è€…å¯ä»¥è€ƒè™‘åˆ‡æ¢åˆ° "),s("a",{attrs:{href:"http://nodejs.cn/s/fhVJQM",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("Transform")]),s("OutboundLink")],1),t._v(" æµã€‚ è¯¦è§"),s("a",{attrs:{href:"http://nodejs.cn/s/d2EgSi",target:"_blank",rel:"noopener noreferrer"}},[t._v("ç”¨äºå®ç°æµçš„API"),s("OutboundLink")],1),t._v("ã€‚")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ‹‰å‡ºç”± \\n\\n åˆ†éš”çš„æ ‡é¢˜ã€‚")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å¦‚æœè·å–å¤ªå¤šï¼Œåˆ™ä½¿ç”¨ unshift()ã€‚")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä½¿ç”¨ (error, header, stream) è°ƒç”¨å›è°ƒã€‚")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" StringDecoder "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'string_decoder'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("parseHeader")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("stream"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" callback")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  stream"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'error'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" callback"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  stream"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'readable'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" onReadable"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" decoder "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("StringDecoder")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'utf8'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" header "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("onReadable")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" chunk"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("while")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!==")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("chunk "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" stream"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("read")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" str "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" decoder"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("write")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("chunk"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("str"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("match")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token regex"}},[s("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[t._v("\\n\\n")]),s("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å‘ç°å¤´éƒ¨è¾¹ç•Œã€‚")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" split "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" str"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("split")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token regex"}},[s("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[t._v("\\n\\n")]),s("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        header "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+=")]),t._v(" split"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("shift")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" remaining "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" split"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("join")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'\\n\\n'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" buf "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Buffer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("from")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("remaining"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'utf8'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        stream"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("removeListener")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'error'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" callback"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åœ¨è°ƒç”¨ unshift() å‰ç§»é™¤ 'readable' ç›‘å¬å™¨ã€‚")]),t._v("\n        stream"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("removeListener")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'readable'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" onReadable"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("buf"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n          stream"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("unshift")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("buf"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç°åœ¨å¯ä»¥ä»æµä¸­è¯»å–æ¶ˆæ¯çš„ä¸»ä½“ã€‚")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("callback")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" header"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" stream"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç»§ç»­è¯»å–å¤´éƒ¨ã€‚")]),t._v("\n        header "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+=")]),t._v(" str"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br"),s("span",{staticClass:"line-number"},[t._v("25")]),s("br"),s("span",{staticClass:"line-number"},[t._v("26")]),s("br"),s("span",{staticClass:"line-number"},[t._v("27")]),s("br"),s("span",{staticClass:"line-number"},[t._v("28")]),s("br"),s("span",{staticClass:"line-number"},[t._v("29")]),s("br"),s("span",{staticClass:"line-number"},[t._v("30")]),s("br"),s("span",{staticClass:"line-number"},[t._v("31")]),s("br"),s("span",{staticClass:"line-number"},[t._v("32")]),s("br"),s("span",{staticClass:"line-number"},[t._v("33")]),s("br")])]),s("p",[t._v("ä¸ "),s("a",{attrs:{href:"http://nodejs.cn/s/8s3paZ",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("stream.push(chunk)")]),s("OutboundLink")],1),t._v(" ä¸åŒï¼Œ "),s("code",[t._v("stream.unshift(chunk)")]),t._v(" ä¸ä¼šé€šè¿‡é‡ç½®æµçš„å†…éƒ¨è¯»å–çŠ¶æ€æ¥ç»“æŸè¯»å–è¿‡ç¨‹ã€‚ å¦‚æœåœ¨è¯»å–æœŸé—´è°ƒç”¨ "),s("code",[t._v("readable.unshift()")]),t._v("ï¼ˆå³ä»è‡ªå®šä¹‰çš„æµä¸Šçš„ "),s("a",{attrs:{href:"http://nodejs.cn/s/5hv4Rd",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("stream._read()")]),s("OutboundLink")],1),t._v(" å®ç°ä¸­è°ƒç”¨ï¼‰ï¼Œåˆ™ä¼šå¯¼è‡´æ„å¤–ç»“æœã€‚ åœ¨ä½¿ç”¨ç«‹å³çš„ "),s("a",{attrs:{href:"http://nodejs.cn/s/8s3paZ",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("stream.push('')")]),s("OutboundLink")],1),t._v(" è°ƒç”¨ "),s("code",[t._v("readable.unshift()")]),t._v(" ä¹‹åï¼Œå°†é€‚å½“åœ°é‡ç½®è¯»å–çŠ¶æ€ï¼Œä½†æœ€å¥½åœ¨æ‰§è¡Œè¯»å–çš„è¿‡ç¨‹ä¸­é¿å…è°ƒç”¨ "),s("code",[t._v("readable.unshift()")]),t._v("ã€‚")])])]),t._v(" "),s("h2",{attrs:{id:"_5-åŒå·¥æµä¸è½¬æ¢æµ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-åŒå·¥æµä¸è½¬æ¢æµ"}},[t._v("ğŸŒ™")]),t._v(" 5.åŒå·¥æµä¸è½¬æ¢æµ")]),t._v(" "),s("h3",{attrs:{id:"_5-1-stream-duplex-åŒå·¥æµ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-1-stream-duplex-åŒå·¥æµ"}},[t._v("ğŸŒ™")]),t._v(" 5.1 "),s("code",[t._v("stream.Duplex")]),t._v(" åŒå·¥æµ")]),t._v(" "),s("p",[t._v("åŒå·¥æµï¼ˆDuplexï¼‰æ˜¯åŒæ—¶å®ç°äº† "),s("a",{attrs:{href:"http://nodejs.cn/s/YuDKX1",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("Readable")]),s("OutboundLink")],1),t._v(" å’Œ "),s("a",{attrs:{href:"http://nodejs.cn/s/9JUnJ8",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("Writable")]),s("OutboundLink")],1),t._v(" æ¥å£çš„æµã€‚")]),t._v(" "),s("p",[s("code",[t._v("Duplex")]),t._v(" æµçš„ä¾‹å­åŒ…æ‹¬ï¼š")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"http://nodejs.cn/s/wsJ1o1",target:"_blank",rel:"noopener noreferrer"}},[t._v("TCP socket"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"http://nodejs.cn/s/duYbh2",target:"_blank",rel:"noopener noreferrer"}},[t._v("zlib æµ"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"http://nodejs.cn/s/FuEfsg",target:"_blank",rel:"noopener noreferrer"}},[t._v("crypto æµ"),s("OutboundLink")],1)])]),t._v(" "),s("h3",{attrs:{id:"_5-2-stream-transform-è½¬æ¢æµ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-2-stream-transform-è½¬æ¢æµ"}},[t._v("ğŸŒ™")]),t._v(" 5.2 "),s("code",[t._v("stream.Transform")]),t._v(" è½¬æ¢æµ")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("transform.destroy([error])")]),t._v("ï¼šé”€æ¯æµï¼Œå¹¶å¯é€‰åœ°è§¦å‘ "),s("code",[t._v("'error'")]),t._v(" äº‹ä»¶ã€‚")])]),t._v(" "),s("p",[t._v("è½¬æ¢æµï¼ˆTransformï¼‰æ˜¯ä¸€ç§ "),s("a",{attrs:{href:"http://nodejs.cn/s/2iRabr",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("Duplex")]),s("OutboundLink")],1),t._v(" æµï¼Œä½†å®ƒçš„è¾“å‡ºä¸è¾“å…¥æ˜¯ç›¸å…³è”çš„ã€‚ ä¸ "),s("a",{attrs:{href:"http://nodejs.cn/s/2iRabr",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("Duplex")]),s("OutboundLink")],1),t._v(" æµä¸€æ ·ï¼Œ "),s("code",[t._v("Transform")]),t._v(" æµä¹ŸåŒæ—¶å®ç°äº† "),s("a",{attrs:{href:"http://nodejs.cn/s/YuDKX1",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("Readable")]),s("OutboundLink")],1),t._v(" å’Œ "),s("a",{attrs:{href:"http://nodejs.cn/s/9JUnJ8",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("Writable")]),s("OutboundLink")],1),t._v(" æ¥å£ã€‚")]),t._v(" "),s("p",[s("code",[t._v("Transform")]),t._v(" æµçš„ä¾‹å­åŒ…æ‹¬ï¼š")]),t._v(" "),s("ul",[s("li",[s("p",[s("a",{attrs:{href:"http://nodejs.cn/s/duYbh2",target:"_blank",rel:"noopener noreferrer"}},[t._v("zlib æµ"),s("OutboundLink")],1)])]),t._v(" "),s("li",[s("p",[s("a",{attrs:{href:"http://nodejs.cn/s/FuEfsg",target:"_blank",rel:"noopener noreferrer"}},[t._v("crypto æµ"),s("OutboundLink")],1)])])]),t._v(" "),s("h2",{attrs:{id:"_6-å®ç°æµ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_6-å®ç°æµ"}},[t._v("ğŸŒ™")]),t._v(" 6. å®ç°æµ")]),t._v(" "),s("p",[s("code",[t._v("stream")]),t._v(" æ¨¡å— API æ—¨åœ¨ä¸ºäº†æ›´å®¹æ˜“åœ°ä½¿ç”¨ JavaScript çš„åŸå‹ç»§æ‰¿æ¨¡å¼æ¥å®ç°æµã€‚")]),t._v(" "),s("p",[t._v("é¦–å…ˆï¼Œæµçš„å¼€å‘è€…å£°æ˜ä¸€ä¸ªæ–°çš„ JavaScript ç±»ï¼Œè¯¥ç±»ç»§æ‰¿äº†å››ä¸ªåŸºæœ¬æµç±»ä¹‹ä¸€ï¼ˆ"),s("code",[t._v("stream.Writeable")]),t._v("ã€ "),s("code",[t._v("stream.Readable")]),t._v("ã€ "),s("code",[t._v("stream.Duplex")]),t._v(" æˆ– "),s("code",[t._v("stream.Transform")]),t._v("ï¼‰ï¼Œå¹¶ç¡®ä¿è°ƒç”¨äº†ç›¸åº”çš„çˆ¶ç±»æ„é€ å‡½æ•°:")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" Writable "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'stream'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MyWritable")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Writable")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("constructor")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" highWaterMark"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("options "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("super")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" highWaterMark "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br")])]),s("h3",{attrs:{id:"_6-1-å®ç°å¯å†™æµ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_6-1-å®ç°å¯å†™æµ"}},[t._v("ğŸŒ™")]),t._v(" 6.1 å®ç°å¯å†™æµ")]),t._v(" "),s("p",[s("code",[t._v("stream.Writable")]),t._v(" ç±»å¯ç”¨äºå®ç° "),s("a",{attrs:{href:"http://nodejs.cn/s/9JUnJ8",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("Writable")]),s("OutboundLink")],1),t._v(" æµã€‚")]),t._v(" "),s("p",[t._v("è‡ªå®šä¹‰çš„ "),s("code",[t._v("Writable")]),t._v(" æµå¿…é¡»è°ƒç”¨ "),s("code",[t._v("new stream.Writable([options])")]),t._v(" æ„é€ å‡½æ•°å¹¶å®ç° "),s("code",[t._v("writable._write()")]),t._v(" å’Œ/æˆ– "),s("code",[t._v("writable._writev()")]),t._v(" æ–¹æ³•ã€‚")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" Writable "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'stream'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MyWritable")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Writable")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("constructor")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("options")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è°ƒç”¨ stream.Writable() æ„é€ å‡½æ•°ã€‚")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("super")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("options"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ES6ä¹‹å‰")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" Writable "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'stream'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" util "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'util'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("MyWritable")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("options")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("instanceof")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MyWritable")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MyWritable")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("options"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Writable")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("call")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" options"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\nutil"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("inherits")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("MyWritable"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Writable"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä½¿ç”¨ç®€åŒ–çš„æ„é€ å‡½æ•°ï¼š")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" Writable "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'stream'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" myWritable "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Writable")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("write")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("chunk"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" encoding"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" callback")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("writev")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("chunks"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" callback")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br"),s("span",{staticClass:"line-number"},[t._v("25")]),s("br"),s("span",{staticClass:"line-number"},[t._v("26")]),s("br"),s("span",{staticClass:"line-number"},[t._v("27")]),s("br"),s("span",{staticClass:"line-number"},[t._v("28")]),s("br"),s("span",{staticClass:"line-number"},[t._v("29")]),s("br"),s("span",{staticClass:"line-number"},[t._v("30")]),s("br"),s("span",{staticClass:"line-number"},[t._v("31")]),s("br"),s("span",{staticClass:"line-number"},[t._v("32")]),s("br"),s("span",{staticClass:"line-number"},[t._v("33")]),s("br")])]),s("h3",{attrs:{id:"_6-2-å®ç°å¯è¯»æµ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_6-2-å®ç°å¯è¯»æµ"}},[t._v("ğŸŒ™")]),t._v(" 6.2 å®ç°å¯è¯»æµ")]),t._v(" "),s("p",[s("code",[t._v("stream.Readable")]),t._v(" ç±»å¯ç”¨äºå®ç°å¯è¯»æµã€‚")]),t._v(" "),s("p",[t._v("è‡ªå®šä¹‰çš„å¯è¯»æµå¿…é¡»è°ƒç”¨ "),s("code",[t._v("new stream.Readable([options])")]),t._v(" æ„é€ å‡½æ•°å¹¶å®ç° "),s("code",[t._v("readable._read()")]),t._v(" æ–¹æ³•ã€‚")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" Readable "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'stream'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MyReadable")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Readable")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("constructor")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("options")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è°ƒç”¨ stream.Readable(options) æ„é€ å‡½æ•°ã€‚")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("super")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("options"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä½¿ç”¨ ES6 ä¹‹å‰çš„è¯­æ³•ï¼š")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" Readable "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'stream'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" util "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'util'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("MyReadable")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("options")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("instanceof")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MyReadable")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MyReadable")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("options"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Readable")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("call")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" options"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\nutil"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("inherits")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("MyReadable"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Readable"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä½¿ç”¨ç®€åŒ–çš„æ„é€ å‡½æ•°ï¼š")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" Readable "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'stream'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" myReadable "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Readable")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("read")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("size")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br"),s("span",{staticClass:"line-number"},[t._v("25")]),s("br"),s("span",{staticClass:"line-number"},[t._v("26")]),s("br"),s("span",{staticClass:"line-number"},[t._v("27")]),s("br"),s("span",{staticClass:"line-number"},[t._v("28")]),s("br"),s("span",{staticClass:"line-number"},[t._v("29")]),s("br")])]),s("h3",{attrs:{id:"_6-3-å®ç°åŒå·¥æµ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_6-3-å®ç°åŒå·¥æµ"}},[t._v("ğŸŒ™")]),t._v(" 6.3 å®ç°åŒå·¥æµ")]),t._v(" "),s("p",[s("a",{attrs:{href:"http://nodejs.cn/s/2iRabr",target:"_blank",rel:"noopener noreferrer"}},[t._v("åŒå·¥æµ"),s("OutboundLink")],1),t._v("åŒæ—¶å®ç°äº†"),s("a",{attrs:{href:"http://nodejs.cn/s/YuDKX1",target:"_blank",rel:"noopener noreferrer"}},[t._v("å¯è¯»æµ"),s("OutboundLink")],1),t._v("å’Œ"),s("a",{attrs:{href:"http://nodejs.cn/s/9JUnJ8",target:"_blank",rel:"noopener noreferrer"}},[t._v("å¯å†™æµ"),s("OutboundLink")],1),t._v("ï¼Œä¾‹å¦‚ TCP socket è¿æ¥ã€‚")]),t._v(" "),s("p",[t._v("å› ä¸º JavaScript ä¸æ”¯æŒå¤šé‡ç»§æ‰¿ï¼Œæ‰€ä»¥ä½¿ç”¨ "),s("code",[t._v("stream.Duplex")]),t._v(" ç±»å®ç°"),s("a",{attrs:{href:"http://nodejs.cn/s/2iRabr",target:"_blank",rel:"noopener noreferrer"}},[t._v("åŒå·¥æµ"),s("OutboundLink")],1),t._v("ï¼ˆè€Œä¸æ˜¯ä½¿ç”¨ "),s("code",[t._v("stream.Readable")]),t._v(" ç±»å’Œ "),s("code",[t._v("stream.Writable")]),t._v(" ç±»ï¼‰ã€‚")]),t._v(" "),s("p",[s("code",[t._v("stream.Duplex")]),t._v(" ç±»çš„åŸå‹ç»§æ‰¿è‡ª "),s("code",[t._v("stream.Readable")]),t._v(" å’Œå¯„ç”Ÿè‡ª "),s("code",[t._v("stream.Writable")]),t._v("ï¼Œä½†æ˜¯ "),s("code",[t._v("instanceof")]),t._v(" å¯¹è¿™ä¸¤ä¸ªåŸºç¡€ç±»éƒ½å¯ç”¨ï¼Œå› ä¸ºé‡å†™äº† "),s("code",[t._v("stream.Writable")]),t._v(" çš„ "),s("a",{attrs:{href:"http://nodejs.cn/s/D1EDvM",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("Symbol.hasInstance")]),s("OutboundLink")],1),t._v("ã€‚")]),t._v(" "),s("p",[t._v("è‡ªå®šä¹‰çš„åŒå·¥æµå¿…é¡»è°ƒç”¨ "),s("code",[t._v("new stream.Duplex([options])")]),t._v(" æ„é€ å‡½æ•°å¹¶å®ç° "),s("code",[t._v("readable._read()")]),t._v(" å’Œ "),s("code",[t._v("writable._write()")]),t._v(" æ–¹æ³•ã€‚")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" Duplex "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'stream'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MyDuplex")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Duplex")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("constructor")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("options")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("super")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("options"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä½¿ç”¨ ES6 ä¹‹å‰çš„è¯­æ³•ï¼š")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" Duplex "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'stream'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" util "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'util'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("MyDuplex")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("options")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("instanceof")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MyDuplex")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MyDuplex")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("options"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Duplex")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("call")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" options"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\nutil"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("inherits")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("MyDuplex"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Duplex"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä½¿ç”¨ç®€åŒ–çš„æ„é€ å‡½æ•°ï¼š")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" Duplex "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'stream'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" myDuplex "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Duplex")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("read")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("size")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("write")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("chunk"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" encoding"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" callback")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br"),s("span",{staticClass:"line-number"},[t._v("25")]),s("br"),s("span",{staticClass:"line-number"},[t._v("26")]),s("br"),s("span",{staticClass:"line-number"},[t._v("27")]),s("br"),s("span",{staticClass:"line-number"},[t._v("28")]),s("br"),s("span",{staticClass:"line-number"},[t._v("29")]),s("br"),s("span",{staticClass:"line-number"},[t._v("30")]),s("br"),s("span",{staticClass:"line-number"},[t._v("31")]),s("br")])]),s("h3",{attrs:{id:"_6-4-å®ç°è½¬æ¢æµ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_6-4-å®ç°è½¬æ¢æµ"}},[t._v("ğŸŒ™")]),t._v(" 6.4 å®ç°è½¬æ¢æµ")]),t._v(" "),s("p",[s("a",{attrs:{href:"http://nodejs.cn/s/fhVJQM",target:"_blank",rel:"noopener noreferrer"}},[t._v("è½¬æ¢æµ"),s("OutboundLink")],1),t._v("æ˜¯ä¸€ç§"),s("a",{attrs:{href:"http://nodejs.cn/s/2iRabr",target:"_blank",rel:"noopener noreferrer"}},[t._v("åŒå·¥æµ"),s("OutboundLink")],1),t._v("ï¼Œå®ƒä¼šå¯¹è¾“å…¥åšäº›è®¡ç®—ç„¶åè¾“å‡ºã€‚ ä¾‹å¦‚ "),s("a",{attrs:{href:"http://nodejs.cn/s/duYbh2",target:"_blank",rel:"noopener noreferrer"}},[t._v("zlib"),s("OutboundLink")],1),t._v(" æµå’Œ "),s("a",{attrs:{href:"http://nodejs.cn/s/FuEfsg",target:"_blank",rel:"noopener noreferrer"}},[t._v("crypto"),s("OutboundLink")],1),t._v(" æµä¼šå‹ç¼©ã€åŠ å¯†æˆ–è§£å¯†æ•°æ®ã€‚")]),t._v(" "),s("p",[t._v("è¾“å‡ºæµçš„å¤§å°ã€æ•°æ®å—çš„æ•°é‡éƒ½ä¸ä¸€å®šä¼šå’Œè¾“å…¥æµçš„ä¸€è‡´ã€‚ ä¾‹å¦‚ï¼Œ "),s("code",[t._v("Hash")]),t._v(" æµåœ¨è¾“å…¥ç»“æŸæ—¶åªä¼šè¾“å‡ºä¸€ä¸ªæ•°æ®å—ï¼Œè€Œ "),s("code",[t._v("zlib")]),t._v(" æµçš„è¾“å‡ºå¯èƒ½æ¯”è¾“å…¥å¤§å¾ˆå¤šæˆ–å°å¾ˆå¤šã€‚")]),t._v(" "),s("p",[s("code",[t._v("stream.Transform")]),t._v(" ç±»å¯ç”¨äºå®ç°äº†ä¸€ä¸ª"),s("a",{attrs:{href:"http://nodejs.cn/s/fhVJQM",target:"_blank",rel:"noopener noreferrer"}},[t._v("è½¬æ¢æµ"),s("OutboundLink")],1),t._v("ã€‚")]),t._v(" "),s("p",[s("code",[t._v("stream.Transform")]),t._v(" ç±»ç»§æ‰¿è‡ª "),s("code",[t._v("stream.Duplex")]),t._v("ï¼Œå¹¶ä¸”å®ç°äº†è‡ªæœ‰çš„ "),s("code",[t._v("writable._write()")]),t._v(" å’Œ "),s("code",[t._v("readable._read()")]),t._v(" æ–¹æ³•ã€‚ è‡ªå®šä¹‰çš„è½¬æ¢æµå¿…é¡»å®ç° "),s("a",{attrs:{href:"http://nodejs.cn/s/N8nFbP",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("transform._transform()")]),s("OutboundLink")],1),t._v(" æ–¹æ³•ï¼Œ"),s("a",{attrs:{href:"http://nodejs.cn/s/mErApk",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("transform._flush()")]),s("OutboundLink")],1),t._v(" æ–¹æ³•æ˜¯å¯é€‰çš„ã€‚")]),t._v(" "),s("p",[t._v("å½“ä½¿ç”¨è½¬æ¢æµæ—¶ï¼Œå¦‚æœå¯è¯»ç«¯çš„è¾“å‡ºæ²¡æœ‰è¢«æ¶ˆè´¹ï¼Œåˆ™å†™å…¥æµçš„æ•°æ®å¯èƒ½ä¼šå¯¼è‡´å¯å†™ç«¯è¢«æš‚åœã€‚")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" Transform "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'stream'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MyTransform")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Transform")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("constructor")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("options")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("super")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("options"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä½¿ç”¨ ES6 ä¹‹å‰çš„è¯­æ³•ï¼š")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" Transform "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'stream'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" util "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'util'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("MyTransform")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("options")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("instanceof")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MyTransform")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MyTransform")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("options"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Transform")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("call")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" options"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\nutil"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("inherits")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("MyTransform"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Transform"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä½¿ç”¨ç®€åŒ–çš„æ„é€ å‡½æ•°ï¼š")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" Transform "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'stream'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" myTransform "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Transform")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("transform")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("chunk"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" encoding"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" callback")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br"),s("span",{staticClass:"line-number"},[t._v("25")]),s("br"),s("span",{staticClass:"line-number"},[t._v("26")]),s("br"),s("span",{staticClass:"line-number"},[t._v("27")]),s("br"),s("span",{staticClass:"line-number"},[t._v("28")]),s("br"),s("span",{staticClass:"line-number"},[t._v("29")]),s("br")])])])}),[],!1,null,null,null);s.default=e.exports}}]);