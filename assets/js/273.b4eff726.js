(window.webpackJsonp=window.webpackJsonp||[]).push([[273],{987:function(s,t,a){"use strict";a.r(t);var n=a(2),e=Object(n.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h3",{attrs:{id:"react-cache-è§£å†³äº†ä»€ä¹ˆé—®é¢˜"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#react-cache-è§£å†³äº†ä»€ä¹ˆé—®é¢˜"}},[s._v("ğŸŒ™")]),s._v(" "),t("code",[s._v("React.cache")]),s._v(" è§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Ÿ")]),s._v(" "),t("p",[s._v("é¦–å…ˆï¼Œæˆ‘ä»¬å¿…é¡»ææ¸…æ¥š"),t("em",[s._v("ä¸ºä»€ä¹ˆ")]),s._v("éœ€è¦è¿™ä¸ªå‡½æ•°ã€‚æƒ³è±¡ä¸€ä¸‹åœ¨æœåŠ¡ç«¯ç»„ä»¶æ ‘ä¸­è¿™ä¸ªéå¸¸å¸¸è§çš„åœºæ™¯ï¼š")]),s._v(" "),t("div",{staticClass:"language-jsx line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-jsx"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// app/layout.js")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" getUser "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'./lib/data'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("export")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("default")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("async")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("RootLayout")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token parameter"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" children "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// æˆ‘ä»¬éœ€è¦ç”¨æˆ·ä¿¡æ¯æ¥å±•ç¤ºåœ¨é¡µå¤´")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" user "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("await")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getUser")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("123")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" \n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("html")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),t("span",{pre:!0,attrs:{class:"token plain-text"}},[s._v("\n      ")]),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("body")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),t("span",{pre:!0,attrs:{class:"token plain-text"}},[s._v("\n        ")]),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("header")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),t("span",{pre:!0,attrs:{class:"token plain-text"}},[s._v("æ¬¢è¿, ")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("user"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token plain-text"}},[s._v("!")]),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("header")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),t("span",{pre:!0,attrs:{class:"token plain-text"}},[s._v("\n        ")]),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("main")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("children"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("main")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),t("span",{pre:!0,attrs:{class:"token plain-text"}},[s._v("\n      ")]),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("body")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),t("span",{pre:!0,attrs:{class:"token plain-text"}},[s._v("\n    ")]),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("html")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// app/dashboard/page.js")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" getUser "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'../lib/data'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("export")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("default")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("async")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("DashboardPage")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ä»ªè¡¨ç›˜é¡µé¢ä¹Ÿéœ€è¦åŒæ ·çš„ç”¨æˆ·ä¿¡æ¯")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" user "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("await")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getUser")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("123")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" \n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("h1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("user"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token plain-text"}},[s._v("çš„ä»ªè¡¨ç›˜")]),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("h1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br")])]),t("p",[s._v("åœ¨æ²¡æœ‰ä»»ä½•ç¼“å­˜çš„æƒ…å†µä¸‹ï¼Œå½“ç”¨æˆ·è¯·æ±‚ "),t("code",[s._v("/dashboard")]),s._v(" é¡µé¢æ—¶ï¼Œ"),t("code",[s._v("getUser(123)")]),s._v(" å‡½æ•°ä¼šåœ¨åŒä¸€æ¬¡æœåŠ¡ç«¯æ¸²æŸ“è¿‡ç¨‹ä¸­è¢«æ‰§è¡Œ"),t("strong",[s._v("ä¸¤æ¬¡")]),s._v("ã€‚è¿™æ„å‘³ç€ä¼šå‘ç”Ÿä¸¤æ¬¡å®Œå…¨ç›¸åŒçš„æ•°æ®åº“æŸ¥è¯¢æˆ– API è°ƒç”¨ï¼Œè¿™æ˜¯å†—ä½™ä¸”ä½æ•ˆçš„ã€‚")]),s._v(" "),t("p",[t("strong",[t("code",[s._v("React.cache")]),s._v(" æ­£æ˜¯è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼šå®ƒå¯ä»¥åœ¨å•æ¬¡æœåŠ¡ç«¯æ¸²æŸ“è¿‡ç¨‹ä¸­ï¼Œå¯¹æ‹¥æœ‰ç›¸åŒå‚æ•°çš„å‡½æ•°è°ƒç”¨è¿›è¡Œå»é‡ï¼ˆdeduplicationï¼‰ã€‚")])]),s._v(" "),t("hr"),s._v(" "),t("h3",{attrs:{id:"react-cache-çš„æ ¸å¿ƒåŸç†"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#react-cache-çš„æ ¸å¿ƒåŸç†"}},[s._v("ğŸŒ™")]),s._v(" React "),t("code",[s._v("cache")]),s._v(" çš„æ ¸å¿ƒåŸç†")]),s._v(" "),t("p",[t("code",[s._v("React.cache")]),s._v(" æ˜¯ä¸€ç§"),t("strong",[s._v("è®°å¿†åŒ–ï¼ˆmemoizationï¼‰"),t("strong",[s._v("çš„å½¢å¼ï¼Œä½†æœ‰ä¸€ä¸ªè‡³å…³é‡è¦çš„åŒºåˆ«ï¼šå®ƒçš„ç¼“å­˜")]),s._v("ä½œç”¨åŸŸä»…é™äºå•æ¬¡æœåŠ¡å™¨è¯·æ±‚/æ¸²æŸ“å‘¨æœŸçš„ç”Ÿå‘½å‘¨æœŸ")]),s._v("ã€‚å®ƒä¸æ˜¯ä¸€ä¸ªåƒ Next.js æ•°æ®ç¼“å­˜é‚£æ ·çš„é•¿æœŸæŒä¹…åŒ–ç¼“å­˜ã€‚")]),s._v(" "),t("p",[s._v("å®ƒçš„åº•å±‚å·¥ä½œåŸç†å¦‚ä¸‹ï¼š")]),s._v(" "),t("ol",[t("li",[t("p",[t("strong",[s._v("è¯·æ±‚ä½œç”¨åŸŸçš„å­˜å‚¨ç©ºé—´ (Request-Scoped Store):")]),s._v(" å½“ React å¼€å§‹åœ¨æœåŠ¡å™¨ä¸Šä¸ºç‰¹å®šè¯·æ±‚æ¸²æŸ“ç»„ä»¶æ ‘æ—¶ï¼Œå®ƒä¼šåˆ›å»ºä¸€ä¸ªä¸´æ—¶çš„ã€å­˜åœ¨äºå†…å­˜ä¸­çš„å­˜å‚¨ç©ºé—´ï¼ˆä½ å¯ä»¥æŠŠå®ƒæƒ³è±¡æˆä¸€ä¸ª "),t("code",[s._v("Map")]),s._v("ï¼‰ã€‚è¿™ä¸ªå­˜å‚¨ç©ºé—´å¯¹äºæœ¬æ¬¡æ¸²æŸ“æ˜¯å”¯ä¸€çš„ã€‚")])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("å‡½æ•°åŒ…è£… (Function Wrapping):")]),s._v(" å½“ä½ ç”¨ "),t("code",[s._v("React.cache")]),s._v(" åŒ…è£…ä¸€ä¸ªå‡½æ•°æ—¶ï¼Œä½ å¹¶æ²¡æœ‰æ”¹å˜åŸå§‹å‡½æ•°ã€‚ç›¸åï¼Œä½ åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„ã€â€œå¸¦ç¼“å­˜â€çš„ç‰ˆæœ¬ã€‚")])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("é¦–æ¬¡è°ƒç”¨ (ç¼“å­˜æœªå‘½ä¸­ - Cache MISS):")])]),s._v(" "),t("ul",[t("li",[s._v("å½“è¿™ä¸ªå¸¦ç¼“å­˜çš„å‡½æ•°é¦–æ¬¡è¢«ä¸€ç»„å‚æ•°è°ƒç”¨æ—¶ï¼ˆä¾‹å¦‚ "),t("code",[s._v("getUser(123)")]),s._v("ï¼‰ï¼ŒReact ä¼šç”Ÿæˆä¸€ä¸ªå”¯ä¸€çš„é”®ï¼ˆKeyï¼‰ã€‚è¿™ä¸ªé”®æ˜¯å‡½æ•°æœ¬èº«å’Œä¼ é€’ç»™å®ƒçš„å‚æ•°çš„ç»„åˆã€‚")]),s._v(" "),t("li",[s._v("React ä¼šåœ¨è¿™ä¸ªè¯·æ±‚ä½œç”¨åŸŸçš„å­˜å‚¨ç©ºé—´ä¸­æŸ¥æ‰¾è¿™ä¸ªé”®ã€‚å®ƒæ‰¾ä¸åˆ°ã€‚")]),s._v(" "),t("li",[s._v("ç„¶åï¼Œå®ƒä¼šæ‰§è¡ŒåŸå§‹å‡½æ•°ï¼ˆ"),t("code",[s._v("getUser(123)")]),s._v("ï¼‰ã€‚")]),s._v(" "),t("li",[s._v("è‡³å…³é‡è¦çš„ä¸€æ­¥ï¼šå®ƒå°†"),t("strong",[s._v("è¿”å›å€¼")]),s._v("ï¼ˆå¦‚æœæ˜¯ä¸€ä¸ªå¼‚æ­¥å‡½æ•°ï¼Œå®ƒä¼šå­˜å‚¨ "),t("code",[s._v("Promise")]),s._v(" æœ¬èº«ï¼‰ä¸ç”Ÿæˆçš„é”®ä¸€èµ·å­˜å…¥å­˜å‚¨ç©ºé—´ã€‚")]),s._v(" "),t("li",[s._v("æœ€åè¿”å›ç»“æœã€‚")])])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("åç»­è°ƒç”¨ (ç¼“å­˜å‘½ä¸­ - Cache HIT):")])]),s._v(" "),t("ul",[t("li",[s._v("åœ¨"),t("em",[s._v("åŒä¸€æ¬¡")]),s._v("æ¸²æŸ“è¿‡ç¨‹ä¸­æ™šäº›æ—¶å€™ï¼ˆä¾‹å¦‚ï¼Œå½“ "),t("code",[s._v("DashboardPage")]),s._v(" ç»„ä»¶è¢«æ¸²æŸ“æ—¶ï¼‰ï¼Œè¿™ä¸ªå¸¦ç¼“å­˜çš„å‡½æ•°å†æ¬¡è¢«å®Œå…¨ç›¸åŒçš„å‚æ•°è°ƒç”¨ï¼ˆ"),t("code",[s._v("getUser(123)")]),s._v("ï¼‰ã€‚")]),s._v(" "),t("li",[s._v("React ç”Ÿæˆäº†ç›¸åŒçš„å”¯ä¸€é”®ã€‚")]),s._v(" "),t("li",[s._v("å®ƒåœ¨è¯·æ±‚ä½œç”¨åŸŸçš„å­˜å‚¨ç©ºé—´ä¸­æ£€æŸ¥ï¼Œå¹¶"),t("strong",[s._v("æ‰¾åˆ°äº†è¿™ä¸ªé”®")]),s._v("ã€‚")]),s._v(" "),t("li",[s._v("å®ƒä¼šç«‹å³è¿”å›"),t("strong",[s._v("å·²å­˜å‚¨çš„å€¼")]),s._v("ï¼ˆä¸ç¬¬ä¸€æ¬¡è°ƒç”¨æ—¶ç›¸åŒçš„é‚£ä¸ª "),t("code",[s._v("Promise")]),s._v("ï¼‰ï¼Œè€Œ"),t("strong",[s._v("ä¸ä¼šå†æ¬¡æ‰§è¡ŒåŸå§‹å‡½æ•°")]),s._v("ã€‚")])])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("æ¸²æŸ“å®Œæˆ (Render Completion):")]),s._v(" ä¸€æ—¦æ•´ä¸ªæœåŠ¡ç«¯æ¸²æŸ“å®Œæˆå¹¶ä¸”å“åº”å·²ç»å‘é€ç»™å®¢æˆ·ç«¯ï¼ŒReact å°±ä¼š"),t("strong",[s._v("ä¸¢å¼ƒè¿™ä¸ªä¸´æ—¶å­˜å‚¨ç©ºé—´")]),s._v("ã€‚å†…å­˜è¢«é‡Šæ”¾ï¼Œä¸‹ä¸€ä¸ªè¯·æ±‚å°†ä»ä¸€ä¸ªå…¨æ–°çš„ã€ç©ºçš„å­˜å‚¨ç©ºé—´å¼€å§‹ã€‚")])])]),s._v(" "),t("p",[s._v("è¿™ä¸ªæœºåˆ¶ç¡®ä¿äº†åœ¨ä¸€æ¬¡é€»è¾‘æ“ä½œï¼ˆæ¸²æŸ“ä¸€ä¸ªé¡µé¢ï¼‰ä¸­ï¼Œä½ æ°¸è¿œä¸ä¼šä¸ºè·å–ç›¸åŒæ•°æ®æ”¯ä»˜å¤šæ¬¡æˆæœ¬ã€‚")]),s._v(" "),t("hr"),s._v(" "),t("h3",{attrs:{id:"æ‰‹åŠ¨å®ç°-æ„å»ºæˆ‘ä»¬è‡ªå·±çš„-cache"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#æ‰‹åŠ¨å®ç°-æ„å»ºæˆ‘ä»¬è‡ªå·±çš„-cache"}},[s._v("ğŸŒ™")]),s._v(" æ‰‹åŠ¨å®ç°ï¼šæ„å»ºæˆ‘ä»¬è‡ªå·±çš„ "),t("code",[s._v("cache")])]),s._v(" "),t("p",[s._v("ç°åœ¨åˆ°äº†æœ‰è¶£çš„éƒ¨åˆ†ã€‚è®©æˆ‘ä»¬æ„å»ºä¸€ä¸ªè¿™ä¸ªåŠŸèƒ½çš„ç®€åŒ–ç‰ˆæœ¬æ¥å·©å›ºæˆ‘ä»¬çš„ç†è§£ã€‚æˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ªå·¥å‚å‡½æ•°æ¥æ¨¡æ‹Ÿç¼“å­˜çš„â€œè¯·æ±‚ä½œç”¨åŸŸâ€ç‰¹æ€§ã€‚")]),s._v(" "),t("div",{staticClass:"language-javascript line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-javascript"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/**\n * åˆ›å»ºä¸€ä¸ªæ–°çš„ç¼“å­˜å®ä¾‹ã€‚åœ¨çœŸå®çš„æœåŠ¡å™¨ç¯å¢ƒä¸­ï¼Œ\n * ä½ ä¼šåœ¨æ¯ä¸ªæœåŠ¡å™¨è¯·æ±‚å¼€å§‹æ—¶è°ƒç”¨å®ƒã€‚\n */")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("createRequestCache")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// è¿™ä¸ª WeakMap ç”¨äºå­˜å‚¨æ¯ä¸ªå‡½æ•°çš„ç¼“å­˜ã€‚")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ç»“æ„æ˜¯ï¼šWeakMap<Function, Map<Key, Value>>")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// æˆ‘ä»¬ä½¿ç”¨ WeakMapï¼Œè¿™æ ·å¦‚æœå‡½æ•°æœ¬èº«è¢«åƒåœ¾å›æ”¶ï¼Œå®ƒçš„ç¼“å­˜ä¹Ÿä¼šè¢«è‡ªåŠ¨ç§»é™¤ã€‚")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" cacheStore "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("WeakMap")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n  console"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'[ç³»ç»Ÿ]ä¸€ä¸ªæ–°çš„è¯·æ±‚ä½œç”¨åŸŸç¼“å­˜å·²è¢«åˆ›å»ºã€‚'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/**\n   * ç¼“å­˜å‡½æ•°ï¼ŒåŠŸèƒ½ç±»ä¼¼äº React.cacheã€‚\n   * @param {Function} fn è¦è¢«è®°å¿†åŒ–çš„å¼‚æ­¥å‡½æ•°ã€‚\n   */")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cache")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("fn")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// è¿”å›ä¸€ä¸ªæ–°çš„ã€åŒ…å«äº†ç¼“å­˜é€»è¾‘çš„åŒ…è£…å‡½æ•°ã€‚")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("async")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token parameter"}},[t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("...")]),s._v("args")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 1. è·å–æˆ–åˆ›å»ºé’ˆå¯¹è¿™ä¸ªç‰¹å®šå‡½æ•° `fn` çš„å‚æ•°ç¼“å­˜ã€‚")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("cacheStore"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("has")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("fn"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        cacheStore"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("set")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("fn"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Map")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" argumentCache "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" cacheStore"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("get")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("fn"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 2. ä»å‚æ•°åˆ›å»ºä¸€ä¸ªç¨³å®šçš„é”®ã€‚")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// æ³¨æ„ï¼šè¿™æ˜¯ä¸€ä¸ªç®€åŒ–çš„é”®ç”Ÿæˆç­–ç•¥ã€‚React çš„å†…éƒ¨å®ç°æ›´å¥å£®ã€‚")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// JSON.stringify å¹¶ä¸å®Œç¾ï¼ˆä¾‹å¦‚ï¼Œå¯¹äºå¯¹è±¡é”®çš„é¡ºåºï¼‰ï¼Œä½†ç”¨äºæ¼”ç¤ºå·²ç»è¶³å¤Ÿå¥½ã€‚")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" key "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("JSON")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("stringify")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("args"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 3. æ£€æŸ¥ç¼“å­˜æ˜¯å¦å‘½ä¸­ã€‚")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("argumentCache"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("has")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("key"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        console"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token template-string"}},[t("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[s._v("`")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("[ç¼“å­˜å‘½ä¸­] å‡½æ•°: ")]),t("span",{pre:!0,attrs:{class:"token interpolation"}},[t("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[s._v("${")]),s._v("fn"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("name"),t("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[s._v("}")])]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v(", å‚æ•°: ")]),t("span",{pre:!0,attrs:{class:"token interpolation"}},[t("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[s._v("${")]),s._v("key"),t("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[s._v("}")])]),t("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[s._v("`")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" argumentCache"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("get")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("key"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 4. å¤„ç†ç¼“å­˜æœªå‘½ä¸­çš„æƒ…å†µã€‚")]),s._v("\n      console"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token template-string"}},[t("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[s._v("`")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("[ç¼“å­˜æœªå‘½ä¸­] å‡½æ•°: ")]),t("span",{pre:!0,attrs:{class:"token interpolation"}},[t("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[s._v("${")]),s._v("fn"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("name"),t("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[s._v("}")])]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v(", å‚æ•°: ")]),t("span",{pre:!0,attrs:{class:"token interpolation"}},[t("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[s._v("${")]),s._v("key"),t("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[s._v("}")])]),t("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[s._v("`")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    \n      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// æ‰§è¡ŒåŸå§‹å‡½æ•°ã€‚å…¶ç»“æœæ˜¯ä¸€ä¸ª Promiseã€‚")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" resultPromise "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("fn")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("...")]),s._v("args"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    \n      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// å°†è¿™ä¸ª Promise å­˜å…¥ç¼“å­˜ã€‚")]),s._v("\n      argumentCache"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("set")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("key"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" resultPromise"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    \n      "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" resultPromise"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" cache "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// --- æ¨¡æ‹Ÿåœºæ™¯ ---")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// å®šä¹‰ä¸€ä¸ªæˆ‘ä»¬å‡æƒ³çš„ã€å¾ˆæ…¢çš„æ•°æ®è·å–å‡½æ•°ã€‚")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("async")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getUser")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("id")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  console"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token template-string"}},[t("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[s._v("`")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("[ç½‘ç»œ] æ­£åœ¨è·å– ID ä¸º ")]),t("span",{pre:!0,attrs:{class:"token interpolation"}},[t("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[s._v("${")]),s._v("id"),t("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[s._v("}")])]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v(" çš„ç”¨æˆ·... (è¿™ä¼šå¾ˆæ…¢)")]),t("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[s._v("`")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// æ¨¡æ‹Ÿç½‘ç»œå»¶è¿Ÿ")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("await")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Promise")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("resolve")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("setTimeout")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("resolve"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1000")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" \n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token template-string"}},[t("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[s._v("`")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("ç”¨æˆ· ")]),t("span",{pre:!0,attrs:{class:"token interpolation"}},[t("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[s._v("${")]),s._v("id"),t("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[s._v("}")])]),t("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[s._v("`")])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// è¿™ä¸ªå‡½æ•°æ¨¡æ‹Ÿä¸€æ¬¡å®Œæ•´çš„æœåŠ¡å™¨è¯·æ±‚å’Œé¡µé¢æ¸²æŸ“ã€‚")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("async")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("handleServerRequest")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  console"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"--- æ”¶åˆ°æ–°çš„æœåŠ¡å™¨è¯·æ±‚ ---"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// å¯¹æ¯ä¸ªè¯·æ±‚ï¼Œæˆ‘ä»¬éƒ½è·å–ä¸€ä¸ªå…¨æ–°çš„ã€å¹²å‡€çš„ç¼“å­˜å®ä¾‹ã€‚")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" cache "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("createRequestCache")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ç”¨æˆ‘ä»¬è‡ªå·±å®ç°çš„ cache æ¥åŒ…è£…æ•°æ®è·å–å‡½æ•°ã€‚")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" getCachedUser "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cache")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("getUser"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ç°åœ¨ï¼Œæˆ‘ä»¬æ¨¡æ‹Ÿä¸€ä¸ªç»„ä»¶æ ‘çš„æ¸²æŸ“è¿‡ç¨‹ã€‚")]),s._v("\n  console"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"æ­£åœ¨æ¸²æŸ“ç»„ä»¶æ ‘..."')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// æƒ³è±¡ Layout.js è°ƒç”¨å®ƒï¼Œç„¶å Page.js ä¹Ÿè°ƒç”¨å®ƒã€‚")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" userPromise1 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getCachedUser")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("123")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ç¬¬ä¸€æ¬¡è°ƒç”¨")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" userPromise2 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getCachedUser")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("123")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ç¬¬äºŒæ¬¡è°ƒç”¨ï¼Œå‚æ•°ç›¸åŒ")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" userPromise3 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getCachedUser")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("456")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ç¬¬ä¸‰æ¬¡è°ƒç”¨ï¼Œå‚æ•°ä¸åŒ")]),s._v("\n\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ç­‰å¾…æ‰€æœ‰ç»“æœè¿”å›")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("user1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" user2"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" user3"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("await")]),s._v(" Promise"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("all")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n    userPromise1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    userPromise2"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    userPromise3"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n  console"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"\\n--- æ¸²æŸ“å®Œæˆ ---"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  console"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ç»“æœ 1:"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" user1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  console"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ç»“æœ 2:"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" user2"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  console"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ç»“æœ 3:"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" user3"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n  console"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("assert")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("user1 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),s._v(" user2"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"æ–­è¨€å¤±è´¥: user1 å’Œ user2 åº”è¯¥æ˜¯åŒä¸€ä¸ªå¯¹è±¡å¼•ç”¨ï¼"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  console"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"\\næ–­è¨€é€šè¿‡: user1 å’Œ user2 æŒ‡å‘åŒä¸€ä»½æ•°æ®ï¼Œè¯æ˜å»é‡æˆåŠŸã€‚"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// è¿è¡Œæ¨¡æ‹Ÿ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("handleServerRequest")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br"),t("span",{staticClass:"line-number"},[s._v("41")]),t("br"),t("span",{staticClass:"line-number"},[s._v("42")]),t("br"),t("span",{staticClass:"line-number"},[s._v("43")]),t("br"),t("span",{staticClass:"line-number"},[s._v("44")]),t("br"),t("span",{staticClass:"line-number"},[s._v("45")]),t("br"),t("span",{staticClass:"line-number"},[s._v("46")]),t("br"),t("span",{staticClass:"line-number"},[s._v("47")]),t("br"),t("span",{staticClass:"line-number"},[s._v("48")]),t("br"),t("span",{staticClass:"line-number"},[s._v("49")]),t("br"),t("span",{staticClass:"line-number"},[s._v("50")]),t("br"),t("span",{staticClass:"line-number"},[s._v("51")]),t("br"),t("span",{staticClass:"line-number"},[s._v("52")]),t("br"),t("span",{staticClass:"line-number"},[s._v("53")]),t("br"),t("span",{staticClass:"line-number"},[s._v("54")]),t("br"),t("span",{staticClass:"line-number"},[s._v("55")]),t("br"),t("span",{staticClass:"line-number"},[s._v("56")]),t("br"),t("span",{staticClass:"line-number"},[s._v("57")]),t("br"),t("span",{staticClass:"line-number"},[s._v("58")]),t("br"),t("span",{staticClass:"line-number"},[s._v("59")]),t("br"),t("span",{staticClass:"line-number"},[s._v("60")]),t("br"),t("span",{staticClass:"line-number"},[s._v("61")]),t("br"),t("span",{staticClass:"line-number"},[s._v("62")]),t("br"),t("span",{staticClass:"line-number"},[s._v("63")]),t("br"),t("span",{staticClass:"line-number"},[s._v("64")]),t("br"),t("span",{staticClass:"line-number"},[s._v("65")]),t("br"),t("span",{staticClass:"line-number"},[s._v("66")]),t("br"),t("span",{staticClass:"line-number"},[s._v("67")]),t("br"),t("span",{staticClass:"line-number"},[s._v("68")]),t("br"),t("span",{staticClass:"line-number"},[s._v("69")]),t("br"),t("span",{staticClass:"line-number"},[s._v("70")]),t("br"),t("span",{staticClass:"line-number"},[s._v("71")]),t("br"),t("span",{staticClass:"line-number"},[s._v("72")]),t("br"),t("span",{staticClass:"line-number"},[s._v("73")]),t("br"),t("span",{staticClass:"line-number"},[s._v("74")]),t("br"),t("span",{staticClass:"line-number"},[s._v("75")]),t("br"),t("span",{staticClass:"line-number"},[s._v("76")]),t("br"),t("span",{staticClass:"line-number"},[s._v("77")]),t("br"),t("span",{staticClass:"line-number"},[s._v("78")]),t("br"),t("span",{staticClass:"line-number"},[s._v("79")]),t("br"),t("span",{staticClass:"line-number"},[s._v("80")]),t("br"),t("span",{staticClass:"line-number"},[s._v("81")]),t("br"),t("span",{staticClass:"line-number"},[s._v("82")]),t("br"),t("span",{staticClass:"line-number"},[s._v("83")]),t("br"),t("span",{staticClass:"line-number"},[s._v("84")]),t("br"),t("span",{staticClass:"line-number"},[s._v("85")]),t("br"),t("span",{staticClass:"line-number"},[s._v("86")]),t("br"),t("span",{staticClass:"line-number"},[s._v("87")]),t("br"),t("span",{staticClass:"line-number"},[s._v("88")]),t("br"),t("span",{staticClass:"line-number"},[s._v("89")]),t("br"),t("span",{staticClass:"line-number"},[s._v("90")]),t("br"),t("span",{staticClass:"line-number"},[s._v("91")]),t("br"),t("span",{staticClass:"line-number"},[s._v("92")]),t("br"),t("span",{staticClass:"line-number"},[s._v("93")]),t("br"),t("span",{staticClass:"line-number"},[s._v("94")]),t("br"),t("span",{staticClass:"line-number"},[s._v("95")]),t("br"),t("span",{staticClass:"line-number"},[s._v("96")]),t("br"),t("span",{staticClass:"line-number"},[s._v("97")]),t("br"),t("span",{staticClass:"line-number"},[s._v("98")]),t("br")])]),t("h4",{attrs:{id:"è¿è¡Œä»£ç å¹¶åˆ†æè¾“å‡º"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#è¿è¡Œä»£ç å¹¶åˆ†æè¾“å‡º"}},[s._v("ğŸŒ™")]),s._v(" è¿è¡Œä»£ç å¹¶åˆ†æè¾“å‡º")]),s._v(" "),t("p",[s._v("å¦‚æœä½ åœ¨ Node.js ç¯å¢ƒä¸­è¿è¡Œè¿™æ®µä»£ç ï¼Œä½ ä¼šçœ‹åˆ°ç±»ä¼¼ä¸‹é¢çš„è¾“å‡ºï¼š")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("--- æ”¶åˆ°æ–°çš„æœåŠ¡å™¨è¯·æ±‚ ---\n[ç³»ç»Ÿ]ä¸€ä¸ªæ–°çš„è¯·æ±‚ä½œç”¨åŸŸç¼“å­˜å·²è¢«åˆ›å»ºã€‚\næ­£åœ¨æ¸²æŸ“ç»„ä»¶æ ‘...\n[ç¼“å­˜æœªå‘½ä¸­] å‡½æ•°: getUser, å‚æ•°: [123]\n[ç½‘ç»œ] æ­£åœ¨è·å– ID ä¸º 123 çš„ç”¨æˆ·... (è¿™ä¼šå¾ˆæ…¢)\n[ç¼“å­˜å‘½ä¸­] å‡½æ•°: getUser, å‚æ•°: [123]\n[ç¼“å­˜æœªå‘½ä¸­] å‡½æ•°: getUser, å‚æ•°: [456]\n[ç½‘ç»œ] æ­£åœ¨è·å– ID ä¸º 456 çš„ç”¨æˆ·... (è¿™ä¼šå¾ˆæ…¢)\n\n--- æ¸²æŸ“å®Œæˆ ---\nç»“æœ 1: { id: 123, name: 'ç”¨æˆ· 123' }\nç»“æœ 2: { id: 123, name: 'ç”¨æˆ· 123' }\nç»“æœ 3: { id: 456, name: 'ç”¨æˆ· 456' }\n\næ–­è¨€é€šè¿‡: user1 å’Œ user2 æŒ‡å‘åŒä¸€ä»½æ•°æ®ï¼Œè¯æ˜å»é‡æˆåŠŸã€‚\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br")])]),t("p",[t("strong",[s._v("ä»è¾“å‡ºä¸­å¾—å‡ºçš„å…³é”®è§‚å¯Ÿï¼š")])]),s._v(" "),t("ol",[t("li",[t("strong",[t("code",[s._v("[123]")]),s._v(" çš„ç¼“å­˜æœªå‘½ä¸­ï¼š")]),s._v(" ç¬¬ä¸€æ¬¡è°ƒç”¨ "),t("code",[s._v("getCachedUser(123)")]),s._v(" æ˜¯æœªå‘½ä¸­çš„ï¼Œæ‰€ä»¥å®ƒè§¦å‘äº†â€œæ…¢é€Ÿâ€çš„ç½‘ç»œè¯·æ±‚ã€‚")]),s._v(" "),t("li",[t("strong",[t("code",[s._v("[123]")]),s._v(" çš„ç¼“å­˜å‘½ä¸­ï¼š")]),s._v(" ç¬¬äºŒæ¬¡è°ƒç”¨ "),t("code",[s._v("getCachedUser(123)")]),s._v(" æ˜¯ä¸€ä¸ªå³æ—¶çš„å‘½ä¸­ã€‚æˆ‘ä»¬çœ‹åˆ° "),t("code",[s._v("[ç½‘ç»œ]")]),s._v(" çš„æ—¥å¿—"),t("strong",[s._v("æ²¡æœ‰")]),s._v("å†æ¬¡æ‰“å°ï¼Œè¯æ˜äº†å‡½æ•°æ²¡æœ‰è¢«é‡å¤æ‰§è¡Œã€‚")]),s._v(" "),t("li",[t("strong",[t("code",[s._v("[456]")]),s._v(" çš„ç¼“å­˜æœªå‘½ä¸­ï¼š")]),s._v(" ä½¿ç”¨ä¸åŒå‚æ•°çš„è°ƒç”¨æ˜¯æœªå‘½ä¸­çš„ï¼Œè¿™ç¬¦åˆé¢„æœŸï¼Œå¹¶è§¦å‘äº†å®ƒè‡ªå·±çš„ç½‘ç»œè¯·æ±‚ã€‚")]),s._v(" "),t("li",[t("strong",[s._v("ä½œç”¨åŸŸç¼“å­˜ï¼š")]),s._v(" å¦‚æœä½ å†æ¬¡è°ƒç”¨ "),t("code",[s._v("handleServerRequest()")]),s._v("ï¼Œå®ƒä¼šåˆ›å»ºä¸€ä¸ªå…¨æ–°çš„ç¼“å­˜å®ä¾‹ï¼Œæ•´ä¸ªè¿‡ç¨‹ä¼šé‡æ–°å¼€å§‹ã€‚")])]),s._v(" "),t("p",[s._v("è¿™ä¸ªæ‰‹åŠ¨å®ç°å®Œç¾åœ°å±•ç¤ºäº† Next.js æ‰€åˆ©ç”¨çš„åŸç†ï¼š"),t("strong",[t("code",[s._v("React.cache")]),s._v(" æä¾›äº†ä¸€ä¸ªå¯é çš„ã€è¯·æ±‚ä½œç”¨åŸŸçš„æœºåˆ¶ï¼Œæ¥é˜²æ­¢åœ¨å•æ¬¡æ¸²æŸ“ä¸­è¿›è¡Œé‡å¤å·¥ä½œï¼Œä½¿å¾—åœ¨å¤æ‚çš„æœåŠ¡ç«¯ç»„ä»¶æ ‘ä¸­è·å–æ•°æ®æ—¢ç®€å•åˆé«˜æ•ˆã€‚")])])])}),[],!1,null,null,null);t.default=e.exports}}]);