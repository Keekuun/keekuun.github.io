(window.webpackJsonp=window.webpackJsonp||[]).push([[282],{999:function(s,t,a){"use strict";a.r(t);var n=a(2),e=Object(n.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h3",{attrs:{id:"ä¸€ã€æ ¸å¿ƒç†å¿µä¸æ¶æ„åŸåˆ™"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ä¸€ã€æ ¸å¿ƒç†å¿µä¸æ¶æ„åŸåˆ™"}},[s._v("ğŸŒ™")]),s._v(" ä¸€ã€æ ¸å¿ƒç†å¿µä¸æ¶æ„åŸåˆ™")]),s._v(" "),t("p",[s._v("åœ¨å¼€å§‹ä¹‹å‰ï¼Œå…ˆå»ºç«‹æ­£ç¡®çš„æ¶æ„æ€æƒ³ã€‚")]),s._v(" "),t("ol",[t("li",[t("strong",[s._v("å…¨æ ˆç±»å‹å®‰å…¨ (End-to-End Type Safety)")]),s._v("ï¼šè¿™æ˜¯æˆ‘ä»¬çš„é¦–è¦ç›®æ ‡ã€‚ä»æ•°æ®åº“ Schema åˆ°åç«¯ APIï¼Œå†åˆ°å‰ç«¯ç»„ä»¶ï¼Œç±»å‹åº”è¯¥æ— ç¼æµåŠ¨ã€‚è¿™èƒ½æå¤§åœ°å‡å°‘è¿è¡Œæ—¶é”™è¯¯ï¼Œå¹¶æä¾›æ— ä¸ä¼¦æ¯”çš„è‡ªåŠ¨è¡¥å…¨å’Œé‡æ„ä½“éªŒã€‚")]),s._v(" "),t("li",[t("strong",[s._v("æ˜ç¡®çš„è¾¹ç•Œ (Clear Boundaries)")]),s._v("ï¼šè™½ç„¶æ˜¯å…¨æ ˆåº”ç”¨ï¼Œä½†æ•°æ®è®¿é—®å±‚ã€ä¸šåŠ¡é€»è¾‘å’ŒUIå±‚ä¹‹é—´æœ‰æ¸…æ™°çš„ç•Œé™ã€‚è¿™ä½¿å¾—ä»£ç æ›´æ˜“äºç»´æŠ¤å’Œæµ‹è¯•ã€‚")]),s._v(" "),t("li",[t("strong",[s._v("æ•°æ®åº“è¿æ¥ç®¡ç† (Connection Management)")]),s._v("ï¼šåœ¨ Serverless ç¯å¢ƒï¼ˆå¦‚ Vercelï¼‰ä¸­ï¼Œæ•°æ®åº“è¿æ¥ä¸æ˜¯é•¿ä¹…ä¿æŒçš„ã€‚å¿…é¡»ä½¿ç”¨é«˜æ•ˆçš„è¿æ¥æ± ç­–ç•¥ï¼Œé¿å…åœ¨é«˜å¹¶å‘ä¸‹è€—å°½æ•°æ®åº“è¿æ¥æ•°ã€‚")]),s._v(" "),t("li",[t("strong",[s._v("Schema å³çœŸç† (Schema as the Source of Truth)")]),s._v("ï¼šæ•°æ®åº“çš„ç»“æ„åº”è¯¥é€šè¿‡ä»£ç æ¥ç®¡ç†ï¼ˆå³ Schema-as-Codeï¼‰ï¼Œè€Œä¸æ˜¯æ‰‹åŠ¨å»æ•°æ®åº“å®¢æˆ·ç«¯é‡Œä¿®æ”¹ã€‚è¿™ä¿è¯äº†å¼€å‘ã€æµ‹è¯•å’Œç”Ÿäº§ç¯å¢ƒçš„ä¸€è‡´æ€§ã€‚")]),s._v(" "),t("li",[t("strong",[s._v("å®‰å…¨ç¬¬ä¸€ (Security First)")]),s._v("ï¼šä»»ä½•æ—¶å€™éƒ½ä¸èƒ½å°†æ•°æ®åº“å‡­è¯ç­‰æ•æ„Ÿä¿¡æ¯æš´éœ²åœ¨å®¢æˆ·ç«¯ã€‚SQL æ³¨å…¥ç­‰å®‰å…¨æ¼æ´å¿…é¡»åœ¨æ¶æ„å±‚é¢å°±è¢«æœç»ã€‚")])]),s._v(" "),t("hr"),s._v(" "),t("h3",{attrs:{id:"äºŒã€æŠ€æœ¯æ ˆ"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#äºŒã€æŠ€æœ¯æ ˆ"}},[s._v("ğŸŒ™")]),s._v(" äºŒã€æŠ€æœ¯æ ˆ")]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",{staticStyle:{"text-align":"left"}},[s._v("å±‚é¢")]),s._v(" "),t("th",{staticStyle:{"text-align":"left"}},[s._v("æ¨èå·¥å…·")]),s._v(" "),t("th",{staticStyle:{"text-align":"left"}},[s._v("ä¸ºä»€ä¹ˆï¼Ÿ")])])]),s._v(" "),t("tbody",[t("tr",[t("td",{staticStyle:{"text-align":"left"}},[t("strong",[s._v("æ¡†æ¶")])]),s._v(" "),t("td",{staticStyle:{"text-align":"left"}},[t("strong",[s._v("Next.js (App Router)")])]),s._v(" "),t("td",{staticStyle:{"text-align":"left"}},[s._v("åŸç”Ÿæ”¯æŒ React Server Components (RSC)ï¼Œè®©åœ¨æœåŠ¡ç«¯ç›´æ¥è·å–æ•°æ®æˆä¸ºå¯èƒ½ï¼Œæ˜¯ä¸æ•°æ®åº“ç»“åˆçš„ç†æƒ³æ¨¡å¼ã€‚")])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"left"}},[t("strong",[s._v("æ•°æ®åº“")])]),s._v(" "),t("td",{staticStyle:{"text-align":"left"}},[t("strong",[s._v("PostgreSQL")])]),s._v(" "),t("td",{staticStyle:{"text-align":"left"}},[s._v("åŠŸèƒ½å¼ºå¤§ã€ç¨³å®šå¯é ã€ç¤¾åŒºåºå¤§ï¼Œå¹¶ä¸”æœ‰è®¸å¤šç°ä»£åŒ–çš„æ‰˜ç®¡æœåŠ¡ï¼ˆå¦‚ Vercel Postgres, Neon, Supabaseï¼‰å®Œç¾é€‚é… Serverless æ¶æ„ã€‚")])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"left"}},[t("strong",[s._v("ORM")])]),s._v(" "),t("td",{staticStyle:{"text-align":"left"}},[t("strong",[s._v("Prisma")])]),s._v(" "),t("td",{staticStyle:{"text-align":"left"}},[t("strong",[s._v("è¿™æ˜¯å®ç°å…¨æ ˆç±»å‹å®‰å…¨çš„æ ¸å¿ƒ")]),s._v("ã€‚å®ƒèƒ½æ ¹æ®ä½ çš„æ•°æ®åº“ Schema è‡ªåŠ¨ç”Ÿæˆç±»å‹å®‰å…¨çš„å®¢æˆ·ç«¯ï¼Œå¤„ç† migrationsï¼Œå¹¶å†…ç½®è¿æ¥æ± ç®¡ç†ï¼Œå®Œç¾è§£å†³äº†ä¸Šè¿°çš„æ ¸å¿ƒç†å¿µã€‚")])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"left"}},[t("strong",[s._v("æ•°æ®éªŒè¯")])]),s._v(" "),t("td",{staticStyle:{"text-align":"left"}},[t("strong",[s._v("Zod")])]),s._v(" "),t("td",{staticStyle:{"text-align":"left"}},[s._v("åœ¨å¤„ç†è¡¨å•å’Œ API è¾“å…¥æ—¶ï¼Œæä¾›å¼ºå¤§çš„ç±»å‹æ¨æ–­å’Œè¿è¡Œæ—¶éªŒè¯ï¼Œä¸ TypeScript é…åˆå¤©è¡£æ— ç¼ã€‚")])])])]),s._v(" "),t("p",[s._v("æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†ä»¥ "),t("strong",[s._v("Next.js + Prisma + PostgreSQL")]),s._v(" çš„ç»„åˆä¸ºä¾‹ï¼Œå±•å¼€æœ€ä½³å®è·µã€‚")]),s._v(" "),t("hr"),s._v(" "),t("h3",{attrs:{id:"ä¸‰ã€è¯¦ç»†æ­¥éª¤"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ä¸‰ã€è¯¦ç»†æ­¥éª¤"}},[s._v("ğŸŒ™")]),s._v(" ä¸‰ã€è¯¦ç»†æ­¥éª¤")]),s._v(" "),t("h4",{attrs:{id:"_1-é¡¹ç›®åˆå§‹åŒ–ä¸ç¯å¢ƒè®¾ç½®"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-é¡¹ç›®åˆå§‹åŒ–ä¸ç¯å¢ƒè®¾ç½®"}},[s._v("ğŸŒ™")]),s._v(" 1. é¡¹ç›®åˆå§‹åŒ–ä¸ç¯å¢ƒè®¾ç½®")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 1. åˆ›å»º Next.js é¡¹ç›® (ä½¿ç”¨ App Router)")]),s._v("\nnpx create-next-app@latest  nextjs-postgres-app "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--typescript")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 2. å®‰è£… Prisma å’Œ PostgreSQL é©±åŠ¨")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v("  nextjs-postgres-app\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" prisma --save-dev\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" @prisma/client pg\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("ul",[t("li",[t("code",[s._v("prisma")]),s._v(": Prisma çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œç”¨äº migrations, schema ç”Ÿæˆç­‰ã€‚")]),s._v(" "),t("li",[t("code",[s._v("@prisma/client")]),s._v(": Prisma è‡ªåŠ¨ç”Ÿæˆçš„ã€ç±»å‹å®‰å…¨çš„æ•°æ®åº“æŸ¥è¯¢å®¢æˆ·ç«¯ã€‚")]),s._v(" "),t("li",[t("code",[s._v("pg")]),s._v(": Node.js çš„ PostgreSQL é©±åŠ¨ï¼ŒPrisma åœ¨åº•å±‚ä¼šä½¿ç”¨å®ƒã€‚")])]),s._v(" "),t("h4",{attrs:{id:"_2-é…ç½®-prisma-è¿æ¥æ•°æ®åº“"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-é…ç½®-prisma-è¿æ¥æ•°æ®åº“"}},[s._v("ğŸŒ™")]),s._v(" 2. é…ç½® Prisma è¿æ¥æ•°æ®åº“")]),s._v(" "),t("ol",[t("li",[t("p",[t("strong",[s._v("åˆå§‹åŒ– Prisma")]),s._v(":")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("npx prisma init\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("è¿™ä¼šåˆ›å»ºä¸¤ä¸ªæ–‡ä»¶ï¼š")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("prisma/schema.prisma")]),s._v(": ä½ çš„æ•°æ®åº“æ¨¡å‹å’Œè¿æ¥é…ç½®ã€‚")]),s._v(" "),t("li",[t("code",[s._v(".env")]),s._v(": å­˜æ”¾ç¯å¢ƒå˜é‡ï¼Œç‰¹åˆ«æ˜¯æ•°æ®åº“è¿æ¥å­—ç¬¦ä¸²ã€‚")])])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("é…ç½® "),t("code",[s._v(".env")])]),s._v(":\næ‰“å¼€ "),t("code",[s._v(".env")]),s._v(" æ–‡ä»¶ï¼Œå¡«å…¥ä½ çš„ PostgreSQL è¿æ¥å­—ç¬¦ä¸²ã€‚")]),s._v(" "),t("div",{staticClass:"language-env line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('# .env\n# æ°¸è¿œä¸è¦å°†æ­¤æ–‡ä»¶æäº¤åˆ° Git ä»“åº“ï¼\nDATABASE_URL="postgresql://USERNAME:PASSWORD@HOST:PORT/DATABASE?schema=public"\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[t("strong",[s._v("æœ€ä½³å®è·µ")]),s._v(": å¼ºçƒˆå»ºè®®ä¸ºæœ¬åœ°å¼€å‘ã€æµ‹è¯•å’Œç”Ÿäº§ä½¿ç”¨ä¸åŒçš„æ•°æ®åº“å®ä¾‹ã€‚")])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("å®šä¹‰æ•°æ®æ¨¡å‹ ("),t("code",[s._v("schema.prisma")]),s._v(")")]),s._v(":\nè¿™æ˜¯â€œSchema å³çœŸç†â€çš„ä½“ç°ã€‚åœ¨è¿™é‡Œå®šä¹‰ä½ çš„æ•°æ®è¡¨ç»“æ„ã€‚")]),s._v(" "),t("div",{staticClass:"language-prisma line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('// prisma/schema.prisma\n\ngenerator client {\n  provider = "prisma-client-js"\n  // é»˜è®¤ç”Ÿæˆåœ¨ `node_modules/@prisma/client` ç›®å½•ä¸‹\n  // output   = "../app/generated/prisma"\n}\n\ndatasource db {\n  provider = "postgresql"\n  url      = env("DATABASE_URL")\n}\n\n// ç¤ºä¾‹æ¨¡å‹ï¼šç”¨æˆ·å’Œæ–‡ç« \nmodel User {\n  id    Int     @id @default(autoincrement())\n  email String  @unique\n  name  String?\n  posts Post[]  // ç”¨æˆ·å’Œæ–‡ç« æ˜¯ä¸€å¯¹å¤šå…³ç³»\n}\n\nmodel Post {\n  id        Int      @id @default(autoincrement())\n  title     String\n  content   String?\n  published Boolean  @default(false)\n  author    User     @relation(fields: [authorId], references: [id])\n  authorId  Int\n}\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br")])])])]),s._v(" "),t("h4",{attrs:{id:"_3-æ•°æ®åº“è¿ç§»-migrations"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-æ•°æ®åº“è¿ç§»-migrations"}},[s._v("ğŸŒ™")]),s._v(" 3. æ•°æ®åº“è¿ç§» (Migrations)")]),s._v(" "),t("p",[t("strong",[s._v("è¿™æ˜¯ç”Ÿäº§é¡¹ç›®ä¸­å¿…ä¸å¯å°‘çš„ä¸€æ­¥")]),s._v("ã€‚å®ƒè®°å½•äº†ä½ å¯¹æ•°æ®åº“ Schema çš„æ¯ä¸€æ¬¡å˜æ›´ã€‚")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 1. åˆ›å»ºä½ çš„ç¬¬ä¸€æ¬¡ migration")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Prisma ä¼šæ¯”è¾ƒä½ çš„ schema.prisma å’Œæ•°æ®åº“çš„å½“å‰çŠ¶æ€ï¼Œç”Ÿæˆä¸€ä¸ª SQL è¿ç§»æ–‡ä»¶")]),s._v("\nnpx prisma migrate dev "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--name")]),s._v(" init\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 2. æ¯å½“ä½ ä¿®æ”¹äº† schema.prisma (æ¯”å¦‚å¢åŠ ä¸€ä¸ªå­—æ®µ)ï¼Œå°±é‡å¤æ­¤å‘½ä»¤")]),s._v("\nnpx prisma migrate dev "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--name")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"add_post_published_field"')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("ul",[t("li",[t("code",[s._v("migrate dev")]),s._v(": ä¸“é—¨ç”¨äºå¼€å‘ç¯å¢ƒï¼Œå®ƒä¼šè‡ªåŠ¨åº”ç”¨è¿ç§»å¹¶é‡æ–°ç”Ÿæˆ Prisma Clientã€‚")]),s._v(" "),t("li",[t("strong",[s._v("ç”Ÿäº§ç¯å¢ƒ")]),s._v(": åœ¨éƒ¨ç½²æ—¶ï¼Œä½ åº”è¯¥ä½¿ç”¨ "),t("code",[s._v("prisma migrate deploy")]),s._v("ï¼Œå®ƒåªä¼šåº”ç”¨è¿ç§»ï¼Œä¸ä¼šå°è¯•ä¿®æ”¹æ•°æ®åº“ç»“æ„ã€‚")])]),s._v(" "),t("h4",{attrs:{id:"_4-åˆ›å»ºæ•°æ®è®¿é—®å±‚-dal-æ ¸å¿ƒæ¶æ„"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-åˆ›å»ºæ•°æ®è®¿é—®å±‚-dal-æ ¸å¿ƒæ¶æ„"}},[s._v("ğŸŒ™")]),s._v(" 4. åˆ›å»ºæ•°æ®è®¿é—®å±‚ (DAL) - æ ¸å¿ƒæ¶æ„")]),s._v(" "),t("p",[t("strong",[s._v("ä¸è¦")]),s._v("åœ¨ä½ çš„ API Route æˆ– Server Component ä¸­ç›´æ¥ "),t("code",[s._v("new PrismaClient()")]),s._v("ã€‚è¿™ä¼šå¯¼è‡´åœ¨å¼€å‘ç¯å¢ƒçš„çƒ­é‡è½½æˆ– Serverless å‡½æ•°çš„æ¯æ¬¡è°ƒç”¨ä¸­éƒ½åˆ›å»ºæ–°çš„æ•°æ®åº“è¿æ¥æ± ï¼Œè¿…é€Ÿè€—å°½è¿æ¥ã€‚")]),s._v(" "),t("p",[t("strong",[s._v("æœ€ä½³å®è·µ")]),s._v(": åˆ›å»ºä¸€ä¸ªå•ä¾‹ (Singleton) çš„ Prisma Client å®ä¾‹ã€‚")]),s._v(" "),t("div",{staticClass:"language-typescript line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-typescript"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// lib/db.ts æˆ– lib/prisma.ts")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" PrismaClient "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'@prisma/client'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// å£°æ˜ä¸€ä¸ªå…¨å±€å˜é‡æ¥ç¼“å­˜ PrismaClient å®ä¾‹")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" globalForPrisma "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" globalThis "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("unknown")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  prisma"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" PrismaClient "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("undefined")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// å¦‚æœå­˜åœ¨ç¼“å­˜çš„å®ä¾‹ï¼Œåˆ™ä½¿ç”¨å®ƒï¼›å¦åˆ™åˆ›å»ºä¸€ä¸ªæ–°çš„å®ä¾‹")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("export")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" prisma "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("\n  globalForPrisma"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("prisma "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("??")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("PrismaClient")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// å¯é€‰ï¼šåœ¨å¼€å‘ç¯å¢ƒä¸­æ‰“å°æ‰€æœ‰æŸ¥è¯¢æ—¥å¿—")]),s._v("\n    log"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n      process"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("env"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("NODE_ENV")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'development'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'query'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'error'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'warn'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'error'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// åœ¨éç”Ÿäº§ç¯å¢ƒä¸­ï¼Œå°†åˆ›å»ºçš„å®ä¾‹èµ‹å€¼ç»™å…¨å±€å˜é‡ï¼Œä»¥ä¾¿ä¸‹æ¬¡é‡ç”¨")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("process"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("env"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("NODE_ENV")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!==")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'production'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  globalForPrisma"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("prisma "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" prisma"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br")])]),t("p",[t("strong",[s._v("ä¸ºä»€ä¹ˆè¿™æ ·åšï¼Ÿ")]),s._v(" "),t("code",[s._v("globalThis")]),s._v(" ä¸å— Next.js çƒ­é‡è½½çš„å½±å“ã€‚é€šè¿‡è¿™ä¸ªæŠ€å·§ï¼Œæˆ‘ä»¬åœ¨å¼€å‘ä¸­å¯ä»¥é‡ç”¨åŒä¸€ä¸ª "),t("code",[s._v("PrismaClient")]),s._v(" å®ä¾‹ï¼Œé¿å…äº†è¿æ¥é—®é¢˜ã€‚åœ¨ç”Ÿäº§ç¯å¢ƒï¼Œæ¯ä¸ª Serverless å®ä¾‹ä¼šç‹¬ç«‹æ‰§è¡Œè¿™æ®µä»£ç ï¼ŒåŒæ ·èƒ½æ­£å¸¸å·¥ä½œã€‚")]),s._v(" "),t("h4",{attrs:{id:"_5-åœ¨åº”ç”¨ä¸­ä½¿ç”¨-prisma"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-åœ¨åº”ç”¨ä¸­ä½¿ç”¨-prisma"}},[s._v("ğŸŒ™")]),s._v(" 5. åœ¨åº”ç”¨ä¸­ä½¿ç”¨ Prisma")]),s._v(" "),t("h5",{attrs:{id:"a-åœ¨-server-components-ä¸­è·å–æ•°æ®-read"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#a-åœ¨-server-components-ä¸­è·å–æ•°æ®-read"}},[s._v("ğŸŒ™")]),s._v(" a. åœ¨ Server Components ä¸­è·å–æ•°æ® (Read)")]),s._v(" "),t("p",[s._v("è¿™æ˜¯ Next.js App Router çš„æ€æ‰‹çº§ç‰¹æ€§ã€‚ä½ å¯ä»¥ç›´æ¥åœ¨ç»„ä»¶ä¸­å¼‚æ­¥æŸ¥è¯¢æ•°æ®ã€‚")]),s._v(" "),t("div",{staticClass:"language-typescript line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-typescript"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// app/posts/page.tsx")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" prisma "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'@/lib/db'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" cache "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'react'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("CreatePostForm"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"@/app/posts/CreatePostForm"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Next.js ä¼šè‡ªåŠ¨å¯¹ fetch è¯·æ±‚è¿›è¡Œç¼“å­˜ï¼Œä½†å¯¹æ•°æ®åº“æŸ¥è¯¢ä¸ä¼šã€‚")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ä½¿ç”¨ `cache` å‡½æ•°å¯ä»¥æ‰‹åŠ¨å®ç°ç±»ä¼¼åŠŸèƒ½ï¼Œé¿å…åœ¨ä¸€æ¬¡æ¸²æŸ“ä¸­é‡å¤æŸ¥è¯¢ç›¸åŒæ•°æ®ã€‚")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" getPosts "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cache")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("async")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("console")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Fetching posts from database...'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" posts "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("await")]),s._v(" prisma"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("post"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("findMany")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    where"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" published"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    include"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" author"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" posts"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("export")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("default")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("async")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("PostsPage")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" posts "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("await")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getPosts")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// æ³¨æ„è¿™é‡Œçš„ç±»å‹å®‰å…¨ï¼")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// `post` çš„ç±»å‹æ˜¯ (Post & { author: User })[]ï¼Œç”± Prisma è‡ªåŠ¨æ¨æ–­")]),s._v("\n\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("div"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("h1"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("Published Posts"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("h1"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("ul"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("posts"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("map")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("post"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("li key"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("post"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("h2"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("post"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("title"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("h2"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("p"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("By "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("post"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("author"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("name "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("??")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Unknown'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("p"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("li"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("ul"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("CreatePostForm "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("div"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br")])]),t("h5",{attrs:{id:"b-ä½¿ç”¨-server-actions-è¿›è¡Œæ•°æ®å˜æ›´-create-update-delete"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#b-ä½¿ç”¨-server-actions-è¿›è¡Œæ•°æ®å˜æ›´-create-update-delete"}},[s._v("ğŸŒ™")]),s._v(" b. ä½¿ç”¨ Server Actions è¿›è¡Œæ•°æ®å˜æ›´ (Create, Update, Delete)")]),s._v(" "),t("p",[s._v("Server Actions æ˜¯åœ¨æœåŠ¡ç«¯æ‰§è¡Œçš„å‡½æ•°ï¼Œå¯ä»¥ç›´æ¥ä»å®¢æˆ·ç«¯ç»„ä»¶è°ƒç”¨ï¼Œæ˜¯å¤„ç†è¡¨å•æäº¤å’Œæ•°æ®å˜æ›´çš„æœ€æ–°æœ€ä½³å®è·µã€‚")]),s._v(" "),t("div",{staticClass:"language-typescript line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-typescript"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// app/actions/postActions.ts")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'use server'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// æ ‡è®°è¿™ä¸ªæ–‡ä»¶é‡Œçš„æ‰€æœ‰å¯¼å‡ºå‡½æ•°éƒ½æ˜¯ Server Actions")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" prisma "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'@/lib/db'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" revalidatePath "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'next/cache'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" z "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'zod'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ä½¿ç”¨ Zod å®šä¹‰è¾“å…¥æ•°æ®çš„ schema")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" PostSchema "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" z"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("object")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  title"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" z"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("string")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("min")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Title must be at least 3 characters long"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  content"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" z"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("string")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("optional")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("export")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("type")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("CreatePostActionState")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  message"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("string")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  errors"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    title"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("string")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    content"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("string")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("export")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("async")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("createPost")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("prevState"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" CreatePostActionState"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" formData"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" FormData"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" validatedFields "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" PostSchema"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("safeParse")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    title"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" formData"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("get")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'title'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    content"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" formData"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("get")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'content'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 1. æœåŠ¡ç«¯éªŒè¯")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("validatedFields"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("success"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      errors"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" validatedFields"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("error"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("flatten")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("fieldErrors"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 2. æ•°æ®åº“æ“ä½œ")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("try")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("await")]),s._v(" prisma"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("post"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("create")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      data"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        title"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" validatedFields"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("data"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("title"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        content"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" validatedFields"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("data"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("content"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        authorId"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// å®é™…åº”ç”¨ä¸­åº”ä»ç”¨æˆ·ä¼šè¯ä¸­è·å–")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("catch")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("error"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" message"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Database Error: Failed to Create Post.'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 3. æ¸…é™¤ç¼“å­˜å¹¶è§¦å‘é‡æ–°æ¸²æŸ“")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// å½“åˆ›å»ºæ–°æ–‡ç« åï¼Œé€šçŸ¥ Next.js `/posts` è·¯å¾„çš„æ•°æ®å·²ç»è¿‡æ—¶ï¼Œéœ€è¦é‡æ–°è·å–ã€‚")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("revalidatePath")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/posts'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" message"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Successfully created post!'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br"),t("span",{staticClass:"line-number"},[s._v("41")]),t("br"),t("span",{staticClass:"line-number"},[s._v("42")]),t("br"),t("span",{staticClass:"line-number"},[s._v("43")]),t("br"),t("span",{staticClass:"line-number"},[s._v("44")]),t("br"),t("span",{staticClass:"line-number"},[s._v("45")]),t("br"),t("span",{staticClass:"line-number"},[s._v("46")]),t("br"),t("span",{staticClass:"line-number"},[s._v("47")]),t("br"),t("span",{staticClass:"line-number"},[s._v("48")]),t("br"),t("span",{staticClass:"line-number"},[s._v("49")]),t("br"),t("span",{staticClass:"line-number"},[s._v("50")]),t("br"),t("span",{staticClass:"line-number"},[s._v("51")]),t("br"),t("span",{staticClass:"line-number"},[s._v("52")]),t("br"),t("span",{staticClass:"line-number"},[s._v("53")]),t("br")])]),t("div",{staticClass:"language-typescript line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-typescript"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// app/posts/CreatePostForm.tsx (è¿™æ˜¯ä¸€ä¸ªå®¢æˆ·ç«¯ç»„ä»¶)")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'use client'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" createPost "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'@/app/actions/postActions'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" useFormState"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" useFormStatus "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'react-dom'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("SubmitButton")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("isPending"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("isPending"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("boolean")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" pending "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("useFormStatus")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("button type"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"submit"')]),s._v(" disabled"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("isPending"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("isPending "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Submitting...'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Create Post'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("button"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("export")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("CreatePostForm")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" initialState "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" message"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("''")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" errors"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("undefined")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// useActionState æ˜¯å¤„ç† Server Action å“åº”çš„ React Hook")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("state"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" formAction"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" isPending"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("useActionState")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("createPost"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" initialState"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("form action"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("formAction"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("input name"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"title"')]),s._v(" placeholder"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Post Title"')]),s._v(" required "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("state"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("errors"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?.")]),s._v("title "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("p style"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" color"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'red'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("state"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("errors"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("title"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("p"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    \n      "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("textarea name"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"content"')]),s._v(" placeholder"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Post Content"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n\n      "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("SubmitButton isPending"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("isPending"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    \n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("state"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("message "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("p"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("state"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("message"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("p"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("form"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br")])]),t("blockquote",[t("p",[t("strong",[s._v("æ³¨æ„")]),s._v(": åœ¨ Server Actions ä¸­ï¼Œä½¿ç”¨ "),t("code",[s._v("revalidatePath")]),s._v(" æˆ– "),t("code",[s._v("revalidateTag")]),s._v(" æ¥ç²¾ç»†æ§åˆ¶ç¼“å­˜å’Œé‡æ–°æ¸²æŸ“ã€‚è¿™æ ·å¯ä»¥ç¡®ä¿åœ¨æ•°æ®å˜æ›´åï¼Œç›¸å…³çš„é¡µé¢æˆ–ç»„ä»¶èƒ½å¤ŸåŠæ—¶æ›´æ–°ã€‚")]),s._v(" "),t("p",[s._v("ç¤ºä¾‹ä½¿ç”¨çš„æ˜¯ nextjs 15.3.4 çš„ç‰ˆæœ¬")])]),s._v(" "),t("h4",{attrs:{id:"_6-éƒ¨ç½²"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-éƒ¨ç½²"}},[s._v("ğŸŒ™")]),s._v(" 6. éƒ¨ç½²")]),s._v(" "),t("ol",[t("li",[t("p",[t("strong",[s._v("æ•°æ®åº“æ‰˜ç®¡")]),s._v(":")]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("Vercel Postgres")]),s._v(": ä¸ Vercel å¹³å°æ— ç¼é›†æˆï¼ŒåŸºäº Neon æŠ€æœ¯ï¼Œæ˜¯ Serverless çš„ç»ä½³é€‰æ‹©ã€‚")]),s._v(" "),t("li",[t("strong",[s._v("Neon")]),s._v(": æä¾› Serverless Postgresï¼Œæœ‰æ…·æ…¨çš„å…è´¹é¢åº¦ã€‚")]),s._v(" "),t("li",[t("strong",[s._v("Supabase")]),s._v(": ä¸ä»…æ˜¯ Postgres æ•°æ®åº“ï¼Œè¿˜æä¾›è®¤è¯ã€å­˜å‚¨ç­‰ BaaS æœåŠ¡ã€‚")]),s._v(" "),t("li",[t("strong",[s._v("AWS RDS")]),s._v(": ä¼ ç»Ÿä½†å¼ºå¤§çš„é€‰æ‹©ã€‚")])])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("åº”ç”¨æ‰˜ç®¡ (Vercel)")]),s._v(":")]),s._v(" "),t("ul",[t("li",[s._v("åœ¨ Vercel é¡¹ç›®è®¾ç½®ä¸­ï¼Œæ·»åŠ ä½ çš„ "),t("code",[s._v("DATABASE_URL")]),s._v(" ç¯å¢ƒå˜é‡ã€‚")]),s._v(" "),t("li",[t("strong",[s._v("ä¿®æ”¹ "),t("code",[s._v("package.json")])]),s._v(": ç¡®ä¿åœ¨éƒ¨ç½²æ„å»ºæ—¶ï¼ŒPrisma Client æ˜¯æœ€æ–°çš„ã€‚")])]),s._v(" "),t("div",{staticClass:"language-json line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"scripts"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ...")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"build"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"prisma generate && next build"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("p",[s._v("æˆ–è€…æ›´å¥½çš„æ–¹å¼æ˜¯ä½¿ç”¨ "),t("code",[s._v("postinstall")]),s._v(" é’©å­ï¼š")]),s._v(" "),t("div",{staticClass:"language-json line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"scripts"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"postinstall"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"prisma generate"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("ul",[t("li",[t("strong",[s._v("è¿è¡Œç”Ÿäº§è¿ç§»")]),s._v(": åœ¨ä½ ç¬¬ä¸€æ¬¡éƒ¨ç½²æˆ–æ¯æ¬¡æœ‰æ•°æ®åº“ç»“æ„å˜æ›´åï¼Œéœ€è¦åœ¨ä½ çš„æ‰˜ç®¡ç¯å¢ƒçš„æ§åˆ¶å°æˆ–é€šè¿‡ CI/CD pipeline æ‰‹åŠ¨è¿è¡Œ "),t("code",[s._v("npx prisma migrate deploy")]),s._v("ã€‚")])])])]),s._v(" "),t("hr"),s._v(" "),t("h3",{attrs:{id:"æ€»ç»“-æœ€ä½³å®è·µæ¸…å•"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#æ€»ç»“-æœ€ä½³å®è·µæ¸…å•"}},[s._v("ğŸŒ™")]),s._v(" æ€»ç»“ï¼šæœ€ä½³å®è·µæ¸…å•")]),s._v(" "),t("ul",[t("li",[s._v("[x] "),t("strong",[s._v("æŠ€æœ¯æ ˆ")]),s._v(": ä½¿ç”¨ "),t("strong",[s._v("Next.js (App Router) + Prisma + PostgreSQL")]),s._v("ã€‚")]),s._v(" "),t("li",[s._v("[x] "),t("strong",[s._v("é¡¹ç›®ç»“æ„")]),s._v(": å»ºç«‹ "),t("code",[s._v("lib/db.ts")]),s._v("ï¼ˆæˆ– "),t("code",[s._v("lib/prisma.ts")]),s._v("ï¼‰æ¥ç®¡ç†å•ä¾‹çš„ Prisma Clientã€‚")]),s._v(" "),t("li",[s._v("[x] "),t("strong",[s._v("ç±»å‹å®‰å…¨")]),s._v(": ä¾èµ– "),t("code",[s._v("schema.prisma")]),s._v(" ç”Ÿæˆç±»å‹ï¼Œè´¯ç©¿æ•´ä¸ªåº”ç”¨ã€‚")]),s._v(" "),t("li",[s._v("[x] "),t("strong",[s._v("æ•°æ®åº“ç®¡ç†")]),s._v(": å§‹ç»ˆä½¿ç”¨ "),t("code",[s._v("prisma migrate")]),s._v(" æ¥ç®¡ç†æ•°æ®åº“ Schema å˜æ›´ã€‚")]),s._v(" "),t("li",[s._v("[x] "),t("strong",[s._v("æ•°æ®è¯»å–")]),s._v(": ä¼˜å…ˆåœ¨ "),t("strong",[s._v("Server Components")]),s._v(" ä¸­ç›´æ¥ã€å¼‚æ­¥åœ°æŸ¥è¯¢æ•°æ®ã€‚")]),s._v(" "),t("li",[s._v("[x] "),t("strong",[s._v("æ•°æ®å˜æ›´")]),s._v(": ä½¿ç”¨ "),t("strong",[s._v("Server Actions")]),s._v(" å¤„ç† CUD æ“ä½œï¼Œå¹¶ç»“åˆ "),t("strong",[s._v("Zod")]),s._v(" è¿›è¡ŒæœåŠ¡ç«¯éªŒè¯ã€‚")]),s._v(" "),t("li",[s._v("[x] "),t("strong",[s._v("æ€§èƒ½")]),s._v(": ä½¿ç”¨ "),t("code",[s._v("revalidatePath")]),s._v(" æˆ– "),t("code",[s._v("revalidateTag")]),s._v(" æ¥ç²¾ç»†åŒ–åœ°æ§åˆ¶æ•°æ®ç¼“å­˜ã€‚")]),s._v(" "),t("li",[s._v("[x] "),t("strong",[s._v("å®‰å…¨")]),s._v(": å°†æ•°æ®åº“ URL ç­‰æ•æ„Ÿä¿¡æ¯å­˜å‚¨åœ¨ç¯å¢ƒå˜é‡ä¸­ï¼Œç»ä¸æäº¤åˆ°ç‰ˆæœ¬æ§åˆ¶ã€‚")]),s._v(" "),t("li",[s._v("[x] "),t("strong",[s._v("éƒ¨ç½²")]),s._v(": é…ç½®å¥½æ„å»ºå‘½ä»¤ ("),t("code",[s._v("prisma generate")]),s._v(") å’Œç”Ÿäº§è¿ç§»å‘½ä»¤ ("),t("code",[s._v("prisma migrate deploy")]),s._v(")ã€‚")])])])}),[],!1,null,null,null);t.default=e.exports}}]);