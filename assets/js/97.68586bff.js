(window.webpackJsonp=window.webpackJsonp||[]).push([[97],{788:function(t,s,n){"use strict";n.r(s);var a=n(2),e=Object(a.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("blockquote",[s("p",[t._v("åœ¨å¤„ç† express + puppeteer ç”Ÿæˆ pdf éœ€æ±‚çš„æ—¶å€™ï¼Œä½¿ç”¨ "),s("code",[t._v("res.send(buffer)")]),t._v("ç»™æµè§ˆå™¨ï¼Œå‘ç°ä¸‹è½½çš„pdfæ–‡ä»¶æ˜¾ç¤ºå·²æŸåæ— æ³•æ‰“å¼€ï¼Œä½†æ˜¯åœ¨æœåŠ¡ç«¯ç”Ÿæˆçš„pdfæ˜¯æ­£å¸¸çš„ï¼Œä½†æ˜¯ä½¿ç”¨ res.end(buffer) å°±å¯¹äº†, è¿™æ˜¯ä»€ä¹ˆåŸå› å‘¢ï¼Ÿ")])]),t._v(" "),s("h2",{attrs:{id:"æ ¸å¿ƒè§‚ç‚¹-res-end-æ˜¯åŸºç¡€-res-send-æ˜¯å¢å¼º"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#æ ¸å¿ƒè§‚ç‚¹-res-end-æ˜¯åŸºç¡€-res-send-æ˜¯å¢å¼º"}},[t._v("ğŸŒ™")]),t._v(" æ ¸å¿ƒè§‚ç‚¹ï¼š"),s("code",[t._v("res.end()")]),t._v(" æ˜¯åŸºç¡€ï¼Œ"),s("code",[t._v("res.send()")]),t._v(" æ˜¯å¢å¼º")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://expressjs.com/en/5x/api.html#res.end",target:"_blank",rel:"noopener noreferrer"}},[s("strong",[s("code",[t._v("res.end()")])]),s("OutboundLink")],1),t._v(": è¿™æ˜¯ Node.js åŸç”Ÿçš„ "),s("code",[t._v("http.ServerResponse")]),t._v(" æ¨¡å—ä¸­çš„æ–¹æ³•ã€‚å®ƒéå¸¸åº•å±‚ï¼ŒåŠŸèƒ½å•ä¸€ï¼š"),s("strong",[t._v("å‘Šè¯‰æœåŠ¡å™¨æ‰€æœ‰å“åº”å¤´å’Œæ­£æ–‡éƒ½å·²å‘é€å®Œæ¯•ï¼Œè¯¥å“åº”è¢«è§†ä¸ºå·²å®Œæˆã€‚")])]),t._v(" "),s("li",[s("a",{attrs:{href:"https://expressjs.com/en/5x/api.html#res.send",target:"_blank",rel:"noopener noreferrer"}},[s("strong",[s("code",[t._v("res.send()")])]),s("OutboundLink")],1),t._v(": è¿™æ˜¯ "),s("strong",[t._v("Express.js æ¡†æ¶æä¾›çš„é«˜çº§æ–¹æ³•")]),t._v("ã€‚å®ƒåœ¨å†…éƒ¨å°è£…äº† "),s("code",[t._v("res.end()")]),t._v("ï¼Œå¹¶åœ¨å…¶ä¹‹ä¸Šå¢åŠ äº†è®¸å¤šæ™ºèƒ½å’Œä¾¿æ·çš„åŠŸèƒ½ï¼Œæå¤§åœ°ç®€åŒ–äº†å¼€å‘ã€‚")])]),t._v(" "),s("p",[t._v("å¯ä»¥æŠŠ "),s("code",[t._v("res.end()")]),t._v(" çœ‹ä½œæ˜¯æ±½è½¦çš„æ‰‹åŠ¨æŒ¡ï¼Œä½ éœ€è¦è‡ªå·±å¤„ç†å¾ˆå¤šç»†èŠ‚ï¼›è€Œ "),s("code",[t._v("res.send()")]),t._v(" åˆ™æ˜¯è‡ªåŠ¨æŒ¡ï¼Œå®ƒä¸ºä½ å¤„ç†äº†å¤§éƒ¨åˆ†å¸¸è§„æ“ä½œã€‚")]),t._v(" "),s("h2",{attrs:{id:"å¯¹æ¯”åˆ†æè¡¨æ ¼"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å¯¹æ¯”åˆ†æè¡¨æ ¼"}},[t._v("ğŸŒ™")]),t._v(" å¯¹æ¯”åˆ†æè¡¨æ ¼")]),t._v(" "),s("p",[t._v("ä¸ºäº†æ›´ç›´è§‚åœ°æ¯”è¾ƒï¼Œè¯·çœ‹è¡¨æ ¼ï¼š")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",{staticStyle:{"text-align":"left"}},[t._v("ç‰¹æ€§")]),t._v(" "),s("th",{staticStyle:{"text-align":"left"}},[s("code",[t._v("res.end([data], [encoding])")])]),t._v(" "),s("th",{staticStyle:{"text-align":"left"}},[s("code",[t._v("res.send([body])")])])])]),t._v(" "),s("tbody",[s("tr",[s("td",{staticStyle:{"text-align":"left"}},[s("strong",[t._v("æ¥æº")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("Node.js åŸç”Ÿ "),s("code",[t._v("http")]),t._v(" æ¨¡å—")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("Express.js æ¡†æ¶")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[s("strong",[t._v("åŠŸèƒ½")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("åŸºç¡€ã€åº•å±‚ã€‚ä¸»è¦ç”¨äºç»“æŸå“åº”ã€‚")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("é«˜çº§ã€æ™ºèƒ½ã€‚å°è£…äº†å“åº”é€»è¾‘ã€‚")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[s("strong",[s("code",[t._v("Content-Type")]),t._v(" å¤´")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[s("strong",[t._v("ä»ä¸")]),t._v("è‡ªåŠ¨è®¾ç½®ã€‚ä½ å¿…é¡»æ‰‹åŠ¨ "),s("code",[t._v("res.setHeader()")]),t._v("ã€‚")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[s("strong",[t._v("è‡ªåŠ¨")]),t._v("è®¾ç½®ã€‚æ ¹æ®å†…å®¹æ¨æ–­ï¼ˆ"),s("code",[t._v("application/json")]),t._v(", "),s("code",[t._v("text/html")]),t._v(" ç­‰ï¼‰ã€‚")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[s("strong",[s("code",[t._v("ETag")]),t._v(" å¤´")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[s("strong",[t._v("ä¸")]),t._v("è‡ªåŠ¨ç”Ÿæˆã€‚")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[s("strong",[t._v("è‡ªåŠ¨")]),t._v("ç”Ÿæˆï¼ˆå¯¹äºéæµå¼å“åº”ï¼‰ï¼Œç”¨äº HTTP ç¼“å­˜ã€‚")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[s("strong",[t._v("å¤„ç†å¯¹è±¡/æ•°ç»„")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[s("strong",[t._v("ä¼šæŠ›å‡ºé”™è¯¯")]),t._v("ã€‚å®ƒåªæ¥å— String æˆ– Bufferã€‚")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[s("strong",[t._v("ä¼šè‡ªåŠ¨")]),t._v("å°†å¯¹è±¡/æ•°ç»„ "),s("code",[t._v("JSON.stringify")]),t._v("ï¼Œå¹¶è®¾ç½® "),s("code",[t._v("Content-Type: application/json")]),t._v("ã€‚")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[s("strong",[t._v("å¤„ç†å­—ç¬¦ä¸²")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("ç›´æ¥å‘é€ã€‚")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("å¦‚æœå­—ç¬¦ä¸²åŒ…å« HTML æ ‡ç­¾ï¼Œä¼šè‡ªåŠ¨è®¾ç½® "),s("code",[t._v("Content-Type: text/html")]),t._v("ã€‚")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[s("strong",[t._v("å¤„ç† "),s("code",[t._v("null")]),t._v("/"),s("code",[t._v("undefined")])])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("æŠ›å‡ºé”™è¯¯æˆ–è¡Œä¸ºä¸ç¡®å®šã€‚")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("å‘é€ä¸€ä¸ªç©ºçš„å“åº”ä½“ã€‚")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[s("strong",[t._v("é“¾å¼è°ƒç”¨")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("è°ƒç”¨åï¼Œå“åº”ç«‹å³ç»“æŸã€‚")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("è°ƒç”¨åï¼Œå“åº”ä¹Ÿç«‹å³ç»“æŸã€‚")])])])]),t._v(" "),s("hr"),t._v(" "),s("h2",{attrs:{id:"æ·±å…¥å‰–æ-res-send-é”™åœ¨å“ªé‡Œ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#æ·±å…¥å‰–æ-res-send-é”™åœ¨å“ªé‡Œ"}},[t._v("ğŸŒ™")]),t._v(" æ·±å…¥å‰–æï¼š"),s("code",[t._v("res.send()")]),t._v(" é”™åœ¨å“ªé‡Œï¼Ÿ")]),t._v(" "),s("p",[t._v("å½“ä¼ é€’ä¸€ä¸ª "),s("code",[t._v("Buffer")]),t._v(" ç»™ "),s("code",[t._v("res.send()")]),t._v(" æ—¶ï¼ŒExpress ä¼šæ‰§è¡Œä¸€ç³»åˆ—çš„æ™ºèƒ½åˆ¤æ–­å’Œæ“ä½œï¼Œå…¶ä¸­ä¸€ä¸ªå…³é”®æ­¥éª¤æ˜¯ï¼š")]),t._v(" "),s("p",[s("strong",[t._v("å®ƒä¼šè‡ªåŠ¨è®¾ç½® "),s("code",[t._v("Content-Type")]),t._v(" å“åº”å¤´ä¸º "),s("code",[t._v("application/octet-stream")]),t._v("ã€‚")])]),t._v(" "),s("p",[s("code",[t._v("application/octet-stream")]),t._v(" æ˜¯ä¸€ç§é€šç”¨çš„äºŒè¿›åˆ¶æ•°æ®MIMEç±»å‹ï¼Œå®ƒå‘Šè¯‰æµè§ˆå™¨ï¼šâ€œè¿™æ˜¯ä¸€äº›äºŒè¿›åˆ¶æ•°æ®ï¼Œæˆ‘ä¸çŸ¥é“å®ƒå…·ä½“æ˜¯ä»€ä¹ˆï¼Œä½ è‡ªå·±çœ‹ç€åŠå§ï¼Œé€šå¸¸æ˜¯æç¤ºç”¨æˆ·ä¸‹è½½ã€‚â€")]),t._v(" "),s("p",[t._v("è™½ç„¶è¿™å¬èµ·æ¥æ²¡é—®é¢˜ï¼Œä½†å¯¹äº PDF è¿™ç§æœ‰æ˜ç¡®ç±»å‹çš„æ–‡ä»¶ï¼Œå®ƒå¼•å‘äº†ä¸¤ä¸ªé—®é¢˜ï¼š")]),t._v(" "),s("ol",[s("li",[s("strong",[t._v("ç±»å‹ä¿¡æ¯ä¸¢å¤±")]),t._v(": æµè§ˆå™¨æ²¡æœ‰æ¥æ”¶åˆ°æ˜ç¡®çš„ "),s("code",[t._v("Content-Type: application/pdf")]),t._v(" æŒ‡ä»¤ã€‚è™½ç„¶å®ƒä»ç„¶ä¼šå°è¯•ä¸‹è½½ï¼Œä½†åœ¨å¤„ç†æ–‡ä»¶æ—¶å¯èƒ½ä¼šå› ä¸ºç¼ºå°‘è¿™ä¸ªå…³é”®çš„ç±»å‹æç¤ºè€Œå‡ºé”™ï¼Œå¯¼è‡´æŸäº›æµè§ˆå™¨æˆ–PDFé˜…è¯»å™¨è®¤ä¸ºæ–‡ä»¶ç»“æ„æŸåã€‚")]),t._v(" "),s("li",[s("strong",[t._v("å¯èƒ½çš„é¢å¤–å¤„ç†")]),t._v(": "),s("code",[t._v("res.send")]),t._v(" çš„å†…éƒ¨é€»è¾‘æ¯” "),s("code",[t._v("res.end")]),t._v(" å¤æ‚å¾—å¤šã€‚åœ¨æŸäº› Express ç‰ˆæœ¬æˆ–ç‰¹å®šä¸­é—´ä»¶ç¯å¢ƒä¸‹ï¼Œå®ƒåœ¨è¯†åˆ«åˆ°æ˜¯ "),s("code",[t._v("Buffer")]),t._v(" å¹¶è®¾ç½® "),s("code",[t._v("Content-Type")]),t._v(" çš„è¿‡ç¨‹ä¸­ï¼Œ"),s("strong",[t._v("å¯èƒ½")]),t._v("ä¼šè¿›è¡Œä¸€äº›å¾®å°çš„ã€ä¸æ˜“å¯Ÿè§‰çš„ç¼–ç è½¬æ¢æˆ–å¤„ç†ï¼Œè€Œè¿™äº›å¤„ç†å¯¹äºç»“æ„æå…¶æ•æ„Ÿçš„ PDF æ–‡ä»¶æ¥è¯´æ˜¯è‡´å‘½çš„ï¼Œä»»ä½•ä¸€ä¸ªå­—èŠ‚çš„æ”¹å˜éƒ½å¯èƒ½å¯¼è‡´æ•´ä¸ªæ–‡ä»¶æŸåã€‚")])]),t._v(" "),s("h3",{attrs:{id:"res-end-ä¸ºä½•èƒ½æˆåŠŸ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#res-end-ä¸ºä½•èƒ½æˆåŠŸ"}},[t._v("ğŸŒ™")]),t._v(" "),s("code",[t._v("res.end()")]),t._v(" ä¸ºä½•èƒ½æˆåŠŸï¼Ÿ")]),t._v(" "),s("p",[s("code",[t._v("res.end()")]),t._v(" æ˜¯ Node.js åŸç”Ÿçš„ã€éå¸¸åº•å±‚çš„æ–¹æ³•ã€‚å®ƒçš„è¡Œä¸ºç®€å•ç²—æš´ï¼š")]),t._v(" "),s("p",[s("strong",[t._v("ä½ ç»™æˆ‘ä¸€ä¸ª "),s("code",[t._v("Buffer")]),t._v("ï¼Œæˆ‘å°±æŠŠè¿™ä¸ª "),s("code",[t._v("Buffer")]),t._v(" çš„æ¯ä¸€ä¸ªåŸå§‹å­—èŠ‚åŸå°ä¸åŠ¨åœ°å†™å…¥å“åº”æµï¼Œç„¶åç»“æŸå“åº”ã€‚")])]),t._v(" "),s("p",[t._v("å®ƒä¸ä¼šï¼š")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("ä¸ä¼š")]),t._v("è‡ªåŠ¨è®¾ç½®ä»»ä½• "),s("code",[t._v("Content-Type")]),t._v("ã€‚")]),t._v(" "),s("li",[s("strong",[t._v("ä¸ä¼š")]),t._v("å¯¹ "),s("code",[t._v("Buffer")]),t._v(" å†…å®¹è¿›è¡Œä»»ä½•æ£€æŸ¥æˆ–ä¿®æ”¹ã€‚")])]),t._v(" "),s("p",[t._v("æ‰€ä»¥ï¼Œå½“ä½ åœ¨ä½¿ç”¨ "),s("code",[t._v("res.end(buffer)")]),t._v(" æ—¶ï¼Œä½ å¯èƒ½åœ¨è°ƒç”¨å®ƒä¹‹å‰å·²ç»æ‰‹åŠ¨è®¾ç½®äº†æ­£ç¡®çš„ "),s("code",[t._v("Content-Type")]),t._v("ï¼Œæˆ–è€…å³ä½¿æ²¡æœ‰è®¾ç½®ï¼Œæµè§ˆå™¨åœ¨æ¥æ”¶åˆ°è¿™ä¸²çº¯å‡€ã€æœªè¢«ç¯¡æ”¹çš„äºŒè¿›åˆ¶æµæ—¶ï¼Œä¹Ÿèƒ½æ›´å¥½åœ°çŒœæµ‹å’Œå¤„ç†å®ƒï¼ˆå°½ç®¡è¿™ä¸æ¨èï¼‰ã€‚æ•°æ®çš„"),s("strong",[t._v("å®Œæ•´æ€§")]),t._v("å¾—åˆ°äº† 100% çš„ä¿è¯ã€‚")]),t._v(" "),s("hr"),t._v(" "),s("h3",{attrs:{id:"å¦‚ä½•æ­£ç¡®åœ°å‘é€pdf-æˆ–å…¶ä»–äºŒè¿›åˆ¶æ–‡ä»¶"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å¦‚ä½•æ­£ç¡®åœ°å‘é€pdf-æˆ–å…¶ä»–äºŒè¿›åˆ¶æ–‡ä»¶"}},[t._v("ğŸŒ™")]),t._v(" å¦‚ä½•æ­£ç¡®åœ°å‘é€PDFï¼ˆæˆ–å…¶ä»–äºŒè¿›åˆ¶æ–‡ä»¶ï¼‰")]),t._v(" "),s("p",[t._v("æ­£ç¡®çš„ä»£ç å®ç°ï¼š")]),t._v(" "),s("div",{staticClass:"language-typescript line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-typescript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" express"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" Request"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Response "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'express'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" puppeteer "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'puppeteer'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" app "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("express")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\napp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/generate-pdf'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("req"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Request"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" res"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Response"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" browser "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" puppeteer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("launch")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" page "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" browser"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("newPage")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  \n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªHTMLæ¨¡æ¿")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" htmlContent "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'<h1>Invoice</h1><p>Details...</p>'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" page"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setContent")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("htmlContent"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" waitUntil"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'networkidle0'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  \n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç”ŸæˆPDF Buffer")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" pdfBuffer "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" page"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("pdf")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      format"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'A4'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      printBackground"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  \n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" browser"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("close")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 1. è®¾ç½®æ­£ç¡®çš„ Content-Typeï¼Œæ˜ç¡®å‘Šè¯‰æµè§ˆå™¨è¿™æ˜¯ä¸€ä¸ªPDFæ–‡ä»¶")]),t._v("\n    res"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setHeader")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Content-Type'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'application/pdf'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 2. è®¾ç½® Content-Dispositionï¼Œè®©æµè§ˆå™¨å¼¹å‡ºä¸‹è½½æ¡†ï¼Œå¹¶æŒ‡å®šæ–‡ä»¶å")]),t._v("\n    res"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setHeader")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Content-Disposition'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'attachment; filename=invoice.pdf'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  \n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 3. (å¯é€‰ä½†æ¨è) è®¾ç½® Content-Lengthï¼Œè®©æµè§ˆå™¨çŸ¥é“æ–‡ä»¶å¤§å°ï¼Œå¯ä»¥æ˜¾ç¤ºä¸‹è½½è¿›åº¦")]),t._v("\n    res"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setHeader")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Content-Length'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" pdfBuffer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 4.ä½¿ç”¨ res.end å‘é€ bufferæ•°æ®")]),t._v("\n    res"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("end")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("pdfBuffer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æˆ–è€…å¯ä»¥å°† pdfä¸´æ—¶ç”Ÿæˆä¿å­˜åœ¨æœåŠ¡å™¨ï¼Œç„¶åä½¿ç”¨ res.sendFile")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// res.sendFile(pdfFilePath)")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("error"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("error")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Failed to generate PDF:'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" error"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    res"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("status")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("500")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("send")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'An error occurred while generating the PDF.'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\napp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("listen")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3000")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Server is running on port 3000'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br"),s("span",{staticClass:"line-number"},[t._v("25")]),s("br"),s("span",{staticClass:"line-number"},[t._v("26")]),s("br"),s("span",{staticClass:"line-number"},[t._v("27")]),s("br"),s("span",{staticClass:"line-number"},[t._v("28")]),s("br"),s("span",{staticClass:"line-number"},[t._v("29")]),s("br"),s("span",{staticClass:"line-number"},[t._v("30")]),s("br"),s("span",{staticClass:"line-number"},[t._v("31")]),s("br"),s("span",{staticClass:"line-number"},[t._v("32")]),s("br"),s("span",{staticClass:"line-number"},[t._v("33")]),s("br"),s("span",{staticClass:"line-number"},[t._v("34")]),s("br"),s("span",{staticClass:"line-number"},[t._v("35")]),s("br"),s("span",{staticClass:"line-number"},[t._v("36")]),s("br"),s("span",{staticClass:"line-number"},[t._v("37")]),s("br"),s("span",{staticClass:"line-number"},[t._v("38")]),s("br"),s("span",{staticClass:"line-number"},[t._v("39")]),s("br"),s("span",{staticClass:"line-number"},[t._v("40")]),s("br"),s("span",{staticClass:"line-number"},[t._v("41")]),s("br"),s("span",{staticClass:"line-number"},[t._v("42")]),s("br"),s("span",{staticClass:"line-number"},[t._v("43")]),s("br"),s("span",{staticClass:"line-number"},[t._v("44")]),s("br"),s("span",{staticClass:"line-number"},[t._v("45")]),s("br"),s("span",{staticClass:"line-number"},[t._v("46")]),s("br")])]),s("p",[s("strong",[s("code",[t._v("res.send()")]),t._v(" å¯¹ "),s("code",[t._v("Buffer")]),t._v(" ç±»å‹è¿›è¡Œäº†â€œè‡ªä½œèªæ˜â€çš„å¤„ç†ï¼Œè€Œ "),s("code",[t._v("res.end()")]),t._v(" åˆ™å¿ å®åœ°ã€ä¸åŠ ä¿®æ”¹åœ°å‘é€äº†åŸå§‹æ•°æ®ã€‚")])]),t._v(" "),s("h2",{attrs:{id:"å®æˆ˜å¯¹æ¯”"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å®æˆ˜å¯¹æ¯”"}},[t._v("ğŸŒ™")]),t._v(" å®æˆ˜å¯¹æ¯”")]),t._v(" "),s("h4",{attrs:{id:"åœºæ™¯-1-å‘é€ä¸€ä¸ªç®€å•çš„æ–‡æœ¬å­—ç¬¦ä¸²"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#åœºæ™¯-1-å‘é€ä¸€ä¸ªç®€å•çš„æ–‡æœ¬å­—ç¬¦ä¸²"}},[t._v("ğŸŒ™")]),t._v(" åœºæ™¯ 1: å‘é€ä¸€ä¸ªç®€å•çš„æ–‡æœ¬å­—ç¬¦ä¸²")]),t._v(" "),s("div",{staticClass:"language-typescript line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-typescript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" express"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" Request"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Response "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'express'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" app "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("express")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä½¿ç”¨ res.end()")]),t._v("\napp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/end-text'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("req"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Request"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" res"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Response"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ‰‹åŠ¨è®¾ç½® Content-Type")]),t._v("\n  res"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setHeader")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Content-Type'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'text/plain'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  res"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("end")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Hello from res.end()'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä½¿ç”¨ res.send()")]),t._v("\napp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/send-text'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("req"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Request"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" res"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Response"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Express è‡ªåŠ¨è®¾ç½® Content-Type: text/html; charset=utf-8 (å³ä½¿æ˜¯çº¯æ–‡æœ¬)")]),t._v("\n  res"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("send")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Hello from res.send()'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br")])]),s("p",[s("strong",[t._v("åˆ†æ")]),t._v(": "),s("code",[t._v("res.send()")]),t._v(" æ›´çœäº‹ï¼Œä½ ä¸éœ€è¦å…³å¿ƒ "),s("code",[t._v("Content-Type")]),t._v("ã€‚")]),t._v(" "),s("h4",{attrs:{id:"åœºæ™¯-2-å‘é€-json-æ•°æ®-æœ€å¸¸è§çš„åœºæ™¯"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#åœºæ™¯-2-å‘é€-json-æ•°æ®-æœ€å¸¸è§çš„åœºæ™¯"}},[t._v("ğŸŒ™")]),t._v(" åœºæ™¯ 2: å‘é€ JSON æ•°æ® (æœ€å¸¸è§çš„åœºæ™¯)")]),t._v(" "),s("div",{staticClass:"language-typescript line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-typescript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" express"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" Request"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Response "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'express'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" app "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("express")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" user "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" id"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" name"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Alex'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä½¿ç”¨ res.end()")]),t._v("\napp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/end-json'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("req"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Request"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" res"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Response"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 1. å¿…é¡»æ‰‹åŠ¨å°†å¯¹è±¡è½¬æ¢ä¸º JSON å­—ç¬¦ä¸²")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" jsonString "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("JSON")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("stringify")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("user"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 2. å¿…é¡»æ‰‹åŠ¨è®¾ç½®æ­£ç¡®çš„ Content-Type")]),t._v("\n    res"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setHeader")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Content-Type'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'application/json'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 3. å‘é€å­—ç¬¦ä¸²")]),t._v("\n    res"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("end")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("jsonString"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("error"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    res"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("status")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("500")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("end")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Server error'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä½¿ç”¨ res.send()")]),t._v("\napp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/send-json'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("req"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Request"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" res"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Response"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä¸€æ­¥åˆ°ä½ï¼")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Express ä¼šè‡ªåŠ¨:")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 1. è°ƒç”¨ JSON.stringify(user)")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 2. è®¾ç½® Content-Type: application/json; charset=utf-8")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 3. è®¾ç½® ETag å¤´")]),t._v("\n  res"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("send")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("user"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" \n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br"),s("span",{staticClass:"line-number"},[t._v("25")]),s("br"),s("span",{staticClass:"line-number"},[t._v("26")]),s("br"),s("span",{staticClass:"line-number"},[t._v("27")]),s("br"),s("span",{staticClass:"line-number"},[t._v("28")]),s("br")])]),s("p",[s("strong",[t._v("åˆ†æ")]),t._v(": è¿™ä¸ªåœºæ™¯å®Œç¾åœ°å±•ç¤ºäº† "),s("code",[t._v("res.send()")]),t._v(" çš„å¼ºå¤§ä¹‹å¤„ã€‚å®ƒå°†ä¸€ä¸ªä¸‰æ­¥æ“ä½œç®€åŒ–ä¸ºä¸€æ­¥ï¼Œå¹¶ä¸”åšå¾—æ›´å®Œå–„ï¼ˆè‡ªåŠ¨è®¾ç½® ETagï¼‰ã€‚")]),t._v(" "),s("h4",{attrs:{id:"åœºæ™¯-3-å‘é€æ— å†…å®¹çš„å“åº”"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#åœºæ™¯-3-å‘é€æ— å†…å®¹çš„å“åº”"}},[t._v("ğŸŒ™")]),t._v(" åœºæ™¯ 3: å‘é€æ— å†…å®¹çš„å“åº”")]),t._v(" "),s("div",{staticClass:"language-typescript line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-typescript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" express"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" Request"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Response "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'express'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" app "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("express")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ¯”å¦‚å¤„ç†ä¸€ä¸ª DELETE è¯·æ±‚æˆåŠŸå")]),t._v("\napp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("delete")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/some-resource/:id'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("req"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Request"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" res"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Response"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä¸¤ç§æ–¹å¼éƒ½å¯ä»¥ï¼Œä½† res.send() æ›´ç¬¦åˆ Express çš„ä¹¦å†™ä¹ æƒ¯")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ–¹å¼ä¸€ï¼šä½¿ç”¨ end")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// res.status(204).end();")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ–¹å¼äºŒï¼šä½¿ç”¨ send (æ›´æ¨è)")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// .send() ä¼šå¤„ç†å¥½ä¸€åˆ‡ï¼Œå³ä½¿æ²¡æœ‰å†…å®¹è¦å‘é€")]),t._v("\n  res"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("status")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("204")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("send")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" \n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br")])]),s("p",[s("strong",[t._v("åˆ†æ")]),t._v(": åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œ"),s("code",[t._v("res.status(204).send()")]),t._v(" æ˜¯æ›´ç¬¦åˆ Express ç¼–ç é£æ ¼ï¼ˆidiomaticï¼‰çš„å†™æ³•ã€‚")]),t._v(" "),s("h3",{attrs:{id:"ç»“è®ºä¸æœ€ä½³å®è·µ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ç»“è®ºä¸æœ€ä½³å®è·µ"}},[t._v("ğŸŒ™")]),t._v(" ç»“è®ºä¸æœ€ä½³å®è·µ")]),t._v(" "),s("p",[t._v("ä½¿ç”¨ Express å¤„ç†å“åº”ï¼Œåº”è¯¥éµå¾ªä»¥ä¸‹å‡†åˆ™ï¼š")]),t._v(" "),s("ol",[s("li",[s("p",[s("strong",[t._v("å§‹ç»ˆä¼˜å…ˆä½¿ç”¨ "),s("code",[t._v("res.send()")])]),t._v("ï¼šåœ¨ "),s("strong",[t._v("99%")]),t._v(" çš„æƒ…å†µä¸‹ï¼Œ"),s("code",[t._v("res.send()")]),t._v(" éƒ½æ˜¯ä½ çš„æ­£ç¡®é€‰æ‹©ã€‚å®ƒæ›´å®‰å…¨ã€æ›´æ–¹ä¾¿ã€åŠŸèƒ½æ›´å¼ºå¤§ï¼Œå¹¶ä¸”å……åˆ†åˆ©ç”¨äº† Express æ¡†æ¶çš„ä¼˜åŠ¿ã€‚å®ƒæ˜¯ä¸ºæ—¥å¸¸åº”ç”¨å¼€å‘è€Œè®¾è®¡çš„ã€‚")])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("ä»€ä¹ˆæ—¶å€™ä¼šç”¨åˆ° "),s("code",[t._v("res.end()")]),t._v("ï¼Ÿ")]),t._v("ï¼š")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("æé™æ€§èƒ½ä¼˜åŒ–")]),t._v("ï¼šåœ¨æå°‘æ•°éœ€è¦å‹æ¦¨æ¯ä¸€åˆ†æ€§èƒ½çš„åœºæ™¯ä¸‹ï¼Œä½ å¯èƒ½æƒ³ç»•è¿‡ "),s("code",[t._v("res.send()")]),t._v(" çš„æ‰€æœ‰æ£€æŸ¥å’Œå¤„ç†é€»è¾‘ï¼Œç›´æ¥å‘é€ä¸€ä¸ªé¢„å…ˆå‡†å¤‡å¥½çš„ Bufferã€‚")]),t._v(" "),s("li",[s("strong",[t._v("ä¸ä½¿ç”¨ Express æ—¶")]),t._v("ï¼šå¦‚æœä½ ç›´æ¥ä½¿ç”¨ Node.js çš„åŸç”Ÿ "),s("code",[t._v("http")]),t._v(" æ¨¡å—åˆ›å»ºæœåŠ¡å™¨ï¼Œé‚£ä½ "),s("strong",[t._v("åªèƒ½")]),t._v("ä½¿ç”¨ "),s("code",[t._v("res.end()")]),t._v("ã€‚")])])]),t._v(" "),s("li",[s("p",[t._v("å½“ç„¶ï¼Œå¦‚æœæ˜¯"),s("code",[t._v("express v4.8")]),t._v(" ä»¥ä¸Šï¼Œæ¨èä½¿ç”¨ "),s("a",{attrs:{href:"https://expressjs.com/en/5x/api.html#res.sendFile",target:"_blank",rel:"noopener noreferrer"}},[t._v("res.sendFile(path [, options] [, fn])"),s("OutboundLink")],1),t._v("æ¥ä¸“é—¨å¤„ç†æ–‡ä»¶ã€‚")])])]),t._v(" "),s("blockquote",[s("p",[t._v("é¡¹ç›®ï¼š"),s("a",{attrs:{href:"https://github.com/Keekuun/puppeteer-pdf",target:"_blank",rel:"noopener noreferrer"}},[t._v("åŸºäº Puppeteer çš„ PDF æ–‡æ¡£ç”ŸæˆæœåŠ¡"),s("OutboundLink")],1)])])])}),[],!1,null,null,null);s.default=e.exports}}]);