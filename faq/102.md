## 前端安全

### 1.用户界面与数据展示层
+ 攻击风险 ：跨站脚本攻击（**XSS**）、HTML注入、点击劫持
+ 防御措施 ：
  - 严格过滤和转义用户输入，防止恶意代码注入
  - 使用安全模板渲染，避免直接操作 DOM（例如避免使用 innerHTML）
  - 配置内容安全策略（**CSP**），限制脚本来源
  - 设置 **X-Frame-Options** 或 CSP 的 **frame-ancestors** 指令防止点击劫持

> X-Frame-Options: 限制 iframe 嵌套，防止跨站攻击
> 
> CSP: frame-ancestors 限制 iframe 嵌套，防止跨站攻击
> 
> 当frame-ancestors设为none时，作用类似于X-Frame-Options: deny。 
> 两者同时设置，则CSP优先级更高。
> 
> [CSP frame-ancestors 对比 x-frame-options 有何不同？](https://juejin.cn/post/6844904136090058766)

### 2.业务逻辑层
+ 攻击风险 ：业务逻辑漏洞导致未授权访问或功能滥用
+ 防御措施 ：
  - 实现完善的权限校验和身份验证机制
  - 定期进行代码审查和安全测试，及时发现逻辑漏洞

### 3.数据交互层
+ 攻击风险 ：跨站请求伪造（**CSRF**）、中间人攻击、数据窃取
+ 防御措施 ：
  - 使用 HTTPS 加密数据传输，防止数据在传输过程中被窃取或篡改
  - 在请求中加入 CSRF Token，并在服务器端验证请求合法性
  - 配置严格的 CORS 策略，确保 API 调用来源可信

### 4.数据存储层
+ 攻击风险 ：本地存储数据泄露（LocalStorage、SessionStorage）、Cookie 劫持
+ 防御措施 ：
  - 避免在前端存储敏感信息，如必须存储应进行加密处理
  - 对 Cookie 设置 **HttpOnly**、Secure 等属性，降低被脚本读取的风险 

### 5.资源加载与依赖管理层
+ 攻击风险 ：第三方依赖库漏洞、供应链攻击、外部资源篡改
+ 防御措施 ：
  - 定期更新和审查第三方依赖，及时修补已知漏洞
  - 使用子资源完整性（SRI）校验机制，确保加载的外部资源未被篡改
  - 仅从可信源加载资源，杜绝未知或不受信任的代码注入

### 5.构建与部署流程
+ 攻击风险 ：构建工具或 CI/CD 流程被攻击，导致恶意代码注入
+ 防御措施 ：
  - 加强构建环境安全管理，定期更新和审查构建工具及依赖
  - 采用代码签名、版本管理和自动化安全测试，确保发布版本的完整性和可追溯性
  - 将安全检测纳入 CI/CD 流程，实现自动化的安全漏洞扫描

综上所述，只有从整体应用架构的角度出发，针对各个模块的不同攻击面采取多层次防御措施，才能真正保障前端系统的安全性和稳定性。
