## 95. Eslint ä»£ç æ£€æŸ¥çš„è¿‡ç¨‹æ˜¯å•¥ï¼Ÿ

`ESLint` æ˜¯ä¸€ä¸ªç”¨äº **é™æ€ä»£ç åˆ†æ** çš„å·¥å…·ï¼Œä¸»è¦ç”¨äºæ£€æŸ¥å’Œä¿®å¤ JavaScript/TypeScript ä»£ç ä¸­çš„æ½œåœ¨é—®é¢˜ï¼ˆå¦‚è¯­æ³•é”™è¯¯ã€é£æ ¼é—®é¢˜ã€é€»è¾‘é”™è¯¯ç­‰ï¼‰ã€‚ä»¥ä¸‹æ˜¯å®ƒçš„ä»£ç æ£€æŸ¥è¿‡ç¨‹è¯¦è§£ï¼š

---

## **1. åˆå§‹åŒ–é…ç½®**
### **æ­¥éª¤**
1. **é…ç½®æ–‡ä»¶**ï¼šESLint ä¼šæŸ¥æ‰¾é¡¹ç›®ä¸­çš„é…ç½®æ–‡ä»¶ï¼ˆä¼˜å…ˆçº§ä»é«˜åˆ°ä½ï¼‰ï¼š
    - `.eslintrc.js` / `.eslintrc.cjs` / `.eslintrc.yaml` / `.eslintrc.json`
    - `package.json` ä¸­çš„ `eslintConfig` å­—æ®µã€‚
    - å¦‚æœæ²¡æœ‰é…ç½®æ–‡ä»¶ï¼Œä½¿ç”¨å†…ç½®é»˜è®¤è§„åˆ™ã€‚

2. **æ‰©å±•è§„åˆ™**ï¼šé€šè¿‡ `extends` ç»§æ‰¿ç¤¾åŒºæˆ–å›¢é˜Ÿçš„é¢„è®¾è§„åˆ™ï¼ˆå¦‚ `eslint:recommended`ã€`airbnb`ï¼‰ã€‚
   ```javascript
   module.exports = {
     extends: ['eslint:recommended', 'plugin:react/recommended'],
   };
   ```

3. **æ’ä»¶æ”¯æŒ**ï¼šé€šè¿‡ `plugins` åŠ è½½ç‰¹å®šæ¡†æ¶ï¼ˆå¦‚ Reactã€Vueï¼‰æˆ–å·¥å…·ï¼ˆå¦‚ Jestï¼‰çš„è§„åˆ™ã€‚
   ```javascript
   module.exports = {
     plugins: ['react', '@typescript-eslint'],
   };
   ```

4. **è§£æå™¨é…ç½®**ï¼šæŒ‡å®šä»£ç è§£æå™¨ï¼ˆå¦‚ `@typescript-eslint/parser` ç”¨äº TypeScriptï¼‰ã€‚
   ```javascript
   module.exports = {
     parser: '@typescript-eslint/parser',
   };
   ```

---

## **2. æ–‡ä»¶åŒ¹é…**
### **æ­¥éª¤**
1. **ç›®æ ‡æ–‡ä»¶**ï¼šé€šè¿‡å‘½ä»¤è¡Œæˆ–é…ç½®æ–‡ä»¶æŒ‡å®šè¦æ£€æŸ¥çš„æ–‡ä»¶ï¼ˆå¦‚ `src/**/*.{js,ts}`ï¼‰ã€‚
2. **å¿½ç•¥æ–‡ä»¶**ï¼šé€šè¿‡ `.eslintignore` æˆ–é…ç½®æ–‡ä»¶ä¸­çš„ `ignorePatterns` æ’é™¤ä¸éœ€è¦æ£€æŸ¥çš„æ–‡ä»¶ã€‚
   ```text
   # .eslintignore
   node_modules/
   dist/
   ```

---

## **3. ä»£ç è§£æ**
### **æ­¥éª¤**
1. **è¯æ³•åˆ†æï¼ˆLexingï¼‰**ï¼šå°†ä»£ç æ‹†åˆ†ä¸º **Tokens**ï¼ˆå¦‚æ ‡è¯†ç¬¦ã€è¿ç®—ç¬¦ã€å­—ç¬¦ä¸²ï¼‰ã€‚
2. **è¯­æ³•åˆ†æï¼ˆParsingï¼‰**ï¼šæ ¹æ® ECMAScript è§„èŒƒç”Ÿæˆ **æŠ½è±¡è¯­æ³•æ ‘ï¼ˆASTï¼‰**ã€‚

### **ç¤ºä¾‹**
```javascript
const a = 1 + 2;
```
å¯¹åº”çš„ AST ç»“æ„ï¼š
```json
{
  "type": "VariableDeclaration",
  "declarations": [
    {
      "type": "VariableDeclarator",
      "id": { "type": "Identifier", "name": "a" },
      "init": {
        "type": "BinaryExpression",
        "operator": "+",
        "left": { "type": "Literal", "value": 1 },
        "right": { "type": "Literal", "value": 2 }
      }
    }
  ]
}
```

---

## **4. è§„åˆ™æ£€æŸ¥**
### **æ­¥éª¤**
1. **éå† AST**ï¼šESLint æ·±åº¦ä¼˜å…ˆéå† ASTï¼Œè®¿é—®æ¯ä¸ªèŠ‚ç‚¹ã€‚
2. **è§¦å‘è§„åˆ™**ï¼šå¯¹æ¯ä¸ªèŠ‚ç‚¹åŒ¹é…é…ç½®çš„è§„åˆ™ã€‚
    - æ¯æ¡è§„åˆ™æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œæ¥æ”¶ä¸Šä¸‹æ–‡ï¼ˆContextï¼‰å’ŒèŠ‚ç‚¹ä¿¡æ¯ã€‚
    - å¦‚æœå‘ç°è¿è§„ï¼Œç”Ÿæˆé”™è¯¯æˆ–è­¦å‘Šã€‚

### **ç¤ºä¾‹è§„åˆ™**
```javascript
// è‡ªå®šä¹‰è§„åˆ™ï¼šç¦æ­¢ä½¿ç”¨ console.log
module.exports = {
  rules: {
    'no-console': 'error',
  },
};
```

å½“æ£€æŸ¥åˆ° `console.log` æ—¶ï¼ŒESLint ä¼šæŠ¥é”™ï¼š
```text
error: Unexpected console statement (no-console)
```

---

## **5. æŠ¥å‘Šç»“æœ**
### **æ­¥éª¤**
1. **è¾“å‡ºæ ¼å¼**ï¼šæ ¹æ®é…ç½®è¾“å‡ºæ£€æŸ¥ç»“æœï¼ˆé»˜è®¤æ ¼å¼ã€JSONã€è¡¨æ ¼ç­‰ï¼‰ã€‚
   ```bash
   eslint src/ --format table
   ```
2. **é”™è¯¯åˆ†çº§**ï¼š
    - `error`ï¼ˆé˜»å¡æ€§é”™è¯¯ï¼Œé€šå¸¸å¯¼è‡´é€€å‡ºç ä¸º 1ï¼‰ã€‚
    - `warn`ï¼ˆè­¦å‘Šï¼Œä¸å½±å“é€€å‡ºç ï¼‰ã€‚

3. **è‡ªåŠ¨ä¿®å¤**ï¼šé€šè¿‡ `--fix` å°è¯•è‡ªåŠ¨ä¿®å¤å¯ä¿®å¤çš„é—®é¢˜ï¼ˆå¦‚ç¼©è¿›ã€åˆ†å·ï¼‰ã€‚
   ```bash
   eslint src/ --fix
   ```

---

## **6. é›†æˆä¸æ‰©å±•**
### **å¸¸è§åœºæ™¯**
1. **ç¼–è¾‘å™¨é›†æˆ**ï¼šé€šè¿‡ VS Code çš„ ESLint æ’ä»¶å®æ—¶æ˜¾ç¤ºé”™è¯¯ã€‚
2. **Git Hooks**ï¼šé€šè¿‡ `husky` + `lint-staged` åœ¨æäº¤å‰æ£€æŸ¥ä»£ç ã€‚
   ```json
   // package.json
   {
     "lint-staged": {
       "*.{js,ts}": "eslint --fix"
     }
   }
   ```
3. **CI/CD æµç¨‹**ï¼šåœ¨æ„å»ºé˜¶æ®µå¼ºåˆ¶æ‰§è¡Œæ£€æŸ¥ã€‚
   ```yaml
   # GitHub Actions ç¤ºä¾‹
   - name: Run ESLint
     run: npm run lint
   ```

---

## **æ€»ç»“**
| **é˜¶æ®µ**         | **å…³é”®æ“ä½œ**                          | **å·¥å…·/æŠ€æœ¯**                     |
|------------------|-------------------------------------|----------------------------------|
| åˆå§‹åŒ–é…ç½®       | åŠ è½½è§„åˆ™ã€æ’ä»¶ã€è§£æå™¨                | `.eslintrc.js`, `plugins`        |
| æ–‡ä»¶åŒ¹é…         | ç¡®å®šæ£€æŸ¥èŒƒå›´                          | `.eslintignore`, `glob` æ¨¡å¼      |
| ä»£ç è§£æ         | ç”Ÿæˆ AST                             | `@typescript-eslint/parser`       |
| è§„åˆ™æ£€æŸ¥         | éå† AST å¹¶åŒ¹é…è§„åˆ™                  | è‡ªå®šä¹‰è§„åˆ™ã€ç¤¾åŒºè§„åˆ™é›†            |
| æŠ¥å‘Šç»“æœ         | è¾“å‡ºé”™è¯¯/è­¦å‘Šï¼Œè‡ªåŠ¨ä¿®å¤               | `--format`, `--fix`              |
| é›†æˆæ‰©å±•         | ç¼–è¾‘å™¨ã€Git Hooksã€CI/CD             | VS Code, husky, GitHub Actions   |

é€šè¿‡è¿™ä¸€è¿‡ç¨‹ï¼ŒESLint èƒ½é«˜æ•ˆåœ°ç¡®ä¿ä»£ç è´¨é‡å’Œä¸€è‡´æ€§ï¼ ğŸ› ï¸
**æç¤º**ï¼šç»“åˆ Prettierï¼ˆæ ¼å¼åŒ–ï¼‰å’Œ TypeScriptï¼ˆç±»å‹æ£€æŸ¥ï¼‰æ•ˆæœæ›´ä½³ã€‚