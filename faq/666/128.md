## 128. [React] å¦‚ä½•å®ç°è½¬åœºåŠ¨ç”»ï¼Ÿ

åœ¨ React ä¸­å®ç°è½¬åœºåŠ¨ç”»ï¼ˆTransition Animationï¼‰å¯ä»¥é€šè¿‡å¤šç§æ–¹å¼ï¼Œä»¥ä¸‹æ˜¯å‡ ç§å¸¸è§çš„å®ç°æ–¹æ³•ï¼Œç»“åˆä»£ç ç¤ºä¾‹å’Œæœ€ä½³å®è·µï¼š

---

## ğŸŒŸ æ–¹æ³• 1ï¼šä½¿ç”¨ `react-transition-group`ï¼ˆå®˜æ–¹æ¨èï¼‰

`react-transition-group` æ˜¯ä¸€ä¸ªè½»é‡çº§çš„åŠ¨ç”»åº“ï¼Œä¸“é—¨ä¸º React è®¾è®¡ï¼Œæ”¯æŒç»„ä»¶è¿›å…¥å’Œç¦»å¼€æ—¶çš„åŠ¨ç”»æ•ˆæœã€‚

### å®‰è£…
```bash
npm install react-transition-group
```

### ç¤ºä¾‹ä»£ç 
```tsx
import React, { useState } from "react";
import { CSSTransition } from "react-transition-group";
import "./styles.css"; // åŠ¨ç”»æ ·å¼

const TransitionDemo = () => {
  const [show, setShow] = useState(false);

  return (
    <div>
      <button onClick={() => setShow(!show)}>
        {show ? "Hide" : "Show"} Element
      </button>

      <CSSTransition
        in={show}
        timeout={300} // åŠ¨ç”»æŒç»­æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰
        classNames="fade" // CSS ç±»åå‰ç¼€
        unmountOnExit // åŠ¨ç”»ç»“æŸåå¸è½½ç»„ä»¶
      >
        <div className="box">Hello, Animation!</div>
      </CSSTransition>
    </div>
  );
};

export default TransitionDemo;
```

### é…å¥— CSSï¼ˆ`styles.css`ï¼‰
```css
.fade-enter {
  opacity: 0;
}
.fade-enter-active {
  opacity: 1;
  transition: opacity 300ms;
}
.fade-exit {
  opacity: 1;
}
.fade-exit-active {
  opacity: 0;
  transition: opacity 300ms;
}
```

---

## ğŸŒŸ æ–¹æ³• 2ï¼šä½¿ç”¨ CSS-in-JSï¼ˆå¦‚ `styled-components` æˆ– `emotion`ï¼‰

é€šè¿‡åŠ¨æ€æ ·å¼å®ç°åŠ¨ç”»æ•ˆæœï¼Œé€‚åˆå–œæ¬¢ CSS-in-JS çš„å¼€å‘è€…ã€‚

### å®‰è£…
```bash
npm install styled-components
```

### ç¤ºä¾‹ä»£ç 
```tsx
import React, { useState } from "react";
import styled, { css } from "styled-components";

const FadeBox = styled.div<{ show: boolean }>`
  opacity: 0;
  transition: opacity 0.3s ease-in-out;

  ${({ show }) =>
    show &&
    css`
      opacity: 1;
    `}
`;

const TransitionDemo = () => {
  const [show, setShow] = useState(false);

  return (
    <div>
      <button onClick={() => setShow(!show)}>
        {show ? "Hide" : "Show"} Element
      </button>
      <FadeBox show={show}>Hello, Animation!</FadeBox>
    </div>
  );
};

export default TransitionDemo;
```

---

## ğŸŒŸ æ–¹æ³• 3ï¼šä½¿ç”¨ `Framer Motion`ï¼ˆé«˜çº§åŠ¨ç”»åº“ï¼‰

`Framer Motion` æ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„åŠ¨ç”»åº“ï¼Œæ”¯æŒå¤æ‚çš„åŠ¨ç”»æ•ˆæœå’Œæ‰‹åŠ¿äº¤äº’ã€‚

### å®‰è£…
```bash
npm install framer-motion
```

### ç¤ºä¾‹ä»£ç 
```tsx
import React, { useState } from "react";
import { motion, AnimatePresence } from "framer-motion";

const TransitionDemo = () => {
  const [show, setShow] = useState(false);

  return (
    <div>
      <button onClick={() => setShow(!show)}>
        {show ? "Hide" : "Show"} Element
      </button>

      <AnimatePresence>
        {show && (
          <motion.div
            initial={{ opacity: 0, y: -20 }}
            animate={{ opacity: 1, y: 0 }}
            exit={{ opacity: 0, y: 20 }}
            transition={{ duration: 0.3 }}
          >
            Hello, Animation!
          </motion.div>
        )}
      </AnimatePresence>
    </div>
  );
};

export default TransitionDemo;
```

---

## ğŸŒŸ æ–¹æ³• 4ï¼šä½¿ç”¨åŸç”Ÿ CSS + React çŠ¶æ€

é€šè¿‡åŠ¨æ€ç±»åæ§åˆ¶åŠ¨ç”»æ•ˆæœï¼Œé€‚åˆç®€å•çš„åœºæ™¯ã€‚

### ç¤ºä¾‹ä»£ç 
```tsx
import React, { useState } from "react";
import "./styles.css";

const TransitionDemo = () => {
  const [show, setShow] = useState(false);

  return (
    <div>
      <button onClick={() => setShow(!show)}>
        {show ? "Hide" : "Show"} Element
      </button>
      <div className={`box ${show ? "fade-in" : "fade-out"}`}>
        Hello, Animation!
      </div>
    </div>
  );
};

export default TransitionDemo;
```

### é…å¥— CSSï¼ˆ`styles.css`ï¼‰
```css
.box {
  opacity: 0;
  transition: opacity 0.3s;
}
.fade-in {
  opacity: 1;
}
.fade-out {
  opacity: 0;
}
```

---

## ğŸ“Œ é€‰æ‹©å»ºè®®

| æ–¹æ³• | é€‚ç”¨åœºæ™¯ | ä¼˜ç‚¹ | ç¼ºç‚¹ |
|------|----------|------|------|
| `react-transition-group` | ç»„ä»¶è¿›å…¥/é€€å‡ºåŠ¨ç”» | è½»é‡çº§ï¼Œå®˜æ–¹æ¨è | éœ€è¦é¢å¤– CSS |
| CSS-in-JS | åŠ¨æ€æ ·å¼æ§åˆ¶ | ä»£ç å†…èšï¼Œé€‚åˆç»„ä»¶åŒ– | å­¦ä¹ æˆæœ¬ |
| `Framer Motion` | å¤æ‚åŠ¨ç”»/äº¤äº’ | åŠŸèƒ½å¼ºå¤§ï¼ŒAPI å‹å¥½ | ä½“ç§¯è¾ƒå¤§ |
| åŸç”Ÿ CSS | ç®€å•åŠ¨ç”» | æ— ä¾èµ– | æ‰©å±•æ€§å·® |

---

## ğŸš€ è¿›é˜¶æŠ€å·§

1. **è·¯ç”±è½¬åœºåŠ¨ç”»**
   ç»“åˆ `react-router` å’Œ `react-transition-group` å®ç°é¡µé¢åˆ‡æ¢åŠ¨ç”»ï¼š
   ```tsx
   <CSSTransition in={location.key} timeout={300} classNames="page" unmountOnExit>
     <Routes location={location}>
       <Route path="/" element={<Home />} />
     </Routes>
   </CSSTransition>
   ```

2. **åˆ—è¡¨åŠ¨ç”»**
   ä½¿ç”¨ `TransitionGroup` å®ç°åˆ—è¡¨é¡¹çš„åŠ¨ç”»æ•ˆæœï¼š
   ```tsx
   <TransitionGroup>
     {items.map(item => (
       <CSSTransition key={item.id} timeout={300} classNames="item">
         <div>{item.text}</div>
       </CSSTransition>
     ))}
   </TransitionGroup>
   ```

---

## ğŸ§  å¸¸è§é—®é¢˜

### â“ åŠ¨ç”»ä¸ç”Ÿæ•ˆï¼Ÿ
- æ£€æŸ¥ `in` å±æ€§æ˜¯å¦æ­£ç¡®ç»‘å®šåˆ°çŠ¶æ€ã€‚
- ç¡®è®¤ CSS ç±»åæ‹¼å†™æ­£ç¡®ï¼ˆå¦‚ `fade-enter-active`ï¼‰ã€‚
- ç¡®ä¿ `unmountOnExit` æˆ– `AnimatePresence` å·²é…ç½®ã€‚

### â“ å¦‚ä½•ä¼˜åŒ–æ€§èƒ½ï¼Ÿ
- é¿å…åœ¨åŠ¨ç”»ä¸­ä½¿ç”¨ `box-shadow` æˆ– `filter` ç­‰é«˜æ€§èƒ½æ¶ˆè€—å±æ€§ã€‚
- ä½¿ç”¨ `will-change: opacity;` æç¤ºæµè§ˆå™¨ä¼˜åŒ–ã€‚

---

å¦‚æœéœ€è¦æ›´å…·ä½“çš„åœºæ™¯ï¼ˆå¦‚è·¯ç”±åŠ¨ç”»ã€åˆ—è¡¨åŠ¨ç”»ï¼‰ï¼Œå¯ä»¥å‘Šè¯‰æˆ‘ï¼Œæˆ‘ä¼šæä¾›æ›´è¯¦ç»†çš„ä»£ç ç¤ºä¾‹ï¼ ğŸ‰