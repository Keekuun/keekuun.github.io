## 114. ä½ è®¤ä¸ºç»„ä»¶å°è£…çš„ä¸€äº›åŸºæœ¬å‡†åˆ™æ˜¯ä»€ä¹ˆï¼Ÿ

ç»„ä»¶å°è£…æ˜¯å‰ç«¯å·¥ç¨‹åŒ–çš„æ ¸å¿ƒï¼Œå¥½çš„å°è£…èƒ½æå‡ **ä»£ç å¤ç”¨æ€§**ã€**å¯ç»´æŠ¤æ€§** å’Œ **å›¢é˜Ÿåä½œæ•ˆç‡**ã€‚ä»¥ä¸‹æ˜¯åŸºäºå®æˆ˜æ€»ç»“çš„ç»„ä»¶å°è£…å‡†åˆ™ï¼ˆé™„ TypeScript ç¤ºä¾‹ï¼‰ï¼š

---

### ğŸ§© **1. å•ä¸€èŒè´£åŸåˆ™ï¼ˆSRPï¼‰**
**å‡†åˆ™**ï¼šä¸€ä¸ªç»„ä»¶åªåšä¸€ä»¶äº‹ï¼Œé¿å…æˆä¸ºâ€œä¸Šå¸ç»„ä»¶â€ã€‚
**ç¤ºä¾‹**ï¼š
```tsx
// Bad: æ··æ‚äº†åˆ—è¡¨æ¸²æŸ“å’Œæœç´¢é€»è¾‘
const UserListWithSearch = () => { /* ... */ };

// Good: æ‹†åˆ†ä¸ºä¸¤ä¸ªç»„ä»¶
const UserSearch = () => { /* ... */ };
const UserList = ({ users }) => { /* ... */ };
```

---

### ğŸ”Œ **2. æ˜ç¡® Props è®¾è®¡**
**å‡†åˆ™**ï¼š
- **ç±»å‹å®‰å…¨**ï¼šç”¨ TypeScript å®šä¹‰æ¸…æ™°çš„æ¥å£ã€‚
- **é»˜è®¤å€¼**ï¼šé€šè¿‡ `defaultProps` æˆ–è§£æ„é»˜è®¤å€¼æä¾›å…œåº•ã€‚
- **æ§åˆ¶åè½¬**ï¼šå°†çŠ¶æ€ç®¡ç†æƒäº¤ç»™çˆ¶ç»„ä»¶ï¼ˆå—æ§ç»„ä»¶ï¼‰ã€‚

**ç¤ºä¾‹**ï¼š
```tsx
interface ButtonProps {
  type?: "primary" | "secondary";
  size?: "sm" | "md" | "lg";
  onClick?: () => void;
}

const Button = ({ type = "primary", size = "md", onClick }: ButtonProps) => {
  return <button className={`btn-${type} btn-${size}`} onClick={onClick} />;
};
```

---

### ğŸ›¡ï¸ **3. é«˜å†…èšä½è€¦åˆ**
**å‡†åˆ™**ï¼š
- **å†…éƒ¨çŠ¶æ€éš”ç¦»**ï¼šé¿å…ç›´æ¥æš´éœ²ç»„ä»¶å†…éƒ¨çŠ¶æ€ï¼ˆå¦‚ `ref`ï¼‰ã€‚
- **ä¾èµ–æœ€å°åŒ–**ï¼šå‡å°‘å¯¹å…¨å±€çŠ¶æ€ï¼ˆå¦‚ Reduxï¼‰çš„ä¾èµ–ï¼Œä¼˜å…ˆé€šè¿‡ Props é€šä¿¡ã€‚

**ç¤ºä¾‹**ï¼š
```tsx
// Bad: å†…éƒ¨ä¾èµ–å…¨å±€çŠ¶æ€
const CartBadge = () => {
  const { cartItems } = useStore(); // âŒ è€¦åˆåº¦é«˜
  return <span>{cartItems.length}</span>;
};

// Good: é€šè¿‡ Props ä¼ å…¥æ•°æ®
interface CartBadgeProps {
  count: number;
}
const CartBadge = ({ count }: CartBadgeProps) => <span>{count}</span>;
```

---

### â™»ï¸ **4. æ”¯æŒç»„åˆï¼ˆCompositionï¼‰**
**å‡†åˆ™**ï¼š
- **ä½¿ç”¨ `children` æˆ– `slots`**ï¼šçµæ´»æ’å…¥å†…å®¹ã€‚
- **Render Props æ¨¡å¼**ï¼šåŠ¨æ€æ³¨å…¥æ¸²æŸ“é€»è¾‘ã€‚

**ç¤ºä¾‹**ï¼š
```tsx
// ç»„åˆç¤ºä¾‹
const Card = ({ children }: { children: React.ReactNode }) => (
  <div className="card">{children}</div>
);

// Render Props ç¤ºä¾‹
const Dropdown = ({ renderItem }: { renderItem: (item: string) => ReactNode }) => {
  const items = ["A", "B", "C"];
  return <div>{items.map(renderItem)}</div>;
};
```

---

### ğŸ“š **5. æ–‡æ¡£ä¸ç¤ºä¾‹**
**å‡†åˆ™**ï¼š
- **å†™æ¸…æ™°çš„æ–‡æ¡£**ï¼šæè¿° Propsã€Eventsã€Slots å’Œç”¨ä¾‹ã€‚
- **æä¾› Storybook ç¤ºä¾‹**ï¼šå¯è§†åŒ–å±•ç¤ºç»„ä»¶è¡Œä¸ºã€‚

**ç¤ºä¾‹**ï¼š
```markdown
## Button ç»„ä»¶

### Props
| å‚æ•°     | ç±»å‹                | é»˜è®¤å€¼    | è¯´æ˜         |
|----------|---------------------|-----------|--------------|
| type     | "primary"ï½œ"secondary" | "primary" | æŒ‰é’®ç±»å‹     |
| onClick  | `() => void`        | -         | ç‚¹å‡»äº‹ä»¶å›è°ƒ |

### ç¤ºä¾‹
```tsx
<Button type="secondary" onClick={() => alert("Clicked!")} />
```

---

### ğŸ§ª **6. å¯æµ‹è¯•æ€§**
**å‡†åˆ™**ï¼š
- **éš”ç¦»å‰¯ä½œç”¨**ï¼šå°† API è°ƒç”¨æŠ½ç¦»åˆ°è‡ªå®šä¹‰ Hookã€‚
- **æ³¨å…¥ Mock æ•°æ®**ï¼šä¾¿äºå•å…ƒæµ‹è¯•ã€‚

**ç¤ºä¾‹**ï¼š
```tsx
// å¯æµ‹è¯•çš„ç»„ä»¶
const UserList = ({ fetchUsers }: { fetchUsers: () => Promise<User[]> }) => {
  const [users, setUsers] = useState<User[]>([]);
  useEffect(() => {
    fetchUsers().then(setUsers);
  }, []);
  return <ul>{users.map(user => <li key={user.id}>{user.name}</li>)}</ul>;
};

// æµ‹è¯•ç”¨ä¾‹
test("UserList renders users", async () => {
  const mockFetch = jest.fn().mockResolvedValue([{ id: 1, name: "Alice" }]);
  render(<UserList fetchUsers={mockFetch} />);
  await waitFor(() => expect(screen.getByText("Alice")).toBeInTheDocument());
});
```

---

### ğŸ¨ **7. æ ·å¼éš”ç¦»**
**å‡†åˆ™**ï¼š
- **CSS-in-JS**ï¼šä½¿ç”¨ `styled-components` æˆ– `emotion` é¿å…å…¨å±€æ±¡æŸ“ã€‚
- **Scoped CSS**ï¼šVue çš„ `<style scoped>` æˆ– CSS Modulesã€‚

**ç¤ºä¾‹**ï¼š
```tsx
// styled-components ç¤ºä¾‹
const StyledButton = styled.button<{ $type: ButtonProps["type"] }>`
  background: ${props => (props.$type === "primary" ? "blue" : "gray")};
`;

const Button = ({ type }: ButtonProps) => (
  <StyledButton $type={type}>Click</StyledButton>
);
```

---

### ğŸ”„ **8. ç‰ˆæœ¬å…¼å®¹ä¸ç ´åæ€§å˜æ›´**
**å‡†åˆ™**ï¼š
- **è¯­ä¹‰åŒ–ç‰ˆæœ¬ï¼ˆSemVerï¼‰**ï¼šéµå¾ª `MAJOR.MINOR.PATCH` è§„åˆ™ã€‚
- **åºŸå¼ƒè­¦å‘Š**ï¼šç”¨ `deprecated` æ³¨é‡Šé€æ­¥è¿ç§»ã€‚

**ç¤ºä¾‹**ï¼š
```tsx
// v1.0.0
const OldButton = () => <button className="old-style" />;

// v2.0.0 (å¸¦åºŸå¼ƒè­¦å‘Š)
/**
 * @deprecated è¯·ä½¿ç”¨æ–°ç‰ˆæœ¬ `<Button>` ç»„ä»¶
 */
const OldButton = () => <button className="old-style" />;
```

---

### ğŸ“Š **æ€»ç»“ï¼šç»„ä»¶å°è£… Checklist**
| å‡†åˆ™                | å…³é”®ç‚¹                          | å·¥å…·/æŠ€æœ¯               |
|---------------------|--------------------------------|------------------------|
| å•ä¸€èŒè´£            | æ‹†åˆ†å¤æ‚é€»è¾‘                   | React/Vue ç»„ä»¶æ‹†åˆ†      |
| Props è®¾è®¡          | ç±»å‹å®‰å…¨ + é»˜è®¤å€¼              | TypeScript             |
| ç»„åˆæ¨¡å¼            | `children` / Render Props      | React Slots / Vue Slots |
| æ–‡æ¡£åŒ–              | Storybook / MDX                | Storybook              |
| æµ‹è¯•                | éš”ç¦»å‰¯ä½œç”¨ + Mock              | Jest / Testing Library |
| æ ·å¼éš”ç¦»            | CSS-in-JS / Scoped CSS         | styled-components      |

---

é€šè¿‡éµå¾ªè¿™äº›å‡†åˆ™ï¼Œä½ çš„ç»„ä»¶åº“å°†å…·å¤‡ï¼š

âœ… **é«˜å¤ç”¨æ€§** â€” åƒä¹é«˜ä¸€æ ·çµæ´»ç»„åˆ

âœ… **ä½ç»´æŠ¤æˆæœ¬** â€” ä¿®æ”¹ä¸€ä¸ªç»„ä»¶ä¸å½±å“å…¶ä»–éƒ¨åˆ†

âœ… **å›¢é˜Ÿå‹å¥½** â€” æ–°äººèƒ½å¿«é€Ÿç†è§£è®¾è®¡æ„å›¾

å°è£…ç»„ä»¶ä¸ä»…æ˜¯æŠ€æœ¯æ´»ï¼Œæ›´æ˜¯è‰ºæœ¯ï¼ ğŸ¨