## 75. å‰ç«¯å¦‚ä½•åšé¡µé¢ä¸»é¢˜è‰²åˆ‡æ¢

åœ¨å‰ç«¯å®ç° **é¡µé¢ä¸»é¢˜è‰²åˆ‡æ¢** æ˜¯ä¸€ä¸ªå¸¸è§çš„éœ€æ±‚ï¼Œé€šå¸¸ç”¨äºæ”¯æŒ **æ·±è‰²æ¨¡å¼/æµ…è‰²æ¨¡å¼** æˆ– **ç”¨æˆ·è‡ªå®šä¹‰ä¸»é¢˜**ã€‚ä»¥ä¸‹æ˜¯å®Œæ•´çš„å®ç°æ–¹æ¡ˆï¼Œæ¶µç›–æŠ€æœ¯é€‰å‹ã€ä»£ç ç¤ºä¾‹å’Œæœ€ä½³å®è·µï¼š

---

## **1. æ ¸å¿ƒå®ç°æ–¹æ¡ˆ**
### **(1) CSS å˜é‡ + JavaScript åŠ¨æ€åˆ‡æ¢**
#### **âœ… å®šä¹‰ä¸»é¢˜å˜é‡**
åœ¨å…¨å±€ CSS ä¸­å®šä¹‰ä¸»é¢˜ç›¸å…³çš„å˜é‡ï¼š
```css
:root {
  --primary-color: #3498db; /* é»˜è®¤ä¸»é¢˜è‰² */
  --bg-color: #ffffff;
  --text-color: #333333;
}

[data-theme="dark"] {
  --primary-color: #9b59b6;
  --bg-color: #222222;
  --text-color: #ffffff;
}
```

#### **âœ… åº”ç”¨å˜é‡**
åœ¨é¡µé¢ä¸­ä½¿ç”¨è¿™äº›å˜é‡ï¼š
```css
body {
  background-color: var(--bg-color);
  color: var(--text-color);
}
.button {
  background-color: var(--primary-color);
}
```

#### **âœ… åŠ¨æ€åˆ‡æ¢ä¸»é¢˜**
é€šè¿‡ JavaScript ä¿®æ”¹ `data-theme` å±æ€§ï¼š
```typescript
function toggleTheme() {
  const currentTheme = document.documentElement.getAttribute('data-theme');
  const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
  document.documentElement.setAttribute('data-theme', newTheme);
  localStorage.setItem('theme', newTheme); // æŒä¹…åŒ–å­˜å‚¨
}

// åˆå§‹åŒ–æ—¶è¯»å–å­˜å‚¨çš„ä¸»é¢˜
const savedTheme = localStorage.getItem('theme');
if (savedTheme) {
  document.documentElement.setAttribute('data-theme', savedTheme);
}
```

---

### **(2) CSS é¢„å¤„ç†å™¨ï¼ˆSass/Lessï¼‰**
å¦‚æœé¡¹ç›®ä½¿ç”¨ Sass/Lessï¼Œå¯ä»¥é€šè¿‡å˜é‡å’Œæ¡ä»¶é€»è¾‘ç”Ÿæˆå¤šå¥—ä¸»é¢˜ï¼š
```scss
$themes: (
  light: (
    primary-color: #3498db,
    bg-color: #ffffff,
  ),
  dark: (
    primary-color: #9b59b6,
    bg-color: #222222,
  ),
);

@mixin theme($name) {
  $theme: map-get($themes, $name);
  [data-theme="#{$name}"] & {
    background-color: map-get($theme, bg-color);
    color: map-get($theme, text-color);
  }
}

.button {
  @include theme('light');
  @include theme('dark');
}
```

---

### **(3) ä½¿ç”¨å‰ç«¯æ¡†æ¶ï¼ˆReact/Vueï¼‰**
#### **âœ… React ç¤ºä¾‹**
```tsx
import React, { useState, useEffect } from 'react';

const ThemeSwitcher = () => {
  const [theme, setTheme] = useState<'light' | 'dark'>('light');

  useEffect(() => {
    const savedTheme = localStorage.getItem('theme') as 'light' | 'dark';
    if (savedTheme) setTheme(savedTheme);
  }, []);

  const toggleTheme = () => {
    const newTheme = theme === 'light' ? 'dark' : 'light';
    setTheme(newTheme);
    document.documentElement.setAttribute('data-theme', newTheme);
    localStorage.setItem('theme', newTheme);
  };

  return (
    <button onClick={toggleTheme}>
      Switch to {theme === 'light' ? 'Dark' : 'Light'} Mode
    </button>
  );
};
```

#### **âœ… Vue ç¤ºä¾‹**
```vue
<template>
  <button @click="toggleTheme">
    Switch to {{ theme === 'light' ? 'Dark' : 'Light' }} Mode
  </button>
</template>

<script>
export default {
  data() {
    return {
      theme: 'light',
    };
  },
  mounted() {
    const savedTheme = localStorage.getItem('theme');
    if (savedTheme) this.theme = savedTheme;
  },
  methods: {
    toggleTheme() {
      this.theme = this.theme === 'light' ? 'dark' : 'light';
      document.documentElement.setAttribute('data-theme', this.theme);
      localStorage.setItem('theme', this.theme);
    },
  },
};
</script>
```

---

## **2. é«˜çº§ä¼˜åŒ–**
### **(1) è·Ÿéšç³»ç»Ÿä¸»é¢˜**
ç›‘å¬ç”¨æˆ·ç³»ç»Ÿçš„ä¸»é¢˜åå¥½ï¼ˆé€šè¿‡ `prefers-color-scheme`ï¼‰ï¼š
```typescript
const prefersDark = window.matchMedia('(prefers-color-scheme: dark)');
if (prefersDark.matches) {
  document.documentElement.setAttribute('data-theme', 'dark');
}

// åŠ¨æ€å“åº”ç³»ç»Ÿä¸»é¢˜å˜åŒ–
prefersDark.addEventListener('change', (e) => {
  document.documentElement.setAttribute('data-theme', e.matches ? 'dark' : 'light');
});
```

### **(2) å¹³æ»‘è¿‡æ¸¡åŠ¨ç”»**
é€šè¿‡ CSS è¿‡æ¸¡æ•ˆæœé¿å…é¢œè‰²åˆ‡æ¢ç”Ÿç¡¬ï¼š
```css
body {
  transition: background-color 0.3s, color 0.3s;
}
```

### **(3) ä¸»é¢˜è‰²ç”Ÿæˆå·¥å…·**
åŠ¨æ€ç”Ÿæˆä¸»é¢˜è‰²ï¼ˆå¦‚åŸºäºç”¨æˆ·é€‰æ‹©çš„é¢œè‰²ï¼‰ï¼š
```typescript
function generateThemeColors(baseColor: string) {
  // ä½¿ç”¨é¢œè‰²åº“ï¼ˆå¦‚ chroma.jsï¼‰ç”Ÿæˆè¡ç”Ÿé¢œè‰²
  return {
    primary: baseColor,
    secondary: chroma(baseColor).darken(0.5).hex(),
  };
}
```

---

## **3. å…¼å®¹æ€§ä¸æ³¨æ„äº‹é¡¹**
- **æµè§ˆå™¨æ”¯æŒ**ï¼šCSS å˜é‡å…¼å®¹ IE11 ä»¥å¤–çš„æ‰€æœ‰ç°ä»£æµè§ˆå™¨ã€‚
- **æ€§èƒ½**ï¼šé¿å…åœ¨ CSS å˜é‡ä¸­åµŒå¥—è¿‡å¤šè®¡ç®—ã€‚
- **æ— éšœç¢**ï¼šç¡®ä¿ä¸»é¢˜åˆ‡æ¢ä¸å½±å“å¯è¯»æ€§ï¼ˆå¯¹æ¯”åº¦ç¬¦åˆ WCAG æ ‡å‡†ï¼‰ã€‚

---

## **4. å·¥å…·æ¨è**
| **å·¥å…·**          | **ç”¨é€”**                          |
|-------------------|----------------------------------|
| **CSS Variables** | åŸºç¡€ä¸»é¢˜åˆ‡æ¢æ–¹æ¡ˆ                  |
| **Sass/Less**     | é¢„å¤„ç†å™¨æ”¯æŒå¤šä¸»é¢˜                |
| **chroma.js**     | åŠ¨æ€ç”Ÿæˆé¢œè‰²                      |
| **styled-components** | React ä¸­åŠ¨æ€ä¸»é¢˜æ”¯æŒ       |

---

## **5. æ€»ç»“**
- **ç®€å•åœºæ™¯**ï¼šCSS å˜é‡ + JavaScript åˆ‡æ¢ï¼ˆæ¨èï¼‰ã€‚
- **å¤æ‚åœºæ™¯**ï¼šSass/Less + æ¡†æ¶çŠ¶æ€ç®¡ç†ã€‚
- **åŠ¨æ€ä¸»é¢˜**ï¼šç»“åˆé¢œè‰²ç”Ÿæˆåº“ï¼ˆå¦‚ `chroma.js`ï¼‰ã€‚

å®ç°æ•ˆæœç¤ºä¾‹ï¼š
ğŸŒ **æµ…è‰²æ¨¡å¼** â†’ ğŸŒ™ **æ·±è‰²æ¨¡å¼** â†’ ğŸ¨ **è‡ªå®šä¹‰ä¸»é¢˜**

é€šè¿‡ä»¥ä¸Šæ–¹æ³•ï¼Œä½ å¯ä»¥è½»æ¾å®ç°çµæ´»ã€é«˜æ€§èƒ½çš„ä¸»é¢˜åˆ‡æ¢åŠŸèƒ½ï¼ ğŸ¨