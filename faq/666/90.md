## 90. 你在开发过程中，使用过哪些 TS 的特性或者能力？

在开发过程中，TypeScript（TS）的许多特性和能力可以显著提升代码的健壮性、可维护性和开发效率。以下是我常用的 TS 特性及其实际应用场景，结合代码示例说明：

---

## **1. 类型注解（Type Annotations）**
**作用**：显式声明变量、函数参数和返回值的类型。
**场景**：避免运行时类型错误，增强代码可读性。

```typescript
let username: string = "Alice";
let age: number = 25;
let isActive: boolean = true;

function greet(name: string): string {
  return `Hello, ${name}!`;
}
```

---

## **2. 接口（Interfaces）**
**作用**：定义对象的结构，支持嵌套和扩展。
**场景**：API 响应数据、组件 Props、复杂对象约束。

```typescript
interface User {
  id: number;
  name: string;
  email?: string; // 可选属性
}

function printUser(user: User) {
  console.log(user.name);
}

// 扩展接口
interface Admin extends User {
  role: "admin" | "superadmin";
}
```

---

## **3. 类型别名（Type Aliases）**
**作用**：为复杂类型定义别名，支持联合类型和交叉类型。
**场景**：复用类型逻辑或组合类型。

```typescript
type ID = string | number;
type Point = { x: number; y: number };

function logId(id: ID) {
  console.log(id);
}

// 交叉类型
type Person = User & { address: string };
```

---

## **4. 泛型（Generics）**
**作用**：编写可复用的组件或函数，支持动态类型。
**场景**：封装请求库、工具函数、React 组件。

```typescript
// 泛型函数
function identity<T>(arg: T): T {
  return arg;
}

// 泛型接口（API 响应）
interface ApiResponse<T> {
  data: T;
  code: number;
}

// React 组件 Props 泛型
type ListProps<T> = {
  items: T[];
  renderItem: (item: T) => React.ReactNode;
};
```

---

## **5. 联合类型（Union Types）**
**作用**：允许变量或参数为多种类型之一。
**场景**：处理多态数据或灵活输入。

```typescript
type Status = "success" | "error" | "pending";

function handleStatus(status: Status) {
  switch (status) {
    case "success":
      return "Done!";
    case "error":
      return "Failed!";
  }
}
```

---

## **6. 类型守卫（Type Guards）**
**作用**：运行时类型检查，缩小类型范围。
**场景**：处理联合类型或未知类型（如 API 返回数据）。

```typescript
function isString(value: unknown): value is string {
  return typeof value === "string";
}

function logValue(value: string | number) {
  if (isString(value)) {
    console.log(value.toUpperCase()); // 类型收窄为 string
  } else {
    console.log(value.toFixed(2)); // 类型收窄为 number
  }
}
```

---

## **7. 枚举（Enums）**
**作用**：定义命名常量集合。
**场景**：状态码、固定选项。

```typescript
enum Direction {
  Up = "UP",
  Down = "DOWN",
}

function move(direction: Direction) {
  console.log(direction);
}

move(Direction.Up); // "UP"
```

---

## **8. 类型推断（Type Inference）**
**作用**：TS 自动推断变量类型。
**场景**：减少冗余代码，提升开发体验。

```typescript
let count = 10; // 自动推断为 number
count = "20";   // 报错：不能将 string 赋值给 number

const user = { name: "Alice" }; // 推断为 { name: string }
```

---

## **9. 索引签名（Index Signatures）**
**作用**：动态定义对象属性的类型。
**场景**：处理不确定属性的对象（如字典）。

```typescript
interface StringMap {
  [key: string]: string;
}

const colors: StringMap = {
  primary: "blue",
  secondary: "green",
};
```

---

## **10. 工具类型（Utility Types）**
**作用**：基于现有类型快速生成新类型。
**场景**：类型转换或部分复用。

```typescript
interface Todo {
  title: string;
  completed: boolean;
}

// Partial：所有属性变为可选
type PartialTodo = Partial<Todo>;

// Pick：选择部分属性
type TodoPreview = Pick<Todo, "title">;

// Omit：排除部分属性
type TodoInfo = Omit<Todo, "completed">;
```

---

## **11. 装饰器（Decorators）**
**作用**：通过元编程增强类或方法。
**场景**：日志、权限校验（需开启 `experimentalDecorators`）。

```typescript
function log(target: any, key: string) {
  console.log(`Method ${key} called`);
}

class UserService {
  @log
  getUser() {
    return "Alice";
  }
}
```

---

## **12. 模块与命名空间**
**作用**：组织代码，避免全局污染。
**场景**：大型项目或库开发。

```typescript
// 模块化导出
export interface Config {
  env: string;
}

// 命名空间
namespace Utils {
  export function log(message: string) {
    console.log(message);
  }
}
```

---

## **13. `as` 类型断言**
**作用**：手动指定类型（慎用）。
**场景**：处理第三方库或 DOM 操作。

```typescript
const input = document.getElementById("input") as HTMLInputElement;
input.value = "Hello"; // 明确知道是输入框
```

---

## **14. `unknown` 与 `any` 的区别**
- **`unknown`**：更安全的顶层类型，需类型检查后才能操作。
- **`any`**：绕过类型检查（尽量避免）。

```typescript
let a: any = "hello";
a.toFixed(); // 不报错（运行时可能出错）

let b: unknown = "hello";
if (typeof b === "string") {
  b.toUpperCase(); // 安全操作
}
```

---

## **15. 声明文件（`.d.ts`）**
**作用**：为无类型定义的 JS 库提供类型支持。
**场景**：集成第三方库或旧代码。

```typescript
// globals.d.ts
declare module "untyped-library" {
  export function doSomething(): void;
}
```

---

## **总结**
| **特性**         | **核心价值**                          | **典型场景**                     |
|------------------|--------------------------------------|--------------------------------|
| 类型注解         | 显式声明类型，减少错误                | 变量、函数参数                  |
| 接口与类型别名   | 定义复杂数据结构                      | API 数据、组件 Props            |
| 泛型             | 动态类型复用                          | 工具函数、React 组件            |
| 联合类型         | 支持多态逻辑                          | 状态管理、配置选项              |
| 类型守卫         | 运行时类型安全                        | 处理 API 返回数据               |
| 工具类型         | 快速生成新类型                        | 部分更新、属性过滤              |

通过合理运用这些 TS 特性，可以大幅提升代码的可靠性和团队协作效率！ 🚀