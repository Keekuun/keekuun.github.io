## 127. å…¨å±€æ ·å¼å‘½åå†²çªå’Œæ ·å¼è¦†ç›–é—®é¢˜æ€ä¹ˆè§£å†³ï¼Ÿ

åœ¨å¤§å‹å‰ç«¯é¡¹ç›®ä¸­ï¼Œå…¨å±€æ ·å¼å†²çªå’Œè¦†ç›–é—®é¢˜æ˜¯å¸¸è§ç—›ç‚¹ã€‚ä»¥ä¸‹æ˜¯ç³»ç»ŸåŒ–çš„è§£å†³æ–¹æ¡ˆï¼Œç»“åˆç°ä»£å·¥å…·é“¾å’Œæ¶æ„è®¾è®¡ï¼š

---

### **ä¸€ã€é—®é¢˜æ ¹æºåˆ†æ**
| é—®é¢˜ç±»å‹          | å…¸å‹åœºæ™¯                          | å¼•å‘åæœ                     |
|-------------------|-----------------------------------|----------------------------|
| **å‘½åå†²çª**      | å¤šå›¢é˜Ÿå…±ç”¨å…¨å±€ CSS ç±»å           | æŒ‰é’®æ ·å¼è¢«æ„å¤–è¦†ç›–           |
| **æƒé‡æˆ˜äº‰**      | `!important` æ»¥ç”¨                 | éš¾ä»¥ç»´æŠ¤çš„æ ·å¼ä¼˜å…ˆçº§         |
| **ç»§æ‰¿æ±¡æŸ“**      | å…¨å±€ `body` æ ·å¼å½±å“å­ç»„ä»¶         | ç»„ä»¶åœ¨ä¸åŒä½ç½®è¡¨ç°ä¸ä¸€è‡´     |

---

### **äºŒã€è§£å†³æ–¹æ¡ˆçŸ©é˜µ**

#### **1. CSS å‘½åæ–¹æ³•è®ºï¼ˆä¼ ç»Ÿæ–¹æ¡ˆï¼‰**
| æ–¹æ³•          | åŸç†ç¤ºä¾‹                     | ä¼˜ç‚¹               | ç¼ºç‚¹               |
|---------------|-----------------------------|--------------------|--------------------|
| **BEM**       | `.block__element--modifier` | å¯è¯»æ€§å¼º           | æ‰‹åŠ¨ç»´æŠ¤æˆæœ¬é«˜     |
| **OOCSS**     | åˆ†ç¦»ç»“æ„ä¸çš®è‚¤               | å¤ç”¨æ€§é«˜           | éœ€è¦ä¸¥æ ¼è§„èŒƒ       |
| **SMACSS**    | åˆ†å±‚ï¼ˆbase/layout/moduleï¼‰   | æ¶æ„æ¸…æ™°           | å­¦ä¹ æ›²çº¿é™¡å³­       |

**BEM å®æˆ˜ç¤ºä¾‹**ï¼š
```css
/* ä¼ ç»Ÿå†²çªå†™æ³• */
.button { background: red; }

/* BEM è§„èŒƒå†™æ³• */
.newsletter__button--primary {
  background: var(--color-brand);
}
```

#### **2. CSS-in-JSï¼ˆç°ä»£æ–¹æ¡ˆï¼‰**
```typescript
// ä½¿ç”¨ styled-components æˆ– Emotion
import styled from 'styled-components';

// è‡ªåŠ¨ç”Ÿæˆå”¯ä¸€ç±»åï¼Œéš”ç¦»ä½œç”¨åŸŸ
const PrimaryButton = styled.button`
  background: ${props => props.theme.primary};
  &:hover { opacity: 0.9; } /* æ— éœ€æ‹…å¿ƒå…¨å±€æ±¡æŸ“ */
`;

// åŠ¨æ€ä¸»é¢˜æ”¯æŒ
<ThemeProvider theme={colors}>
  <PrimaryButton>æäº¤</PrimaryButton>
</ThemeProvider>
```
**ä¼˜åŠ¿**ï¼š
âœ… è‡ªåŠ¨ä½œç”¨åŸŸéš”ç¦»
âœ… åŠ¨æ€ä¸»é¢˜æ”¯æŒ
âœ… ä»£ç ä¸æ ·å¼å…±ç½®

#### **3. CSS Modulesï¼ˆé›¶é…ç½®æ–¹æ¡ˆï¼‰**
```css
/* styles.module.css */
.error {
  color: red; /* ç¼–è¯‘åå˜ä¸º ._error_xkp3a_1 */
}
```

```typescript
import styles from './styles.module.css';

function Alert() {
  return <div className={styles.error}>è­¦å‘Šï¼</div>; 
}
```
**ç¼–è¯‘ç»“æœ**ï¼š
```html
<div class="_error_xkp3a_1">è­¦å‘Šï¼</div>
```

#### **4. åŸå­åŒ– CSSï¼ˆUtility-Firstï¼‰**
```html
<!-- ä½¿ç”¨ Tailwind CSS -->
<button class="bg-blue-500 hover:bg-blue-700 px-4 py-2 rounded">
  æŒ‰é’®
</button>
```
**ä¼˜åŠ¿**ï¼š
ğŸš€ æä½çš„å†²çªæ¦‚ç‡ï¼ˆæ ·å¼ç²’åº¦æç»†ï¼‰
ğŸ’¡ è®¾è®¡ç³»ç»Ÿä¸€è‡´æ€§

---

### **ä¸‰ã€æ¶æ„çº§é˜²æŠ¤æªæ–½**

#### **1. æ²™ç®±åŒ–å…¨å±€æ ·å¼**
```css
/* ä½¿ç”¨ :where é™ä½æƒé‡ */
:where(.app) .header {
  /* æƒé‡ä»…ä¸º (0,1,1) */
}

/* æˆ–ä½¿ç”¨ Shadow DOM */
class MyElement extends HTMLElement {
  constructor() {
    this.attachShadow({ mode: 'open' });
    this.shadowRoot.innerHTML = `
      <style>
        /* å®Œå…¨éš”ç¦»çš„æ ·å¼ä½œç”¨åŸŸ */
        button { background: purple; }
      </style>
    `;
  }
}
```

#### **2. æ ·å¼ lint å·¥å…·**
```bash
# å®‰è£… stylelint è§„åˆ™åŒ…
npm install stylelint stylelint-selector-bem-pattern --save-dev
```

```json
// .stylelintrc
{
  "plugins": ["stylelint-selector-bem-pattern"],
  "rules": {
    "plugin/selector-bem-pattern": {
      "componentName": "^[a-z]+(-[a-z]+)*$",
      "componentSelectors": {
        "initial": "^\\.{componentName}(?:__[a-z]+(?:-[a-z]+)*)?(?:--[a-z]+(?:-[a-z]+)*)?$"
      }
    }
  }
}
```

#### **3. æ„å»ºæ—¶éš”ç¦»ï¼ˆWebpack é…ç½®ç¤ºä¾‹ï¼‰**
```javascript
// webpack.config.js
module.exports = {
  module: {
    rules: [
      {
        test: /\.css$/,
        use: [
          {
            loader: 'style-loader',
            options: { injectType: 'singletonStyleTag' } // æ‰€æœ‰æ ·å¼åˆå¹¶åˆ°å•ä¸ª style æ ‡ç­¾
          },
          {
            loader: 'css-loader',
            options: { modules: { auto: true } } // è‡ªåŠ¨å¯ç”¨ CSS Modules
          }
        ]
      }
    ]
  }
};
```

---

### **å››ã€ç´§æ€¥ä¿®å¤æ–¹æ¡ˆ**
å½“å†²çªå·²å‘ç”Ÿéœ€å¿«é€Ÿä¿®å¤æ—¶ï¼š

#### **1. ç‰¹å¼‚æ€§æå‡ï¼ˆæ…ç”¨ï¼‰**
```css
/* é€šè¿‡å¢åŠ é€‰æ‹©å™¨æƒé‡è¦†ç›– */
html body .specific-button.override {
  color: red !important; /* æœ€åæ‰‹æ®µ */
}
```

#### **2. è¿è¡Œæ—¶é‡å†™**
```javascript
// ä½¿ç”¨ CSSOM API åŠ¨æ€è¦†ç›–
document.styleSheets[0].insertRule(
  `.button { background: green !important; }`,
  document.styleSheets[0].cssRules.length
);
```

---

### **äº”ã€æŠ€æœ¯é€‰å‹å»ºè®®**
| é¡¹ç›®è§„æ¨¡       | æ¨èæ–¹æ¡ˆ                     | ç†ç”±                     |
|---------------|----------------------------|-------------------------|
| å°å‹é¡¹ç›®       | CSS Modules + å…¨å±€é‡ç½®       | é›¶é…ç½®ã€ä½æˆæœ¬           |
| ä¸­å‹é¡¹ç›®       | CSS-in-JS + è®¾è®¡ç³»ç»Ÿ         | åŠ¨æ€ä¸»é¢˜æ”¯æŒ             |
| å¤§å‹å¾®å‰ç«¯é¡¹ç›® | Tailwind + Shadow DOM        | éš”ç¦»æ€§æœ€å¼º               |

---

### **å…­ã€é¢„é˜²æ€§ checklist**
1. [ ] ä½¿ç”¨ `:where()` é™ä½å…¨å±€æ ·å¼æƒé‡
2. [ ] ä¸º CSS ç±»åæ·»åŠ é¡¹ç›®å‰ç¼€ï¼ˆå¦‚ `.myapp-button`ï¼‰
3. [ ] ç¦ç”¨ `*` é€šé…ç¬¦é€‰æ‹©å™¨
4. [ ] å®šæœŸè¿è¡Œ `stylelint` æ£€æŸ¥å‘½åè§„èŒƒ

é€šè¿‡ç»„åˆä½¿ç”¨å‘½åè§„èŒƒã€å·¥å…·é“¾çº¦æŸå’Œæ¶æ„è®¾è®¡ï¼Œå¯ç³»ç»Ÿæ€§è§£å†³æ ·å¼å†²çªé—®é¢˜ã€‚ä¼˜å…ˆæ¨è CSS-in-JS æˆ– CSS Modules ç­‰ç°ä»£æ–¹æ¡ˆã€‚