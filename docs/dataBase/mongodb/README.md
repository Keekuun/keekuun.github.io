# 1.NoSQL和SQL
+ 关系型数据库，是指采用了**关系模型**来组织的数据库
+ 非关系型数据库是对不同于传统的关系型数据库的数据管理系统的统称
# 2.NoSQL意义
+ 易扩展，高性能，高可用
+ 较容易映射复杂数据（key-value）
+ 无事务特殊要求（ACID）

# 3.NoSQL设计
## 3.1常见场景及设计方法：
### 3.1.1内嵌

指存在关联关系的文档，放在同一文档中，以数组的形式存放

+ 减少了关联查询
+ 适合于单类需要描述的属性
+ **不经常变化的属性**（扩展、嵌套关联）

```json
{
  "username": "zkk",
  "gender": 0,
  "roles": ["admin", "user"],
  "address": [
    "address1",
    "address2"  
  ]
}
```
    
### 3.1.2 父/子引用

+ **父引用**：指存在**一对多**的情况中，放在同一文档以数组的形式存放：
```json
{
 "tid": "postID",
 "title": "post title",
 "catalog": "index",
 "created": "13123141",
 "comments": [
   "commentID1",
   "commentID2"
 ]
}
```

+ **子引用**：指存在**一对非常多**的情况中，由于数据库文档存放限制，这时候进行**反向引用**：
```json
{
  "cid": "commentID",
  "tid": "postID",
  "content": "answer content",
  "isRead": 0,
  "isBest": 0,
  "status": 1
}
```

**父/子引用**注意事项：
+ 引用数据内容是否非常多
+ 引用数据量是否非常庞大，而且在增加
+ 数据是否需要单独访问

## 3.2 反范式

**范式**是指按既定的用法，范式就是一种公认的模型或模式。（如：右手用筷子）
**反范式 -> 不走寻常路**（如：左手用筷子）

之前的父/子引用就是范式。反范式示例：

```json
{
  "tid": "postID",
  "title": "post title",
  "created": "12313123",
  "users": [{
    "uid": "user id",
    "name": "user name",
    "isVip": 1  
  }]
}
```

反范式设计注意：
+ 是否有提升性能的区间
+ 数据量的变化是否非常庞大，庞大到更新会异常低效
+ 先考虑读写比，才考虑反范式


## 设计原则小结
+ 优先考虑内嵌，如果单独访问，则不合适
+ 数组不应该无限制增长
+ 考虑读写比，考虑反范式，考虑应用场景

## 3.3 双向关联的场景及设计原则