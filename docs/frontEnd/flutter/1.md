---
title: flutter基础-dart
sidebar: auto
date: 2024-3-13
isComment: true
categories:
  - flutter
tags:
  - flutter
---

## 安装

+ 1.[直接看官网教程安装](https://www.geeksforgeeks.org/dart-sdk-installation/?ref=next_article)
+ 2.[配置flutter开发环境，dart同时打包安装](https://docs.flutter.dev/get-started/install)

由于目的是学习flutter开发，按照第二个方式开始。此处不再赘言。

## 命令行

安装完毕，命令行输入`dart`:

```bash
PS C:\Users\Administrator> dart
A command-line utility for Dart development.

Usage: dart <command|dart-file> [arguments]

Global options:
-v, --verbose               Show additional command output.
    --version               Print the Dart SDK version.
    --enable-analytics      Enable analytics.
    --disable-analytics     Disable analytics.
    --suppress-analytics    Disallow analytics for this `dart *` run without changing the analytics configuration.
-h, --help                  Print this usage information.

Available commands:
  analyze    Analyze Dart code in a directory.
  compile    Compile Dart to various formats.
  create     Create a new Dart project.
  devtools   Open DevTools (optionally connecting to an existing application).
  doc        Generate API documentation for Dart projects.
  fix        Apply automated fixes to Dart source code.
  format     Idiomatically format Dart source code.
  info       Show diagnostic information about the installed tooling.
  pub        Work with packages.
  run        Run a Dart program.
  test       Run tests for a project.

Run "dart help <command>" for more information about a command.
See https://dart.dev/tools/dart-tool for detailed documentation.
```

## 基础

### 注释

+ 单行注释：`//`
+ 多行注释：`‘/*’ and ‘*/’`
+ 文档注释： `“///”(C# Style) and “/**…..*/”(JavaDoc Style)`, 推荐使用`///`

比如`hello.dart`代码如下：

```dart
// 单行注释
// This is a single line comment.

/*
多行注释
These are 
multiple line 
of comments 
* */

void main() {
  String msg = "hello dart !";
  // 文档注释
  /// This is
  /// a documentation
  /// comment 
  /// print hello dart
  print(msg);
}
```

使用`dart hello.dart`执行，可以看到控制台输出`hello dart`

也可以在[这里线上测试dart](https://dart.dev/#try-dart)

### 数据类型

> [内置类型](https://dart.dev/language/built-in-types)

```
1.Numbers (int, double) 数字
    int: -253 to 253 - 1
    double: 64-bit (double-precision)
    
2.Strings (String) 字符串，类似python,可以使用单引号、双引号、三引号

3.Booleans (bool) 布尔
    false、true

4.Records ((value1, value2)) 记录 (3.0以上版本)
    var record = ('first', a: 2, b: true, 'last');

5.Lists (List, also known as arrays) 列表
    var list = [1, 2, 3];

6.Sets (Set) 集合(无序、唯一)
    var halogens = {'fluorine', 'chlorine', 'bromine', 'iodine', 'astatine'};
 
7.Maps (Map) 映射
    var gifts = {
      // Key:    Value
      'first': 'partridge',
      'second': 'turtledoves',
      'fifth': 'golden rings'
    };

8.Runes (Runes; often replaced by the characters API) 符文
    In Dart, runes expose the Unicode code points of a string.

9.Symbols (Symbol) 符号， 使用#开头
    A Symbol object represents an operator or identifier declared in a Dart program.
    例如：
    #radix
    #bar

10.null (Null) null值
```

### 变量

变量申明：

+ type 申明，类似var，可初始化或不初始化
+ var 一旦初始化，类型不可变（自动推断），可以再次赋相同类型的值

var和type类型申明不可以同时使用。

```dart

String name1 = 'bob';
// var String he = 'je'; // 报错

var name2 = 'bob';
```

+ const 不可修改， 编译为常量（自身和成员都不可变）
+ final 不可修改， 只能赋值一次， 定义变量（自身不可变，成员可变）

> Instance variables can be final but not const.

```dart
class Demo {
  static final age = 10; // static使用const(推荐，不建议使用final)
  final String name; // Instance variables不能使用const
  final DateTime start = DateTime.now();
}
```

+ dynamic 随意修改
+ late 先申明，后初始化，可修改

```dart
void main() {
  var name1 = 'dart';
  name1 = 1; // A value of type 'int' can't be assigned to a variable of type 'String'.

  // 使用type类型申明
  String name2 = 'dart';
  name2 = 2; // A value of type 'int' can't be assigned to a variable of type 'String'.
  name2 =
  22 as String; // 断言，但编译失败 Unhandled exception:type 'int' is not a subtype of type 'String' in type cast

  Object name3 = 'dart';
  name3 = 3; // ok

  dynamic name4 = 'dart';
  name4 = 4; // ok

  int a; //先申明
  a = 10; // 在初始化（可以不初始化）

  // 声明一个在其声明后初始化的非空变量
  late String aa;
  // 必须初始化， 否则运行时报错
  aa = '123';

  // 直接申明并初始化
  late int hh = 18;
  hh = 19; // 再次修改
}
```

+ 定义单个：`type variable_name;`
+ 定义多个：`type variable1_name, variable2_name, variable3_name, ....variableN_name;`

+ 规则：

```md
Conditions to write variable name or identifiers are as follows:
1.Variable name or identifiers can’t be the keyword.
2.Variable name or identifiers can contain alphabets and numbers.
3.Variable name or identifiers can’t contain spaces and special characters, except the underscore(_)
and the dollar($) sign.
4.Variable name or identifiers can’t begin with number.

变量名或标识符的命名规则如下：
1.变量名或标识符不能是关键字。
2.变量名或标识符可以包含字母和数字。
3.变量名或标识符不能包含空格和特殊字符，除了下划线（_）和美元符号（$）。
4.变量名或标识符不能以数字开头。
```

```dart
void main() {
  // Declaring and initialising a variable
  int age = 18;

  // Declaring another variable
  double pi = 3.14; // must declare double a value or it will throw error
  bool male = false; // must declare boolean a value or it will throw error

  // Declaring multiple variable
  String like1 = "dart",
      like2 = "flutter";

  // Printing values of all the variables
  print(age); // Print 18
  print(pi); // Print 3.14
  print(male); // Print false
  print(like1); // Print dart
  print(like2); // Print flutter
}
```

### [关键词](https://dart.dev/language/keywords)

```
Keywords are the set of reserved words which can’t be used as a variable name or identifier because they are standard identifiers whose function are predefined in Dart. 

关键字是一组保留字，不能用作变量名或标识符，因为它们是在Dart中预定义功能的标准标识符。
```

![](https://media.geeksforgeeks.org/wp-content/uploads/20200415104429/output205.png)

### 操作符

基本类似typescript语言。参考文档：https://dart.dev/language/operators

支持三元条件（a ? 1 : 2）、类型断言(as、is、is!)、值断言（a ?? 'null'）、可选参数（?）、扩展(...)、级联操作（..或?..）

```dart
void main() {
  // 类型断言 Type test operators
  // as
  (employee as Person).firstName = 'Bob';
  // is、is!
  if (employee is Person) {
    // Type check
    employee.firstName = 'Bob';
  }


  // 值断言 Assign value to a
  a = value;
  // Assign value to b if b is null; otherwise, b stays the same
  b ??= value;

  var visibility = isPublic ? 'public' : 'private';

  String playerName(String? name) => name ?? 'Guest';


  // 不使用级联操作（..或?..）
  var paint1 = Paint();
  paint1.color = Colors.black;
  paint1.strokeCap = StrokeCap.round;
  paint1.strokeWidth = 5.0;

  // 使用级联操作（..）
  var paint2 = Paint()
    ?..color = Colors.black // 如果可以为null的话
    ..strokeCap = StrokeCap.round
    ..strokeWidth = 5.0;

// If SomeClass is non-null, set a variable equal to its abc value.
  var a = SomeClass?.abc;
}
```

### 循环和分支
for-while 循环：
+ for loops
+ while and do while loops
+ break and continue

```dart
void main() {
  var message = StringBuffer('Dart is fun');
  for (var i = 0; i < 5; i++) {
    message.write('!');
  }

  var callbacks = [];
  for (var i = 0; i < 2; i++) {
    if (i == 1) {
      continue;
    }
    callbacks.add(() => print(i));
  }

  // Iterable for-in
  for (final c in callbacks) {
    c();
  }

  // Iterable forEach
  var collection = [1, 2, 3];
  collection.forEach(print); // 1 2 3


  // while和do-while
  while (!isDone()) {
    if (shutDownRequested()) break;
    doSomething();
  }

  do {
    printLine();
  } while (!atEndOfPage());


  // Iterable
  candidates
      .where((c) => c.yearsExperience >= 5)
      .forEach((c) => c.interview());
}
```

if-switch分支：
和typescript类似，参考文档：https://dart.dev/language/branches

+ if-case 可以做类型守卫
```dart
import 'package:flutter/cupertino.dart';
import 'dart:math';

Point? main() {
  const pair = [1, 2];
  if (pair case [int x, int y]) return Point(x, y);

  return null;
}


class Point {
  final int x;
  final int y;

  // Sets the x and y instance variables
  // before the constructor body runs.
  Point(this.x, this.y);

  double distanceTo(Point other) {
    var dx = x - other.x;
    var dy = y - other.y;
    return sqrt(dx * dx + dy * dy);
  }
}
```
+ switch-case
```dart
void main() {
  var command = 'OPEN';
  switch (command) {
    case 'CLOSED':
      executeClosed();
    case 'PENDING':
      executePending();
    case 'APPROVED':
      executeApproved();
    case 'DENIED':
      executeDenied();
    case 'OPEN':
      executeOpen();
    default:
      executeUnknown();
  }

  // 使用label
  switch (command) {
    case 'OPEN':
      executeOpen();
      continue newCase; // Continues executing at the newCase label.

    case 'DENIED': // Empty case falls through.
    case 'CLOSED':
      executeClosed(); // Runs for both DENIED and CLOSED,

    newCase:
    case 'PENDING':
      executeNowClosed(); // Runs for both OPEN and PENDING.
  }
}
```
### 函数

### 对象

###  