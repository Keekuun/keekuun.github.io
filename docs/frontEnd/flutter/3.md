---
title: flutteræ¶æ„äº†è§£
sidebar: auto
date: 2024-03-15
isComment: true
categories:
  - flutter
tags:
  - flutter
  - dart
---

## flutteræ¶æ„
Flutter æ˜¯ä¸€ä¸ª**è·¨å¹³å°**çš„ UI å·¥å…·é›†ï¼Œå®ƒçš„è®¾è®¡åˆè¡·ï¼Œå°±æ˜¯å…è®¸åœ¨å„ç§æ“ä½œç³»ç»Ÿä¸Šå¤ç”¨åŒæ ·çš„ä»£ç ï¼Œä¾‹å¦‚ iOS å’Œ Androidï¼ŒåŒæ—¶è®©åº”ç”¨ç¨‹åºå¯ä»¥**ç›´æ¥ä¸åº•å±‚å¹³å°æœåŠ¡è¿›è¡Œäº¤äº’**ã€‚å¦‚æ­¤è®¾è®¡æ˜¯ä¸ºäº†è®©å¼€å‘è€…èƒ½å¤Ÿ**åœ¨ä¸åŒçš„å¹³å°ä¸Š**ï¼Œéƒ½**èƒ½äº¤ä»˜æ‹¥æœ‰åŸç”Ÿä½“éªŒçš„é«˜æ€§èƒ½åº”ç”¨**ï¼Œå°½å¯èƒ½åœ°å…±äº«å¤ç”¨ä»£ç çš„åŒæ—¶ï¼Œ**åŒ…å®¹ä¸åŒå¹³å°çš„å·®å¼‚**ã€‚

åœ¨å¼€å‘ä¸­ï¼ŒFlutter åº”ç”¨ä¼šåœ¨ä¸€ä¸ª `VMï¼ˆç¨‹åºè™šæ‹Ÿæœºï¼‰`ä¸­è¿è¡Œï¼Œä»è€Œå¯ä»¥åœ¨**ä¿ç•™çŠ¶æ€ä¸”æ— éœ€é‡æ–°ç¼–è¯‘**çš„æƒ…å†µä¸‹ï¼Œ**çƒ­é‡è½½**ç›¸å…³çš„æ›´æ–°ã€‚å¯¹äºå‘è¡Œç‰ˆ (release) ï¼ŒFlutter åº”ç”¨ç¨‹åºä¼šç›´æ¥ç¼–è¯‘ä¸ºæœºå™¨ä»£ç ï¼ˆIntel x64 æˆ– ARM æŒ‡ä»¤é›†ï¼‰ï¼Œæˆ–è€…é’ˆå¯¹ Web å¹³å°çš„ JavaScriptã€‚ Flutter çš„æ¡†æ¶ä»£ç æ˜¯å¼€æºçš„ï¼Œéµå¾ª BSD å¼€æºåè®®ï¼Œå¹¶æ‹¥æœ‰è“¬å‹ƒå‘å±•çš„ç¬¬ä¸‰æ–¹åº“ç”Ÿæ€æ¥è¡¥å……æ ¸å¿ƒåº“åŠŸèƒ½ã€‚

+ åˆ†å±‚æ¨¡å‹ï¼šFlutter çš„æ„æˆè¦ç´ ã€‚

+ å“åº”å¼ç”¨æˆ·ç•Œé¢ï¼šFlutter ç”¨æˆ·ç•Œé¢å¼€å‘çš„æ ¸å¿ƒæ¦‚å¿µã€‚

+ widgetsï¼šæ„å»º Flutter ç”¨æˆ·ç•Œé¢çš„åŸºçŸ³ã€‚

+ æ¸²æŸ“è¿‡ç¨‹ï¼šFlutter å¦‚ä½•å°†ç•Œé¢å¸ƒå±€è½¬åŒ–ä¸ºåƒç´ ã€‚

+ å¹³å°åµŒå…¥å±‚ï¼šè®© Flutter åº”ç”¨å¯ä»¥åœ¨ç§»åŠ¨ç«¯åŠæ¡Œé¢ç«¯æ“ä½œç³»ç»Ÿæ‰§è¡Œçš„ä»£ç ã€‚

+ å°† Flutter ä¸å…¶ä»–ä»£ç è¿›è¡Œé›†æˆï¼šFlutter åº”ç”¨å¯ç”¨çš„å„é¡¹æŠ€æœ¯çš„æ›´å¤šä¿¡æ¯ã€‚

+ Web æ”¯æŒï¼šFlutter åœ¨æµè§ˆå™¨ç¯å¢ƒä¸­çš„ç‰¹æ€§çš„æ¦‚è¿°ã€‚

![æ¶æ„å›¾](https://flutter.cn/docs/assets/images/docs/arch-overview/archdiagram.png)


```
flutterå¼•æ“ï¼ˆc++ç¼–å†™ï¼Œ ç»˜åˆ¶ã€æ …æ ¼åŒ–ã€æ ¸å¿ƒapiï¼‰ è¢«åŒ…è£…æˆdartè¯­è¨€ ---> dart:uiï¼Œ æš´éœ²ï¼ˆé©±åŠ¨è¾“å…¥ã€å›¾å½¢ã€å’Œæ–‡æœ¬æ¸²æŸ“çš„å­ç³»ç»Ÿçš„ç±»ï¼‰---> Flutter æ¡†æ¶å±‚

å¼€å‘è€…dartä»£ç  ---> flutteræ¡†æ¶å±‚ï¼ˆåŸºç±»ã€æ¸²æŸ“å±‚ã€widgetå±‚ã€Material å’Œ Cupertino ç­‰åº“)

```

## flutteré‡è¦æ¦‚å¿µ
Flutteræ˜¯ç”±Googleå¼€å‘çš„ä¸€æ¬¾å¼€æºçš„ç§»åŠ¨åº”ç”¨å¼€å‘æ¡†æ¶ï¼Œå…¶ä¸»è¦ç›®æ ‡æ˜¯ä¸ºäº†æä¾›ä¸€å¥—ç»Ÿä¸€ã€é«˜æ€§èƒ½ä¸”æ˜“äºå­¦ä¹ çš„è·¨å¹³å°UIå·¥å…·åŒ…ï¼Œä½¿å¾—å¼€å‘è€…èƒ½å¤Ÿä½¿ç”¨å•ä¸€ä»£ç åº“åŒæ—¶æ„å»ºiOSå’ŒAndroidåº”ç”¨ç¨‹åºã€‚Flutteré‡‡ç”¨äº†ä¸€ç§ç°ä»£çš„ã€å“åº”å¼çš„æ¶æ„æ¨¡å¼ï¼Œç»“åˆDartè¯­è¨€ä¸è‡ªå®šä¹‰æ¸²æŸ“å¼•æ“ï¼Œå®ç°äº†é«˜æ•ˆçš„ç•Œé¢ç»˜åˆ¶å’ŒåŠ¨ç”»æ•ˆæœã€‚

å…³äºFlutteræ¶æ„çš„ä¸€äº›é‡è¦æ¦‚å¿µåŒ…æ‹¬ï¼š

+ `Widget`ï¼šFlutterçš„UIå…ƒç´ éƒ½æ˜¯Widgetï¼ŒWidgetå¯ä»¥æ˜¯ç®€å•çš„æ–‡æœ¬ã€å›¾åƒç­‰ï¼Œä¹Ÿå¯ä»¥æ˜¯å¤æ‚çš„å¸ƒå±€ã€åŠ¨ç”»ç­‰ã€‚Flutterçš„æ•´ä¸ªUIéƒ½æ˜¯ç”±Widgetç»„æˆçš„ã€‚

+ `Stateful Widget`å’Œ`Stateless Widget`ï¼šStateful Widgetæœ‰è‡ªå·±çš„çŠ¶æ€ï¼Œå¹¶ä¸”å¯ä»¥æ ¹æ®çŠ¶æ€çš„å˜åŒ–é‡æ–°æ„å»ºUIï¼›è€ŒStateless Widgetæ˜¯ä¸å¯å˜çš„ï¼Œä¸€æ—¦åˆ›å»ºå°±ä¸ä¼šæ”¹å˜ã€‚

    - StatelessWidgetï¼šå†…éƒ¨æ²¡æœ‰ä¿å­˜çŠ¶æ€ï¼Œç•Œé¢åˆ›å»ºåä¸ä¼šå‘ç”Ÿæ”¹å˜ï¼›
    - StatefulWidgetï¼šå†…éƒ¨æœ‰ä¿å­˜çŠ¶æ€ï¼Œå½“çŠ¶æ€å‘ç”Ÿæ”¹å˜ï¼Œè°ƒç”¨setState()æ–¹æ³•ä¼šè§¦å‘StatefulWidgetçš„UIå‘ç”Ÿæ›´æ–°ï¼Œå¯¹äºè‡ªå®šä¹‰ç»§æ‰¿è‡ªStatefulWidgetçš„å­ç±»ï¼Œå¿…é¡»è¦é‡å†™createState()æ–¹æ³•ã€‚

+ `BLoCï¼ˆBusiness Logic Componentï¼‰`æ¨¡å¼ï¼šBLoCæ¨¡å¼æ˜¯Flutterä¸­å¸¸ç”¨çš„ä¸€ç§æ¶æ„æ¨¡å¼ï¼Œç”¨äºå°†ä¸šåŠ¡é€»è¾‘ä¸UIåˆ†ç¦»ã€‚é€šè¿‡Streamå’ŒStreamControlleræ¥å¤„ç†æ•°æ®æµï¼Œä½¿å¾—UIå¯ä»¥å“åº”æ•°æ®çš„å˜åŒ–ã€‚

> [https://bloclibrary.dev/](https://bloclibrary.dev/)

+ `Provider`æ¨¡å¼ï¼šProvideræ˜¯Flutterä¸­ç”¨äºçŠ¶æ€ç®¡ç†çš„åº“ï¼Œå¯ä»¥å®ç°å…¨å±€çŠ¶æ€å…±äº«å’Œæ›´æ–°ã€‚é€šè¿‡Providerï¼Œå¯ä»¥å°†çŠ¶æ€ä»çˆ¶Widgetä¼ é€’ç»™å­Widgetï¼Œå®ç°æ•°æ®çš„å…±äº«å’Œæ›´æ–°ã€‚
> [https://pub-web.flutter-io.cn/packages/provider](https://pub-web.flutter-io.cn/packages/provider)

### 1.Dartè¯­è¨€
Dart æ˜¯ä¸€ç§é’ˆå¯¹å®¢æˆ·ç«¯ä¼˜åŒ–çš„è¯­è¨€ï¼Œå¯åœ¨ä»»ä½•å¹³å°ä¸Šå¼€å‘å¿«é€Ÿçš„åº”ç”¨ç¨‹åºã€‚å…¶ç›®æ ‡æ˜¯ä¸ºå¤šå¹³å°å¼€å‘æä¾›æœ€é«˜æ•ˆçš„ç¼–ç¨‹è¯­è¨€ï¼Œå¹¶ä¸ºåº”ç”¨ç¨‹åºæ¡†æ¶æ­é…äº† çµæ´»çš„è¿è¡Œæ—¶æ‰§è¡Œå¹³å°ã€‚

Dart çš„è¯­è¨€è®¾è®¡é’ˆå¯¹å®¢æˆ·ç«¯å¼€å‘ï¼Œå®ƒä¼˜å…ˆè€ƒè™‘å¤šå¹³å° (Webï¼Œç§»åŠ¨ç«¯å’Œæ¡Œé¢ç«¯) ä¸Šçš„å¼€å‘ (äºšç§’çº§çš„çŠ¶æ€çƒ­é‡è½½) å’Œé«˜è´¨é‡ç”Ÿäº§ç¯å¢ƒä½“éªŒã€‚

Dart ä¹Ÿæ˜¯ Flutter çš„åŸºç¡€ã€‚ Dart ä½œä¸º Flutter åº”ç”¨ç¨‹åºçš„ç¼–ç¨‹è¯­è¨€ï¼Œä¸ºé©±åŠ¨åº”ç”¨è¿è¡Œæä¾›äº†ç¯å¢ƒï¼ŒåŒæ—¶ Dart è¿˜æ”¯æŒè®¸å¤šæ ¸å¿ƒçš„å¼€å‘ä»»åŠ¡ï¼Œä¾‹å¦‚æ ¼å¼åŒ–ï¼Œåˆ†æå’Œä»£ç æµ‹è¯•ã€‚

> [https://dart.cn/overview](https://dart.cn/overview)

### 2.Widgetç³»ç»Ÿ
Flutter å¼ºè°ƒä»¥ widgets ä½œä¸ºç»„æˆå•ä½ã€‚ Widgets æ˜¯æ„å»º Flutter åº”ç”¨ç•Œé¢çš„åŸºç¡€å—ï¼Œæ¯ä¸ª widget éƒ½æ˜¯ä¸€éƒ¨åˆ†ä¸å¯å˜çš„ UI å£°æ˜ã€‚

Widgets é€šè¿‡å¸ƒå±€ç»„åˆå½¢æˆä¸€ç§å±‚æ¬¡ç»“æ„å…³ç³»ã€‚æ¯ä¸ª Widget éƒ½åµŒå¥—åœ¨å…¶çˆ¶çº§çš„å†…éƒ¨ï¼Œå¹¶å¯ä»¥é€šè¿‡çˆ¶çº§æ¥æ”¶ä¸Šä¸‹æ–‡ã€‚ä»æ ¹å¸ƒå±€ï¼ˆæ‰˜ç®¡ Flutter åº”ç”¨çš„å®¹å™¨ï¼Œé€šå¸¸æ˜¯ MaterialApp æˆ– CupertinoAppï¼‰å¼€å§‹ï¼Œè‡ªä¸Šè€Œä¸‹éƒ½æ˜¯è¿™æ ·çš„ç»“æ„ï¼Œå¦‚ä¸‹é¢çš„ç¤ºä¾‹æ‰€ç¤ºï¼š

```dart
import 'package:flutter/material.dart';
import 'package:flutter/services.dart';

// ä¸»å…¥å£å‡½æ•°
void main() => runApp(const MyApp());

// æ— çŠ¶æ€ç»„ä»¶
class MyApp extends StatelessWidget {
  const MyApp({super.key});

  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      // å¤´éƒ¨å¯¼èˆª
      home: Scaffold(
        appBar: AppBar(
          title: const Text('My Home Page'),
        ),
        // é¡µé¢å†…å®¹
        body: Center( // çˆ¶ç»„ä»¶
          child: Builder(
            builder: (context) {
              return Column( // å­ç»„ä»¶
                children: [ // å­™å­ç»„ä»¶
                  const Text('Hello World'),
                  const SizedBox(height: 20),
                  ElevatedButton(
                    onPressed: () {
                      print('Click!');
                    },
                    child: const Text('A button'),
                  ),
                ],
              );
            },
          ),
        ),
      ),
    );
  }
}
```
+ Flutterçš„å¸ƒå±€åŸºäºWidgetï¼Œä½†æ¸²æŸ“åŸºäº`RenderObject`ï¼Œæ‰€ä»¥æœ‰äº›å¸ƒå±€çœ‹ç€å¾ˆæ·±ä½†æ˜¯å®é™…æ€§èƒ½è¾ƒé«˜
+ Flutterçš„å¸ƒå±€ä»ä»£ç ä¸Šçœ‹å°±æ˜¯åŸºäºå„ä¸ªwidget classçš„æ„é€ å™¨ï¼Œæ„é€ å™¨çš„è¾“å…¥æ˜¯(å¸ƒå±€æ•°æ®, å­Widget, å›è°ƒï¼‰ï¼Œå…¶ä¸­å¸ƒå±€æ•°æ®ç”¨äºç¡®å®šè‡ªèº«çš„UIå±æ€§ã€‚
+ Flutterçš„Widgetåˆ†ä¸‰ç±»ï¼Œä¸å¸¦å­©å­çš„ï¼Œå¸¦ä¸€ä¸ªå­©å­çš„å’Œå¸¦å¤šä¸ªå­©å­çš„ã€‚
+ dartä¸­æœ‰æ¯”è¾ƒå¤šçš„è¯­æ³•ç‰¹æ€§åˆšå¥½é€‚ç”¨äºFlutterè¿™æ ·çš„å¸ƒå±€æ¨¡å¼
+ widgetåˆ†ç±»ï¼šæœ‰çŠ¶æ€çš„ï¼ˆ[StatefulWidget](https://api.flutter-io.cn/flutter/widgets/StatefulWidget-class.html)ï¼‰ å’Œ æ— çŠ¶æ€çš„ widgetï¼ˆ[StatelessWidget](https://api.flutter-io.cn/flutter/widgets/StatelessWidget-class.html)ï¼‰

> å­¦ä¹ [å›¾è§£Flutter Widgetsä½“ç³»ç»“æ„](https://zhuanlan.zhihu.com/p/383037355)

### 3.Material Design & Cupertino Widgets
[Material](https://api.flutter-io.cn/flutter/material/material-library.html) å’Œ [Cupertino](https://api.flutter-io.cn/flutter/cupertino/cupertino-library.html) åº“æä¾›äº†å…¨é¢çš„ widgets å±‚çš„åŸè¯­ç»„åˆï¼Œè¿™å¥—ç»„åˆåˆ†åˆ«å®ç°äº† Material å’Œ iOS è®¾è®¡è§„èŒƒã€‚

### 4.Flutter Engine
Flutter Engine(C/C++)ï¼šç”¨C++ç¼–å†™ï¼Œå®ç°äº†Flutterçš„æ ¸å¿ƒåº“ï¼ŒåŒ…æ‹¬Dartè™šæ‹Ÿæœºã€åŠ¨ç”»å’Œå›¾å½¢ã€æ–‡å­—æ¸²æŸ“ã€é€šä¿¡é€šé“ã€äº‹ä»¶é€šçŸ¥ã€æ’ä»¶æ¶æ„ç­‰ã€‚å¼•æ“æ¸²æŸ“é‡‡ç”¨çš„æ˜¯2Då›¾å½¢æ¸²æŸ“åº“Skiaï¼Œè™šæ‹Ÿæœºé‡‡ç”¨çš„æ˜¯é¢å‘å¯¹è±¡è¯­è¨€Dart VMï¼Œå¹¶å°†å®ƒä»¬æ‰˜ç®¡åˆ°å¹³å°çš„ä¸­é—´å±‚ä»£ç (Embedder);

> å­¦ä¹ [Flutter Engineå±‚æ ¸å¿ƒé€»è¾‘æ¢³ç†](https://zhuanlan.zhihu.com/p/340729824)

### 5.Platform Channels

[Platform Channels](https://docs.flutter.dev/platform-integration/platform-channels) æ˜¯ Flutter ä¸­ç”¨äºåœ¨ Dart ä»£ç å’Œå¹³å°åŸç”Ÿä»£ç ä¹‹é—´è¿›è¡Œé€šä¿¡çš„æœºåˆ¶ã€‚**é€šè¿‡ Platform Channelsï¼ŒFlutter åº”ç”¨ç¨‹åºå¯ä»¥è°ƒç”¨å¹³å°åŸç”Ÿä»£ç çš„åŠŸèƒ½**ï¼Œä¾‹å¦‚è°ƒç”¨åŸç”Ÿ API æˆ–æ‰§è¡ŒåŸç”Ÿä»£ç ã€‚

Platform Channels ä¸»è¦ç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼š`MethodChannel`ã€`EventChannel` å’Œ `BasicMessageChannel`ã€‚
+ `MethodChannel` ç”¨äºåœ¨ Dart ä»£ç å’Œå¹³å°åŸç”Ÿä»£ç ä¹‹é—´è¿›è¡Œå•å‘æ–¹æ³•è°ƒç”¨
+ `EventChannel` ç”¨äºåœ¨ Dart ä»£ç å’Œå¹³å°åŸç”Ÿä»£ç ä¹‹é—´è¿›è¡Œäº‹ä»¶æµçš„é€šä¿¡
+ `BasicMessageChannel` åˆ™ç”¨äºåœ¨ Dart ä»£ç å’Œå¹³å°åŸç”Ÿä»£ç ä¹‹é—´è¿›è¡ŒåŒå‘æ¶ˆæ¯ä¼ é€’

> å­¦ä¹ [Flutter Platform Channelæ·±åº¦è§£æ](https://zhuanlan.zhihu.com/p/348498819)
> 
> å­¦ä¹ [Flutterç³»åˆ—ä¹‹Platform Channelä½¿ç”¨è¯¦è§£](https://juejin.cn/post/6934350427991310344)

### 6.Hot Reloading & DevTools

**Hot Reloading**

Flutter çš„[çƒ­é‡è½½](https://flutter.cn/docs/development/tools/hot-reload)åŠŸèƒ½å¯å¸®åŠ©ä½ åœ¨æ— éœ€é‡æ–°å¯åŠ¨åº”ç”¨ç¨‹åºçš„æƒ…å†µä¸‹å¿«é€Ÿã€è½»æ¾åœ°æµ‹è¯•ã€æ„å»ºç”¨æˆ·ç•Œé¢ã€æ·»åŠ åŠŸèƒ½ä»¥åŠä¿®å¤é”™è¯¯ã€‚

çƒ­é‡è½½**ã€**çƒ­é‡å¯**å’Œ**å®Œå…¨é‡å¯**ä¹‹é—´æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ**

+ **çƒ­é‡è½½** ä¼šå°†ä»£ç æ›´æ”¹è½¬å…¥ VMï¼Œé‡å»º widget æ ‘å¹¶ä¿æŒåº”ç”¨çš„çŠ¶æ€ï¼Œæ•´ä¸ªè¿‡ç¨‹ä¸ä¼šé‡æ–°è¿è¡Œ `main()` æˆ–è€… `initState()`ã€‚

+ **çƒ­é‡å¯** ä¼šå°†ä»£ç æ›´æ”¹è½¬å…¥ VMï¼Œé‡å¯ Flutter åº”ç”¨ï¼Œä¸ä¿ç•™åº”ç”¨çŠ¶æ€ã€‚

+ **å®Œå…¨é‡å¯** å°†ä¼šå®Œå…¨é‡æ–°è¿è¡Œåº”ç”¨ã€‚è¯¥è¿›ç¨‹è¾ƒä¸ºè€—æ—¶ï¼Œå› ä¸ºå®ƒä¼šé‡æ–°ç¼–è¯‘åŸç”Ÿéƒ¨åˆ†ä»£ç ã€‚åœ¨ Web å¹³å°ä¸Šï¼Œå®ƒåŒæ—¶ä¼šé‡å¯ Dart å¼€å‘ç¼–è¯‘å™¨ã€‚å®Œå…¨é‡å¯å¹¶æ²¡æœ‰æ—¢å®šçš„å¿«æ·é”®ï¼Œä½ éœ€è¦æ‰‹åŠ¨åœæ­¢åé‡æ–°è¿è¡Œã€‚

**Flutter web ç›®å‰ä»…æ”¯æŒçƒ­é‡å¯ï¼Œä¸æ”¯æŒçƒ­é‡è½½ã€‚**

![Hot Reloading](https://flutter.cn/docs/assets/images/docs/development/tools/android-studio-run-controls.png)


**DevTools**

DevTools is a suite of performance and debugging tools for Dart and Flutter.
DevToolsæ˜¯Dartå’ŒFlutterçš„ä¸€å¥—æ€§èƒ½å’Œè°ƒè¯•å·¥å…·ã€‚

> [Flutter çš„å¯è§†åŒ–ç•Œé¢ã€ç»˜åˆ¶æ€§èƒ½è°ƒä¼˜ ğŸ”§ â€”â€” DevTools](https://juejin.cn/post/6897101906158714887)